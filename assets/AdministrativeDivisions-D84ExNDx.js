import{$t as e,At as t,B as n,Ft as r,Gt as i,I as a,Jt as o,Lt as s,M as c,Rt as l,Sn as u,Zt as ee,_n as te,bt as ne,en as d,gt as f,k as p,mn as re,mt as m,on as h,q as g,sn as ie,tn as ae,un as oe,ut as _,vn as v,wn as se}from"./css--_ydwRkb.js";import{$ as ce,C as y,E as le,H as b,I as ue,L as de,M as fe,P as x,Q as pe,S as me,V as S,W as C,Y as w,Z as T,_ as E,b as he,c as ge,d as D,f as O,ft as k,g as A,ht as j,k as M,l as _e,lt as ve,m as N,mt as ye,n as be,nt as P,o as F,p as I,pt as L,rt as xe,t as Se,u as R,ut as Ce,v as we,z}from"./index-DbH6QLM3.js";import{$t as Te,At as Ee,G as B,Gt as V,I as H,J as U,Jt as W,K as De,L as Oe,N as ke,Ot as G,P as Ae,Q as K,Tt as je,U as q,V as Me,W as Ne,Xt as Pe,Z as Fe,Zt as Ie,_t as Le,at as J,ct as Y,dt as X,et as Re,fn as ze,ft as Be,gn as Ve,gt as Z,hn as He,ht as Ue,it as We,ln as Ge,lt as Ke,mn as qe,mt as Je,nn as Ye,nt as Xe,ot as Ze,pn as Q,pt as Qe,q as $e,rn as et,rt as tt,sn as nt,tt as rt,ut as it,z as at}from"./Vector-CnXRF2fe.js";import{c as ot,d as st,f as ct,i as lt,o as ut,r as dt,s as ft,t as pt}from"./common-DQvEHECT.js";import{n as mt,r as ht,t as gt}from"./fold-BW4TY1R0.js";import{t as _t}from"./LineString-Ct3DIIpA.js";var $=void 0,vt={height:`0`,visibility:`hidden`,overflow:ct()?``:`hidden`,position:`absolute`,"z-index":`-1000`,top:`0`,right:`0`},yt=[`letter-spacing`,`line-height`,`padding-top`,`padding-bottom`,`font-family`,`font-weight`,`font-size`,`text-rendering`,`text-transform`,`width`,`text-indent`,`padding-left`,`padding-right`,`border-width`,`box-sizing`,`word-break`],bt=e=>{let t=Number.parseFloat(e);return Number.isNaN(t)?e:t};function xt(e){let t=window.getComputedStyle(e),n=t.getPropertyValue(`box-sizing`),r=Number.parseFloat(t.getPropertyValue(`padding-bottom`))+Number.parseFloat(t.getPropertyValue(`padding-top`)),i=Number.parseFloat(t.getPropertyValue(`border-bottom-width`))+Number.parseFloat(t.getPropertyValue(`border-top-width`));return{contextStyle:yt.map(e=>[e,t.getPropertyValue(e)]),paddingSize:r,borderSize:i,boxSizing:n}}function St(e,t=1,n){var r;$||($=document.createElement(`textarea`),(e.parentNode??document.body).appendChild($));let{paddingSize:i,borderSize:a,boxSizing:o,contextStyle:s}=xt(e);s.forEach(([e,t])=>$?.style.setProperty(e,t)),Object.entries(vt).forEach(([e,t])=>$?.style.setProperty(e,t,`important`)),$.value=e.value||e.placeholder||``;let c=$.scrollHeight,l={};o===`border-box`?c+=a:o===`content-box`&&(c-=i),$.value=``;let u=$.scrollHeight-i;if(re(t)){let e=u*t;o===`border-box`&&(e=e+i+a),c=Math.max(e,c),l.minHeight=`${e}px`}if(re(n)){let e=u*n;o===`border-box`&&(e=e+i+a),c=Math.min(e,c)}return l.height=`${c}px`,(r=$.parentNode)==null||r.removeChild($),$=void 0,l}var Ct=e({id:{type:String,default:void 0},size:ee,disabled:{type:Boolean,default:void 0},modelValue:{type:d([String,Number,Object]),default:``},modelModifiers:{type:d(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:d(String),default:`text`},resize:{type:String,values:[`none`,`both`,`horizontal`,`vertical`]},autosize:{type:d([Boolean,Object]),default:!1},autocomplete:{type:d(String),default:`off`},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:et,default:nt},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:[`inside`,`outside`],default:`inside`},suffixIcon:{type:et},prefixIcon:{type:et},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:d([Object,Array,String]),default:()=>st({})},autofocus:Boolean,rows:{type:Number,default:2},...Te([`ariaLabel`]),inputmode:{type:d(String),default:void 0},name:String}),wt={[Ve]:e=>k(e),input:e=>k(e),change:(e,t)=>k(e)&&(t instanceof Event||t===void 0),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},Tt=[`class`,`style`],Et=/^on[A-Z]/,Dt=(e={})=>{let{excludeListeners:t=!1,excludeKeys:n}=e,r=R(()=>(n?.value||[]).concat(Tt)),i=we();return i?R(()=>v(Object.entries(i.proxy?.$attrs).filter(([e])=>!r.value.includes(e)&&!(t&&Et.test(e))))):(ae(`use-attrs`,`getCurrentInstance() returned null. useAttrs() must be called at the top of a setup function`),R(()=>({})))},Ot=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute(`tabIndex`)!==null)return!0;if(e.tabIndex<0||e.hasAttribute(`disabled`)||e.getAttribute(`aria-disabled`)===`true`)return!1;switch(e.nodeName){case`A`:return!!e.href&&e.rel!==`ignore`;case`INPUT`:return!(e.type===`hidden`||e.type===`file`);case`BUTTON`:case`SELECT`:case`TEXTAREA`:return!0;default:return!1}};function kt(e,{disabled:t,beforeFocus:n,afterFocus:r,beforeBlur:i,afterBlur:a}={}){let{emit:o}=we(),s=T(),c=w(!1),l=e=>{let i=ve(n)?n(e):!1;P(t)||c.value||i||(c.value=!0,o(`focus`,e),r?.())},u=e=>{let n=ve(i)?i(e):!1;P(t)||e.relatedTarget&&s.value?.contains(e.relatedTarget)||n||(c.value=!1,o(`blur`,e),a?.())};return z([s,()=>P(t)],([e,t])=>{e&&(t?e.removeAttribute(`tabindex`):e.setAttribute(`tabindex`,`-1`))}),h(s,`focus`,l,!0),h(s,`blur`,u,!0),h(s,`click`,n=>{var r;P(t)||Ot(n.target)||s.value?.contains(document.activeElement)&&s.value!==document.activeElement||(r=e.value)==null||r.focus()},!0),{isFocused:c,wrapperRef:s,handleFocus:l,handleBlur:u}}var At=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);function jt({afterComposition:e,emit:t}){let n=w(!1),r=e=>{t?.(`compositionstart`,e),n.value=!0},i=e=>{t?.(`compositionupdate`,e);let r=e.target?.value;n.value=!At(r[r.length-1]||``)},a=r=>{t?.(`compositionend`,r),n.value&&(n.value=!1,y(()=>e(r)))};return{isComposing:n,handleComposition:e=>{e.type===`compositionend`?a(e):i(e)},handleCompositionStart:r,handleCompositionUpdate:i,handleCompositionEnd:a}}function Mt(e){let t;function n(){if(e.value==null)return;let{selectionStart:n,selectionEnd:r,value:i}=e.value;n==null||r==null||(t={selectionStart:n,selectionEnd:r,value:i,beforeTxt:i.slice(0,Math.max(0,n)),afterTxt:i.slice(Math.max(0,r))})}function r(){if(e.value==null||t==null)return;let{value:n}=e.value,{beforeTxt:r,afterTxt:i,selectionStart:a}=t;if(r==null||i==null||a==null)return;let o=n.length;if(n.endsWith(i))o=n.length-i.length;else if(n.startsWith(r))o=r.length;else{let e=r[a-1],t=n.indexOf(e,a-1);t!==-1&&(o=t+1)}e.value.setSelectionRange(o,o)}return[n,r]}var Nt=[`id`,`name`,`minlength`,`maxlength`,`type`,`disabled`,`readonly`,`autocomplete`,`tabindex`,`aria-label`,`placeholder`,`form`,`autofocus`,`role`,`inputmode`],Pt=[`id`,`name`,`minlength`,`maxlength`,`tabindex`,`disabled`,`readonly`,`autocomplete`,`aria-label`,`placeholder`,`form`,`autofocus`,`rows`,`role`],Ft=`ElInput`,It=i(o(E({name:Ft,inheritAttrs:!1,__name:`input`,props:Ct,emits:wt,setup(e,{expose:t,emit:n}){let r=e,i=n,a=ue(),o=Dt(),c=de(),ee=R(()=>[r.type===`textarea`?g.b():h.b(),h.m(re.value),h.is(`disabled`,m.value),h.is(`exceed`,De.value),{[h.b(`group`)]:c.prepend||c.append,[h.m(`prefix`)]:c.prefix||r.prefixIcon,[h.m(`suffix`)]:c.suffix||r.suffixIcon||r.clearable||r.showPassword,[h.bm(`suffix`,`password-clear`)]:V.value&&H.value,[h.b(`hidden`)]:r.type===`hidden`},a.class]),ne=R(()=>[h.e(`wrapper`),h.is(`focus`,k.value)]),{form:d,formItem:f}=Pe(),{inputId:p}=Ie(r,{formItemContext:f}),re=l(),m=s(),h=u(`input`),g=u(`textarea`),_=T(),v=T(),se=w(!1),b=w(!1),pe=w(),C=T(r.inputStyle),E=R(()=>_.value||v.value),{wrapperRef:he,isFocused:k,handleFocus:A,handleBlur:ve}=kt(E,{disabled:m,afterBlur(){var e;r.validateEvent&&((e=f?.validate)==null||e.call(f,`blur`).catch(e=>ae(e)))}}),be=R(()=>d?.statusIcon??!1),F=R(()=>f?.validateState||``),Se=R(()=>F.value&&Ye[F.value]),we=R(()=>b.value?ze:Ge),Te=R(()=>[a.style]),Ee=R(()=>[r.inputStyle,C.value,{resize:r.resize}]),B=R(()=>te(r.modelValue)?``:String(r.modelValue)),V=R(()=>r.clearable&&!m.value&&!r.readonly&&!!B.value&&(k.value||se.value)),H=R(()=>r.showPassword&&!m.value&&!!B.value),U=R(()=>r.showWordLimit&&!!r.maxlength&&(r.type===`text`||r.type===`textarea`)&&!m.value&&!r.readonly&&!r.showPassword),W=R(()=>B.value.length),De=R(()=>!!U.value&&W.value>Number(r.maxlength)),Oe=R(()=>!!c.suffix||!!r.suffixIcon||V.value||r.showPassword||U.value||!!F.value&&be.value),ke=R(()=>!!Object.keys(r.modelModifiers).length),[G,Ae]=Mt(_);ie(v,e=>{if(je(),!U.value||r.resize!==`both`&&r.resize!==`horizontal`)return;let{width:t}=e[0].contentRect;pe.value={right:`calc(100% - ${t+22-10}px)`}});let K=()=>{let{type:e,autosize:t}=r;if(!(!oe||e!==`textarea`||!v.value))if(t){let e=Ce(t)?t.minRows:void 0,n=Ce(t)?t.maxRows:void 0,r=St(v.value,e,n);C.value={overflowY:`hidden`,...r},y(()=>{v.value.offsetHeight,C.value=r})}else C.value={minHeight:St(v.value).minHeight}},je=(e=>{let t=!1;return()=>{t||!r.autosize||v.value?.offsetParent!==null&&(setTimeout(e),t=!0)}})(K),q=()=>{let e=E.value,t=r.formatter?r.formatter(B.value):B.value;!e||e.value===t||r.type===`file`||(e.value=t)},Me=e=>{let{trim:t,number:n}=r.modelModifiers;return t&&(e=e.trim()),n&&(e=`${bt(e)}`),r.formatter&&r.parser&&(e=r.parser(e)),e},Ne=async e=>{if(Le.value)return;let{lazy:t}=r.modelModifiers,{value:n}=e.target;if(t){i(He,n);return}if(n=Me(n),String(n)===B.value){r.formatter&&q();return}G(),i(Ve,n),i(He,n),await y(),(r.formatter&&r.parser||!ke.value)&&q(),Ae()},Fe=async e=>{let{value:t}=e.target;t=Me(t),r.modelModifiers.lazy&&i(Ve,t),i(qe,t,e),await y(),q()},{isComposing:Le,handleCompositionStart:J,handleCompositionUpdate:Y,handleCompositionEnd:X}=jt({emit:i,afterComposition:Ne}),Re=()=>{b.value=!b.value},Be=()=>E.value?.focus(),Z=()=>E.value?.blur(),Ue=e=>{se.value=!1,i(`mouseleave`,e)},We=e=>{se.value=!0,i(`mouseenter`,e)},Ke=e=>{i(`keydown`,e)},Je=()=>{var e;(e=E.value)==null||e.select()},Xe=()=>{i(Ve,``),i(qe,``),i(`clear`),i(He,``)};return z(()=>r.modelValue,()=>{var e;y(()=>K()),r.validateEvent&&((e=f?.validate)==null||e.call(f,`change`).catch(e=>ae(e)))}),z(B,e=>{if(!E.value)return;let{trim:t,number:n}=r.modelModifiers,i=E.value.value,a=(n||r.type===`number`)&&!/^0\d/.test(i)?`${bt(i)}`:i;a!==e&&(document.activeElement===E.value&&E.value.type!==`range`&&t&&a.trim()===e||q())}),z(()=>r.type,async()=>{await y(),q(),K()}),le(()=>{!r.formatter&&r.parser&&ae(Ft,`If you set the parser, you also need to set the formatter.`),q(),y(K)}),t({input:_,textarea:v,ref:E,textareaStyle:Ee,autosize:ce(r,`autosize`),isComposing:Le,focus:Be,blur:Z,select:Je,clear:Xe,resizeTextarea:K}),(e,t)=>(M(),N(`div`,{class:L([ee.value,{[P(h).bm(`group`,`append`)]:e.$slots.append,[P(h).bm(`group`,`prepend`)]:e.$slots.prepend}]),style:ye(Te.value),onMouseenter:We,onMouseleave:Ue},[I(` input `),e.type===`textarea`?(M(),N(_e,{key:1},[I(` textarea `),D(`textarea`,me({id:P(p),ref_key:`textarea`,ref:v,class:[P(g).e(`inner`),P(h).is(`focus`,P(k))]},P(o),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:P(m),readonly:e.readonly,autocomplete:e.autocomplete,style:Ee.value,"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t[3]||=(...e)=>P(J)&&P(J)(...e),onCompositionupdate:t[4]||=(...e)=>P(Y)&&P(Y)(...e),onCompositionend:t[5]||=(...e)=>P(X)&&P(X)(...e),onInput:Ne,onFocus:t[6]||=(...e)=>P(A)&&P(A)(...e),onBlur:t[7]||=(...e)=>P(ve)&&P(ve)(...e),onChange:Fe,onKeydown:Ke}),null,16,Pt),U.value?(M(),N(`span`,{key:0,style:ye(pe.value),class:L([P(h).e(`count`),P(h).is(`outside`,e.wordLimitPosition===`outside`)])},j(W.value)+` / `+j(e.maxlength),7)):I(`v-if`,!0)],64)):(M(),N(_e,{key:0},[I(` prepend slot `),e.$slots.prepend?(M(),N(`div`,{key:0,class:L(P(h).be(`group`,`prepend`))},[fe(e.$slots,`prepend`)],2)):I(`v-if`,!0),D(`div`,{ref_key:`wrapperRef`,ref:he,class:L(ne.value)},[I(` prefix slot `),e.$slots.prefix||e.prefixIcon?(M(),N(`span`,{key:0,class:L(P(h).e(`prefix`))},[D(`span`,{class:L(P(h).e(`prefix-inner`))},[fe(e.$slots,`prefix`),e.prefixIcon?(M(),O(P(Q),{key:0,class:L(P(h).e(`icon`))},{default:S(()=>[(M(),O(x(e.prefixIcon)))]),_:1},8,[`class`])):I(`v-if`,!0)],2)],2)):I(`v-if`,!0),D(`input`,me({id:P(p),ref_key:`input`,ref:_,class:P(h).e(`inner`)},P(o),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?b.value?`text`:`password`:e.type,disabled:P(m),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:t[0]||=(...e)=>P(J)&&P(J)(...e),onCompositionupdate:t[1]||=(...e)=>P(Y)&&P(Y)(...e),onCompositionend:t[2]||=(...e)=>P(X)&&P(X)(...e),onInput:Ne,onChange:Fe,onKeydown:Ke}),null,16,Nt),I(` suffix slot `),Oe.value?(M(),N(`span`,{key:1,class:L(P(h).e(`suffix`))},[D(`span`,{class:L(P(h).e(`suffix-inner`))},[!V.value||!H.value||!U.value?(M(),N(_e,{key:0},[fe(e.$slots,`suffix`),e.suffixIcon?(M(),O(P(Q),{key:0,class:L(P(h).e(`icon`))},{default:S(()=>[(M(),O(x(e.suffixIcon)))]),_:1},8,[`class`])):I(`v-if`,!0)],64)):I(`v-if`,!0),V.value?(M(),O(P(Q),{key:1,class:L([P(h).e(`icon`),P(h).e(`clear`)]),onMousedown:ge(P(xe),[`prevent`]),onClick:Xe},{default:S(()=>[(M(),O(x(e.clearIcon)))]),_:1},8,[`class`,`onMousedown`])):I(`v-if`,!0),H.value?(M(),O(P(Q),{key:2,class:L([P(h).e(`icon`),P(h).e(`password`)]),onClick:Re,onMousedown:ge(P(xe),[`prevent`]),onMouseup:ge(P(xe),[`prevent`])},{default:S(()=>[(M(),O(x(we.value)))]),_:1},8,[`class`,`onMousedown`,`onMouseup`])):I(`v-if`,!0),U.value?(M(),N(`span`,{key:3,class:L([P(h).e(`count`),P(h).is(`outside`,e.wordLimitPosition===`outside`)])},[D(`span`,{class:L(P(h).e(`count-inner`))},j(W.value)+` / `+j(e.maxlength),3)],2)):I(`v-if`,!0),F.value&&Se.value&&be.value?(M(),O(P(Q),{key:4,class:L([P(h).e(`icon`),P(h).e(`validateIcon`),P(h).is(`loading`,F.value===`validating`)])},{default:S(()=>[(M(),O(x(Se.value)))]),_:1},8,[`class`])):I(`v-if`,!0)],2)],2)):I(`v-if`,!0)],2),I(` append slot `),e.$slots.append?(M(),N(`div`,{key:1,class:L(P(h).be(`group`,`append`))},[fe(e.$slots,`append`)],2)):I(`v-if`,!0)],64))],38))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue`]])),Lt=class e extends Le{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(f),this.changeEventsKeys_.length=0}listenGeometriesChange_(){let e=this.geometries_;for(let t=0,n=e.length;t<n;++t)this.changeEventsKeys_.push(m(e[t],r.CHANGE,this.changed,this))}clone(){let t=new e(Rt(this.geometries_));return t.applyProperties(this),t}closestPointXY(e,t,n,r){if(r<p(this.getExtent(),e,t))return r;let i=this.geometries_;for(let a=0,o=i.length;a<o;++a)r=i[a].closestPointXY(e,t,n,r);return r}containsXY(e,t){let n=this.geometries_;for(let r=0,i=n.length;r<i;++r)if(n[r].containsXY(e,t))return!0;return!1}computeExtent(e){a(e);let t=this.geometries_;for(let r=0,i=t.length;r<i;++r)n(e,t[r].getExtent());return e}getGeometries(){return Rt(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[],t=this.geometries_;for(let n=0,r=t.length;n<r;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;let n=[],r=this.geometries_,i=!1;for(let e=0,a=r.length;e<a;++e){let a=r[e],o=a.getSimplifiedGeometry(t);n.push(o),o!==a&&(i=!0)}return i?new e(n):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return`GeometryCollection`}intersectsExtent(e){let t=this.geometries_;for(let n=0,r=t.length;n<r;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){let n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].rotate(e,t);this.changed()}scale(e,t,n){n||=g(this.getExtent());let r=this.geometries_;for(let i=0,a=r.length;i<a;++i)r[i].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(Rt(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){let t=this.geometries_;for(let n=0,r=t.length;n<r;++n)t[n].applyTransform(e);this.changed()}translate(e,t){let n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}};function Rt(e){return e.map(e=>e.clone())}var zt=Lt,Bt=class e extends Ue{constructor(e,n,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(n!==void 0&&r)this.setFlatCoordinates(n,e),this.ends_=r;else{let n=e,r=[],i=[];for(let e=0,a=n.length;e<a;++e){let a=n[e];t(r,a.getFlatCoordinates()),i.push(r.length)}let a=n.length===0?this.getLayout():n[0].getLayout();this.setFlatCoordinates(a,r),this.ends_=i}}appendLineString(e){t(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(e,t,n,r){return r<p(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(De(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$e(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,r))}getCoordinateAtM(e,t,n){return this.layout!=`XYM`&&this.layout!=`XYZM`||this.flatCoordinates.length===0?null:(t=t===void 0?!1:t,n=n===void 0?!1:n,Y(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return Ne(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new _t(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){let e=this.flatCoordinates,t=this.ends_,n=this.layout,r=[],i=0;for(let a=0,o=t.length;a<o;++a){let o=t[a],s=new _t(e.slice(i,o),n);r.push(s),i=o}return r}getLength(){let e=this.ends_,t=0,n=0;for(let r=0,i=e.length;r<i;++r)n+=Oe(this.flatCoordinates,t,e[r],this.stride),t=e[r];return n}getFlatMidpoints(){let e=[],n=this.flatCoordinates,r=0,i=this.ends_,a=this.stride;for(let o=0,s=i.length;o<s;++o){let s=i[o];t(e,Ze(n,r,s,a,.5)),r=s}return e}getSimplifiedGeometryInternal(t){let n=[],r=[];return n.length=Re(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,r),new e(n,`XY`,r)}getType(){return`MultiLineString`}intersectsExtent(e){return at(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||=[];let n=Qe(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}},Vt=class e extends Ue{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){t(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){let t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(e,t,n,r){if(r<p(this.getExtent(),e,t))return r;let i=this.flatCoordinates,a=this.stride;for(let o=0,s=i.length;o<s;o+=a){let s=V(e,t,i[o],i[o+1]);if(s<r){r=s;for(let e=0;e<a;++e)n[e]=i[o+e];n.length=a}}return r}getCoordinates(){return q(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){let t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new H(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){let e=this.flatCoordinates,t=this.layout,n=this.stride,r=[];for(let i=0,a=e.length;i<a;i+=n){let a=new H(e.slice(i,i+n),t);r.push(a)}return r}getType(){return`MultiPoint`}intersectsExtent(e){let t=this.flatCoordinates,n=this.stride;for(let r=0,i=t.length;r<i;r+=n){let n=t[r],i=t[r+1];if(c(e,n,i))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||=[],this.flatCoordinates.length=Be(this.flatCoordinates,0,e,this.stride),this.changed()}},Ht=class e extends Ue{constructor(e,n,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){let i=e,a=[],o=[];for(let e=0,n=i.length;e<n;++e){let n=i[e],r=a.length,s=n.getEnds();for(let e=0,t=s.length;e<t;++e)s[e]+=r;t(a,n.getFlatCoordinates()),o.push(s)}n=i.length===0?this.getLayout():i[0].getLayout(),e=a,r=o}n!==void 0&&r?(this.setFlatCoordinates(n,e),this.endss_=r):this.setCoordinates(e,n)}appendPolygon(e){let n;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),n=e.getEnds().slice(),this.endss_.push();else{let r=this.flatCoordinates.length;t(this.flatCoordinates,e.getFlatCoordinates()),n=e.getEnds().slice();for(let e=0,t=n.length;e<t;++e)n[e]+=r}this.endss_.push(n),this.changed()}clone(){let t=this.endss_.length,n=Array(t);for(let e=0;e<t;++e)n[e]=this.endss_[e].slice();let r=new e(this.flatCoordinates.slice(),this.layout,n);return r.applyProperties(this),r}closestPointXY(e,t,n,r){return r<p(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Fe(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),U(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,r))}containsXY(e,t){return it(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return K(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e===void 0?t=this.flatCoordinates:(t=this.getOrientedFlatCoordinates().slice(),J(t,0,this.endss_,this.stride,e)),B(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){let e=X(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Ke(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Vt(this.getFlatInteriorPoints().slice(),`XYM`)}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let e=this.flatCoordinates;tt(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=J(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let n=[],r=[];return n.length=rt(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,r),new e(n,`XY`,r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{let n=this.endss_[e-1];t=n[n.length-1]}let n=this.endss_[e].slice(),r=n[n.length-1];if(t!==0)for(let e=0,r=n.length;e<r;++e)n[e]-=t;return new Ae(this.flatCoordinates.slice(t,r),this.layout,n)}getPolygons(){let e=this.layout,t=this.flatCoordinates,n=this.endss_,r=[],i=0;for(let a=0,o=n.length;a<o;++a){let o=n[a].slice(),s=o[o.length-1];if(i!==0)for(let e=0,t=o.length;e<t;++e)o[e]-=i;let c=new Ae(t.slice(i,s),e,o);r.push(c),i=s}return r}getType(){return`MultiPolygon`}intersectsExtent(e){return Me(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||=[];let n=Je(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{let e=n[n.length-1];this.flatCoordinates.length=e.length===0?0:e[e.length-1]}this.changed()}},Ut=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=W,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?G(t.dataProjection):this.readProjection(e);t.extent&&n&&n.getUnits()===`tile-pixels`&&(n=G(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return _()}readFeature(e,t){return _()}readFeatures(e,t){return _()}readGeometry(e,t){return _()}readProjection(e){return _()}writeFeature(e,t){return _()}writeFeatures(e,t){return _()}writeGeometry(e,t){return _()}};function Wt(e,t,n){let r=n?G(n.featureProjection):null,i=n?G(n.dataProjection):null,a=e;if(r&&i&&!je(r,i)){t&&(a=e.clone());let n=t?r:i,o=t?i:r;n.getUnits()===`tile-pixels`?a.transform(n,o):a.applyTransform(Ee(n,o))}if(t&&n&&n.decimals!==void 0){let t=10**n.decimals;a===e&&(a=e.clone()),a.applyTransform(function(e){for(let n=0,r=e.length;n<r;++n)e[n]=Math.round(e[n]*t)/t;return e})}return a}var Gt={Point:H,LineString:_t,Polygon:Ae,MultiPoint:Vt,MultiLineString:Bt,MultiPolygon:Ht};function Kt(e,t,n){return Array.isArray(t[0])?(tt(e,0,t,n)||(e=e.slice(),J(e,0,t,n)),e):(Xe(e,0,t,n)||(e=e.slice(),We(e,0,t,n)),e)}function qt(e,t){let n=e.geometry;if(!n)return[];if(Array.isArray(n))return n.map(t=>qt({...e,geometry:t})).flat();let r=n.type===`MultiPolygon`?`Polygon`:n.type;if(r===`GeometryCollection`||r===`Circle`)throw Error(`Unsupported geometry type: `+r);let i=n.layout.length;return Wt(new ke(r,r===`Polygon`?Kt(n.flatCoordinates,n.ends,i):n.flatCoordinates,n.ends?.flat(),i,e.properties||{},e.id).enableSimplifyTransformed(),!1,t)}function Jt(e,t){if(!e)return null;if(Array.isArray(e))return new zt(e.map(e=>Jt(e,t)));let n=Gt[e.type];return Wt(new n(e.flatCoordinates,e.layout||`XY`,e.ends),!1,t)}var Yt=class extends Ut{constructor(){super()}getType(){return`json`}readFeature(e,t){return this.readFeatureFromObject(Xt(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Xt(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return _()}readFeaturesFromObject(e,t){return _()}readGeometry(e,t){return this.readGeometryFromObject(Xt(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return _()}readProjection(e){return this.readProjectionFromObject(Xt(e))}readProjectionFromObject(e){return _()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return _()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return _()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return _()}};function Xt(e){return typeof e==`string`?JSON.parse(e)||null:e===null?null:e}var Zt=Yt,Qt=class extends Zt{constructor(e){e||={},super(),this.dataProjection=G(e.dataProjection?e.dataProjection:`EPSG:4326`),e.featureProjection&&(this.defaultFeatureProjection=G(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=[`application/geo+json`,`application/vnd.geo+json`]}readFeatureFromObject(e,t){let n=null;n=e.type===`Feature`?e:{type:`Feature`,geometry:e,properties:null};let r=$t(n.geometry,t);if(this.featureClass===ke)return qt({geometry:r,id:n.id,properties:n.properties},t);let i=new W;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&i.setGeometryName(n.geometry_name),i.setGeometry(Jt(r,t)),`id`in n&&i.setId(n.id),n.properties&&i.setProperties(n.properties,!0),i}readFeaturesFromObject(e,t){let n=e,r=null;if(n.type===`FeatureCollection`){let n=e;r=[];let i=n.features;for(let e=0,n=i.length;e<n;++e){let n=this.readFeatureFromObject(i[e],t);n&&r.push(n)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return en(e,t)}readProjectionFromObject(e){let t=e.crs,n;if(t)if(t.type==`name`)n=G(t.properties.name);else if(t.type===`EPSG`)n=G(`EPSG:`+t.properties.code);else throw Error(`Unknown SRS type`);else n=this.dataProjection;return n}writeFeatureObject(e,t){t=this.adaptOptions(t);let n={type:`Feature`,geometry:null,properties:null},r=e.getId();if(r!==void 0&&(n.id=r),!e.hasProperties())return n;let i=e.getProperties(),a=e.getGeometry();return a&&(n.geometry=ln(a,t),delete i[e.getGeometryName()]),ne(i)||(n.properties=i),n}writeFeaturesObject(e,t){t=this.adaptOptions(t);let n=[];for(let r=0,i=e.length;r<i;++r)n.push(this.writeFeatureObject(e[r],t));return{type:`FeatureCollection`,features:n}}writeGeometryObject(e,t){return ln(e,this.adaptOptions(t))}};function $t(e,t){if(!e)return null;let n;switch(e.type){case`Point`:n=nn(e);break;case`LineString`:n=rn(e);break;case`Polygon`:n=cn(e);break;case`MultiPoint`:n=on(e);break;case`MultiLineString`:n=an(e);break;case`MultiPolygon`:n=sn(e);break;case`GeometryCollection`:n=tn(e);break;default:throw Error(`Unsupported GeoJSON type: `+e.type)}return n}function en(e,t){return Jt($t(e,t),t)}function tn(e,t){return e.geometries.map(function(e){return $t(e,t)})}function nn(e){let t=e.coordinates;return{type:`Point`,flatCoordinates:t,layout:Z(t.length)}}function rn(e){let t=e.coordinates,n=t.flat();return{type:`LineString`,flatCoordinates:n,ends:[n.length],layout:Z(t[0]?.length||2)}}function an(e){let t=e.coordinates,n=t[0]?.[0]?.length||2,r=[];return{type:`MultiLineString`,flatCoordinates:r,ends:Qe(r,0,t,n),layout:Z(n)}}function on(e){let t=e.coordinates;return{type:`MultiPoint`,flatCoordinates:t.flat(),layout:Z(t[0]?.length||2)}}function sn(e){let t=e.coordinates,n=[],r=t[0]?.[0]?.[0].length||2;return{type:`MultiPolygon`,flatCoordinates:n,ends:Je(n,0,t,r),layout:Z(r)}}function cn(e){let t=e.coordinates,n=[],r=t[0]?.[0]?.length;return{type:`Polygon`,flatCoordinates:n,ends:Qe(n,0,t,r),layout:Z(r)}}function ln(e,t){e=Wt(e,!0,t);let n=e.getType(),r;switch(n){case`Point`:r=hn(e,t);break;case`LineString`:r=dn(e,t);break;case`Polygon`:r=gn(e,t);break;case`MultiPoint`:r=pn(e,t);break;case`MultiLineString`:r=fn(e,t);break;case`MultiPolygon`:r=mn(e,t);break;case`GeometryCollection`:r=un(e,t);break;case`Circle`:r={type:`GeometryCollection`,geometries:[]};break;default:throw Error(`Unsupported geometry type: `+n)}return r}function un(e,t){return t=Object.assign({},t),delete t.featureProjection,{type:`GeometryCollection`,geometries:e.getGeometriesArray().map(function(e){return ln(e,t)})}}function dn(e,t){return{type:`LineString`,coordinates:e.getCoordinates()}}function fn(e,t){return{type:`MultiLineString`,coordinates:e.getCoordinates()}}function pn(e,t){return{type:`MultiPoint`,coordinates:e.getCoordinates()}}function mn(e,t){let n;return t&&(n=t.rightHanded),{type:`MultiPolygon`,coordinates:e.getCoordinates(n)}}function hn(e,t){return{type:`Point`,coordinates:e.getCoordinates()}}function gn(e,t){let n;return t&&(n=t.rightHanded),{type:`Polygon`,coordinates:e.getCoordinates(n)}}var _n=Qt;const vn=(e,t)=>{typeof t==`object`&&(t=JSON.stringify(t)),window.sessionStorage.setItem(e,t)},yn=e=>{let t=window.sessionStorage.getItem(e);try{return JSON.parse(t)}catch{return t}};var bn={class:`projection-zones`},xn={class:`header`},Sn={class:`tree`},Cn={class:`custom-tree-node`},wn=[`title`],Tn=Se({__name:`index`,emits:[`popup`],setup(e,{emit:t}){let n=he(`state`),r=he(`isMapCreated`),i=w(!1),a=w([]),o=yn(`cgcs2000`);o?a.value=o:lt().then(e=>{a.value=e[0].children,vn(`cgcs2000`,e[0].children)});let s=null,c=null,l=[],u=[],ee=[],te=new _n,ne=[{url:`/public/data/中国_省.geojson`,type:`province`},{url:`/public/data/中国_市.geojson`,type:`city`},{url:`/public/data/中国_县.geojson`,type:`county`}],d=w(``),f=w();z(d,e=>{f.value?.filter(e)}),z(r,e=>{e&&(s=n.map,re())});let p=(e,t)=>e?t.name.includes(e):!0;function re(){c=pt(s,void 0,`administrative-divisions`,100),Promise.allSettled(ne.map(e=>ut(e.url).then(t=>({type:e.type,features:te.readFeatures(t)})))).then(e=>{e.forEach(e=>{if(e.status===`fulfilled`){let{type:t,features:n}=e.value;t===`province`?l=n:t===`city`?u=n:t===`county`&&(ee=n)}else console.error(`[${e.reason.type}] 数据加载失败`,e.reason)})})}async function m(e){let{gb:t}=pe(e);String(t).endsWith(`0000`)?h(l,t):String(t).endsWith(`00`)||String(t).endsWith(`000`)?h(u,t):h(ee,t)}function h(e,t){let n=e.find(e=>e.getProperties().gb===t);if(n instanceof W){let{name:e}=n.getProperties();c.getFeatures().length>0&&c.clear(),n.setStyle(dt(`rgba(0, 0, 255, 0.2)`,`rgba(0, 0, 255)`,1.25,e)),c.addFeature(n),s.getView().fit(n.getGeometry(),{duration:300,padding:[100,440,100,550]})}}function g(){i.value=!i.value}return(e,t)=>{let n=gt,r=mt,o=ht,s=It,c=ft,l=ot;return M(),N(_e,null,[A(be,{name:`el-fade-in-linear`},{default:S(()=>[b(D(`div`,{class:`projection-zones-fold`,onClick:g},[A(n)],512),[[F,P(i)]])]),_:1}),A(l,null,{default:S(()=>[b(D(`div`,bn,[D(`div`,xn,[t[1]||=D(`div`,{class:`title`},`行政区划`,-1),D(`div`,{class:`fold`,onClick:g},[A(r)])]),A(o,{style:{margin:`10px 0`}}),A(s,{modelValue:P(d),"onUpdate:modelValue":t[0]||=e=>C(d)?d.value=e:null,style:{margin:`6px 0 10px`},placeholder:`请输入关键字`,clearable:``},null,8,[`modelValue`]),D(`div`,Sn,[A(c,{ref_key:`treeRef`,ref:f,data:P(a),"node-key":`gb`,props:{children:`children`,label:`name`},"default-expanded-keys":[],"filter-node-method":p,onNodeClick:m,"highlight-current":``,"empty-text":`暂无数据`,"expand-on-click-node":!1},{default:S(({node:e,data:t})=>[D(`span`,Cn,[D(`span`,{title:e.label},j(e.label),9,wn)])]),_:1},8,[`data`])])],512),[[F,!P(i)]])]),_:1})],64)}}},[[`__scopeId`,`data-v-3364e86f`]]);export{Tn as t};