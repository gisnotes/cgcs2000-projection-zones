import{q as e}from"./css-BHVB5au5.js";import{A as t,S as n,X as r,Y as i,g as a,k as o,m as s,nt as c,t as l}from"./index-CjiIxbIK.js";import"./Vector-BZm6HTC0.js";import{t as u}from"./ProjectionZones-zw4HnIAT.js";import{a as d,n as f}from"./common-D6ov2Z9b.js";import{t as p}from"./AdministrativeDivisions-DNopVk62.js";import"./vnode-BOR-NoKs.js";import{t as m}from"./OlPopup-DYEr6p8J.js";import"./fold-Su9KRnlM.js";import{t as h}from"./TdtMap-jgzagaZA.js";import"./LineString-BsO4Kl8u.js";import"./MapEventType-V8bC502L.js";import"./ZonesRender-Dhn2qOZJ.js";var g={class:`wrap`},_=l({__name:`OneMap`,setup(l){let _=i(``),v=i([]),y=i([0,-10]),b=i([{key:`label`,val:`投影名称`,unit:null},{key:`code`,val:`EPSG`,unit:null},{key:`bounds`,val:`投影范围`,unit:null}]),x=i({}),S=i(null),C=null,w=i(!1),T=r({map:null});t(`state`,T),t(`isMapCreated`,w);function E(e){T.map=e,w.value=!0,C=d(e,`highlight`).getSource()}function D(e){let t=e.coordinate,n=T.map.forEachFeatureAtPixel(e.pixel,e=>e);if(n){if(t){f(C);let e=n.clone();e.setStyle(void 0),C.addFeature(e)}k(n.getProperties(),t)}}function O(e){k(e)}function k(t,n){Object.keys(t).includes(`bounds`)&&(x.value=t,_.value=t.label,v.value=n||e(t.bounds))}function A(){f(C)}function j(){S.value?.close()}return(e,t)=>{let r=h,i=u,l=p,d=m;return o(),s(`div`,g,[a(r,{onMapCreated:E,onMapClick:D}),a(i,n(e.$attrs,{onPopup:O,onClosePopup:j}),null,16),a(l),a(d,{ref_key:`popup`,ref:S,title:c(_),position:c(v),offset:c(y),propeties:c(b),popupInfo:c(x),onClose:A},null,8,[`title`,`position`,`offset`,`propeties`,`popupInfo`])])}}},[[`__scopeId`,`data-v-0ede85c0`]]);export{_ as default};