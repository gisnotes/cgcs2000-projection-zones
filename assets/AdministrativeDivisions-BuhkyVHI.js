import{$t as e,At as t,B as n,Ft as r,Gt as i,I as a,Jt as o,Lt as s,M as c,Rt as l,Sn as u,Zt as ee,_n as te,bt as ne,en as d,gt as f,k as p,mn as re,mt as m,on as h,q as g,sn as ie,tn as ae,un as oe,ut as _,vn as v,wn as se}from"./css-BZRfdAi9.js";import{$ as ce,C as y,E as le,H as b,I as ue,L as de,M as x,P as S,Q as fe,S as pe,V as C,W as w,Y as T,Z as me,_ as E,b as he,c as ge,d as D,f as O,ft as k,g as A,ht as j,k as M,l as _e,lt as ve,m as N,mt as ye,n as be,nt as P,o as F,p as I,pt as L,rt as xe,t as Se,u as R,ut as Ce,v as we,z}from"./index-Bl49c2Vp.js";import{d as Te,i as Ee,o as B,r as V,s as De,t as H,u as Oe}from"./common-eeaZGod_.js";import{$t as ke,At as Ae,G as je,Gt as Me,I as Ne,J as U,Jt as Pe,K as W,L as Fe,N as G,Ot as K,P as q,Q as J,Tt as Y,U as X,V as Ie,W as Le,Xt as Re,Z as ze,Zt as Be,_t as Ve,at as He,ct as Ue,dt as We,et as Ge,fn as Ke,ft as qe,gn as Je,gt as Z,hn as Ye,ht as Xe,it as Ze,ln as Qe,lt as $e,mn as et,mt as tt,nn as nt,nt as rt,ot as it,pn as Q,pt as at,q as ot,rn as st,rt as ct,sn as lt,tt as ut,ut as dt,z as ft}from"./Vector-Cugooyzi.js";import{n as pt,r as mt,t as ht}from"./fold-Dte2VpS1.js";import{t as gt}from"./LineString-DCHrLcPj.js";var $=void 0,_t={height:`0`,visibility:`hidden`,overflow:Te()?``:`hidden`,position:`absolute`,"z-index":`-1000`,top:`0`,right:`0`},vt=[`letter-spacing`,`line-height`,`padding-top`,`padding-bottom`,`font-family`,`font-weight`,`font-size`,`text-rendering`,`text-transform`,`width`,`text-indent`,`padding-left`,`padding-right`,`border-width`,`box-sizing`,`word-break`],yt=e=>{let t=Number.parseFloat(e);return Number.isNaN(t)?e:t};function bt(e){let t=window.getComputedStyle(e),n=t.getPropertyValue(`box-sizing`),r=Number.parseFloat(t.getPropertyValue(`padding-bottom`))+Number.parseFloat(t.getPropertyValue(`padding-top`)),i=Number.parseFloat(t.getPropertyValue(`border-bottom-width`))+Number.parseFloat(t.getPropertyValue(`border-top-width`));return{contextStyle:vt.map(e=>[e,t.getPropertyValue(e)]),paddingSize:r,borderSize:i,boxSizing:n}}function xt(e,t=1,n){var r;$||($=document.createElement(`textarea`),(e.parentNode??document.body).appendChild($));let{paddingSize:i,borderSize:a,boxSizing:o,contextStyle:s}=bt(e);s.forEach(([e,t])=>$?.style.setProperty(e,t)),Object.entries(_t).forEach(([e,t])=>$?.style.setProperty(e,t,`important`)),$.value=e.value||e.placeholder||``;let c=$.scrollHeight,l={};o===`border-box`?c+=a:o===`content-box`&&(c-=i),$.value=``;let u=$.scrollHeight-i;if(re(t)){let e=u*t;o===`border-box`&&(e=e+i+a),c=Math.max(e,c),l.minHeight=`${e}px`}if(re(n)){let e=u*n;o===`border-box`&&(e=e+i+a),c=Math.min(e,c)}return l.height=`${c}px`,(r=$.parentNode)==null||r.removeChild($),$=void 0,l}var St=e({id:{type:String,default:void 0},size:ee,disabled:{type:Boolean,default:void 0},modelValue:{type:d([String,Number,Object]),default:``},modelModifiers:{type:d(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:d(String),default:`text`},resize:{type:String,values:[`none`,`both`,`horizontal`,`vertical`]},autosize:{type:d([Boolean,Object]),default:!1},autocomplete:{type:d(String),default:`off`},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:st,default:lt},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:[`inside`,`outside`],default:`inside`},suffixIcon:{type:st},prefixIcon:{type:st},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:d([Object,Array,String]),default:()=>Oe({})},autofocus:Boolean,rows:{type:Number,default:2},...ke([`ariaLabel`]),inputmode:{type:d(String),default:void 0},name:String}),Ct={[Je]:e=>k(e),input:e=>k(e),change:(e,t)=>k(e)&&(t instanceof Event||t===void 0),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},wt=[`class`,`style`],Tt=/^on[A-Z]/,Et=(e={})=>{let{excludeListeners:t=!1,excludeKeys:n}=e,r=R(()=>(n?.value||[]).concat(wt)),i=we();return i?R(()=>v(Object.entries(i.proxy?.$attrs).filter(([e])=>!r.value.includes(e)&&!(t&&Tt.test(e))))):(ae(`use-attrs`,`getCurrentInstance() returned null. useAttrs() must be called at the top of a setup function`),R(()=>({})))},Dt=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute(`tabIndex`)!==null)return!0;if(e.tabIndex<0||e.hasAttribute(`disabled`)||e.getAttribute(`aria-disabled`)===`true`)return!1;switch(e.nodeName){case`A`:return!!e.href&&e.rel!==`ignore`;case`INPUT`:return!(e.type===`hidden`||e.type===`file`);case`BUTTON`:case`SELECT`:case`TEXTAREA`:return!0;default:return!1}};function Ot(e,{disabled:t,beforeFocus:n,afterFocus:r,beforeBlur:i,afterBlur:a}={}){let{emit:o}=we(),s=me(),c=T(!1),l=e=>{let i=ve(n)?n(e):!1;P(t)||c.value||i||(c.value=!0,o(`focus`,e),r?.())},u=e=>{let n=ve(i)?i(e):!1;P(t)||e.relatedTarget&&s.value?.contains(e.relatedTarget)||n||(c.value=!1,o(`blur`,e),a?.())};return z([s,()=>P(t)],([e,t])=>{e&&(t?e.removeAttribute(`tabindex`):e.setAttribute(`tabindex`,`-1`))}),h(s,`focus`,l,!0),h(s,`blur`,u,!0),h(s,`click`,n=>{var r;P(t)||Dt(n.target)||s.value?.contains(document.activeElement)&&s.value!==document.activeElement||(r=e.value)==null||r.focus()},!0),{isFocused:c,wrapperRef:s,handleFocus:l,handleBlur:u}}var kt=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);function At({afterComposition:e,emit:t}){let n=T(!1),r=e=>{t?.(`compositionstart`,e),n.value=!0},i=e=>{t?.(`compositionupdate`,e);let r=e.target?.value;n.value=!kt(r[r.length-1]||``)},a=r=>{t?.(`compositionend`,r),n.value&&(n.value=!1,y(()=>e(r)))};return{isComposing:n,handleComposition:e=>{e.type===`compositionend`?a(e):i(e)},handleCompositionStart:r,handleCompositionUpdate:i,handleCompositionEnd:a}}function jt(e){let t;function n(){if(e.value==null)return;let{selectionStart:n,selectionEnd:r,value:i}=e.value;n==null||r==null||(t={selectionStart:n,selectionEnd:r,value:i,beforeTxt:i.slice(0,Math.max(0,n)),afterTxt:i.slice(Math.max(0,r))})}function r(){if(e.value==null||t==null)return;let{value:n}=e.value,{beforeTxt:r,afterTxt:i,selectionStart:a}=t;if(r==null||i==null||a==null)return;let o=n.length;if(n.endsWith(i))o=n.length-i.length;else if(n.startsWith(r))o=r.length;else{let e=r[a-1],t=n.indexOf(e,a-1);t!==-1&&(o=t+1)}e.value.setSelectionRange(o,o)}return[n,r]}var Mt=[`id`,`name`,`minlength`,`maxlength`,`type`,`disabled`,`readonly`,`autocomplete`,`tabindex`,`aria-label`,`placeholder`,`form`,`autofocus`,`role`,`inputmode`],Nt=[`id`,`name`,`minlength`,`maxlength`,`tabindex`,`disabled`,`readonly`,`autocomplete`,`aria-label`,`placeholder`,`form`,`autofocus`,`rows`,`role`],Pt=`ElInput`,Ft=i(o(E({name:Pt,inheritAttrs:!1,__name:`input`,props:St,emits:Ct,setup(e,{expose:t,emit:n}){let r=e,i=n,a=ue(),o=Et(),c=de(),ee=R(()=>[r.type===`textarea`?g.b():h.b(),h.m(re.value),h.is(`disabled`,m.value),h.is(`exceed`,ke.value),{[h.b(`group`)]:c.prepend||c.append,[h.m(`prefix`)]:c.prefix||r.prefixIcon,[h.m(`suffix`)]:c.suffix||r.suffixIcon||r.clearable||r.showPassword,[h.bm(`suffix`,`password-clear`)]:V.value&&De.value,[h.b(`hidden`)]:r.type===`hidden`},a.class]),ne=R(()=>[h.e(`wrapper`),h.is(`focus`,k.value)]),{form:d,formItem:f}=Re(),{inputId:p}=Be(r,{formItemContext:f}),re=l(),m=s(),h=u(`input`),g=u(`textarea`),_=me(),v=me(),se=T(!1),b=T(!1),fe=T(),w=me(r.inputStyle),E=R(()=>_.value||v.value),{wrapperRef:he,isFocused:k,handleFocus:A,handleBlur:ve}=Ot(E,{disabled:m,afterBlur(){var e;r.validateEvent&&((e=f?.validate)==null||e.call(f,`blur`).catch(e=>ae(e)))}}),be=R(()=>d?.statusIcon??!1),F=R(()=>f?.validateState||``),Se=R(()=>F.value&&nt[F.value]),we=R(()=>b.value?Ke:Qe),Te=R(()=>[a.style]),Ee=R(()=>[r.inputStyle,w.value,{resize:r.resize}]),B=R(()=>te(r.modelValue)?``:String(r.modelValue)),V=R(()=>r.clearable&&!m.value&&!r.readonly&&!!B.value&&(k.value||se.value)),De=R(()=>r.showPassword&&!m.value&&!!B.value),H=R(()=>r.showWordLimit&&!!r.maxlength&&(r.type===`text`||r.type===`textarea`)&&!m.value&&!r.readonly&&!r.showPassword),Oe=R(()=>B.value.length),ke=R(()=>!!H.value&&Oe.value>Number(r.maxlength)),Ae=R(()=>!!c.suffix||!!r.suffixIcon||V.value||r.showPassword||H.value||!!F.value&&be.value),je=R(()=>!!Object.keys(r.modelModifiers).length),[Me,Ne]=jt(_);ie(v,e=>{if(Pe(),!H.value||r.resize!==`both`&&r.resize!==`horizontal`)return;let{width:t}=e[0].contentRect;fe.value={right:`calc(100% - ${t+22-10}px)`}});let U=()=>{let{type:e,autosize:t}=r;if(!(!oe||e!==`textarea`||!v.value))if(t){let e=Ce(t)?t.minRows:void 0,n=Ce(t)?t.maxRows:void 0,r=xt(v.value,e,n);w.value={overflowY:`hidden`,...r},y(()=>{v.value.offsetHeight,w.value=r})}else w.value={minHeight:xt(v.value).minHeight}},Pe=(e=>{let t=!1;return()=>{t||!r.autosize||v.value?.offsetParent!==null&&(setTimeout(e),t=!0)}})(U),W=()=>{let e=E.value,t=r.formatter?r.formatter(B.value):B.value;!e||e.value===t||r.type===`file`||(e.value=t)},Fe=e=>{let{trim:t,number:n}=r.modelModifiers;return t&&(e=e.trim()),n&&(e=`${yt(e)}`),r.formatter&&r.parser&&(e=r.parser(e)),e},G=async e=>{if(q.value)return;let{lazy:t}=r.modelModifiers,{value:n}=e.target;if(t){i(Ye,n);return}if(n=Fe(n),String(n)===B.value){r.formatter&&W();return}Me(),i(Je,n),i(Ye,n),await y(),(r.formatter&&r.parser||!je.value)&&W(),Ne()},K=async e=>{let{value:t}=e.target;t=Fe(t),r.modelModifiers.lazy&&i(Je,t),i(et,t,e),await y(),W()},{isComposing:q,handleCompositionStart:J,handleCompositionUpdate:Y,handleCompositionEnd:X}=At({emit:i,afterComposition:G}),Ie=()=>{b.value=!b.value},Le=()=>E.value?.focus(),ze=()=>E.value?.blur(),Ve=e=>{se.value=!1,i(`mouseleave`,e)},He=e=>{se.value=!0,i(`mouseenter`,e)},Ue=e=>{i(`keydown`,e)},We=()=>{var e;(e=E.value)==null||e.select()},Ge=()=>{i(Je,``),i(et,``),i(`clear`),i(Ye,``)};return z(()=>r.modelValue,()=>{var e;y(()=>U()),r.validateEvent&&((e=f?.validate)==null||e.call(f,`change`).catch(e=>ae(e)))}),z(B,e=>{if(!E.value)return;let{trim:t,number:n}=r.modelModifiers,i=E.value.value,a=(n||r.type===`number`)&&!/^0\d/.test(i)?`${yt(i)}`:i;a!==e&&(document.activeElement===E.value&&E.value.type!==`range`&&t&&a.trim()===e||W())}),z(()=>r.type,async()=>{await y(),W(),U()}),le(()=>{!r.formatter&&r.parser&&ae(Pt,`If you set the parser, you also need to set the formatter.`),W(),y(U)}),t({input:_,textarea:v,ref:E,textareaStyle:Ee,autosize:ce(r,`autosize`),isComposing:q,focus:Le,blur:ze,select:We,clear:Ge,resizeTextarea:U}),(e,t)=>(M(),N(`div`,{class:L([ee.value,{[P(h).bm(`group`,`append`)]:e.$slots.append,[P(h).bm(`group`,`prepend`)]:e.$slots.prepend}]),style:ye(Te.value),onMouseenter:He,onMouseleave:Ve},[I(` input `),e.type===`textarea`?(M(),N(_e,{key:1},[I(` textarea `),D(`textarea`,pe({id:P(p),ref_key:`textarea`,ref:v,class:[P(g).e(`inner`),P(h).is(`focus`,P(k))]},P(o),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:P(m),readonly:e.readonly,autocomplete:e.autocomplete,style:Ee.value,"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t[3]||=(...e)=>P(J)&&P(J)(...e),onCompositionupdate:t[4]||=(...e)=>P(Y)&&P(Y)(...e),onCompositionend:t[5]||=(...e)=>P(X)&&P(X)(...e),onInput:G,onFocus:t[6]||=(...e)=>P(A)&&P(A)(...e),onBlur:t[7]||=(...e)=>P(ve)&&P(ve)(...e),onChange:K,onKeydown:Ue}),null,16,Nt),H.value?(M(),N(`span`,{key:0,style:ye(fe.value),class:L([P(h).e(`count`),P(h).is(`outside`,e.wordLimitPosition===`outside`)])},j(Oe.value)+` / `+j(e.maxlength),7)):I(`v-if`,!0)],64)):(M(),N(_e,{key:0},[I(` prepend slot `),e.$slots.prepend?(M(),N(`div`,{key:0,class:L(P(h).be(`group`,`prepend`))},[x(e.$slots,`prepend`)],2)):I(`v-if`,!0),D(`div`,{ref_key:`wrapperRef`,ref:he,class:L(ne.value)},[I(` prefix slot `),e.$slots.prefix||e.prefixIcon?(M(),N(`span`,{key:0,class:L(P(h).e(`prefix`))},[D(`span`,{class:L(P(h).e(`prefix-inner`))},[x(e.$slots,`prefix`),e.prefixIcon?(M(),O(P(Q),{key:0,class:L(P(h).e(`icon`))},{default:C(()=>[(M(),O(S(e.prefixIcon)))]),_:1},8,[`class`])):I(`v-if`,!0)],2)],2)):I(`v-if`,!0),D(`input`,pe({id:P(p),ref_key:`input`,ref:_,class:P(h).e(`inner`)},P(o),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?b.value?`text`:`password`:e.type,disabled:P(m),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:t[0]||=(...e)=>P(J)&&P(J)(...e),onCompositionupdate:t[1]||=(...e)=>P(Y)&&P(Y)(...e),onCompositionend:t[2]||=(...e)=>P(X)&&P(X)(...e),onInput:G,onChange:K,onKeydown:Ue}),null,16,Mt),I(` suffix slot `),Ae.value?(M(),N(`span`,{key:1,class:L(P(h).e(`suffix`))},[D(`span`,{class:L(P(h).e(`suffix-inner`))},[!V.value||!De.value||!H.value?(M(),N(_e,{key:0},[x(e.$slots,`suffix`),e.suffixIcon?(M(),O(P(Q),{key:0,class:L(P(h).e(`icon`))},{default:C(()=>[(M(),O(S(e.suffixIcon)))]),_:1},8,[`class`])):I(`v-if`,!0)],64)):I(`v-if`,!0),V.value?(M(),O(P(Q),{key:1,class:L([P(h).e(`icon`),P(h).e(`clear`)]),onMousedown:ge(P(xe),[`prevent`]),onClick:Ge},{default:C(()=>[(M(),O(S(e.clearIcon)))]),_:1},8,[`class`,`onMousedown`])):I(`v-if`,!0),De.value?(M(),O(P(Q),{key:2,class:L([P(h).e(`icon`),P(h).e(`password`)]),onClick:Ie,onMousedown:ge(P(xe),[`prevent`]),onMouseup:ge(P(xe),[`prevent`])},{default:C(()=>[(M(),O(S(we.value)))]),_:1},8,[`class`,`onMousedown`,`onMouseup`])):I(`v-if`,!0),H.value?(M(),N(`span`,{key:3,class:L([P(h).e(`count`),P(h).is(`outside`,e.wordLimitPosition===`outside`)])},[D(`span`,{class:L(P(h).e(`count-inner`))},j(Oe.value)+` / `+j(e.maxlength),3)],2)):I(`v-if`,!0),F.value&&Se.value&&be.value?(M(),O(P(Q),{key:4,class:L([P(h).e(`icon`),P(h).e(`validateIcon`),P(h).is(`loading`,F.value===`validating`)])},{default:C(()=>[(M(),O(S(Se.value)))]),_:1},8,[`class`])):I(`v-if`,!0)],2)],2)):I(`v-if`,!0)],2),I(` append slot `),e.$slots.append?(M(),N(`div`,{key:1,class:L(P(h).be(`group`,`append`))},[x(e.$slots,`append`)],2)):I(`v-if`,!0)],64))],38))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue`]])),It=class e extends Ve{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(f),this.changeEventsKeys_.length=0}listenGeometriesChange_(){let e=this.geometries_;for(let t=0,n=e.length;t<n;++t)this.changeEventsKeys_.push(m(e[t],r.CHANGE,this.changed,this))}clone(){let t=new e(Lt(this.geometries_));return t.applyProperties(this),t}closestPointXY(e,t,n,r){if(r<p(this.getExtent(),e,t))return r;let i=this.geometries_;for(let a=0,o=i.length;a<o;++a)r=i[a].closestPointXY(e,t,n,r);return r}containsXY(e,t){let n=this.geometries_;for(let r=0,i=n.length;r<i;++r)if(n[r].containsXY(e,t))return!0;return!1}computeExtent(e){a(e);let t=this.geometries_;for(let r=0,i=t.length;r<i;++r)n(e,t[r].getExtent());return e}getGeometries(){return Lt(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[],t=this.geometries_;for(let n=0,r=t.length;n<r;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;let n=[],r=this.geometries_,i=!1;for(let e=0,a=r.length;e<a;++e){let a=r[e],o=a.getSimplifiedGeometry(t);n.push(o),o!==a&&(i=!0)}return i?new e(n):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return`GeometryCollection`}intersectsExtent(e){let t=this.geometries_;for(let n=0,r=t.length;n<r;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){let n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].rotate(e,t);this.changed()}scale(e,t,n){n||=g(this.getExtent());let r=this.geometries_;for(let i=0,a=r.length;i<a;++i)r[i].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(Lt(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){let t=this.geometries_;for(let n=0,r=t.length;n<r;++n)t[n].applyTransform(e);this.changed()}translate(e,t){let n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}};function Lt(e){return e.map(e=>e.clone())}var Rt=It,zt=class e extends Xe{constructor(e,n,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(n!==void 0&&r)this.setFlatCoordinates(n,e),this.ends_=r;else{let n=e,r=[],i=[];for(let e=0,a=n.length;e<a;++e){let a=n[e];t(r,a.getFlatCoordinates()),i.push(r.length)}let a=n.length===0?this.getLayout():n[0].getLayout();this.setFlatCoordinates(a,r),this.ends_=i}}appendLineString(e){t(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(e,t,n,r){return r<p(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(W(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ot(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,r))}getCoordinateAtM(e,t,n){return this.layout!=`XYM`&&this.layout!=`XYZM`||this.flatCoordinates.length===0?null:(t=t===void 0?!1:t,n=n===void 0?!1:n,Ue(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return Le(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new gt(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){let e=this.flatCoordinates,t=this.ends_,n=this.layout,r=[],i=0;for(let a=0,o=t.length;a<o;++a){let o=t[a],s=new gt(e.slice(i,o),n);r.push(s),i=o}return r}getLength(){let e=this.ends_,t=0,n=0;for(let r=0,i=e.length;r<i;++r)n+=Fe(this.flatCoordinates,t,e[r],this.stride),t=e[r];return n}getFlatMidpoints(){let e=[],n=this.flatCoordinates,r=0,i=this.ends_,a=this.stride;for(let o=0,s=i.length;o<s;++o){let s=i[o];t(e,it(n,r,s,a,.5)),r=s}return e}getSimplifiedGeometryInternal(t){let n=[],r=[];return n.length=Ge(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,r),new e(n,`XY`,r)}getType(){return`MultiLineString`}intersectsExtent(e){return ft(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||=[];let n=at(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}},Bt=class e extends Xe{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){t(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){let t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(e,t,n,r){if(r<p(this.getExtent(),e,t))return r;let i=this.flatCoordinates,a=this.stride;for(let o=0,s=i.length;o<s;o+=a){let s=Me(e,t,i[o],i[o+1]);if(s<r){r=s;for(let e=0;e<a;++e)n[e]=i[o+e];n.length=a}}return r}getCoordinates(){return X(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){let t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Ne(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){let e=this.flatCoordinates,t=this.layout,n=this.stride,r=[];for(let i=0,a=e.length;i<a;i+=n){let a=new Ne(e.slice(i,i+n),t);r.push(a)}return r}getType(){return`MultiPoint`}intersectsExtent(e){let t=this.flatCoordinates,n=this.stride;for(let r=0,i=t.length;r<i;r+=n){let n=t[r],i=t[r+1];if(c(e,n,i))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||=[],this.flatCoordinates.length=qe(this.flatCoordinates,0,e,this.stride),this.changed()}},Vt=class e extends Xe{constructor(e,n,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){let i=e,a=[],o=[];for(let e=0,n=i.length;e<n;++e){let n=i[e],r=a.length,s=n.getEnds();for(let e=0,t=s.length;e<t;++e)s[e]+=r;t(a,n.getFlatCoordinates()),o.push(s)}n=i.length===0?this.getLayout():i[0].getLayout(),e=a,r=o}n!==void 0&&r?(this.setFlatCoordinates(n,e),this.endss_=r):this.setCoordinates(e,n)}appendPolygon(e){let n;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),n=e.getEnds().slice(),this.endss_.push();else{let r=this.flatCoordinates.length;t(this.flatCoordinates,e.getFlatCoordinates()),n=e.getEnds().slice();for(let e=0,t=n.length;e<t;++e)n[e]+=r}this.endss_.push(n),this.changed()}clone(){let t=this.endss_.length,n=Array(t);for(let e=0;e<t;++e)n[e]=this.endss_[e].slice();let r=new e(this.flatCoordinates.slice(),this.layout,n);return r.applyProperties(this),r}closestPointXY(e,t,n,r){return r<p(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ze(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),U(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,r))}containsXY(e,t){return dt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return J(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e===void 0?t=this.flatCoordinates:(t=this.getOrientedFlatCoordinates().slice(),He(t,0,this.endss_,this.stride,e)),je(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){let e=We(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=$e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Bt(this.getFlatInteriorPoints().slice(),`XYM`)}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let e=this.flatCoordinates;ct(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=He(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let n=[],r=[];return n.length=ut(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,r),new e(n,`XY`,r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{let n=this.endss_[e-1];t=n[n.length-1]}let n=this.endss_[e].slice(),r=n[n.length-1];if(t!==0)for(let e=0,r=n.length;e<r;++e)n[e]-=t;return new q(this.flatCoordinates.slice(t,r),this.layout,n)}getPolygons(){let e=this.layout,t=this.flatCoordinates,n=this.endss_,r=[],i=0;for(let a=0,o=n.length;a<o;++a){let o=n[a].slice(),s=o[o.length-1];if(i!==0)for(let e=0,t=o.length;e<t;++e)o[e]-=i;let c=new q(t.slice(i,s),e,o);r.push(c),i=s}return r}getType(){return`MultiPolygon`}intersectsExtent(e){return Ie(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||=[];let n=tt(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{let e=n[n.length-1];this.flatCoordinates.length=e.length===0?0:e[e.length-1]}this.changed()}},Ht=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Pe,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?K(t.dataProjection):this.readProjection(e);t.extent&&n&&n.getUnits()===`tile-pixels`&&(n=K(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return _()}readFeature(e,t){return _()}readFeatures(e,t){return _()}readGeometry(e,t){return _()}readProjection(e){return _()}writeFeature(e,t){return _()}writeFeatures(e,t){return _()}writeGeometry(e,t){return _()}};function Ut(e,t,n){let r=n?K(n.featureProjection):null,i=n?K(n.dataProjection):null,a=e;if(r&&i&&!Y(r,i)){t&&(a=e.clone());let n=t?r:i,o=t?i:r;n.getUnits()===`tile-pixels`?a.transform(n,o):a.applyTransform(Ae(n,o))}if(t&&n&&n.decimals!==void 0){let t=10**n.decimals;a===e&&(a=e.clone()),a.applyTransform(function(e){for(let n=0,r=e.length;n<r;++n)e[n]=Math.round(e[n]*t)/t;return e})}return a}var Wt={Point:Ne,LineString:gt,Polygon:q,MultiPoint:Bt,MultiLineString:zt,MultiPolygon:Vt};function Gt(e,t,n){return Array.isArray(t[0])?(ct(e,0,t,n)||(e=e.slice(),He(e,0,t,n)),e):(rt(e,0,t,n)||(e=e.slice(),Ze(e,0,t,n)),e)}function Kt(e,t){let n=e.geometry;if(!n)return[];if(Array.isArray(n))return n.map(t=>Kt({...e,geometry:t})).flat();let r=n.type===`MultiPolygon`?`Polygon`:n.type;if(r===`GeometryCollection`||r===`Circle`)throw Error(`Unsupported geometry type: `+r);let i=n.layout.length;return Ut(new G(r,r===`Polygon`?Gt(n.flatCoordinates,n.ends,i):n.flatCoordinates,n.ends?.flat(),i,e.properties||{},e.id).enableSimplifyTransformed(),!1,t)}function qt(e,t){if(!e)return null;if(Array.isArray(e))return new Rt(e.map(e=>qt(e,t)));let n=Wt[e.type];return Ut(new n(e.flatCoordinates,e.layout||`XY`,e.ends),!1,t)}var Jt=class extends Ht{constructor(){super()}getType(){return`json`}readFeature(e,t){return this.readFeatureFromObject(Yt(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Yt(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return _()}readFeaturesFromObject(e,t){return _()}readGeometry(e,t){return this.readGeometryFromObject(Yt(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return _()}readProjection(e){return this.readProjectionFromObject(Yt(e))}readProjectionFromObject(e){return _()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return _()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return _()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return _()}};function Yt(e){return typeof e==`string`?JSON.parse(e)||null:e===null?null:e}var Xt=Jt,Zt=class extends Xt{constructor(e){e||={},super(),this.dataProjection=K(e.dataProjection?e.dataProjection:`EPSG:4326`),e.featureProjection&&(this.defaultFeatureProjection=K(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=[`application/geo+json`,`application/vnd.geo+json`]}readFeatureFromObject(e,t){let n=null;n=e.type===`Feature`?e:{type:`Feature`,geometry:e,properties:null};let r=Qt(n.geometry,t);if(this.featureClass===G)return Kt({geometry:r,id:n.id,properties:n.properties},t);let i=new Pe;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&i.setGeometryName(n.geometry_name),i.setGeometry(qt(r,t)),`id`in n&&i.setId(n.id),n.properties&&i.setProperties(n.properties,!0),i}readFeaturesFromObject(e,t){let n=e,r=null;if(n.type===`FeatureCollection`){let n=e;r=[];let i=n.features;for(let e=0,n=i.length;e<n;++e){let n=this.readFeatureFromObject(i[e],t);n&&r.push(n)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return $t(e,t)}readProjectionFromObject(e){let t=e.crs,n;if(t)if(t.type==`name`)n=K(t.properties.name);else if(t.type===`EPSG`)n=K(`EPSG:`+t.properties.code);else throw Error(`Unknown SRS type`);else n=this.dataProjection;return n}writeFeatureObject(e,t){t=this.adaptOptions(t);let n={type:`Feature`,geometry:null,properties:null},r=e.getId();if(r!==void 0&&(n.id=r),!e.hasProperties())return n;let i=e.getProperties(),a=e.getGeometry();return a&&(n.geometry=cn(a,t),delete i[e.getGeometryName()]),ne(i)||(n.properties=i),n}writeFeaturesObject(e,t){t=this.adaptOptions(t);let n=[];for(let r=0,i=e.length;r<i;++r)n.push(this.writeFeatureObject(e[r],t));return{type:`FeatureCollection`,features:n}}writeGeometryObject(e,t){return cn(e,this.adaptOptions(t))}};function Qt(e,t){if(!e)return null;let n;switch(e.type){case`Point`:n=tn(e);break;case`LineString`:n=nn(e);break;case`Polygon`:n=sn(e);break;case`MultiPoint`:n=an(e);break;case`MultiLineString`:n=rn(e);break;case`MultiPolygon`:n=on(e);break;case`GeometryCollection`:n=en(e);break;default:throw Error(`Unsupported GeoJSON type: `+e.type)}return n}function $t(e,t){return qt(Qt(e,t),t)}function en(e,t){return e.geometries.map(function(e){return Qt(e,t)})}function tn(e){let t=e.coordinates;return{type:`Point`,flatCoordinates:t,layout:Z(t.length)}}function nn(e){let t=e.coordinates,n=t.flat();return{type:`LineString`,flatCoordinates:n,ends:[n.length],layout:Z(t[0]?.length||2)}}function rn(e){let t=e.coordinates,n=t[0]?.[0]?.length||2,r=[];return{type:`MultiLineString`,flatCoordinates:r,ends:at(r,0,t,n),layout:Z(n)}}function an(e){let t=e.coordinates;return{type:`MultiPoint`,flatCoordinates:t.flat(),layout:Z(t[0]?.length||2)}}function on(e){let t=e.coordinates,n=[],r=t[0]?.[0]?.[0].length||2;return{type:`MultiPolygon`,flatCoordinates:n,ends:tt(n,0,t,r),layout:Z(r)}}function sn(e){let t=e.coordinates,n=[],r=t[0]?.[0]?.length;return{type:`Polygon`,flatCoordinates:n,ends:at(n,0,t,r),layout:Z(r)}}function cn(e,t){e=Ut(e,!0,t);let n=e.getType(),r;switch(n){case`Point`:r=mn(e,t);break;case`LineString`:r=un(e,t);break;case`Polygon`:r=hn(e,t);break;case`MultiPoint`:r=fn(e,t);break;case`MultiLineString`:r=dn(e,t);break;case`MultiPolygon`:r=pn(e,t);break;case`GeometryCollection`:r=ln(e,t);break;case`Circle`:r={type:`GeometryCollection`,geometries:[]};break;default:throw Error(`Unsupported geometry type: `+n)}return r}function ln(e,t){return t=Object.assign({},t),delete t.featureProjection,{type:`GeometryCollection`,geometries:e.getGeometriesArray().map(function(e){return cn(e,t)})}}function un(e,t){return{type:`LineString`,coordinates:e.getCoordinates()}}function dn(e,t){return{type:`MultiLineString`,coordinates:e.getCoordinates()}}function fn(e,t){return{type:`MultiPoint`,coordinates:e.getCoordinates()}}function pn(e,t){let n;return t&&(n=t.rightHanded),{type:`MultiPolygon`,coordinates:e.getCoordinates(n)}}function mn(e,t){return{type:`Point`,coordinates:e.getCoordinates()}}function hn(e,t){let n;return t&&(n=t.rightHanded),{type:`Polygon`,coordinates:e.getCoordinates(n)}}var gn=Zt;const _n=(e,t)=>{typeof t==`object`&&(t=JSON.stringify(t)),window.sessionStorage.setItem(e,t)},vn=e=>{let t=window.sessionStorage.getItem(e);try{return JSON.parse(t)}catch{return t}};var yn={class:`projection-zones`},bn={class:`header`},xn={class:`tree`},Sn={class:`custom-tree-node`},Cn=[`title`],wn=Se({__name:`index`,emits:[`popup`,`dataLoaded`],setup(e,{emit:t}){let n=he(`state`),r=he(`isMapCreated`),i=T(!1),a=T([]),o=vn(`cgcs2000`);o?a.value=o:Ee().then(e=>{a.value=e[0].children,_n(`cgcs2000`,e[0].children)});let s=null,c=null,l=[],u=[],ee=[],te=new gn,ne=[{url:`./data/中国_省.geojson`,type:`province`},{url:`./data/中国_市.geojson`,type:`city`},{url:`./data/中国_县.geojson`,type:`county`}],d=T(``),f=T(),p=t;z(d,e=>{f.value?.filter(e)}),z(r,e=>{e&&(s=n.map,m())});let re=(e,t)=>e?t.name.includes(e):!0;function m(){c=H(s,void 0,`administrative-divisions`,100),Promise.allSettled(ne.map(e=>B(e.url).then(t=>({type:e.type,features:te.readFeatures(t)})))).then(e=>{p(`dataLoaded`),e.forEach(e=>{if(e.status===`fulfilled`){let{type:t,features:n}=e.value;t===`province`?l=n:t===`city`?u=n:t===`county`&&(ee=n)}else console.error(`[${e.reason.type}] 数据加载失败`,e.reason)})})}async function h(e){let{gb:t}=fe(e);String(t).endsWith(`0000`)?g(l,t):String(t).endsWith(`00`)||String(t).endsWith(`000`)?g(u,t):g(ee,t)}function g(e,t){let n=e.find(e=>e.getProperties().gb===t);if(n instanceof Pe){let{name:e}=n.getProperties();c.getFeatures().length>0&&c.clear(),n.setStyle(V(`rgba(0, 0, 255, 0.2)`,`rgba(0, 0, 255)`,1.25,e)),c.addFeature(n),s.getView().fit(n.getGeometry(),{duration:300,padding:[20,340,20,450]})}}function ie(){i.value=!i.value}return(e,t)=>{let n=ht,r=pt,o=mt,s=Ft,c=De;return M(),N(_e,null,[A(be,{name:`.el-zoom-in-center`},{default:C(()=>[b(D(`div`,{class:`projection-zones-fold`,onClick:ie},[A(n)],512),[[F,P(i)]])]),_:1}),A(be,{name:`.el-zoom-in-center`},{default:C(()=>[b(D(`div`,yn,[D(`div`,bn,[t[1]||=D(`div`,{class:`title`},`行政区划`,-1),D(`div`,{class:`fold`,onClick:ie},[A(r)])]),A(o,{style:{margin:`10px 0`}}),A(s,{modelValue:P(d),"onUpdate:modelValue":t[0]||=e=>w(d)?d.value=e:null,style:{margin:`6px 0 10px`},placeholder:`请输入关键字`,clearable:``},null,8,[`modelValue`]),D(`div`,xn,[A(c,{ref_key:`treeRef`,ref:f,data:P(a),"node-key":`gb`,props:{children:`children`,label:`name`},"default-expanded-keys":[],"filter-node-method":re,onNodeClick:h,"highlight-current":``,"empty-text":`暂无数据`,"expand-on-click-node":!1},{default:C(({node:e,data:t})=>[D(`span`,Sn,[D(`span`,{title:e.label},j(e.label),9,Cn)])]),_:1},8,[`data`])])],512),[[F,!P(i)]])]),_:1})],64)}}},[[`__scopeId`,`data-v-12a4254a`]]);export{wn as t};