import{q as e,wn as t}from"./css-B7ssKLdc.js";import{A as n,H as r,S as i,X as a,Y as o,g as s,k as c,m as l,nt as u,t as d}from"./index-CbYOw2TZ.js";import{a as f,n as p}from"./common-CEw9TAyl.js";import"./Vector-C8gJlEPi.js";import{t as m}from"./ProjectionZones-DSyw4s32.js";import{n as h,t as g}from"./AdministrativeDivisions-DOkXfDBz.js";import"./vnode-CC-mKRN_.js";import{t as _}from"./OlPopup-Cxv8FCWj.js";import"./fold-dHNhzyDU.js";import{t as v}from"./TdtMap-SKYBpWW2.js";import"./LineString-BCsUo7mG.js";import"./MapEventType-V8bC502L.js";import"./ZonesRender-COZUfntB.js";var y={class:`wrap`,"element-loading-text":`拼命加载中...`,"element-loading-background":`rgba(122, 122, 122, 0.8)`},b=d({__name:`OneMap`,setup(t){let d=o(``),b=o([]),x=o([0,-10]),S=o([{key:`label`,val:`投影名称`,unit:null},{key:`code`,val:`EPSG`,unit:null},{key:`bounds`,val:`投影范围`,unit:null}]),C=o({}),w=o(null),T=null,E=o(!1),D=a({map:null});n(`state`,D),n(`isMapCreated`,E);let O=o(!0);function k(e){D.map=e,E.value=!0,T=f(e,`highlight`).getSource()}function A(e){let t=e.coordinate,n=D.map.forEachFeatureAtPixel(e.pixel,e=>e);if(n){if(t){p(T);let e=n.clone();e.setStyle(void 0),T.addFeature(e)}M(n.getProperties(),t)}}function j(e){M(e)}function M(t,n){Object.keys(t).includes(`bounds`)&&(C.value=t,d.value=t.label,b.value=n||e(t.bounds))}function N(){p(T)}function P(){w.value?.close()}function F(){O.value=!1}return(e,t)=>{let n=v,a=m,o=g,f=_,p=h;return r((c(),l(`div`,y,[s(n,{onMapCreated:k,onMapClick:A}),s(a,i(e.$attrs,{onPopup:j,onClosePopup:P}),null,16),s(o,{onDataLoaded:F}),s(f,{ref_key:`popup`,ref:w,title:u(d),position:u(b),offset:u(x),propeties:u(S),popupInfo:u(C),onClose:N},null,8,[`title`,`position`,`offset`,`propeties`,`popupInfo`])])),[[p,u(O),void 0,{lock:!0}]])}}},[[`__scopeId`,`data-v-40ff7e2d`]]);export{b as default};