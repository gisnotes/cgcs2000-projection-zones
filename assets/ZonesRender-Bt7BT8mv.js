import{wn as e}from"./css-DG-mw9ml.js";import{V as t,Y as n,b as r,d as i,g as a,ht as o,k as s,m as c,nt as l,z as u}from"./index-CmMvxZDK.js";import{F as d,Jt as f,a as p,b as m,i as h,o as g,t as _}from"./Vector-gmcrLG_B.js";import{a as v,n as y,s as b}from"./common-CP2b2KR9.js";const x=[73.62,16.7,134.77,53.56];function S(e){return e.reduce((e,t)=>(t.checked&&e.push(t.id),t.children&&t.children.length>0&&e.push(...S(t.children)),e),[])}var C={class:`zones-render`},w=[`title`],T={__name:`index`,props:{treeDefaultProps:{type:Object,default:()=>({children:`children`,label:`label`})},data:{type:Array,default:()=>[]},name:{type:String,default:`zones-render`},visible:{type:Boolean,default:!1}},emits:[`popup`,`closePopup`],setup(e,{emit:T}){let E=e,D=r(`state`),O=r(`isMapCreated`),k=n(null),A=T,j=n(S(E.data)),M=null,N=null,P=new m({wrapX:!1}),F=new h({fill:new g({color:`rgba(255, 0, 0, 0.1)`}),stroke:new p({color:`#ff0000`,width:1})}),I=new _({source:P,zIndex:99,visible:E.visible,properties:{name:E.name}});u(O,e=>{e&&(M=D.map,L())}),u(()=>E.visible,e=>{I.setVisible(e),y(N),e&&(B(),A(`closePopup`),k.value.getCurrentKey()&&k.value.setCurrentKey(null))});function L(){N=v(M,`highlight`).getSource(),M.addLayer(I),E.data.forEach(e=>{e?.bounds&&R(e),e?.children?.length&&e.children.forEach(e=>{e?.bounds&&R(e)})}),E.visible&&B()}function R(e){let t=new f({geometry:d(e.bounds)});t.setId(e.code),t.setStyle(F.clone()),t.setProperties({...e}),P.addFeature(t)}function z(e){if(!e.bounds)return;let t=P.getFeatureById(e.code);if(t){y(N);let n=t.clone();n.setStyle(void 0),N.addFeature(n),M.getView().fit(t.getGeometry(),{duration:300,padding:[100,440,100,600],callback:()=>A(`popup`,e)})}}function B(){M.getView().fit(x,{duration:300,padding:[100,460,100,600]})}return(n,r)=>{let u=b;return s(),c(`div`,C,[a(u,{ref_key:`treeRef`,ref:k,class:`custom-tree`,data:e.data,"node-key":`id`,props:e.treeDefaultProps,"default-expanded-keys":[1],"default-checked-keys":l(j),onNodeClick:z,"highlight-current":``},{default:t(({node:e,data:t})=>[i(`span`,{title:e.label},o(e.label),9,w)]),_:1},8,[`data`,`props`,`default-checked-keys`])])}}};export{T as t};