(function(){
/**
* @preserve
* gcoord 1.0.7, geographic coordinate library
* Copyright (c) 2025 Jiulong Hu <me@hujiulong.com>
*/
let{sin:e,cos:t,sqrt:n,abs:r,PI:i}=Math,a=6378245,o=.006693421622965823;function s(e,t){return e>=72.004&&e<=137.8347&&t>=.8293&&t<=55.8271}function c(t,a){let o=-100+2*t+3*a+.2*a*a+.1*t*a+.2*n(r(t));return o+=(20*e(6*t*i)+20*e(2*t*i))*2/3,o+=(20*e(a*i)+40*e(a/3*i))*2/3,o+=(160*e(a/12*i)+320*e(a*i/30))*2/3,o}function l(t,a){let o=300+t+2*a+.1*t*t+.1*t*a+.1*n(r(t));return o+=(20*e(6*t*i)+20*e(2*t*i))*2/3,o+=(20*e(t*i)+40*e(t/3*i))*2/3,o+=(150*e(t/12*i)+300*e(t/30*i))*2/3,o}function u(r,s){let u=l(r-105,s-35),d=c(r-105,s-35),f=s/180*i,p=e(f);p=1-o*p*p;let m=n(p);return u=u*180/(a/m*t(f)*i),d=d*180/(a*(1-o)/(p*m)*i),[u,d]}function d(e){let[t,n]=e;if(!s(t,n))return[t,n];let r=u(t,n);return[t+r[0],n+r[1]]}function f(e){let[t,n]=e;if(!s(t,n))return[t,n];let[i,a]=[t,n],o=d([i,a]),c=o[0]-t,l=o[1]-n;for(;r(c)>1e-6||r(l)>1e-6;)i-=c,a-=l,o=d([i,a]),c=o[0]-t,l=o[1]-n;return[i,a]}let{sin:p,cos:m,atan2:h,sqrt:g,PI:_}=Math,v=_*3e3/180;function y(e){let[t,n]=e,r=t-.0065,i=n-.006,a=g(r*r+i*i)-2e-5*p(i*v),o=h(i,r)-3e-6*m(r*v);return[a*m(o),a*p(o)]}function b(e){let[t,n]=e,r=t,i=n,a=g(r*r+i*i)+2e-5*p(i*v),o=h(i,r)+3e-6*m(r*v);return[a*m(o)+.0065,a*p(o)+.006]}let x=180/Math.PI,S=Math.PI/180,C=6378137,w=20037508.342789244;function T(e){return[e[0]*x/C,(Math.PI*.5-2*Math.atan(Math.exp(-e[1]/C)))*x]}function E(e){let t=[C*(Math.abs(e[0])<=180?e[0]:e[0]-(e[0]<0?-1:1)*360)*S,C*Math.log(Math.tan(Math.PI*.25+.5*e[1]*S))];return t[0]>w&&(t[0]=w),t[0]<-w&&(t[0]=-w),t[1]>w&&(t[1]=w),t[1]<-w&&(t[1]=-w),t}let{abs:D}=Math,O=[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],k=[75,60,45,30,15,0],A=[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],j=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];function M(e,t,n){let r=D(t)/n[9],i=n[0]+n[1]*D(e),a=n[2]+n[3]*r+n[4]*r**2+n[5]*r**3+n[6]*r**4+n[7]*r**5+n[8]*r**6;return i*=e<0?-1:1,a*=t<0?-1:1,[i,a]}function N(e){let[t,n]=e,r=[];for(let e=0;e<k.length;e++)if(D(n)>k[e]){r=j[e];break}return M(t,n,r)}function P(e){let[t,n]=e,r=[];for(let e=0;e<O.length;e++)if(D(n)>=O[e]){r=A[e];break}return M(t,n,r)}function F(e,t){if(!e)throw Error(t)}function I(e){return!!e&&Object.prototype.toString.call(e)===`[object Array]`}function L(e){return!isNaN(Number(e))&&e!==null&&!I(e)}function R(...e){let t=e.length-1;return function(...n){let r=t,i=e[t].apply(null,n);for(;r--;)i=e[r].call(null,i);return i}}function z(e,t,n=!1){if(e===null)return;let r,i,a,o,s,c,l=0,u=0,d,f,{type:p}=e,m=p===`FeatureCollection`,h=p===`Feature`,g=m?e.features.length:1;for(let p=0;p<g;p++){d=m?e.features[p].geometry:h?e.geometry:e,f=d?d.type===`GeometryCollection`:!1,c=f?d.geometries.length:1;for(let e=0;e<c;e++){let c=0,m=0;if(o=f?d.geometries[e]:d,o===null)continue;let h=o.type;switch(l=n&&(h===`Polygon`||h===`MultiPolygon`)?1:0,h){case null:break;case`Point`:if(s=o.coordinates,t(s,u,p,c,m)===!1)return!1;u++,c++;break;case`LineString`:case`MultiPoint`:for(s=o.coordinates,r=0;r<s.length;r++){if(t(s[r],u,p,c,m)===!1)return!1;u++,h===`MultiPoint`&&c++}h===`LineString`&&c++;break;case`Polygon`:case`MultiLineString`:for(s=o.coordinates,r=0;r<s.length;r++){for(i=0;i<s[r].length-l;i++){if(t(s[r][i],u,p,c,m)===!1)return!1;u++}h===`MultiLineString`&&c++,h===`Polygon`&&m++}h===`Polygon`&&c++;break;case`MultiPolygon`:for(s=o.coordinates,r=0;r<s.length;r++){for(m=0,i=0;i<s[r].length;i++){for(a=0;a<s[r][i].length-l;a++){if(t(s[r][i][a],u,p,c,m)===!1)return!1;u++}m++}c++}break;case`GeometryCollection`:for(r=0;r<o.geometries.length;r++)if(z(o.geometries[r],t,n)===!1)return!1;break;default:throw Error(`Unknown Geometry Type`)}}}}var B;(function(e){e.WGS84=`WGS84`,e.WGS1984=`WGS84`,e.EPSG4326=`WGS84`,e.GCJ02=`GCJ02`,e.AMap=`GCJ02`,e.BD09=`BD09`,e.BD09LL=`BD09`,e.Baidu=`BD09`,e.BMap=`BD09`,e.BD09MC=`BD09MC`,e.BD09Meter=`BD09MC`,e.EPSG3857=`EPSG3857`,e.EPSG900913=`EPSG3857`,e.EPSG102100=`EPSG3857`,e.WebMercator=`EPSG3857`,e.WM=`EPSG3857`})(B||={});var V={WGS84:{to:{[B.GCJ02]:d,[B.BD09]:R(b,d),[B.BD09MC]:R(N,b,d),[B.EPSG3857]:E}},GCJ02:{to:{[B.WGS84]:f,[B.BD09]:b,[B.BD09MC]:R(N,b),[B.EPSG3857]:R(E,f)}},BD09:{to:{[B.WGS84]:R(f,y),[B.GCJ02]:y,[B.EPSG3857]:R(E,f,y),[B.BD09MC]:N}},EPSG3857:{to:{[B.WGS84]:T,[B.GCJ02]:R(d,T),[B.BD09]:R(b,d,T),[B.BD09MC]:R(N,b,d,T)}},BD09MC:{to:{[B.WGS84]:R(f,y,P),[B.GCJ02]:R(y,P),[B.EPSG3857]:R(E,f,y,P),[B.BD09]:P}}};function H(e,t,n){if(F(!!e,`The args[0] input coordinate is required`),F(!!t,`The args[1] original coordinate system is required`),F(!!n,`The args[2] target coordinate system is required`),t===n)return e;let r=V[t];F(!!r,`Invalid original coordinate system: ${t}`);let i=r.to[n];F(!!i,`Invalid target coordinate system: ${n}`);let a=typeof e;if(F(a===`string`||a===`object`,`Invalid input coordinate type: ${a}`),a===`string`)try{e=JSON.parse(e)}catch{throw Error(`Invalid input coordinate: ${e}`)}let o=!1;I(e)&&(F(e.length>=2,`Invalid input coordinate: ${e}`),F(L(e[0])&&L(e[1]),`Invalid input coordinate: ${e}`),e=e.map(Number),o=!0);let s=i;return o?s(e):(z(e,e=>{[e[0],e[1]]=s(e)}),e)}let U=Object.assign(Object.assign({},B),{CRSTypes:B,transform:H});self.onmessage=function(e){let{feature:t}=e.data,n=W(t);self.postMessage({transformedFeature:n})};function W(e){let t=q(e);return t.geometry&&t.geometry.coordinates&&(t.geometry.coordinates=G(t.geometry.coordinates)),t}function G(e){return typeof e[0]==`number`?K(e):e.map(e=>G(e))}function K(e){return U.transform(e,U.GCJ02,U.WGS84)}function q(e){if(typeof structuredClone==`function`){let t=[];return(function e(n){if(n instanceof ArrayBuffer){t.push(n);return}if(Array.isArray(n)){n.forEach(e);return}n&&typeof n==`object`&&(n instanceof Map||n instanceof Set?n.forEach(t=>e(t)):Object.values(n).forEach(e))})(e),structuredClone(e,{transfer:t})}try{return JSON.parse(JSON.stringify(e))}catch{throw Error(`fastClone: 当前环境不支持 structuredClone，且对象不可序列化`)}}})();