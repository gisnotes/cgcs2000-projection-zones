import{$t as e,At as t,Gt as n,Jt as r,Lt as i,M as a,Rt as o,Sn as s,Zt as c,_n as l,en as u,k as d,mn as ee,on as f,sn as p,tn as m,un as te,ut as h,vn as g,wn as ne}from"./css-BS0Ea-4C.js";import{$ as _,C as v,E as re,H as ie,I as ae,L as oe,M as y,P as b,Q as x,S as se,V as S,W as C,Y as w,Z as ce,_ as le,b as T,c as ue,d as E,f as D,ft as O,g as k,ht as A,k as j,l as de,lt as M,m as N,mt as fe,n as pe,nt as P,o as F,p as I,pt as L,rt as me,t as R,u as z,ut as he,v as ge,z as B}from"./index-D36mqg_C.js";import{d as _e,i as ve,o as ye,r as be,s as V,t as xe,u as Se}from"./common-Ki1Nmktx.js";import{$ as Ce,B as H,Bt as U,Ct as W,Gt as we,H as Te,I as G,J as Ee,Jt as De,K as Oe,Kt as ke,L as Ae,N as je,P as Me,Qt as K,R as Ne,Tt as q,U as Pe,Ut as J,W as Fe,X as Ie,Z as Y,Zt as Le,at as X,bt as Z,cn as Q,ct as Re,dn as ze,dt as Be,et as Ve,ft as He,in as Ue,it as We,ln as Ge,nn as Ke,nt as qe,ot as Je,rt as Ye,sn as Xe,st as Ze,tt as Qe,un as $e,z as et}from"./Vector-uJx6Snu6.js";import{n as tt,r as nt,t as rt}from"./fold-B6UZYIk5.js";import{t as it}from"./LineString-CwIzljCo.js";var $=void 0,at={height:`0`,visibility:`hidden`,overflow:_e()?``:`hidden`,position:`absolute`,"z-index":`-1000`,top:`0`,right:`0`},ot=[`letter-spacing`,`line-height`,`padding-top`,`padding-bottom`,`font-family`,`font-weight`,`font-size`,`text-rendering`,`text-transform`,`width`,`text-indent`,`padding-left`,`padding-right`,`border-width`,`box-sizing`,`word-break`],st=e=>{let t=Number.parseFloat(e);return Number.isNaN(t)?e:t};function ct(e){let t=window.getComputedStyle(e),n=t.getPropertyValue(`box-sizing`),r=Number.parseFloat(t.getPropertyValue(`padding-bottom`))+Number.parseFloat(t.getPropertyValue(`padding-top`)),i=Number.parseFloat(t.getPropertyValue(`border-bottom-width`))+Number.parseFloat(t.getPropertyValue(`border-top-width`));return{contextStyle:ot.map(e=>[e,t.getPropertyValue(e)]),paddingSize:r,borderSize:i,boxSizing:n}}function lt(e,t=1,n){var r;$||($=document.createElement(`textarea`),(e.parentNode??document.body).appendChild($));let{paddingSize:i,borderSize:a,boxSizing:o,contextStyle:s}=ct(e);s.forEach(([e,t])=>$?.style.setProperty(e,t)),Object.entries(at).forEach(([e,t])=>$?.style.setProperty(e,t,`important`)),$.value=e.value||e.placeholder||``;let c=$.scrollHeight,l={};o===`border-box`?c+=a:o===`content-box`&&(c-=i),$.value=``;let u=$.scrollHeight-i;if(ee(t)){let e=u*t;o===`border-box`&&(e=e+i+a),c=Math.max(e,c),l.minHeight=`${e}px`}if(ee(n)){let e=u*n;o===`border-box`&&(e=e+i+a),c=Math.min(e,c)}return l.height=`${c}px`,(r=$.parentNode)==null||r.removeChild($),$=void 0,l}var ut=e({id:{type:String,default:void 0},size:c,disabled:{type:Boolean,default:void 0},modelValue:{type:u([String,Number,Object]),default:``},modelModifiers:{type:u(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:u(String),default:`text`},resize:{type:String,values:[`none`,`both`,`horizontal`,`vertical`]},autosize:{type:u([Boolean,Object]),default:!1},autocomplete:{type:u(String),default:`off`},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:K,default:Ke},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:[`inside`,`outside`],default:`inside`},suffixIcon:{type:K},prefixIcon:{type:K},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:u([Object,Array,String]),default:()=>Se({})},autofocus:Boolean,rows:{type:Number,default:2},...De([`ariaLabel`]),inputmode:{type:u(String),default:void 0},name:String}),dt={[ze]:e=>O(e),input:e=>O(e),change:(e,t)=>O(e)&&(t instanceof Event||t===void 0),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},ft=[`class`,`style`],pt=/^on[A-Z]/,mt=(e={})=>{let{excludeListeners:t=!1,excludeKeys:n}=e,r=z(()=>(n?.value||[]).concat(ft)),i=ge();return i?z(()=>g(Object.entries(i.proxy?.$attrs).filter(([e])=>!r.value.includes(e)&&!(t&&pt.test(e))))):(m(`use-attrs`,`getCurrentInstance() returned null. useAttrs() must be called at the top of a setup function`),z(()=>({})))},ht=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute(`tabIndex`)!==null)return!0;if(e.tabIndex<0||e.hasAttribute(`disabled`)||e.getAttribute(`aria-disabled`)===`true`)return!1;switch(e.nodeName){case`A`:return!!e.href&&e.rel!==`ignore`;case`INPUT`:return!(e.type===`hidden`||e.type===`file`);case`BUTTON`:case`SELECT`:case`TEXTAREA`:return!0;default:return!1}};function gt(e,{disabled:t,beforeFocus:n,afterFocus:r,beforeBlur:i,afterBlur:a}={}){let{emit:o}=ge(),s=ce(),c=w(!1),l=e=>{let i=M(n)?n(e):!1;P(t)||c.value||i||(c.value=!0,o(`focus`,e),r?.())},u=e=>{let n=M(i)?i(e):!1;P(t)||e.relatedTarget&&s.value?.contains(e.relatedTarget)||n||(c.value=!1,o(`blur`,e),a?.())};return B([s,()=>P(t)],([e,t])=>{e&&(t?e.removeAttribute(`tabindex`):e.setAttribute(`tabindex`,`-1`))}),f(s,`focus`,l,!0),f(s,`blur`,u,!0),f(s,`click`,n=>{var r;P(t)||ht(n.target)||s.value?.contains(document.activeElement)&&s.value!==document.activeElement||(r=e.value)==null||r.focus()},!0),{isFocused:c,wrapperRef:s,handleFocus:l,handleBlur:u}}var _t=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);function vt({afterComposition:e,emit:t}){let n=w(!1),r=e=>{t?.(`compositionstart`,e),n.value=!0},i=e=>{t?.(`compositionupdate`,e);let r=e.target?.value;n.value=!_t(r[r.length-1]||``)},a=r=>{t?.(`compositionend`,r),n.value&&(n.value=!1,v(()=>e(r)))};return{isComposing:n,handleComposition:e=>{e.type===`compositionend`?a(e):i(e)},handleCompositionStart:r,handleCompositionUpdate:i,handleCompositionEnd:a}}function yt(e){let t;function n(){if(e.value==null)return;let{selectionStart:n,selectionEnd:r,value:i}=e.value;n==null||r==null||(t={selectionStart:n,selectionEnd:r,value:i,beforeTxt:i.slice(0,Math.max(0,n)),afterTxt:i.slice(Math.max(0,r))})}function r(){if(e.value==null||t==null)return;let{value:n}=e.value,{beforeTxt:r,afterTxt:i,selectionStart:a}=t;if(r==null||i==null||a==null)return;let o=n.length;if(n.endsWith(i))o=n.length-i.length;else if(n.startsWith(r))o=r.length;else{let e=r[a-1],t=n.indexOf(e,a-1);t!==-1&&(o=t+1)}e.value.setSelectionRange(o,o)}return[n,r]}var bt=[`id`,`name`,`minlength`,`maxlength`,`type`,`disabled`,`readonly`,`autocomplete`,`tabindex`,`aria-label`,`placeholder`,`form`,`autofocus`,`role`,`inputmode`],xt=[`id`,`name`,`minlength`,`maxlength`,`tabindex`,`disabled`,`readonly`,`autocomplete`,`aria-label`,`placeholder`,`form`,`autofocus`,`rows`,`role`],St=`ElInput`,Ct=n(r(le({name:St,inheritAttrs:!1,__name:`input`,props:ut,emits:dt,setup(e,{expose:t,emit:n}){let r=e,a=n,c=ae(),u=mt(),d=oe(),ee=z(()=>[r.type===`textarea`?le.b():C.b(),C.m(ie.value),C.is(`disabled`,x.value),C.is(`exceed`,De.value),{[C.b(`group`)]:d.prepend||d.append,[C.m(`prefix`)]:d.prefix||r.prefixIcon,[C.m(`suffix`)]:d.suffix||r.suffixIcon||r.clearable||r.showPassword,[C.bm(`suffix`,`password-clear`)]:W.value&&Te.value,[C.b(`hidden`)]:r.type===`hidden`},c.class]),f=z(()=>[C.e(`wrapper`),C.is(`focus`,_e.value)]),{form:h,formItem:g}=we(),{inputId:ne}=ke(r,{formItemContext:g}),ie=o(),x=i(),C=s(`input`),le=s(`textarea`),T=ce(),O=ce(),k=w(!1),M=w(!1),pe=w(),F=ce(r.inputStyle),R=z(()=>T.value||O.value),{wrapperRef:ge,isFocused:_e,handleFocus:ve,handleBlur:ye}=gt(R,{disabled:x,afterBlur(){var e;r.validateEvent&&((e=g?.validate)==null||e.call(g,`blur`).catch(e=>m(e)))}}),be=z(()=>h?.statusIcon??!1),V=z(()=>g?.validateState||``),xe=z(()=>V.value&&Le[V.value]),Se=z(()=>M.value?Xe:Ue),Ce=z(()=>[c.style]),H=z(()=>[r.inputStyle,F.value,{resize:r.resize}]),U=z(()=>l(r.modelValue)?``:String(r.modelValue)),W=z(()=>r.clearable&&!x.value&&!r.readonly&&!!U.value&&(_e.value||k.value)),Te=z(()=>r.showPassword&&!x.value&&!!U.value),G=z(()=>r.showWordLimit&&!!r.maxlength&&(r.type===`text`||r.type===`textarea`)&&!x.value&&!r.readonly&&!r.showPassword),Ee=z(()=>U.value.length),De=z(()=>!!G.value&&Ee.value>Number(r.maxlength)),Oe=z(()=>!!d.suffix||!!r.suffixIcon||W.value||r.showPassword||G.value||!!V.value&&be.value),Ae=z(()=>!!Object.keys(r.modelModifiers).length),[je,Me]=yt(T);p(O,e=>{if(Ne(),!G.value||r.resize!==`both`&&r.resize!==`horizontal`)return;let{width:t}=e[0].contentRect;pe.value={right:`calc(100% - ${t+22-10}px)`}});let K=()=>{let{type:e,autosize:t}=r;if(!(!te||e!==`textarea`||!O.value))if(t){let e=he(t)?t.minRows:void 0,n=he(t)?t.maxRows:void 0,r=lt(O.value,e,n);F.value={overflowY:`hidden`,...r},v(()=>{O.value.offsetHeight,F.value=r})}else F.value={minHeight:lt(O.value).minHeight}},Ne=(e=>{let t=!1;return()=>{t||!r.autosize||O.value?.offsetParent!==null&&(setTimeout(e),t=!0)}})(K),q=()=>{let e=R.value,t=r.formatter?r.formatter(U.value):U.value;!e||e.value===t||r.type===`file`||(e.value=t)},Pe=e=>{let{trim:t,number:n}=r.modelModifiers;return t&&(e=e.trim()),n&&(e=`${st(e)}`),r.formatter&&r.parser&&(e=r.parser(e)),e},J=async e=>{if(Ie.value)return;let{lazy:t}=r.modelModifiers,{value:n}=e.target;if(t){a($e,n);return}if(n=Pe(n),String(n)===U.value){r.formatter&&q();return}je(),a(ze,n),a($e,n),await v(),(r.formatter&&r.parser||!Ae.value)&&q(),Me()},Fe=async e=>{let{value:t}=e.target;t=Pe(t),r.modelModifiers.lazy&&a(ze,t),a(Ge,t,e),await v(),q()},{isComposing:Ie,handleCompositionStart:Y,handleCompositionUpdate:X,handleCompositionEnd:Z}=vt({emit:a,afterComposition:J}),Re=()=>{M.value=!M.value},Be=()=>R.value?.focus(),Ve=()=>R.value?.blur(),He=e=>{k.value=!1,a(`mouseleave`,e)},We=e=>{k.value=!0,a(`mouseenter`,e)},Ke=e=>{a(`keydown`,e)},qe=()=>{var e;(e=R.value)==null||e.select()},Je=()=>{a(ze,``),a(Ge,``),a(`clear`),a($e,``)};return B(()=>r.modelValue,()=>{var e;v(()=>K()),r.validateEvent&&((e=g?.validate)==null||e.call(g,`change`).catch(e=>m(e)))}),B(U,e=>{if(!R.value)return;let{trim:t,number:n}=r.modelModifiers,i=R.value.value,a=(n||r.type===`number`)&&!/^0\d/.test(i)?`${st(i)}`:i;a!==e&&(document.activeElement===R.value&&R.value.type!==`range`&&t&&a.trim()===e||q())}),B(()=>r.type,async()=>{await v(),q(),K()}),re(()=>{!r.formatter&&r.parser&&m(St,`If you set the parser, you also need to set the formatter.`),q(),v(K)}),t({input:T,textarea:O,ref:R,textareaStyle:H,autosize:_(r,`autosize`),isComposing:Ie,focus:Be,blur:Ve,select:qe,clear:Je,resizeTextarea:K}),(e,t)=>(j(),N(`div`,{class:L([ee.value,{[P(C).bm(`group`,`append`)]:e.$slots.append,[P(C).bm(`group`,`prepend`)]:e.$slots.prepend}]),style:fe(Ce.value),onMouseenter:We,onMouseleave:He},[I(` input `),e.type===`textarea`?(j(),N(de,{key:1},[I(` textarea `),E(`textarea`,se({id:P(ne),ref_key:`textarea`,ref:O,class:[P(le).e(`inner`),P(C).is(`focus`,P(_e))]},P(u),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:P(x),readonly:e.readonly,autocomplete:e.autocomplete,style:H.value,"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t[3]||=(...e)=>P(Y)&&P(Y)(...e),onCompositionupdate:t[4]||=(...e)=>P(X)&&P(X)(...e),onCompositionend:t[5]||=(...e)=>P(Z)&&P(Z)(...e),onInput:J,onFocus:t[6]||=(...e)=>P(ve)&&P(ve)(...e),onBlur:t[7]||=(...e)=>P(ye)&&P(ye)(...e),onChange:Fe,onKeydown:Ke}),null,16,xt),G.value?(j(),N(`span`,{key:0,style:fe(pe.value),class:L([P(C).e(`count`),P(C).is(`outside`,e.wordLimitPosition===`outside`)])},A(Ee.value)+` / `+A(e.maxlength),7)):I(`v-if`,!0)],64)):(j(),N(de,{key:0},[I(` prepend slot `),e.$slots.prepend?(j(),N(`div`,{key:0,class:L(P(C).be(`group`,`prepend`))},[y(e.$slots,`prepend`)],2)):I(`v-if`,!0),E(`div`,{ref_key:`wrapperRef`,ref:ge,class:L(f.value)},[I(` prefix slot `),e.$slots.prefix||e.prefixIcon?(j(),N(`span`,{key:0,class:L(P(C).e(`prefix`))},[E(`span`,{class:L(P(C).e(`prefix-inner`))},[y(e.$slots,`prefix`),e.prefixIcon?(j(),D(P(Q),{key:0,class:L(P(C).e(`icon`))},{default:S(()=>[(j(),D(b(e.prefixIcon)))]),_:1},8,[`class`])):I(`v-if`,!0)],2)],2)):I(`v-if`,!0),E(`input`,se({id:P(ne),ref_key:`input`,ref:T,class:P(C).e(`inner`)},P(u),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?M.value?`text`:`password`:e.type,disabled:P(x),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:t[0]||=(...e)=>P(Y)&&P(Y)(...e),onCompositionupdate:t[1]||=(...e)=>P(X)&&P(X)(...e),onCompositionend:t[2]||=(...e)=>P(Z)&&P(Z)(...e),onInput:J,onChange:Fe,onKeydown:Ke}),null,16,bt),I(` suffix slot `),Oe.value?(j(),N(`span`,{key:1,class:L(P(C).e(`suffix`))},[E(`span`,{class:L(P(C).e(`suffix-inner`))},[!W.value||!Te.value||!G.value?(j(),N(de,{key:0},[y(e.$slots,`suffix`),e.suffixIcon?(j(),D(P(Q),{key:0,class:L(P(C).e(`icon`))},{default:S(()=>[(j(),D(b(e.suffixIcon)))]),_:1},8,[`class`])):I(`v-if`,!0)],64)):I(`v-if`,!0),W.value?(j(),D(P(Q),{key:1,class:L([P(C).e(`icon`),P(C).e(`clear`)]),onMousedown:ue(P(me),[`prevent`]),onClick:Je},{default:S(()=>[(j(),D(b(e.clearIcon)))]),_:1},8,[`class`,`onMousedown`])):I(`v-if`,!0),Te.value?(j(),D(P(Q),{key:2,class:L([P(C).e(`icon`),P(C).e(`password`)]),onClick:Re,onMousedown:ue(P(me),[`prevent`]),onMouseup:ue(P(me),[`prevent`])},{default:S(()=>[(j(),D(b(Se.value)))]),_:1},8,[`class`,`onMousedown`,`onMouseup`])):I(`v-if`,!0),G.value?(j(),N(`span`,{key:3,class:L([P(C).e(`count`),P(C).is(`outside`,e.wordLimitPosition===`outside`)])},[E(`span`,{class:L(P(C).e(`count-inner`))},A(Ee.value)+` / `+A(e.maxlength),3)],2)):I(`v-if`,!0),V.value&&xe.value&&be.value?(j(),D(P(Q),{key:4,class:L([P(C).e(`icon`),P(C).e(`validateIcon`),P(C).is(`loading`,V.value===`validating`)])},{default:S(()=>[(j(),D(b(xe.value)))]),_:1},8,[`class`])):I(`v-if`,!0)],2)],2)):I(`v-if`,!0)],2),I(` append slot `),e.$slots.append?(j(),N(`div`,{key:1,class:L(P(C).be(`group`,`append`))},[y(e.$slots,`append`)],2)):I(`v-if`,!0)],64))],38))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue`]])),wt=class e extends He{constructor(e,n,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(n!==void 0&&r)this.setFlatCoordinates(n,e),this.ends_=r;else{let n=e,r=[],i=[];for(let e=0,a=n.length;e<a;++e){let a=n[e];t(r,a.getFlatCoordinates()),i.push(r.length)}let a=n.length===0?this.getLayout():n[0].getLayout();this.setFlatCoordinates(a,r),this.ends_=i}}appendLineString(e){t(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(e,t,n,r){return r<d(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Je(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ze(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,r))}getCoordinateAtM(e,t,n){return this.layout!=`XYM`&&this.layout!=`XYZM`||this.flatCoordinates.length===0?null:(t=t===void 0?!1:t,n=n===void 0?!1:n,Ce(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return Qe(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new it(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){let e=this.flatCoordinates,t=this.ends_,n=this.layout,r=[],i=0;for(let a=0,o=t.length;a<o;++a){let o=t[a],s=new it(e.slice(i,o),n);r.push(s),i=o}return r}getLength(){let e=this.ends_,t=0,n=0;for(let r=0,i=e.length;r<i;++r)n+=Fe(this.flatCoordinates,t,e[r],this.stride),t=e[r];return n}getFlatMidpoints(){let e=[],n=this.flatCoordinates,r=0,i=this.ends_,a=this.stride;for(let o=0,s=i.length;o<s;++o){let s=i[o];t(e,Y(n,r,s,a,.5)),r=s}return e}getSimplifiedGeometryInternal(t){let n=[],r=[];return n.length=Te(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,r),new e(n,`XY`,r)}getType(){return`MultiLineString`}intersectsExtent(e){return Oe(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||=[];let n=We(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}},Tt=class e extends He{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){t(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){let t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(e,t,n,r){if(r<d(this.getExtent(),e,t))return r;let i=this.flatCoordinates,a=this.stride;for(let o=0,s=i.length;o<s;o+=a){let s=U(e,t,i[o],i[o+1]);if(s<r){r=s;for(let e=0;e<a;++e)n[e]=i[o+e];n.length=a}}return r}getCoordinates(){return Ve(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){let t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new H(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){let e=this.flatCoordinates,t=this.layout,n=this.stride,r=[];for(let i=0,a=e.length;i<a;i+=n){let a=new H(e.slice(i,i+n),t);r.push(a)}return r}getType(){return`MultiPoint`}intersectsExtent(e){let t=this.flatCoordinates,n=this.stride;for(let r=0,i=t.length;r<i;r+=n){let n=t[r],i=t[r+1];if(a(e,n,i))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||=[],this.flatCoordinates.length=Ye(this.flatCoordinates,0,e,this.stride),this.changed()}},Et=class e extends He{constructor(e,n,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){let i=e,a=[],o=[];for(let e=0,n=i.length;e<n;++e){let n=i[e],r=a.length,s=n.getEnds();for(let e=0,t=s.length;e<t;++e)s[e]+=r;t(a,n.getFlatCoordinates()),o.push(s)}n=i.length===0?this.getLayout():i[0].getLayout(),e=a,r=o}n!==void 0&&r?(this.setFlatCoordinates(n,e),this.endss_=r):this.setCoordinates(e,n)}appendPolygon(e){let n;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),n=e.getEnds().slice(),this.endss_.push();else{let r=this.flatCoordinates.length;t(this.flatCoordinates,e.getFlatCoordinates()),n=e.getEnds().slice();for(let e=0,t=n.length;e<t;++e)n[e]+=r}this.endss_.push(n),this.changed()}clone(){let t=this.endss_.length,n=Array(t);for(let e=0;e<t;++e)n[e]=this.endss_[e].slice();let r=new e(this.flatCoordinates.slice(),this.layout,n);return r.applyProperties(this),r}closestPointXY(e,t,n,r){return r<d(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Be(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Re(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,r))}containsXY(e,t){return Ie(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return et(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e===void 0?t=this.flatCoordinates:(t=this.getOrientedFlatCoordinates().slice(),Ae(t,0,this.endss_,this.stride,e)),qe(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){let e=je(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Ne(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Tt(this.getFlatInteriorPoints().slice(),`XYM`)}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let e=this.flatCoordinates;G(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Ae(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let n=[],r=[];return n.length=Pe(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,r),new e(n,`XY`,r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{let n=this.endss_[e-1];t=n[n.length-1]}let n=this.endss_[e].slice(),r=n[n.length-1];if(t!==0)for(let e=0,r=n.length;e<r;++e)n[e]-=t;return new Me(this.flatCoordinates.slice(t,r),this.layout,n)}getPolygons(){let e=this.layout,t=this.flatCoordinates,n=this.endss_,r=[],i=0;for(let a=0,o=n.length;a<o;++a){let o=n[a].slice(),s=o[o.length-1];if(i!==0)for(let e=0,t=o.length;e<t;++e)o[e]-=i;let c=new Me(t.slice(i,s),e,o);r.push(c),i=s}return r}getType(){return`MultiPolygon`}intersectsExtent(e){return Ee(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||=[];let n=X(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{let e=n[n.length-1];this.flatCoordinates.length=e.length===0?0:e[e.length-1]}this.changed()}},Dt=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=J,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?W(t.dataProjection):this.readProjection(e);t.extent&&n&&n.getUnits()===`tile-pixels`&&(n=W(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return h()}readFeature(e,t){return h()}readFeatures(e,t){return h()}readGeometry(e,t){return h()}readProjection(e){return h()}writeFeature(e,t){return h()}writeFeatures(e,t){return h()}writeGeometry(e,t){return h()}};function Ot(e,t,n){let r=n?W(n.featureProjection):null,i=n?W(n.dataProjection):null,a=e;if(r&&i&&!Z(r,i)){t&&(a=e.clone());let n=t?r:i,o=t?i:r;n.getUnits()===`tile-pixels`?a.transform(n,o):a.applyTransform(q(n,o))}if(t&&n&&n.decimals!==void 0){let t=10**n.decimals;a===e&&(a=e.clone()),a.applyTransform(function(e){for(let n=0,r=e.length;n<r;++n)e[n]=Math.round(e[n]*t)/t;return e})}return a}var kt=class extends Dt{constructor(){super()}getType(){return`json`}readFeature(e,t){return this.readFeatureFromObject(At(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(At(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return h()}readFeaturesFromObject(e,t){return h()}readGeometry(e,t){return this.readGeometryFromObject(At(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return h()}readProjection(e){return this.readProjectionFromObject(At(e))}readProjectionFromObject(e){return h()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return h()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return h()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return h()}};function At(e){return typeof e==`string`?JSON.parse(e)||null:e===null?null:e}var jt=kt,Mt=class extends jt{constructor(e){super(),e||={},this.layerName_=e.layerName,this.layers_=e.layers?e.layers:null,this.dataProjection=W(e.dataProjection?e.dataProjection:`EPSG:4326`)}readFeaturesFromObject(e,t){if(e.type==`Topology`){let n=e,r,i=null,a=null;n.transform&&(r=n.transform,i=r.scale,a=r.translate);let o=n.arcs;r&&Ut(o,i,a);let s=[],c=n.objects,l=this.layerName_,u;for(let e in c)this.layers_&&!this.layers_.includes(e)||(c[e].type===`GeometryCollection`?(u=c[e],s.push.apply(s,Vt(u,o,i,a,l,e,t))):(u=c[e],s.push(Ht(u,o,i,a,l,e,t))));return s}return[]}readProjectionFromObject(e){return this.dataProjection}},Nt={Point:Ft,LineString:Lt,Polygon:zt,MultiPoint:It,MultiLineString:Rt,MultiPolygon:Bt};function Pt(e,t){let n=[],r;for(let i=0,a=e.length;i<a;++i)if(r=e[i],i>0&&n.pop(),r>=0){let e=t[r];for(let t=0,r=e.length;t<r;++t)n.push(e[t].slice(0))}else{let e=t[~r];for(let t=e.length-1;t>=0;--t)n.push(e[t].slice(0))}return n}function Ft(e,t,n){let r=e.coordinates;return t&&n&&Gt(r,t,n),new H(r)}function It(e,t,n){let r=e.coordinates;if(t&&n)for(let e=0,i=r.length;e<i;++e)Gt(r[e],t,n);return new Tt(r)}function Lt(e,t){return new it(Pt(e.arcs,t))}function Rt(e,t){let n=[];for(let r=0,i=e.arcs.length;r<i;++r)n[r]=Pt(e.arcs[r],t);return new wt(n)}function zt(e,t){let n=[];for(let r=0,i=e.arcs.length;r<i;++r)n[r]=Pt(e.arcs[r],t);return new Me(n)}function Bt(e,t){let n=[];for(let r=0,i=e.arcs.length;r<i;++r){let i=e.arcs[r],a=[];for(let e=0,n=i.length;e<n;++e)a[e]=Pt(i[e],t);n[r]=a}return new Et(n)}function Vt(e,t,n,r,i,a,o){let s=e.geometries,c=[];for(let e=0,l=s.length;e<l;++e)c[e]=Ht(s[e],t,n,r,i,a,o);return c}function Ht(e,t,n,r,i,a,o){let s=null,c=e.type;if(c){let i=Nt[c];s=c===`Point`||c===`MultiPoint`?i(e,n,r):i(e,t),s=Ot(s,!1,o)}let l=new J({geometry:s});e.id!==void 0&&l.setId(e.id);let u=e.properties;return i&&(u||={},u[i]=a),u&&l.setProperties(u,!0),l}function Ut(e,t,n){for(let r=0,i=e.length;r<i;++r)Wt(e[r],t,n)}function Wt(e,t,n){let r=0,i=0;for(let a=0,o=e.length;a<o;++a){let o=e[a];r+=o[0],i+=o[1],o[0]=r,o[1]=i,Gt(o,t,n)}}function Gt(e,t,n){e[0]=e[0]*t[0]+n[0],e[1]=e[1]*t[1]+n[1]}var Kt=Mt;const qt=(e,t)=>{typeof t==`object`&&(t=JSON.stringify(t)),window.sessionStorage.setItem(e,t)},Jt=e=>{let t=window.sessionStorage.getItem(e);try{return JSON.parse(t)}catch{return t}};var Yt={class:`projection-zones`},Xt={class:`header`},Zt={class:`tree`},Qt={class:`custom-tree-node`},$t=[`title`],en=R({__name:`index`,emits:[`popup`,`dataLoaded`],setup(e,{emit:t}){let n=T(`state`),r=T(`isMapCreated`),i=w(!1),a=w([]),o=Jt(`cgcs2000`);o?a.value=o:ve().then(e=>{a.value=e[0].children,qt(`cgcs2000`,e[0].children)});let s=null,c=null,l=[],u=[],d=[],ee=new Kt,f=[{url:`./data/中国_省.json`,type:`province`},{url:`./data/中国_市.json`,type:`city`},{url:`./data/中国_县.json`,type:`county`}],p=w(``),m=w(),te=t;B(p,e=>{m.value?.filter(e)}),B(r,e=>{e&&(s=n.map,g())});let h=(e,t)=>e?t.name.includes(e):!0;function g(){c=xe(s,void 0,`administrative-divisions`,100),Promise.allSettled(f.map(e=>ye(e.url).then(t=>({type:e.type,features:ee.readFeatures(t)})))).then(e=>{te(`dataLoaded`),e.forEach(e=>{if(e.status===`fulfilled`){let{type:t,features:n}=e.value;t===`province`?l=n:t===`city`?u=n:t===`county`&&(d=n)}else console.error(`[${e.reason.type}] 数据加载失败`,e.reason)})})}async function ne(e){let{gb:t}=x(e);String(t).endsWith(`0000`)?_(l,t):String(t).endsWith(`00`)||String(t).endsWith(`000`)?_(u,t):_(d,t)}function _(e,t){let n=e.find(e=>e.getProperties().gb===t);if(n instanceof J){let{name:e}=n.getProperties();c.getFeatures().length>0&&c.clear(),n.setStyle(be(`rgba(0, 0, 255, 0.2)`,`rgba(0, 0, 255)`,1.25,e)),c.addFeature(n),s.getView().fit(n.getGeometry(),{duration:300,padding:[20,340,20,450]})}}function v(){i.value=!i.value}return(e,t)=>{let n=rt,r=tt,o=nt,s=Ct,c=V;return j(),N(de,null,[k(pe,{name:`.el-zoom-in-center`},{default:S(()=>[ie(E(`div`,{class:`projection-zones-fold`,onClick:v},[k(n)],512),[[F,P(i)]])]),_:1}),k(pe,{name:`.el-zoom-in-center`},{default:S(()=>[ie(E(`div`,Yt,[E(`div`,Xt,[t[1]||=E(`div`,{class:`title`},`行政区划`,-1),E(`div`,{class:`fold`,onClick:v},[k(r)])]),k(o,{style:{margin:`10px 0`}}),k(s,{modelValue:P(p),"onUpdate:modelValue":t[0]||=e=>C(p)?p.value=e:null,style:{margin:`6px 0 10px`},placeholder:`请输入关键字`,clearable:``},null,8,[`modelValue`]),E(`div`,Zt,[k(c,{ref_key:`treeRef`,ref:m,data:P(a),"node-key":`gb`,props:{children:`children`,label:`name`},"default-expanded-keys":[],"filter-node-method":h,onNodeClick:ne,"highlight-current":``,"empty-text":`暂无数据`,"expand-on-click-node":!1},{default:S(({node:e,data:t})=>[E(`span`,Qt,[E(`span`,{title:e.label},A(e.label),9,$t)])]),_:1},8,[`data`])])],512),[[F,!P(i)]])]),_:1})],64)}}},[[`__scopeId`,`data-v-d3f38ee0`]]);export{en as t};