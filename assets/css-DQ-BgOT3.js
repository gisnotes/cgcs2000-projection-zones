import{$t as e,A as t,At as n,B as r,Cn as i,Dt as a,Et as o,F as s,Ft as c,H as l,Ht as u,I as d,J as f,Jt as p,K as m,L as h,Lt as g,M as _,Mt as v,N as y,O as b,Ot as x,P as S,Pt as C,Qt as w,R as T,Rt as E,Sn as D,St as O,T as k,Tt as ee,U as te,Vt as ne,W as re,Wt as ie,X as ae,Xt as oe,Z as se,Zt as ce,_t as le,at as ue,b as de,bt as fe,c as pe,cn as me,ct as he,d as ge,dn as _e,dt as ve,et as ye,fn as be,ft as A,gn as xe,gt as Se,hn as Ce,it as we,j as Te,jt as Ee,k as De,kt as Oe,l as ke,ln as Ae,lt as je,m as Me,mn as Ne,mt as Pe,nn as j,nt as Fe,o as Ie,ot as Le,pn as Re,pt as M,q as ze,qt as Be,rn as Ve,rt as He,s as Ue,tn as We,tt as Ge,u as Ke,ut as qe,v as Je,vt as Ye,w as Xe,wn as Ze,wt as Qe,xn as $e,xt as et,yt as tt,z as nt}from"./css-KsnpkUV8.js";import{C as rt,I as it,K as at,M as ot,O as st,P as ct,Q as lt,S as ut,T as dt,U as ft,V as pt,W as mt,Z as ht,_ as gt,_t,a as vt,b as yt,ct as bt,dt as xt,f as N,g as P,gt as St,h as Ct,ht as wt,it as F,j as I,k as Tt,l as Et,m as Dt,mt as Ot,p as L,r as kt,s as At,tt as jt,u as Mt,ut as Nt,v as Pt,w as Ft,y as R}from"./index-CqgWEGnx.js";var It=Symbol(),Lt=typeof global==`object`&&global&&global.Object===Object&&global,Rt=typeof self==`object`&&self&&self.Object===Object&&self,zt=Lt||Rt||Function(`return this`)(),Bt=zt.Symbol,Vt=Object.prototype,Ht=Vt.hasOwnProperty,Ut=Vt.toString,Wt=Bt?Bt.toStringTag:void 0;function Gt(e){var t=Ht.call(e,Wt),n=e[Wt];try{e[Wt]=void 0;var r=!0}catch{}var i=Ut.call(e);return r&&(t?e[Wt]=n:delete e[Wt]),i}var Kt=Gt,qt=Object.prototype.toString;function Jt(e){return qt.call(e)}var Yt=Jt,Xt=`[object Null]`,Zt=`[object Undefined]`,Qt=Bt?Bt.toStringTag:void 0;function $t(e){return e==null?e===void 0?Zt:Xt:Qt&&Qt in Object(e)?Kt(e):Yt(e)}var en=$t;function tn(e){return typeof e==`object`&&!!e}var nn=tn,rn=`[object Symbol]`;function an(e){return typeof e==`symbol`||nn(e)&&en(e)==rn}var on=an;function sn(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var cn=sn,ln=Array.isArray,un=1/0,dn=Bt?Bt.prototype:void 0,fn=dn?dn.toString:void 0;function pn(e){if(typeof e==`string`)return e;if(ln(e))return cn(e,pn)+``;if(on(e))return fn?fn.call(e):``;var t=e+``;return t==`0`&&1/e==-un?`-0`:t}var mn=pn;function hn(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}var gn=hn;function _n(e){return e}var vn=_n,yn=`[object AsyncFunction]`,bn=`[object Function]`,xn=`[object GeneratorFunction]`,Sn=`[object Proxy]`;function Cn(e){if(!gn(e))return!1;var t=en(e);return t==bn||t==xn||t==yn||t==Sn}var wn=Cn,Tn=zt[`__core-js_shared__`],En=function(){var e=/[^.]+$/.exec(Tn&&Tn.keys&&Tn.keys.IE_PROTO||``);return e?`Symbol(src)_1.`+e:``}();function Dn(e){return!!En&&En in e}var On=Dn,kn=Function.prototype.toString;function An(e){if(e!=null){try{return kn.call(e)}catch{}try{return e+``}catch{}}return``}var jn=An,Mn=/[\\^$.*+?()[\]{}|]/g,Nn=/^\[object .+?Constructor\]$/,Pn=Function.prototype,Fn=Object.prototype,In=Pn.toString,Ln=Fn.hasOwnProperty,Rn=RegExp(`^`+In.call(Ln).replace(Mn,`\\$&`).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,`$1.*?`)+`$`);function zn(e){return!gn(e)||On(e)?!1:(wn(e)?Rn:Nn).test(jn(e))}var Bn=zn;function Vn(e,t){return e?.[t]}var Hn=Vn;function Un(e,t){var n=Hn(e,t);return Bn(n)?n:void 0}var Wn=Un;function Gn(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Kn=Gn,qn=800,Jn=16,Yn=Date.now;function Xn(e){var t=0,n=0;return function(){var r=Yn(),i=Jn-(r-n);if(n=r,i>0){if(++t>=qn)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Zn=Xn;function Qn(e){return function(){return e}}var $n=Qn,er=function(){try{var e=Wn(Object,`defineProperty`);return e({},``,{}),e}catch{}}(),tr=Zn(er?function(e,t){return er(e,`toString`,{configurable:!0,enumerable:!1,value:$n(t),writable:!0})}:vn),nr=9007199254740991,rr=/^(?:0|[1-9]\d*)$/;function ir(e,t){var n=typeof e;return t??=nr,!!t&&(n==`number`||n!=`symbol`&&rr.test(e))&&e>-1&&e%1==0&&e<t}var ar=ir;function or(e,t,n){t==`__proto__`&&er?er(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var sr=or;function cr(e,t){return e===t||e!==e&&t!==t}var lr=cr,ur=Object.prototype.hasOwnProperty;function dr(e,t,n){var r=e[t];(!(ur.call(e,t)&&lr(r,n))||n===void 0&&!(t in e))&&sr(e,t,n)}var fr=dr,pr=Math.max;function mr(e,t,n){return t=pr(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=pr(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),Kn(e,this,s)}}var hr=mr,gr=9007199254740991;function _r(e){return typeof e==`number`&&e>-1&&e%1==0&&e<=gr}var vr=_r,yr=`[object Arguments]`;function br(e){return nn(e)&&en(e)==yr}var xr=br,Sr=Object.prototype,Cr=Sr.hasOwnProperty,wr=Sr.propertyIsEnumerable,Tr=xr(function(){return arguments}())?xr:function(e){return nn(e)&&Cr.call(e,`callee`)&&!wr.call(e,`callee`)},Er=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Dr=/^\w*$/;function Or(e,t){if(ln(e))return!1;var n=typeof e;return n==`number`||n==`symbol`||n==`boolean`||e==null||on(e)?!0:Dr.test(e)||!Er.test(e)||t!=null&&e in Object(t)}var kr=Or,Ar=Wn(Object,`create`);function jr(){this.__data__=Ar?Ar(null):{},this.size=0}var Mr=jr;function Nr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Pr=Nr,Fr=`__lodash_hash_undefined__`,Ir=Object.prototype.hasOwnProperty;function Lr(e){var t=this.__data__;if(Ar){var n=t[e];return n===Fr?void 0:n}return Ir.call(t,e)?t[e]:void 0}var Rr=Lr,zr=Object.prototype.hasOwnProperty;function Br(e){var t=this.__data__;return Ar?t[e]!==void 0:zr.call(t,e)}var Vr=Br,Hr=`__lodash_hash_undefined__`;function Ur(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ar&&t===void 0?Hr:t,this}var Wr=Ur;function Gr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Gr.prototype.clear=Mr,Gr.prototype.delete=Pr,Gr.prototype.get=Rr,Gr.prototype.has=Vr,Gr.prototype.set=Wr;var Kr=Gr;function qr(){this.__data__=[],this.size=0}var Jr=qr;function Yr(e,t){for(var n=e.length;n--;)if(lr(e[n][0],t))return n;return-1}var Xr=Yr,Zr=Array.prototype.splice;function Qr(e){var t=this.__data__,n=Xr(t,e);return n<0?!1:(n==t.length-1?t.pop():Zr.call(t,n,1),--this.size,!0)}var $r=Qr;function ei(e){var t=this.__data__,n=Xr(t,e);return n<0?void 0:t[n][1]}var ti=ei;function ni(e){return Xr(this.__data__,e)>-1}var ri=ni;function ii(e,t){var n=this.__data__,r=Xr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var ai=ii;function oi(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}oi.prototype.clear=Jr,oi.prototype.delete=$r,oi.prototype.get=ti,oi.prototype.has=ri,oi.prototype.set=ai;var si=oi,ci=Wn(zt,`Map`);function li(){this.size=0,this.__data__={hash:new Kr,map:new(ci||si),string:new Kr}}var ui=li;function di(e){var t=typeof e;return t==`string`||t==`number`||t==`symbol`||t==`boolean`?e!==`__proto__`:e===null}var fi=di;function pi(e,t){var n=e.__data__;return fi(t)?n[typeof t==`string`?`string`:`hash`]:n.map}var mi=pi;function hi(e){var t=mi(this,e).delete(e);return this.size-=t?1:0,t}var gi=hi;function _i(e){return mi(this,e).get(e)}var vi=_i;function yi(e){return mi(this,e).has(e)}var bi=yi;function xi(e,t){var n=mi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Si=xi;function Ci(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ci.prototype.clear=ui,Ci.prototype.delete=gi,Ci.prototype.get=vi,Ci.prototype.has=bi,Ci.prototype.set=Si;var wi=Ci,Ti=`Expected a function`;function Ei(e,t){if(typeof e!=`function`||t!=null&&typeof t!=`function`)throw TypeError(Ti);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Ei.Cache||wi),n}Ei.Cache=wi;var Di=Ei,Oi=500;function ki(e){var t=Di(e,function(e){return n.size===Oi&&n.clear(),e}),n=t.cache;return t}var Ai=ki,ji=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mi=/\\(\\)?/g,Ni=Ai(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(``),e.replace(ji,function(e,n,r,i){t.push(r?i.replace(Mi,`$1`):n||e)}),t});function Pi(e){return e==null?``:mn(e)}var Fi=Pi;function Ii(e,t){return ln(e)?e:kr(e,t)?[e]:Ni(Fi(e))}var Li=Ii,Ri=1/0;function zi(e){if(typeof e==`string`||on(e))return e;var t=e+``;return t==`0`&&1/e==-Ri?`-0`:t}var Bi=zi;function Vi(e,t){t=Li(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Bi(t[n++])];return n&&n==r?e:void 0}var Hi=Vi;function Ui(e,t,n){var r=e==null?void 0:Hi(e,t);return r===void 0?n:r}var Wi=Ui;function Gi(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Ki=Gi,qi=Bt?Bt.isConcatSpreadable:void 0;function Ji(e){return ln(e)||Tr(e)||!!(qi&&e&&e[qi])}var Yi=Ji;function Xi(e,t,n,r,i){var a=-1,o=e.length;for(n||=Yi,i||=[];++a<o;){var s=e[a];t>0&&n(s)?t>1?Xi(s,t-1,n,r,i):Ki(i,s):r||(i[i.length]=s)}return i}var Zi=Xi;function Qi(e){return e!=null&&e.length?Zi(e,1):[]}var $i=Qi;function ea(e){return tr(hr(e,void 0,$i),e+``)}var ta=ea;function na(e,t){return e!=null&&t in Object(e)}var ra=na;function ia(e,t,n){t=Li(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var o=Bi(t[r]);if(!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++r!=i?a:(i=e==null?0:e.length,!!i&&vr(i)&&ar(o,i)&&(ln(e)||Tr(e)))}var aa=ia;function oa(e,t){return e!=null&&aa(e,t,ra)}var sa=oa;function ca(e,t,n,r){if(!gn(e))return e;t=Li(t,e);for(var i=-1,a=t.length,o=a-1,s=e;s!=null&&++i<a;){var c=Bi(t[i]),l=n;if(c===`__proto__`||c===`constructor`||c===`prototype`)return e;if(i!=o){var u=s[c];l=r?r(u,c,s):void 0,l===void 0&&(l=gn(u)?u:ar(t[i+1])?[]:{})}fr(s,c,l),s=s[c]}return e}var la=ca;function ua(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=Hi(e,o);n(s,o)&&la(a,Li(o,e),s)}return a}var da=ua;function fa(e,t){return da(e,t,function(t,n){return sa(e,n)})}var pa=fa,ma=ta(function(e,t){return e==null?{}:pa(e,t)}),ha={current:0},ga=ht(0),_a=2e3,va=Symbol(`elZIndexContextKey`),ya=Symbol(`zIndexContextKey`),ba=e=>{let t=yt()?ut(va,ha):ha,n=e||(yt()?ut(ya,void 0):void 0),r=N(()=>{let e=F(n);return xe(e)?e:_a}),i=N(()=>r.value+ga.value);return!be&&!ut(va)&&Ve(`ZIndexInjection`,`Looks like you are using server rendering, you must provide a z-index provider to ensure the hydration process to be succeed
usage: app.provide(ZINDEX_INJECTION_KEY, { current: 0 })`),{initialZIndex:r,currentZIndex:i,nextZIndex:()=>(t.current++,ga.value=t.current,i.value)}},xa={name:`en`,el:{breadcrumb:{label:`Breadcrumb`},colorpicker:{confirm:`OK`,clear:`Clear`,defaultLabel:`color picker`,description:`current color is {color}. press enter to select a new color.`,alphaLabel:`pick alpha value`,alphaDescription:`alpha {alpha}, current color is {color}`,hueLabel:`pick hue value`,hueDescription:`hue {hue}, current color is {color}`,svLabel:`pick saturation and brightness value`,svDescription:`saturation {saturation}, brightness {brightness}, current color is {color}`,predefineDescription:`select {value} as the color`},datepicker:{now:`Now`,today:`Today`,cancel:`Cancel`,clear:`Clear`,confirm:`OK`,dateTablePrompt:`Use the arrow keys and enter to select the day of the month`,monthTablePrompt:`Use the arrow keys and enter to select the month`,yearTablePrompt:`Use the arrow keys and enter to select the year`,selectedDate:`Selected date`,selectDate:`Select date`,selectTime:`Select time`,startDate:`Start Date`,startTime:`Start Time`,endDate:`End Date`,endTime:`End Time`,prevYear:`Previous Year`,nextYear:`Next Year`,prevMonth:`Previous Month`,nextMonth:`Next Month`,year:``,month1:`January`,month2:`February`,month3:`March`,month4:`April`,month5:`May`,month6:`June`,month7:`July`,month8:`August`,month9:`September`,month10:`October`,month11:`November`,month12:`December`,weeks:{sun:`Sun`,mon:`Mon`,tue:`Tue`,wed:`Wed`,thu:`Thu`,fri:`Fri`,sat:`Sat`},weeksFull:{sun:`Sunday`,mon:`Monday`,tue:`Tuesday`,wed:`Wednesday`,thu:`Thursday`,fri:`Friday`,sat:`Saturday`},months:{jan:`Jan`,feb:`Feb`,mar:`Mar`,apr:`Apr`,may:`May`,jun:`Jun`,jul:`Jul`,aug:`Aug`,sep:`Sep`,oct:`Oct`,nov:`Nov`,dec:`Dec`}},inputNumber:{decrease:`decrease number`,increase:`increase number`},select:{loading:`Loading`,noMatch:`No matching data`,noData:`No data`,placeholder:`Select`},mention:{loading:`Loading`},dropdown:{toggleDropdown:`Toggle Dropdown`},cascader:{noMatch:`No matching data`,loading:`Loading`,placeholder:`Select`,noData:`No data`},pagination:{goto:`Go to`,pagesize:`/page`,total:`Total {total}`,pageClassifier:``,page:`Page`,prev:`Go to previous page`,next:`Go to next page`,currentPage:`page {pager}`,prevPages:`Previous {pager} pages`,nextPages:`Next {pager} pages`,deprecationWarning:`Deprecated usages detected, please refer to the el-pagination documentation for more details`},dialog:{close:`Close this dialog`},drawer:{close:`Close this dialog`},messagebox:{title:`Message`,confirm:`OK`,cancel:`Cancel`,error:`Illegal input`,close:`Close this dialog`},upload:{deleteTip:`press delete to remove`,delete:`Delete`,preview:`Preview`,continue:`Continue`},slider:{defaultLabel:`slider between {min} and {max}`,defaultRangeStartLabel:`pick start value`,defaultRangeEndLabel:`pick end value`},table:{emptyText:`No Data`,confirmFilter:`Confirm`,resetFilter:`Reset`,clearFilter:`All`,sumText:`Sum`,selectAllLabel:`Select all rows`,selectRowLabel:`Select this row`,expandRowLabel:`Expand this row`,collapseRowLabel:`Collapse this row`,sortLabel:`Sort by {column}`,filterLabel:`Filter by {column}`},tag:{close:`Close this tag`},tour:{next:`Next`,previous:`Previous`,finish:`Finish`,close:`Close this dialog`},tree:{emptyText:`No Data`},transfer:{noMatch:`No matching data`,noData:`No data`,titles:[`List 1`,`List 2`],filterPlaceholder:`Enter keyword`,noCheckedFormat:`{total} items`,hasCheckedFormat:`{checked}/{total} checked`},image:{error:`FAILED`},pageHeader:{title:`Back`},popconfirm:{confirmButtonText:`Yes`,cancelButtonText:`No`},carousel:{leftArrow:`Carousel arrow left`,rightArrow:`Carousel arrow right`,indicator:`Carousel switch to index {index}`}}},Sa=e=>(t,n)=>Ca(t,n,F(e)),Ca=(e,t,n)=>Wi(n,e,e).replace(/\{(\w+)\}/g,(e,n)=>`${t?.[n]??`{${n}}`}`),wa=e=>({lang:N(()=>F(e).name),locale:at(e)?e:ht(e),t:Sa(e)}),Ta=Symbol(`localeContextKey`),Ea=e=>{let t=e||ut(Ta,ht());return wa(N(()=>t.value||xa))},Da=Symbol(`emptyValuesContextKey`),Oa=We({emptyValues:Array,valueOnClear:{type:j([String,Number,Boolean,Function]),default:void 0,validator:e=>(e=xt(e)?e():e,Nt(e)?e.every(e=>!e):!e)}}),ka=ht();function Aa(e,t=void 0){let n=yt()?ut(It,ka):ka;return e?N(()=>n.value?.[e]??t):n}function ja(e,t){let n=Aa(),r=Ze(e,N(()=>n.value?.namespace||`el`)),i=Ea(N(()=>n.value?.locale)),a=ba(N(()=>n.value?.zIndex||2e3)),o=N(()=>F(t)||n.value?.size||``);return Ma(N(()=>F(n)||{})),{ns:r,locale:i,zIndex:a,size:o}}var Ma=(e,t,n=!1)=>{let r=!!yt(),i=r?Aa():void 0,a=t?.provide??(r?ot:void 0);if(!a){Ve(`provideGlobalConfig`,`provideGlobalConfig() can only be used inside setup().`);return}let o=N(()=>{let t=F(e);return i?.value?Na(i.value,t):t});return a(It,o),a(Ta,N(()=>o.value.locale)),a(D,N(()=>o.value.namespace)),a(ya,N(()=>o.value.zIndex)),a(w,{size:N(()=>o.value.size||``)}),a(Da,N(()=>({emptyValues:o.value.emptyValues,valueOnClear:o.value.valueOnClear}))),(n||!ka.value)&&(ka.value=o.value),o},Na=(e,t)=>{let n=[...new Set([...ce(e),...ce(t)])],r={};for(let i of n)r[i]=t[i]===void 0?e[i]:t[i];return r},Pa=`update:modelValue`,Fa=`change`,Ia=`input`,La=Be(oe(R({name:`ElIcon`,inheritAttrs:!1,__name:`icon`,props:We({size:{type:j([Number,String])},color:{type:String}}),setup(e){let t=e,n=Ze(`icon`),r=N(()=>{let{size:e,color:n}=t,r=ie(e);return!r&&!n?{}:{fontSize:r,"--color":n}});return(e,t)=>(I(),P(`i`,Ft({class:F(n).b(),style:r.value},e.$attrs),[ct(e.$slots,`default`)],16))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue`]])),Ra=R({name:`ArrowLeft`,__name:`arrow-left`,setup(e){return(e,t)=>(I(),P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[L(`path`,{fill:`currentColor`,d:`M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.59 30.59 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.59 30.59 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0`})]))}}),za=R({name:`ArrowRight`,__name:`arrow-right`,setup(e){return(e,t)=>(I(),P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[L(`path`,{fill:`currentColor`,d:`M340.864 149.312a30.59 30.59 0 0 0 0 42.752L652.736 512 340.864 831.872a30.59 30.59 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z`})]))}}),Ba=R({name:`CaretRight`,__name:`caret-right`,setup(e){return(e,t)=>(I(),P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[L(`path`,{fill:`currentColor`,d:`M384 192v640l384-320.064z`})]))}}),Va=R({name:`CircleCheck`,__name:`circle-check`,setup(e){return(e,t)=>(I(),P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[L(`path`,{fill:`currentColor`,d:`M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896`}),L(`path`,{fill:`currentColor`,d:`M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752z`})]))}}),Ha=R({name:`CircleCloseFilled`,__name:`circle-close-filled`,setup(e){return(e,t)=>(I(),P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[L(`path`,{fill:`currentColor`,d:`M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z`})]))}}),Ua=R({name:`CircleClose`,__name:`circle-close`,setup(e){return(e,t)=>(I(),P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[L(`path`,{fill:`currentColor`,d:`m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z`}),L(`path`,{fill:`currentColor`,d:`M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896`})]))}}),Wa=R({name:`Close`,__name:`close`,setup(e){return(e,t)=>(I(),P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[L(`path`,{fill:`currentColor`,d:`M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z`})]))}}),Ga=R({name:`Hide`,__name:`hide`,setup(e){return(e,t)=>(I(),P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[L(`path`,{fill:`currentColor`,d:`M876.8 156.8c0-9.6-3.2-16-9.6-22.4s-12.8-9.6-22.4-9.6-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176S0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4s3.2 16 9.6 22.4 12.8 9.6 22.4 9.6 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4m-646.4 528Q115.2 579.2 76.8 512q43.2-72 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4m140.8-96Q352 555.2 352 512c0-44.8 16-83.2 48-112s67.2-48 112-48c28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6q-43.2 72-153.6 172.8c-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176S1024 528 1024 512s-48.001-73.6-134.401-176`}),L(`path`,{fill:`currentColor`,d:`M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112s-67.2 48-112 48`})]))}}),Ka=R({name:`InfoFilled`,__name:`info-filled`,setup(e){return(e,t)=>(I(),P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[L(`path`,{fill:`currentColor`,d:`M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.99 12.99 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z`})]))}}),qa=R({name:`Loading`,__name:`loading`,setup(e){return(e,t)=>(I(),P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[L(`path`,{fill:`currentColor`,d:`M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248m452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248M828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0`})]))}}),Ja=R({name:`Plus`,__name:`plus`,setup(e){return(e,t)=>(I(),P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[L(`path`,{fill:`currentColor`,d:`M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z`})]))}}),Ya=R({name:`Refresh`,__name:`refresh`,setup(e){return(e,t)=>(I(),P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[L(`path`,{fill:`currentColor`,d:`M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z`})]))}}),Xa=R({name:`SuccessFilled`,__name:`success-filled`,setup(e){return(e,t)=>(I(),P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[L(`path`,{fill:`currentColor`,d:`M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.27 38.27 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z`})]))}}),Za=R({name:`View`,__name:`view`,setup(e){return(e,t)=>(I(),P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[L(`path`,{fill:`currentColor`,d:`M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288m0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.19 160.19 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160`})]))}}),Qa=R({name:`WarningFilled`,__name:`warning-filled`,setup(e){return(e,t)=>(I(),P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[L(`path`,{fill:`currentColor`,d:`M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.43 58.43 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.43 58.43 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4`})]))}}),$a=j([String,Object,Function]),eo={Close:Wa,SuccessFilled:Xa,InfoFilled:Ka,WarningFilled:Qa,CircleCloseFilled:Ha},to={primary:Ka,success:Xa,warning:Qa,error:Ha,info:Ka},no={validating:qa,success:Va,error:Ua},ro=()=>be&&/firefox/i.test(window.navigator.userAgent),io=()=>be&&/android/i.test(window.navigator.userAgent),ao=e=>e,oo=We({ariaLabel:String,ariaOrientation:{type:String,values:[`horizontal`,`vertical`,`undefined`]},ariaControls:String}),so=e=>ma(oo,e),co={prefix:Math.floor(Math.random()*1e4),current:0},lo=Symbol(`elIdInjection`),uo=()=>yt()?ut(lo,co):co,fo=e=>{let t=uo();!be&&t===co&&Ve(`IdInjection`,`Looks like you are using server rendering, you must provide a id provider to ensure the hydration process to be succeed
usage: app.provide(ID_INJECTION_KEY, {
  prefix: number,
  current: number,
})`);let n=i();return _e(()=>F(e)||`${n.value}-id-${t.prefix}-${t.current++}`)},po=()=>({form:ut(ne,void 0),formItem:ut(u,void 0)}),mo=(e,{formItemContext:t,disableIdGeneration:n,disableIdManagement:r})=>{n||=ht(!1),r||=ht(!1);let i=yt(),a=()=>{let e=i?.parent;for(;e;){if(e.type.name===`ElFormItem`)return!1;if(e.type.name===`ElLabelWrap`)return!0;e=e.parent}return!1},o=ht(),s,c=N(()=>!!(!(e.label||e.ariaLabel)&&t&&t.inputIds&&t.inputIds?.length<=1));return st(()=>{s=pt([jt(e,`id`),n],([e,n])=>{let i=e??(n?void 0:fo().value);i!==o.value&&(t?.removeInputId&&!a()&&(o.value&&t.removeInputId(o.value),!r?.value&&!n&&i&&t.addInputId(i)),o.value=i)},{immediate:!0})}),Tt(()=>{s&&s(),t?.removeInputId&&o.value&&t.removeInputId(o.value)}),{isLabeledByFormItem:c,inputId:o}},ho={tab:`Tab`,enter:`Enter`,space:`Space`,left:`ArrowLeft`,up:`ArrowUp`,right:`ArrowRight`,down:`ArrowDown`,esc:`Escape`,delete:`Delete`,backspace:`Backspace`,numpadEnter:`NumpadEnter`,pageUp:`PageUp`,pageDown:`PageDown`,home:`Home`,end:`End`},go=e=>{if(e.code&&e.code!==`Unidentified`)return e.code;let t=_o(e);if(t){if(Object.values(ho).includes(t))return t;switch(t){case` `:return ho.space;default:return``}}return``},_o=e=>{let t=e.key&&e.key!==`Unidentified`?e.key:``;if(!t&&e.type===`keyup`&&io()){let n=e.target;t=n.value.charAt(n.selectionStart-1)}return t},vo=Be(oe(R({name:`ElBadge`,__name:`badge`,props:We({value:{type:[String,Number],default:``},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:[`primary`,`success`,`warning`,`info`,`danger`],default:`danger`},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:j([String,Object,Array])},offset:{type:j(Array),default:[0,0]},badgeClass:{type:String}}),setup(e,{expose:t}){let n=e,r=Ze(`badge`),i=N(()=>n.isDot?``:xe(n.value)&&xe(n.max)&&n.max<n.value?`${n.max}+`:`${n.value}`),a=N(()=>[{backgroundColor:n.color,marginRight:ie(-n.offset[0]),marginTop:ie(n.offset[1])},n.badgeStyle??{}]);return t({content:i}),(e,t)=>(I(),P(`div`,{class:wt(F(r).b())},[ct(e.$slots,`default`),Pt(kt,{name:`${F(r).namespace.value}-zoom-in-center`,persisted:``},{default:ft(()=>[mt(L(`sup`,{class:wt([F(r).e(`content`),F(r).em(`content`,e.type),F(r).is(`fixed`,!!e.$slots.default),F(r).is(`dot`,e.isDot),F(r).is(`hide-zero`,!e.showZero&&e.value===0),e.badgeClass]),style:St(a.value)},[ct(e.$slots,`content`,{value:i.value},()=>[gt(_t(i.value),1)])],6),[[At,!e.hidden&&(i.value||e.isDot||e.$slots.content)]])]),_:3},8,[`name`])],2))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue`]])),yo=We({a11y:{type:Boolean,default:!0},locale:{type:j(Object)},size:e,button:{type:j(Object)},card:{type:j(Object)},dialog:{type:j(Object)},link:{type:j(Object)},experimentalFeatures:{type:j(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:j(Object)},zIndex:Number,namespace:{type:String,default:`el`},...Oa}),z={placement:`top`};R({name:`ElConfigProvider`,props:yo,setup(e,{slots:t}){let n=Ma(e);return pt(()=>e.message,e=>{Object.assign(z,n?.value?.message??{},e??{})},{immediate:!0,deep:!0}),()=>ct(t,`default`,{config:n?.value})}});var bo=[`primary`,`success`,`info`,`warning`,`error`],xo=[`top`,`top-left`,`top-right`,`bottom`,`bottom-left`,`bottom-right`],B=ao({customClass:``,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:``,message:``,onClose:void 0,showClose:!1,type:`info`,plain:!1,offset:16,placement:void 0,zIndex:0,grouping:!1,repeatNum:1,appendTo:be?document.body:void 0}),So=We({customClass:{type:String,default:B.customClass},dangerouslyUseHTMLString:{type:Boolean,default:B.dangerouslyUseHTMLString},duration:{type:Number,default:B.duration},icon:{type:$a,default:B.icon},id:{type:String,default:B.id},message:{type:j([String,Object,Function]),default:B.message},onClose:{type:j(Function),default:B.onClose},showClose:{type:Boolean,default:B.showClose},type:{type:String,values:bo,default:B.type},plain:{type:Boolean,default:B.plain},offset:{type:Number,default:B.offset},placement:{type:String,values:xo,default:B.placement},zIndex:{type:Number,default:B.zIndex},grouping:{type:Boolean,default:B.grouping},repeatNum:{type:Number,default:B.repeatNum}}),Co={destroy:()=>!0},wo=lt({}),To=e=>(wo[e]||(wo[e]=lt([])),wo[e]),Eo=(e,t)=>{let n=wo[t]||[],r=n.findIndex(t=>t.id===e),i=n[r],a;return r>0&&(a=n[r-1]),{current:i,prev:a}},Do=(e,t)=>{let{prev:n}=Eo(e,t);return n?n.vm.exposed.bottom.value:0},Oo=(e,t,n)=>(wo[n]||[]).findIndex(t=>t.id===e)>0?16:t,ko=[`id`],Ao=[`innerHTML`],jo=oe(R({name:`ElMessage`,__name:`message`,props:So,emits:Co,setup(e,{expose:t,emit:n}){let{Close:r}=eo,i=e,a=n,o=ht(!1),{ns:s,zIndex:c}=ja(`message`),{currentZIndex:l,nextZIndex:u}=c,d=ht(),f=ht(!1),p=ht(0),m,h=N(()=>i.type?i.type===`error`?`danger`:i.type:`info`),g=N(()=>{let e=i.type;return{[s.bm(`icon`,e)]:e&&to[e]}}),_=N(()=>i.icon||to[i.type]||``),v=N(()=>i.placement||`top`),y=N(()=>Do(i.id,v.value)),b=N(()=>Oo(i.id,i.offset,v.value)+y.value),x=N(()=>p.value+b.value),S=N(()=>v.value.includes(`left`)?s.is(`left`):v.value.includes(`right`)?s.is(`right`):s.is(`center`)),C=N(()=>v.value.startsWith(`top`)?`top`:`bottom`),w=N(()=>({[C.value]:`${b.value}px`,zIndex:l.value}));function T(){i.duration!==0&&({stop:m}=Re(()=>{D()},i.duration))}function E(){m?.()}function D(){f.value=!1,dt(()=>{var e;o.value||((e=i.onClose)==null||e.call(i),a(`destroy`))})}function O(e){go(e)===ho.esc&&D()}return st(()=>{T(),u(),f.value=!0}),pt(()=>i.repeatNum,()=>{E(),T()}),me(document,`keydown`,O),Ae(d,()=>{p.value=d.value.getBoundingClientRect().height}),t({visible:f,bottom:x,close:D}),(e,t)=>(I(),Dt(kt,{name:F(s).b(`fade`),onBeforeEnter:t[0]||=e=>o.value=!0,onBeforeLeave:e.onClose,onAfterLeave:t[1]||=t=>e.$emit(`destroy`),persisted:``},{default:ft(()=>[mt(L(`div`,{id:e.id,ref_key:`messageRef`,ref:d,class:wt([F(s).b(),{[F(s).m(e.type)]:e.type},F(s).is(`closable`,e.showClose),F(s).is(`plain`,e.plain),F(s).is(`bottom`,C.value===`bottom`),S.value,e.customClass]),style:St(w.value),role:`alert`,onMouseenter:E,onMouseleave:T},[e.repeatNum>1?(I(),Dt(F(vo),{key:0,value:e.repeatNum,type:h.value,class:wt(F(s).e(`badge`))},null,8,[`value`,`type`,`class`])):Ct(`v-if`,!0),_.value?(I(),Dt(F(La),{key:1,class:wt([F(s).e(`icon`),g.value])},{default:ft(()=>[(I(),Dt(it(_.value)))]),_:1},8,[`class`])):Ct(`v-if`,!0),ct(e.$slots,`default`,{},()=>[e.dangerouslyUseHTMLString?(I(),P(Mt,{key:1},[Ct(` Caution here, message could've been compromised, never use user's input as message `),L(`p`,{class:wt(F(s).e(`content`)),innerHTML:e.message},null,10,Ao)],2112)):(I(),P(`p`,{key:0,class:wt(F(s).e(`content`))},_t(e.message),3))]),e.showClose?(I(),Dt(F(La),{key:2,class:wt(F(s).e(`closeBtn`)),onClick:Et(D,[`stop`])},{default:ft(()=>[Pt(F(r))]),_:1},8,[`class`])):Ct(`v-if`,!0)],46,ko),[[At,f.value]])]),_:3},8,[`name`,`onBeforeLeave`]))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue`]]),Mo=1,No=e=>{if(!e.appendTo)e.appendTo=document.body;else if(Ot(e.appendTo)){let t=document.querySelector(e.appendTo);Ce(t)||(Ve(`ElMessage`,`the appendTo option is not an HTMLElement. Falling back to document.body.`),t=document.body),e.appendTo=t}},Po=e=>{!e.placement&&Ot(z.placement)&&z.placement&&(e.placement=z.placement),e.placement||=`top`,xo.includes(e.placement)||(Ve(`ElMessage`,`Invalid placement: ${e.placement}. Falling back to 'top'.`),e.placement=`top`)},Fo=e=>{let t=!e||Ot(e)||rt(e)||xt(e)?{message:e}:e,n={...B,...t};return No(n),Po(n),Ne(z.grouping)&&!n.grouping&&(n.grouping=z.grouping),xe(z.duration)&&n.duration===3e3&&(n.duration=z.duration),xe(z.offset)&&n.offset===16&&(n.offset=z.offset),Ne(z.showClose)&&!n.showClose&&(n.showClose=z.showClose),Ne(z.plain)&&!n.plain&&(n.plain=z.plain),n},Io=e=>{let t=wo[e.props.placement||`top`],n=t.indexOf(e);if(n===-1)return;t.splice(n,1);let{handler:r}=e;r.close()},Lo=({appendTo:e,...t},n)=>{let r=`message_${Mo++}`,i=t.onClose,a=document.createElement(`div`),o={...t,id:r,onClose:()=>{i?.(),Io(l)},onDestroy:()=>{vt(null,a)}},s=Pt(jo,o,xt(o.message)||rt(o.message)?{default:xt(o.message)?o.message:()=>o.message}:null);s.appContext=n||Ro._context,vt(s,a),e.appendChild(a.firstElementChild);let c=s.component,l={id:r,vnode:s,vm:c,handler:{close:()=>{c.exposed.close()}},props:s.component.props};return l},Ro=(e={},t)=>{if(!be)return{close:()=>void 0};let n=Fo(e),r=To(n.placement||`top`);if(n.grouping&&r.length){let e=r.find(({vnode:e})=>e.props?.message===n.message);if(e)return e.props.repeatNum+=1,e.props.type=n.type,e.handler}if(xe(z.max)&&r.length>=z.max)return{close:()=>void 0};let i=Lo(n,t);return r.push(i),i.handler};bo.forEach(e=>{Ro[e]=(t={},n)=>Ro({...Fo(t),type:e},n)});function zo(e){for(let t in wo)if(bt(wo,t)){let n=[...wo[t]];for(let t of n)(!e||e===t.props.type)&&t.handler.close()}}function Bo(e){wo[e]&&[...wo[e]].forEach(e=>e.handler.close())}Ro.closeAll=zo,Ro.closeAllByPlacement=Bo,Ro._context=null;var Vo=p(Ro,`$message`);function V(e,t){if(!e)throw Error(t)}var Ho=class e extends ve{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_=`geometry`,this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry==`function`){let t=e;this.setGeometry(t)}else{let t=e;this.setProperties(t)}}clone(){let t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());let n=this.getGeometry();n&&t.setGeometry(n.clone());let r=this.getStyle();return r&&t.setStyle(r),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&=(Ye(this.geometryChangeKey_),null);let e=this.getGeometry();e&&(this.geometryChangeKey_=Se(e,g.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Uo(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function Uo(e){if(typeof e==`function`)return e;let t;return Array.isArray(e)?t=e:(V(typeof e.getZIndex==`function`,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[e]),function(){return t}}var Wo=Ho,Go={info:1,warn:2,error:3,none:4},Ko=Go.info;function qo(...e){Ko>Go.warn||console.warn(...e)}function H(e,t,n){return Math.min(Math.max(e,t),n)}function Jo(e,t,n,r,i,a){let o=i-n,s=a-r;if(o!==0||s!==0){let c=((e-n)*o+(t-r)*s)/(o*o+s*s);c>1?(n=i,r=a):c>0&&(n+=o*c,r+=s*c)}return Yo(e,t,n,r)}function Yo(e,t,n,r){let i=n-e,a=r-t;return i*i+a*a}function Xo(e){let t=e.length;for(let n=0;n<t;n++){let r=n,i=Math.abs(e[n][n]);for(let a=n+1;a<t;a++){let t=Math.abs(e[a][n]);t>i&&(i=t,r=a)}if(i===0)return null;let a=e[r];e[r]=e[n],e[n]=a;for(let r=n+1;r<t;r++){let i=-e[r][n]/e[n][n];for(let a=n;a<t+1;a++)n==a?e[r][a]=0:e[r][a]+=i*e[n][a]}}let n=Array(t);for(let r=t-1;r>=0;r--){n[r]=e[r][t]/e[r][r];for(let i=r-1;i>=0;i--)e[i][t]-=e[i][r]*n[r]}return n}function Zo(e){return e*180/Math.PI}function Qo(e){return e*Math.PI/180}function $o(e,t){let n=e%t;return n*t<0?n+t:n}function es(e,t,n){return e+n*(t-e)}function ts(e,t){let n=10**t;return Math.round(e*n)/n}function ns(e,t){return Math.floor(ts(e,t))}function rs(e,t){return Math.ceil(ts(e,t))}function is(e,t,n){if(e>=t&&e<n)return e;let r=n-t;return((e-t)%r+r)%r+t}function as(e,t,n){let r=n===void 0?``+e:e.toFixed(n),i=r.indexOf(`.`);return i=i===-1?r.length:i,i>t?r:Array(1+t-i).join(`0`)+r}function os(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function ss(e){return(function(t){return ps(t,e)})}function cs(e,t,n){let r=$o(t+180,360)-180,i=Math.abs(3600*r),a=n||0,o=Math.floor(i/3600),s=Math.floor((i-o*3600)/60),c=ts(i-o*3600-s*60,a);c>=60&&(c=0,s+=1),s>=60&&(s=0,o+=1);let l=o+`°`;return(s!==0||c!==0)&&(l+=` `+as(s,2)+`′`),c!==0&&(l+=` `+as(c,2,a)+`″`),r!==0&&(l+=` `+e.charAt(r<0?1:0)),l}function ls(e,t,n){return e?t.replace(`{x}`,e[0].toFixed(n)).replace(`{y}`,e[1].toFixed(n)):``}function us(e,t){let n=!0;for(let r=e.length-1;r>=0;--r)if(e[r]!=t[r]){n=!1;break}return n}function ds(e,t){let n=Math.cos(t),r=Math.sin(t),i=e[0]*n-e[1]*r,a=e[1]*n+e[0]*r;return e[0]=i,e[1]=a,e}function fs(e,t){return e[0]*=t,e[1]*=t,e}function ps(e,t){return ls(e,`{x}, {y}`,t)}function ms(e,t){if(t.canWrapX()){let n=Fe(t.getExtent()),r=hs(e,t,n);r&&(e[0]-=r*n)}return e}function hs(e,t,n){let r=t.getExtent(),i=0;return t.canWrapX()&&(e[0]<r[0]||e[0]>r[2])&&(n||=Fe(r),i=Math.floor((e[0]-r[0])/n)),i}const gs={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var _s=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent===void 0?null:e.extent,this.worldExtent_=e.worldExtent===void 0?null:e.worldExtent,this.axisOrientation_=e.axisOrientation===void 0?`enu`:e.axisOrientation,this.global_=e.global===void 0?!1:e.global,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||gs[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const vs=6378137,ys=Math.PI*vs,bs=[-ys,-ys,ys,ys],xs=[-180,-85,180,85],Ss=vs*Math.log(Math.tan(Math.PI/2));var Cs=class extends _s{constructor(e){super({code:e,units:`m`,extent:bs,global:!0,worldExtent:xs,getPointResolution:function(e,t){return e/Math.cosh(t[1]/vs)}})}};const ws=[new Cs(`EPSG:3857`),new Cs(`EPSG:102100`),new Cs(`EPSG:102113`),new Cs(`EPSG:900913`),new Cs(`http://www.opengis.net/def/crs/EPSG/0/3857`),new Cs(`http://www.opengis.net/gml/srs/epsg.xml#3857`)];function Ts(e,t,n,r){let i=e.length;n=n>1?n:2,r??=n,t===void 0&&(t=n>2?e.slice():Array(i));for(let n=0;n<i;n+=r){t[n]=ys*e[n]/180;let r=vs*Math.log(Math.tan(Math.PI*(+e[n+1]+90)/360));r>Ss?r=Ss:r<-Ss&&(r=-Ss),t[n+1]=r}return t}function Es(e,t,n,r){let i=e.length;n=n>1?n:2,r??=n,t===void 0&&(t=n>2?e.slice():Array(i));for(let n=0;n<i;n+=r)t[n]=180*e[n]/ys,t[n+1]=360*Math.atan(Math.exp(e[n+1]/vs))/Math.PI-90;return t}const Ds=[-180,-90,180,90],Os=Math.PI*6378137/180;var ks=class extends _s{constructor(e,t){super({code:e,units:`degrees`,extent:Ds,axisOrientation:t,global:!0,metersPerUnit:Os,worldExtent:Ds})}};const As=[new ks(`CRS:84`),new ks(`EPSG:4326`,`neu`),new ks(`urn:ogc:def:crs:OGC:1.3:CRS84`),new ks(`urn:ogc:def:crs:OGC:2:84`),new ks(`http://www.opengis.net/def/crs/OGC/1.3/CRS84`),new ks(`http://www.opengis.net/gml/srs/epsg.xml#4326`,`neu`),new ks(`http://www.opengis.net/def/crs/EPSG/0/4326`,`neu`)];var js={};function Ms(e){return js[e]||js[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,`EPSG:$3`)]||null}function Ns(e,t){js[e]=t}var Ps={};function Fs(e,t,n){let r=e.getCode(),i=t.getCode();r in Ps||(Ps[r]={}),Ps[r][i]=n}function Is(e,t){return e in Ps&&t in Ps[e]?Ps[e][t]:null}var Ls=.9996,Rs=.00669438,zs=Rs*Rs,Bs=zs*Rs,Vs=Rs/(1-Rs),Hs=Math.sqrt(1-Rs),Us=(1-Hs)/(1+Hs),Ws=Us*Us,Gs=Ws*Us,Ks=Gs*Us,qs=Ks*Us,Js=1-Rs/4-3*zs/64-5*Bs/256,Ys=3*Rs/8+3*zs/32+45*Bs/1024,Xs=15*zs/256+45*Bs/1024,Zs=35*Bs/3072,Qs=3/2*Us-27/32*Gs+269/512*qs,$s=21/16*Ws-55/32*Ks,ec=151/96*Gs-417/128*qs,tc=1097/512*Ks,nc=6378137;function rc(e,t,n){let r=e-5e5,i=(n.north?t:t-1e7)/Ls/(nc*Js),a=i+Qs*Math.sin(2*i)+$s*Math.sin(4*i)+ec*Math.sin(6*i)+tc*Math.sin(8*i),o=Math.sin(a),s=o*o,c=Math.cos(a),l=o/c,u=l*l,d=u*u,f=1-Rs*s,p=nc/Math.sqrt(1-Rs*s),m=(1-Rs)/f,h=Vs*c**2,g=h*h,_=r/(p*Ls),v=_*_,y=v*_,b=y*_,x=b*_,S=x*_,C=a-l/m*(v/2-b/24*(5+3*u+10*h-4*g-9*Vs))+S/720*(61+90*u+298*h+45*d-252*Vs-3*g),w=(_-y/6*(1+2*u+h)+x/120*(5-2*h+28*u-3*g+8*Vs+24*d))/c;return w=is(w+Qo(lc(n.number)),-Math.PI,Math.PI),[Zo(w),Zo(C)]}var ic=-80,ac=84,oc=-180,sc=180;function cc(e,t,n){e=is(e,oc,sc),t<ic?t=ic:t>ac&&(t=ac);let r=Qo(t),i=Math.sin(r),a=Math.cos(r),o=i/a,s=o*o,c=s*s,l=Qo(e),u=Qo(lc(n.number)),d=nc/Math.sqrt(1-Rs*i**2),f=Vs*a**2,p=a*is(l-u,-Math.PI,Math.PI),m=p*p,h=m*p,g=h*p,_=g*p,v=_*p,y=nc*(Js*r-Ys*Math.sin(2*r)+Xs*Math.sin(4*r)-Zs*Math.sin(6*r)),b=Ls*d*(p+h/6*(1-s+f)+_/120*(5-18*s+c+72*f-58*Vs))+5e5,x=Ls*(y+d*o*(m/2+g/24*(5-s+9*f+4*f**2)+v/720*(61-58*s+c+600*f-330*Vs)));return n.north||(x+=1e7),[b,x]}function lc(e){return(e-1)*6-180+3}var uc=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function dc(e){let t=0;for(let n of uc){let r=e.match(n);if(r){t=parseInt(r[1]);break}}if(!t)return null;let n=0,r=!1;return t>32700&&t<32761?n=t-32700:t>32600&&t<32661&&(r=!0,n=t-32600),n?{number:n,north:r}:null}function fc(e,t){return function(n,r,i,a){let o=n.length;i=i>1?i:2,a??=i,r||=i>2?n.slice():Array(o);for(let i=0;i<o;i+=a){let a=n[i],o=n[i+1],s=e(a,o,t);r[i]=s[0],r[i+1]=s[1]}return r}}function pc(e){return dc(e)?new _s({code:e,units:`m`}):null}function mc(e){let t=dc(e.getCode());return t?{forward:fc(cc,t),inverse:fc(rc,t)}:null}function hc(e,t,n){n||=6371008.8;let r=Qo(e[1]),i=Qo(t[1]),a=(i-r)/2,o=Qo(t[0]-e[0])/2,s=Math.sin(a)*Math.sin(a)+Math.sin(o)*Math.sin(o)*Math.cos(r)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))}var gc=[mc],_c=[pc],vc=!0;function yc(e){vc=!(e===void 0||e)}function bc(e,t){if(t!==void 0){for(let n=0,r=e.length;n<r;++n)t[n]=e[n];t=t}else t=e.slice();return t}function xc(e,t){if(t!==void 0&&e!==t){for(let n=0,r=e.length;n<r;++n)t[n]=e[n];e=t}return e}function Sc(e){Ns(e.getCode(),e),Fs(e,e,bc)}function Cc(e){e.forEach(Sc)}function wc(e){if(typeof e!=`string`)return e;let t=Ms(e);if(t)return t;for(let t of _c){let n=t(e);if(n)return n}return null}function Tc(e,t,n,r){e=wc(e);let i,a=e.getPointResolutionFunc();if(a){if(i=a(t,n),r&&r!==e.getUnits()){let t=e.getMetersPerUnit();t&&(i=i*t/gs[r])}}else{let a=e.getUnits();if(a==`degrees`&&!r||r==`degrees`)i=t;else{let o=jc(e,wc(`EPSG:4326`));if(!o&&a!==`degrees`)i=t*e.getMetersPerUnit();else{let e=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];e=o(e,e,2),i=(hc(e.slice(0,2),e.slice(2,4))+hc(e.slice(4,6),e.slice(6,8)))/2}let s=r?gs[r]:e.getMetersPerUnit();s!==void 0&&(i/=s)}}return i}function Ec(e){Cc(e),e.forEach(function(t){e.forEach(function(e){t!==e&&Fs(t,e,bc)})})}function Dc(e,t,n,r){e.forEach(function(e){t.forEach(function(t){Fs(e,t,n),Fs(t,e,r)})})}function Oc(e,t){return e?typeof e==`string`?wc(e):e:wc(t)}function kc(e){return(function(t,n,r,i){let a=t.length;r=r===void 0?2:r,i??=r,n=n===void 0?Array(a):n;for(let o=0;o<a;o+=i){let a=e(t.slice(o,o+r)),s=a.length;for(let e=0,r=i;e<r;++e)n[o+e]=e>=s?t[o+e]:a[e]}return n})}function Ac(e,t){if(e===t)return!0;let n=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||jc(e,t)===bc)&&n}function jc(e,t){let n=e.getCode(),r=t.getCode(),i=Is(n,r);if(i)return i;let a=null,o=null;for(let n of gc)a||=n(e),o||=n(t);if(!a&&!o)return null;let s=`EPSG:4326`;if(o)if(a)i=Mc(a.inverse,o.forward);else{let e=Is(n,s);e&&(i=Mc(e,o.forward))}else{let e=Is(s,r);e&&(i=Mc(a.inverse,e))}return i&&(Sc(e),Sc(t),Fs(e,t,i)),i}function Mc(e,t){return function(n,r,i,a){return r=e(n,r,i,a),t(r,r,i,a)}}function Nc(e,t){return jc(wc(e),wc(t))}function Pc(e,t,n){let r=Nc(t,n);if(!r){let e=wc(t).getCode(),r=wc(n).getCode();throw Error(`No transform available between ${e} and ${r}`)}return r(e,void 0,e.length)}function Fc(e,t,n,r){return k(e,Nc(t,n),void 0,r)}var Ic=null;function Lc(){return Ic}function Rc(e,t){return Ic?Pc(e,t,Ic):e}function zc(e,t){return Ic?Pc(e,Ic,t):(vc&&!us(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(vc=!1,qo(`Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.`)),e)}function Bc(e,t){return Ic?Fc(e,t,Ic):e}function Vc(e,t){return Ic?Fc(e,Ic,t):e}function Hc(e,t){if(!Ic)return e;let n=wc(t).getMetersPerUnit(),r=Ic.getMetersPerUnit();return n&&r?e*n/r:e}function Uc(){Ec(ws),Ec(As),Dc(As,ws,Ts,Es)}Uc();function Wc(){return[1,0,0,1,0,0]}function Gc(e,t){let n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],c=t[0],l=t[1],u=t[2],d=t[3],f=t[4],p=t[5];return e[0]=n*c+i*l,e[1]=r*c+a*l,e[2]=n*u+i*d,e[3]=r*u+a*d,e[4]=n*f+i*p+o,e[5]=r*f+a*p+s,e}function Kc(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function qc(e,t){let n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function Jc(e,t,n,r,i,a,o,s){let c=Math.sin(a),l=Math.cos(a);return e[0]=r*l,e[1]=i*c,e[2]=-r*c,e[3]=i*l,e[4]=o*r*l-s*r*c+t,e[5]=o*i*c+s*i*l+n,e}function Yc(e,t){let n=Xc(t);V(n!==0,`Transformation matrix cannot be inverted`);let r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5];return e[0]=o/n,e[1]=-i/n,e[2]=-a/n,e[3]=r/n,e[4]=(a*c-o*s)/n,e[5]=-(r*c-i*s)/n,e}function Xc(e){return e[0]*e[3]-e[1]*e[2]}var Zc=[1e5,1e5,1e5,1e5,2,2];function Qc(e){return`matrix(`+e.join(`, `)+`)`}function $c(e){return e.substring(7,e.length-1).split(`,`).map(parseFloat)}function el(e,t){let n=$c(e),r=$c(t);for(let e=0;e<6;++e)if(Math.round((n[e]-r[e])*Zc[e])!==0)return!1;return!0}function tl(e,t,n,r,i,a,o){a||=[],o||=2;let s=0;for(let c=t;c<n;c+=r){let t=e[c],n=e[c+1];a[s++]=i[0]*t+i[2]*n+i[4],a[s++]=i[1]*t+i[3]*n+i[5];for(let t=2;t<o;t++)a[s++]=e[c+t]}return a&&a.length!=s&&(a.length=s),a}function nl(e,t,n,r,i,a,o){o||=[];let s=Math.cos(i),c=Math.sin(i),l=a[0],u=a[1],d=0;for(let i=t;i<n;i+=r){let t=e[i]-l,n=e[i+1]-u;o[d++]=l+t*s-n*c,o[d++]=u+t*c+n*s;for(let t=i+2;t<i+r;++t)o[d++]=e[t]}return o&&o.length!=d&&(o.length=d),o}function rl(e,t,n,r,i,a,o,s){s||=[];let c=o[0],l=o[1],u=0;for(let o=t;o<n;o+=r){let t=e[o]-c,n=e[o+1]-l;s[u++]=c+i*t,s[u++]=l+a*n;for(let t=o+2;t<o+r;++t)s[u++]=e[t]}return s&&s.length!=u&&(s.length=u),s}function il(e,t,n,r,i,a,o){o||=[];let s=0;for(let c=t;c<n;c+=r){o[s++]=e[c]+i,o[s++]=e[c+1]+a;for(let t=c+2;t<c+r;++t)o[s++]=e[t]}return o&&o.length!=s&&(o.length=s),o}var al=Wc(),ol=[NaN,NaN],sl=class extends ve{constructor(){super(),this.extent_=s(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=o((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);let r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return A()}closestPointXY(e,t,n,r){return A()}containsXY(e,t){return this.closestPointXY(e,t,ol,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t||=[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return A()}getExtent(e){if(this.extentRevision_!=this.getRevision()){let e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&h(e),this.extentRevision_=this.getRevision()}return Le(this.extent_,e)}rotate(e,t){A()}scale(e,t,n){A()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return A()}getType(){return A()}applyTransform(e){A()}intersectsExtent(e){return A()}translate(e,t){A()}transform(e,t){let n=wc(e),r=n.getUnits()==`tile-pixels`?function(e,r,i){let a=n.getExtent(),o=n.getWorldExtent(),s=se(o)/se(a);Jc(al,o[0],o[3],s,-s,0,0,0);let c=tl(e,0,e.length,i,al,r),l=Nc(n,t);return l?l(c,c,i):c}:Nc(n,t);return this.applyTransform(r),this}},cl=class extends sl{constructor(){super(),this.layout=`XY`,this.stride=2,this.flatCoordinates}computeExtent(e){return nt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return A()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;let t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=ul(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){A()}setLayout(e,t,n){let r;if(e)r=ul(e);else{for(let e=0;e<n;++e){if(t.length===0){this.layout=`XY`,this.stride=2;return}t=t[0]}r=t.length,e=ll(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith(`XYZ`)?3:2,this.stride),this.changed())}rotate(e,t){let n=this.getFlatCoordinates();if(n){let r=this.getStride();nl(n,0,n.length,r,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||=f(this.getExtent());let r=this.getFlatCoordinates();if(r){let i=this.getStride();rl(r,0,r.length,i,e,t,n,r),this.changed()}}translate(e,t){let n=this.getFlatCoordinates();if(n){let r=this.getStride();il(n,0,n.length,r,e,t,n),this.changed()}}};function ll(e){let t;return e==2?t=`XY`:e==3?t=`XYZ`:e==4&&(t=`XYZM`),t}function ul(e){let t;return e==`XY`?t=2:e==`XYZ`||e==`XYM`?t=3:e==`XYZM`&&(t=4),t}function dl(e,t,n){let r=e.getFlatCoordinates();if(!r)return null;let i=e.getStride();return tl(r,0,r.length,i,t,n)}var fl=cl;function pl(e,t,n,r){for(let r=0,i=n.length;r<i;++r)e[t++]=n[r];return t}function ml(e,t,n,r){for(let i=0,a=n.length;i<a;++i){let a=n[i];for(let n=0;n<r;++n)e[t++]=a[n]}return t}function hl(e,t,n,r,i){i||=[];let a=0;for(let o=0,s=n.length;o<s;++o){let s=ml(e,t,n[o],r);i[a++]=s,t=s}return i.length=a,i}function gl(e,t,n,r,i){i||=[];let a=0;for(let o=0,s=n.length;o<s;++o){let s=hl(e,t,n[o],r,i[a]);s.length===0&&(s[0]=t),i[a++]=s,t=s[s.length-1]}return i.length=a,i}function _l(e,t,n,r){let i=[],a=s();for(let o=0,s=n.length;o<s;++o){let s=n[o];a=nt(e,t,s[0],r),i.push((a[0]+a[2])/2,(a[1]+a[3])/2),t=s[s.length-1]}return i}function vl(e,t,n,r,i){return!re(i,function(i){return!yl(e,t,n,r,i[0],i[1])})}function yl(e,t,n,r,i,a){let o=0,s=e[n-r],c=e[n-r+1];for(;t<n;t+=r){let n=e[t],r=e[t+1];c<=a?r>a&&(n-s)*(a-c)-(i-s)*(r-c)>0&&o++:r<=a&&(n-s)*(a-c)-(i-s)*(r-c)<0&&o--,s=n,c=r}return o!==0}function bl(e,t,n,r,i,a){if(n.length===0||!yl(e,t,n[0],r,i,a))return!1;for(let t=1,o=n.length;t<o;++t)if(yl(e,n[t-1],n[t],r,i,a))return!1;return!0}function xl(e,t,n,r,i,a){if(n.length===0)return!1;for(let o=0,s=n.length;o<s;++o){let s=n[o];if(bl(e,t,s,r,i,a))return!0;t=s[s.length-1]}return!1}function Sl(e,t,n,r,i,a,o){let s,c,l,u,d,f,p,m=i[a+1],h=[];for(let i=0,a=n.length;i<a;++i){let a=n[i];for(u=e[a-r],f=e[a-r+1],s=t;s<a;s+=r)d=e[s],p=e[s+1],(m<=f&&p<=m||f<=m&&m<=p)&&(l=(m-f)/(p-f)*(d-u)+u,h.push(l)),u=d,f=p}let g=NaN,_=-1/0;for(h.sort(x),u=h[0],s=1,c=h.length;s<c;++s){d=h[s];let i=Math.abs(d-u);i>_&&(l=(u+d)/2,bl(e,t,n,r,l,m)&&(g=l,_=i)),u=d}return isNaN(g)&&(g=i[a]),o?(o.push(g,m,_),o):[g,m,_]}function Cl(e,t,n,r,i){let a=[];for(let o=0,s=n.length;o<s;++o){let s=n[o];a=Sl(e,t,s,r,i,2*o,a),t=s[s.length-1]}return a}function wl(e,t,n,r,i,a,o){let s,c,l=(n-t)/r;if(l===1)s=t;else if(l===2)s=t,c=i;else if(l!==0){let a=e[t],o=e[t+1],l=0,u=[0];for(let i=t+r;i<n;i+=r){let t=e[i],n=e[i+1];l+=Math.sqrt((t-a)*(t-a)+(n-o)*(n-o)),u.push(l),a=t,o=n}let d=i*l,f=Oe(u,d);f<0?(c=(d-u[-f-2])/(u[-f-1]-u[-f-2]),s=t+(-f-2)*r):s=t+f*r}o=o>1?o:2,a||=Array(o);for(let t=0;t<o;++t)a[t]=s===void 0?NaN:c===void 0?e[s+t]:es(e[s+t],e[s+r+t],c);return a}function Tl(e,t,n,r,i,a){if(n==t)return null;let o;if(i<e[t+r-1])return a?(o=e.slice(t,t+r),o[r-1]=i,o):null;if(e[n-1]<i)return a?(o=e.slice(n-r,n),o[r-1]=i,o):null;if(i==e[t+r-1])return e.slice(t,t+r);let s=t/r,c=n/r;for(;s<c;){let t=s+c>>1;i<e[(t+1)*r-1]?c=t:s=t+1}let l=e[s*r-1];if(i==l)return e.slice((s-1)*r,(s-1)*r+r);let u=e[(s+1)*r-1],d=(i-l)/(u-l);o=[];for(let t=0;t<r-1;++t)o.push(es(e[(s-1)*r+t],e[s*r+t],d));return o.push(i),o}function El(e,t,n,r,i,a,o){if(o)return Tl(e,t,n[n.length-1],r,i,a);let s;if(i<e[r-1])return a?(s=e.slice(0,r),s[r-1]=i,s):null;if(e[e.length-1]<i)return a?(s=e.slice(e.length-r),s[r-1]=i,s):null;for(let a=0,o=n.length;a<o;++a){let o=n[a];if(t!=o){if(i<e[t+r-1])return null;if(i<=e[o-1])return Tl(e,t,o,r,i,!1);t=o}}return null}function Dl(e,t,n,r){for(;t<n-r;){for(let i=0;i<r;++i){let a=e[t+i];e[t+i]=e[n-r+i],e[n-r+i]=a}t+=r,n-=r}}function Ol(e,t,n,r){let i=0,a=e[n-r],o=e[n-r+1];for(;t<n;t+=r){let n=e[t],r=e[t+1];i+=(n-a)*(r+o),a=n,o=r}return i===0?void 0:i>0}function kl(e,t,n,r,i){i=i===void 0?!1:i;for(let a=0,o=n.length;a<o;++a){let o=n[a],s=Ol(e,t,o,r);if(a===0){if(i&&s||!i&&!s)return!1}else if(i&&!s||!i&&s)return!1;t=o}return!0}function Al(e,t,n,r,i){for(let a=0,o=n.length;a<o;++a){let o=n[a];if(!kl(e,t,o,r,i))return!1;o.length&&(t=o[o.length-1])}return!0}function jl(e,t,n,r,i){i=i===void 0?!1:i;for(let a=0,o=n.length;a<o;++a){let o=n[a],s=Ol(e,t,o,r);(a===0?i&&s||!i&&!s:i&&!s||!i&&s)&&Dl(e,t,o,r),t=o}return t}function Ml(e,t,n,r,i){for(let a=0,o=n.length;a<o;++a)t=jl(e,t,n[a],r,i);return t}function Nl(e,t){let n=[],r=0,i=0,a;for(let o=0,s=t.length;o<s;++o){let s=t[o],c=Ol(e,r,s,2);if(a===void 0&&(a=c),c===a)n.push(t.slice(i,o+1));else{if(n.length===0)continue;n[n.length-1].push(t[i])}i=o+1,r=s}return n}function Pl(e,t,n,r,i,a,o){let s=(n-t)/r;if(s<3){for(;t<n;t+=r)a[o++]=e[t],a[o++]=e[t+1];return o}let c=Array(s);c[0]=1,c[s-1]=1;let l=[t,n-r],u=0;for(;l.length>0;){let n=l.pop(),a=l.pop(),o=0,s=e[a],d=e[a+1],f=e[n],p=e[n+1];for(let t=a+r;t<n;t+=r){let n=e[t],r=e[t+1],i=Jo(n,r,s,d,f,p);i>o&&(u=t,o=i)}o>i&&(c[(u-t)/r]=1,a+r<u&&l.push(a,u),u+r<n&&l.push(u,n))}for(let n=0;n<s;++n)c[n]&&(a[o++]=e[t+n*r],a[o++]=e[t+n*r+1]);return o}function Fl(e,t,n,r,i,a,o,s){for(let c=0,l=n.length;c<l;++c){let l=n[c];o=Pl(e,t,l,r,i,a,o),s.push(o),t=l}return o}function Il(e,t){return t*Math.round(e/t)}function Ll(e,t,n,r,i,a,o){if(t==n)return o;let s=Il(e[t],i),c=Il(e[t+1],i);t+=r,a[o++]=s,a[o++]=c;let l,u;do if(l=Il(e[t],i),u=Il(e[t+1],i),t+=r,t==n)return a[o++]=l,a[o++]=u,o;while(l==s&&u==c);for(;t<n;){let n=Il(e[t],i),d=Il(e[t+1],i);if(t+=r,n==l&&d==u)continue;let f=l-s,p=u-c,m=n-s,h=d-c;if(f*h==p*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(p<0&&h<p||p==h||p>0&&h>p)){l=n,u=d;continue}a[o++]=l,a[o++]=u,s=l,c=u,l=n,u=d}return a[o++]=l,a[o++]=u,o}function Rl(e,t,n,r,i,a,o,s){for(let c=0,l=n.length;c<l;++c){let l=n[c];o=Ll(e,t,l,r,i,a,o),s.push(o),t=l}return o}function zl(e,t,n,r,i,a,o,s){for(let c=0,l=n.length;c<l;++c){let l=n[c],u=[];o=Rl(e,t,l,r,i,a,o,u),s.push(u),t=l[l.length-1]}return o}function Bl(e,t,n,r){let i=0,a=e[n-r],o=e[n-r+1],s=0,c=0;for(;t<n;t+=r){let n=e[t]-a,r=e[t+1]-o;i+=c*n-s*r,s=n,c=r}return i/2}function Vl(e,t,n,r){let i=0;for(let a=0,o=n.length;a<o;++a){let o=n[a];i+=Bl(e,t,o,r),t=o}return i}function Hl(e,t,n,r){let i=0;for(let a=0,o=n.length;a<o;++a){let o=n[a];i+=Vl(e,t,o,r),t=o[o.length-1]}return i}function Ul(e,t,n,r,i,a,o){let s=e[t],c=e[t+1],l=e[n]-s,u=e[n+1]-c,d;if(l===0&&u===0)d=t;else{let f=((i-s)*l+(a-c)*u)/(l*l+u*u);if(f>1)d=n;else if(f>0){for(let i=0;i<r;++i)o[i]=es(e[t+i],e[n+i],f);o.length=r;return}else d=t}for(let t=0;t<r;++t)o[t]=e[d+t];o.length=r}function Wl(e,t,n,r,i){let a=e[t],o=e[t+1];for(t+=r;t<n;t+=r){let n=e[t],r=e[t+1],s=Yo(a,o,n,r);s>i&&(i=s),a=n,o=r}return i}function Gl(e,t,n,r,i){for(let a=0,o=n.length;a<o;++a){let o=n[a];i=Wl(e,t,o,r,i),t=o}return i}function Kl(e,t,n,r,i){for(let a=0,o=n.length;a<o;++a){let o=n[a];i=Gl(e,t,o,r,i),t=o[o.length-1]}return i}function ql(e,t,n,r,i,a,o,s,c,l,u){if(t==n)return l;let d,f;if(i===0){if(f=Yo(o,s,e[t],e[t+1]),f<l){for(d=0;d<r;++d)c[d]=e[t+d];return c.length=r,f}return l}u||=[NaN,NaN];let p=t+r;for(;p<n;)if(Ul(e,p-r,p,r,o,s,u),f=Yo(o,s,u[0],u[1]),f<l){for(l=f,d=0;d<r;++d)c[d]=u[d];c.length=r,p+=r}else p+=r*Math.max((Math.sqrt(f)-Math.sqrt(l))/i|0,1);if(a&&(Ul(e,n-r,t,r,o,s,u),f=Yo(o,s,u[0],u[1]),f<l)){for(l=f,d=0;d<r;++d)c[d]=u[d];c.length=r}return l}function Jl(e,t,n,r,i,a,o,s,c,l,u){u||=[NaN,NaN];for(let d=0,f=n.length;d<f;++d){let f=n[d];l=ql(e,t,f,r,i,a,o,s,c,l,u),t=f}return l}function Yl(e,t,n,r,i,a,o,s,c,l,u){u||=[NaN,NaN];for(let d=0,f=n.length;d<f;++d){let f=n[d];l=Jl(e,t,f,r,i,a,o,s,c,l,u),t=f[f.length-1]}return l}function Xl(e,t,n,r,i){i=i===void 0?[]:i;let a=0;for(let o=t;o<n;o+=r)i[a++]=e.slice(o,o+r);return i.length=a,i}function Zl(e,t,n,r,i){i=i===void 0?[]:i;let a=0;for(let o=0,s=n.length;o<s;++o){let s=n[o];i[a++]=Xl(e,t,s,r,i[a]),t=s}return i.length=a,i}function Ql(e,t,n,r,i){i=i===void 0?[]:i;let a=0;for(let o=0,s=n.length;o<s;++o){let s=n[o];i[a++]=s.length===1&&s[0]===t?[]:Zl(e,t,s,r,i[a]),t=s[s.length-1]}return i.length=a,i}var $l=class e extends fl{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new e(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,r,i){return i<t(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Wl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ql(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,r,i))}getArea(){return Bl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Xl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){let n=[];return n.length=Pl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,`XY`)}getType(){return`LinearRing`}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||=[],this.flatCoordinates.length=ml(this.flatCoordinates,0,e,this.stride),this.changed()}};function eu(e,t,n,r,i){let a;for(t+=r;t<n;t+=r)if(a=i(e.slice(t-r,t),e.slice(t,t+r)),a)return a;return!1}function tu(e,t,n,r,i,a){return a??=te(s(),e,t,n,r),He(i,a)?a[0]>=i[0]&&a[2]<=i[2]||a[1]>=i[1]&&a[3]<=i[3]?!0:eu(e,t,n,r,function(e,t){return we(i,e,t)}):!1}function nu(e,t,n,r,i){for(let a=0,o=n.length;a<o;++a){if(tu(e,t,n[a],r,i))return!0;t=n[a]}return!1}function ru(e,t,n,r,i){return!!(tu(e,t,n,r,i)||yl(e,t,n,r,i[0],i[1])||yl(e,t,n,r,i[0],i[3])||yl(e,t,n,r,i[2],i[1])||yl(e,t,n,r,i[2],i[3]))}function iu(e,t,n,r,i){if(!ru(e,t,n[0],r,i))return!1;if(n.length===1)return!0;for(let t=1,a=n.length;t<a;++t)if(vl(e,n[t-1],n[t],r,i)&&!tu(e,n[t-1],n[t],r,i))return!1;return!0}function au(e,t,n,r,i){for(let a=0,o=n.length;a<o;++a){let o=n[a];if(iu(e,t,o,r,i))return!0;t=o[o.length-1]}return!1}function ou(e,t,n,r){let i=e[t],a=e[t+1],o=0;for(let s=t+r;s<n;s+=r){let t=e[s],n=e[s+1];o+=Math.sqrt((t-i)*(t-i)+(n-a)*(n-a)),i=t,a=n}return o}var su=class e extends fl{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){v(this.flatCoordinates,e),this.changed()}clone(){let t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(e,n,r,i){return i<t(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Wl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ql(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,n,r,i))}forEachSegment(e){return eu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!=`XYM`&&this.layout!=`XYZM`?null:(t=t===void 0?!1:t,Tl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Xl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return wl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return ou(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){let n=[];return n.length=Pl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,`XY`)}getType(){return`LineString`}intersectsExtent(e){return tu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||=[],this.flatCoordinates.length=ml(this.flatCoordinates,0,e,this.stride),this.changed()}},cu=class e extends fl{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){let t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(e,t,n,r){let i=this.flatCoordinates,a=Yo(e,t,i[0],i[1]);if(a<r){let e=this.stride;for(let t=0;t<e;++t)n[t]=i[t];return n.length=e,a}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return T(this.flatCoordinates,e)}getType(){return`Point`}intersectsExtent(e){return y(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||=[],this.flatCoordinates.length=pl(this.flatCoordinates,0,e,this.stride),this.changed()}},lu=class e extends fl{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?v(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(e,n,r,i){return i<t(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Gl(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Jl(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,r,i))}containsXY(e,t){return bl(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return Vl(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e===void 0?t=this.flatCoordinates:(t=this.getOrientedFlatCoordinates().slice(),jl(t,0,this.ends_,this.stride,e)),Zl(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){let e=f(this.getExtent());this.flatInteriorPoint_=Sl(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new cu(this.getFlatInteriorPoint(),`XYM`)}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new $l(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){let e=this.layout,t=this.flatCoordinates,n=this.ends_,r=[],i=0;for(let a=0,o=n.length;a<o;++a){let o=n[a],s=new $l(t.slice(i,o),e);r.push(s),i=o}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let e=this.flatCoordinates;kl(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=jl(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let n=[],r=[];return n.length=Rl(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,r),new e(n,`XY`,r)}getType(){return`Polygon`}intersectsExtent(e){return iu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||=[];let n=hl(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}},uu=lu;function du(e){if(ue(e))throw Error(`Cannot create polygon from empty extent`);let t=e[0],n=e[1],r=e[2],i=e[3],a=[t,n,t,i,r,i,r,n,t,n];return new lu(a,`XY`,[a.length])}var fu=Wc(),pu=class e{constructor(e,t,n,r,i,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=i,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||=this.type_===`Point`?T(this.flatCoordinates_):nt(this.flatCoordinates_,0,this.flatCoordinates_.length,2),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){let e=f(this.getExtent());this.flatInteriorPoints_=Sl(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){let e=Nl(this.flatCoordinates_,this.ends_),t=_l(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=Cl(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||=wl(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];let e=this.flatCoordinates_,t=0,n=this.ends_;for(let r=0,i=n.length;r<i;++r){let i=n[r],a=wl(e,t,i,2,.5);v(this.flatMidpoints_,a),t=i}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=wc(e);let t=e.getExtent(),n=e.getWorldExtent();if(t&&n){let e=se(n)/se(t);Jc(fu,n[0],n[3],e,-e,0,0,0),tl(this.flatCoordinates_,0,this.flatCoordinates_.length,2,fu,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new e(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=o((t,n)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);let r=this.simplifiedGeometry_.getFlatCoordinates(),i;switch(this.type_){case`LineString`:r.length=Pl(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,r,0),i=[r.length];break;case`MultiLineString`:i=[],r.length=Fl(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,r,0,i);break;case`Polygon`:i=[],r.length=Rl(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),r,0,i);break;default:}return i&&(this.simplifiedGeometry_=new e(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}};pu.prototype.getFlatCoordinates=pu.prototype.getOrientedFlatCoordinates;var mu=pu;function hu(e){return e[0]>0&&e[1]>0}function gu(e,t,n){return n===void 0&&(n=[0,0]),n[0]=e[0]*t+.5|0,n[1]=e[1]*t+.5|0,n}function _u(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}const vu=42,yu=256;var U={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},bu=class extends tt{constructor(e,t,n,r){super(),this.extent=e,this.pixelRatio_=n,this.resolution=t,this.state=typeof r==`function`?U.IDLE:r,this.image_=null,this.loader=typeof r==`function`?r:null}changed(){this.dispatchEvent(g.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==U.IDLE&&this.loader){this.state=U.LOADING,this.changed();let e=this.getResolution(),t=Array.isArray(e)?e[0]:e;a(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(e=>{`image`in e&&(this.image_=e.image),`extent`in e&&(this.extent=e.extent),`resolution`in e&&(this.resolution=e.resolution),`pixelRatio`in e&&(this.pixelRatio_=e.pixelRatio),(e instanceof HTMLImageElement||Je&&e instanceof ImageBitmap||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement)&&(this.image_=e),this.state=U.LOADED}).catch(e=>{this.state=U.ERROR,console.error(e)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}};function xu(e,t,n){let r=e,i=!0,a=!1,o=!1,s=[le(r,g.LOAD,function(){o=!0,a||t()})];return r.src&&de?(a=!0,r.decode().then(function(){i&&t()}).catch(function(e){i&&(o?t():n())})):s.push(le(r,g.ERROR,n)),function(){i=!1,s.forEach(Ye)}}function Su(e,t){return new Promise((n,r)=>{function i(){o(),n(e)}function a(){o(),r(Error(`Image load error`))}function o(){e.removeEventListener(`load`,i),e.removeEventListener(`error`,a)}e.addEventListener(`load`,i),e.addEventListener(`error`,a),t&&(e.src=t)})}function Cu(e,t){return t&&(e.src=t),e.src&&de?new Promise((t,n)=>e.decode().then(()=>t(e)).catch(r=>e.complete&&e.width?t(e):n(r))):Su(e)}var wu=bu;function Tu(e){return e**3}function Eu(e){return 1-Tu(1-e)}function Du(e){return 3*e*e-2*e*e*e}function Ou(e){return e}var ku=class extends ve{constructor(e){super(),this.projection=wc(e.projection),this.attributions_=Au(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state===void 0?`ready`:e.state,this.wrapX_=e.wrapX===void 0?!1:e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;let t=this;this.viewPromise_=new Promise(function(e,n){t.viewResolver=e,t.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Au(e),this.changed()}setState(e){this.state_=e,this.changed()}};function Au(e){return e?typeof e==`function`?e:(Array.isArray(e)||(e=[e]),t=>e):null}var ju=ku,Mu={ADD:`add`,REMOVE:`remove`},Nu={LENGTH:`length`},Pu=class extends fe{constructor(e,t,n){super(e),this.element=t,this.index=n}},Fu=class extends ve{constructor(e,t){if(super(),this.on,this.once,this.un,t||={},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let e=1,t=this.array_.length;e<t;++e)this.assertUnique_(this.array_[e],e);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){let t=this.array_;for(let n=0,r=t.length;n<r;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Nu.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw Error(`Index out of bounds: `+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Pu(Mu.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){let t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){let t=this.array_;for(let n=0,r=t.length;n<r;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;let t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Pu(Mu.REMOVE,t,e)),t}setAt(e,t){if(e>=this.getLength()){this.insertAt(e,t);return}if(e<0)throw Error(`Index out of bounds: `+e);this.unique_&&this.assertUnique_(t,e);let n=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Pu(Mu.REMOVE,n,e)),this.dispatchEvent(new Pu(Mu.ADD,t,e))}updateLength_(){this.set(Nu.LENGTH,this.array_.length)}assertUnique_(e,t){let n=this.array_;for(let r=0,i=n.length;r<i;++r)if(n[r]===e&&r!==t)throw Error(`Duplicate item added to a unique collection`)}},Iu=!1;function Lu(e,t,n,r,i,a,o){let s=new XMLHttpRequest;s.open(`GET`,typeof e==`function`?e(n,r,i):e,!0),t.getType()==`arraybuffer`&&(s.responseType=`arraybuffer`),s.withCredentials=Iu,s.onload=function(e){if(!s.status||s.status>=200&&s.status<300){let e=t.getType();try{let r;e==`text`||e==`json`?r=s.responseText:e==`xml`?r=s.responseXML||s.responseText:e==`arraybuffer`&&(r=s.response),r?a(t.readFeatures(r,{extent:n,featureProjection:i}),t.readProjection(r)):o()}catch{o()}}else o()},s.onerror=o,s.send()}function Ru(e,t){return function(n,r,i,a,o){Lu(e,t,n,r,i,(e,t)=>{this.addFeatures(e),a!==void 0&&a(e)},()=>{this.changed(),o!==void 0&&o()})}}function zu(e,t){return[[-1/0,-1/0,1/0,1/0]]}function Bu(e,t,n=0,r=e.length-1,i=Hu){for(;r>n;){if(r-n>600){let a=r-n+1,o=t-n+1,s=Math.log(a),c=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*c*(a-c)/a)*(o-a/2<0?-1:1);Bu(e,t,Math.max(n,Math.floor(t-o*c/a+l)),Math.min(r,Math.floor(t+(a-o)*c/a+l)),i)}let a=e[t],o=n,s=r;for(Vu(e,n,t),i(e[r],a)>0&&Vu(e,n,r);o<s;){for(Vu(e,o,s),o++,s--;i(e[o],a)<0;)o++;for(;i(e[s],a)>0;)s--}i(e[n],a)===0?Vu(e,n,s):(s++,Vu(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}}function Vu(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function Hu(e,t){return e<t?-1:e>t?1:0}var Uu=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data,n=[];if(!td(e,t))return n;let r=this.toBBox,i=[];for(;t;){for(let a=0;a<t.children.length;a++){let o=t.children[a],s=t.leaf?r(o):o;td(e,s)&&(t.leaf?n.push(o):ed(e,s)?this._all(o,n):i.push(o))}t=i.pop()}return n}collides(e){let t=this.data;if(!td(e,t))return!1;let n=[];for(;t;){for(let r=0;r<t.children.length;r++){let i=t.children[r],a=t.leaf?this.toBBox(i):i;if(td(e,a)){if(t.leaf||ed(e,a))return!0;n.push(i)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let t=0;t<e.length;t++)this.insert(e[t]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){let e=this.data;this.data=t,t=e}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=nd([]),this}remove(e,t){if(!e)return this;let n=this.data,r=this.toBBox(e),i=[],a=[],o,s,c;for(;n||i.length;){if(n||(n=i.pop(),s=i[i.length-1],o=a.pop(),c=!0),n.leaf){let r=Wu(e,n.children,t);if(r!==-1)return n.children.splice(r,1),i.push(n),this._condense(i),this}!c&&!n.leaf&&ed(n,r)?(i.push(n),a.push(o),o=0,s=n,n=n.children[0]):s?(o++,n=s.children[o],c=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){let n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,r){let i=n-t+1,a=this._maxEntries,o;if(i<=a)return o=nd(e.slice(t,n+1)),Gu(o,this.toBBox),o;r||(r=Math.ceil(Math.log(i)/Math.log(a)),a=Math.ceil(i/a**(r-1))),o=nd([]),o.leaf=!1,o.height=r;let s=Math.ceil(i/a),c=s*Math.ceil(Math.sqrt(a));rd(e,t,n,c,this.compareMinX);for(let i=t;i<=n;i+=c){let t=Math.min(i+c-1,n);rd(e,i,t,s,this.compareMinY);for(let n=i;n<=t;n+=s){let i=Math.min(n+s-1,t);o.children.push(this._build(e,n,i,r-1))}}return Gu(o,this.toBBox),o}_chooseSubtree(e,t,n,r){for(;r.push(t),!(t.leaf||r.length-1===n);){let n=1/0,r=1/0,i;for(let a=0;a<t.children.length;a++){let o=t.children[a],s=Xu(o),c=Qu(e,o)-s;c<r?(r=c,n=s<n?s:n,i=o):c===r&&s<n&&(n=s,i=o)}t=i||t.children[0]}return t}_insert(e,t,n){let r=n?e:this.toBBox(e),i=[],a=this._chooseSubtree(r,this.data,t,i);for(a.children.push(e),qu(a,r);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(r,i,t)}_split(e,t){let n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);let a=this._chooseSplitIndex(n,i,r),o=nd(n.children.splice(a,n.children.length-a));o.height=n.height,o.leaf=n.leaf,Gu(n,this.toBBox),Gu(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(n,o)}_splitRoot(e,t){this.data=nd([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Gu(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let r,i=1/0,a=1/0;for(let o=t;o<=n-t;o++){let t=Ku(e,0,o,this.toBBox),s=Ku(e,o,n,this.toBBox),c=$u(t,s),l=Xu(t)+Xu(s);c<i?(i=c,r=o,a=l<a?l:a):c===i&&l<a&&(a=l,r=o)}return r||n-t}_chooseSplitAxis(e,t,n){let r=e.leaf?this.compareMinX:Ju,i=e.leaf?this.compareMinY:Yu;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)}_allDistMargin(e,t,n,r){e.children.sort(r);let i=this.toBBox,a=Ku(e,0,t,i),o=Ku(e,n-t,n,i),s=Zu(a)+Zu(o);for(let r=t;r<n-t;r++){let t=e.children[r];qu(a,e.leaf?i(t):t),s+=Zu(a)}for(let r=n-t-1;r>=t;r--){let t=e.children[r];qu(o,e.leaf?i(t):t),s+=Zu(o)}return s}_adjustParentBBoxes(e,t,n){for(let r=n;r>=0;r--)qu(t[r],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():Gu(e[t],this.toBBox)}};function Wu(e,t,n){if(!n)return t.indexOf(e);for(let r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function Gu(e,t){Ku(e,0,e.children.length,t,e)}function Ku(e,t,n,r,i){i||=nd(null),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let a=t;a<n;a++){let t=e.children[a];qu(i,e.leaf?r(t):t)}return i}function qu(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Ju(e,t){return e.minX-t.minX}function Yu(e,t){return e.minY-t.minY}function Xu(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Zu(e){return e.maxX-e.minX+(e.maxY-e.minY)}function Qu(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function $u(e,t){let n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),a=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,a-r)}function ed(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function td(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function nd(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function rd(e,t,n,r,i){let a=[t,n];for(;a.length;){if(n=a.pop(),t=a.pop(),n-t<=r)continue;let o=t+Math.ceil((n-t)/r/2)*r;Bu(e,o,t,n,i),a.push(t,o,o,n)}}var id=class{constructor(e){this.rbush_=new Uu(e),this.items_={}}insert(e,t){let n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[M(t)]=n}load(e,t){let n=Array(t.length);for(let r=0,i=t.length;r<i;r++){let i=e[r],a=t[r],o={minX:i[0],minY:i[1],maxX:i[2],maxY:i[3],value:a};n[r]=o,this.items_[M(a)]=o}this.rbush_.load(n)}remove(e){let t=M(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){let n=this.items_[M(t)];r([n.minX,n.minY,n.maxX,n.maxY],e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(e){let t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(e){return e.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let r=0,i=e.length;r<i;r++)if(n=t(e[r]),n)return n;return n}isEmpty(){return O(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){let t=this.rbush_.toJSON();return d(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){for(let t in this.rbush_.load(e.rbush_.all()),e.items_)this.items_[t]=e.items_[t]}},ad={ADDFEATURE:`addfeature`,CHANGEFEATURE:`changefeature`,CLEAR:`clear`,REMOVEFEATURE:`removefeature`,FEATURESLOADSTART:`featuresloadstart`,FEATURESLOADEND:`featuresloadend`,FEATURESLOADERROR:`featuresloaderror`},od=class extends fe{constructor(e,t,n){super(e),this.feature=t,this.features=n}},sd=class extends ju{constructor(e){e||={},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:`ready`,wrapX:e.wrapX===void 0?!0:e.wrapX}),this.on,this.once,this.un,this.loader_=ee,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader===void 0?this.url_!==void 0&&(V(this.format_,"`format` must be set when `url` is set"),this.loader_=Ru(this.url_,this.format_)):this.loader_=e.loader,this.strategy_=e.strategy===void 0?zu:e.strategy;let t=e.useSpatialIndex===void 0?!0:e.useSpatialIndex;this.featuresRtree_=t?new id:null,this.loadedExtentsRtree_=new id,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,r;Array.isArray(e.features)?r=e.features:e.features&&(n=e.features,r=n.getArray()),!t&&n===void 0&&(n=new Fu(r)),r!==void 0&&this.addFeaturesInternal(r),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){let t=M(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);let n=e.getGeometry();if(n){let t=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(t,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new od(ad.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof mu||(this.featureChangeKeys_[e]=[Se(t,g.CHANGE,this.handleFeatureChange_,this),Se(t,E.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){let e=String(t.getId());if(!(e in this.idIndex_))this.idIndex_[e]=t;else if(t instanceof mu){let r=this.idIndex_[e];r instanceof mu?Array.isArray(r)?r.push(t):this.idIndex_[e]=[r,t]:n=!1}else n=!1}return n&&(V(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){let t=[],n=[],r=[];for(let t=0,r=e.length;t<r;t++){let r=e[t],i=M(r);this.addToIndex_(i,r)&&n.push(r)}for(let e=0,i=n.length;e<i;e++){let i=n[e],a=M(i);this.setupChangeEvents_(a,i);let o=i.getGeometry();if(o){let e=o.getExtent();t.push(e),r.push(i)}else this.nullGeometryFeatures_[a]=i}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(ad.ADDFEATURE))for(let e=0,t=n.length;e<t;e++)this.dispatchEvent(new od(ad.ADDFEATURE,n[e]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(ad.ADDFEATURE,function(n){t||=(t=!0,e.push(n.feature),!1)}),this.addEventListener(ad.REMOVEFEATURE,function(n){t||=(t=!0,e.remove(n.feature),!1)}),e.addEventListener(Mu.ADD,e=>{t||=(t=!0,this.addFeature(e.element),!1)}),e.addEventListener(Mu.REMOVE,e=>{t||=(t=!0,this.removeFeature(e.element),!1)}),this.featuresCollection_=e}clear(e){if(e){for(let e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(Ye);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(let e in this.featuresRtree_.forEach(e=>{this.removeFeatureInternal(e)}),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let t=new od(ad.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){let n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(n){let r=n.getGeometry();if(r instanceof mu||r.intersectsCoordinate(e))return t(n)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){let r=n.getGeometry();if(r instanceof mu||r.intersectsExtent(e)){let e=t(n);if(e)return e}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),O(this.nullGeometryFeatures_)||v(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){let t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);let n=he(e,t);return[].concat(...n.map(e=>this.featuresRtree_.getInExtent(e)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){let n=e[0],r=e[1],i=null,a=[NaN,NaN],o=1/0,s=[-1/0,-1/0,1/0,1/0];return t||=Qe,this.featuresRtree_.forEachInExtent(s,function(e){if(t(e)){let t=e.getGeometry(),c=o;if(o=t instanceof mu?0:t.closestPointXY(n,r,a,o),o<c){i=e;let t=Math.sqrt(o);s[0]=n-t,s[1]=r-t,s[2]=n+t,s[3]=r+t}}}),i}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){let t=this.idIndex_[e.toString()];return t===void 0?null:t}getFeatureByUid(e){let t=this.uidIndex_[e];return t===void 0?null:t}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){let t=e.target,n=M(t),r=t.getGeometry();if(!r)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{let e=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(e,t)):this.featuresRtree_&&this.featuresRtree_.update(e,t)}let i=t.getId();if(i!==void 0){let e=i.toString();this.idIndex_[e]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[e]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new od(ad.CHANGEFEATURE,t))}hasFeature(e){let t=e.getId();return t===void 0?M(e)in this.uidIndex_:t in this.idIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&O(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){let r=this.loadedExtentsRtree_,i=this.strategy_(e,t,n);for(let e=0,a=i.length;e<a;++e){let a=i[e];r.forEachInExtent(a,function(e){return _(e.extent,a)})||(++this.loadingExtentsCount_,this.dispatchEvent(new od(ad.FEATURESLOADSTART)),this.loader_.call(this,a,t,n,e=>{--this.loadingExtentsCount_,this.dispatchEvent(new od(ad.FEATURESLOADEND,void 0,e))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new od(ad.FEATURESLOADERROR))}),r.insert(a,{extent:a.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){let t=this.loadedExtentsRtree_,n=t.forEachInExtent(e,function(t){if(r(t.extent,e))return t});n&&t.remove(n)}removeFeatures(e){let t=!1;for(let n=0,r=e.length;n<r;++n)t=this.removeFeatureInternal(e[n])||t;t&&this.changed()}removeFeature(e){e&&this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){let t=M(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Ye),delete this.featureChangeKeys_[t];let n=e.getId();if(n!==void 0){let t=n.toString(),r=this.idIndex_[t];r===e?delete this.idIndex_[t]:Array.isArray(r)&&(r.splice(r.indexOf(e),1),r.length===1&&(this.idIndex_[t]=r[0]))}return delete this.uidIndex_[t],this.hasListener(ad.REMOVEFEATURE)&&this.dispatchEvent(new od(ad.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(let t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){V(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Ru(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}},cd={ANIMATING:0,INTERACTING:1};const ld=[NaN,NaN,NaN,0];var ud;function dd(){return ud||=pe(1,1,void 0,{willReadFrequently:!0,desynchronized:!0}),ud}var fd=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,pd=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,md=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,hd=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function gd(e,t){return e.endsWith(`%`)?Number(e.substring(0,e.length-1))/t:Number(e)}function _d(e){throw Error(`failed to parse "`+e+`" as color`)}function vd(e){if(e.toLowerCase().startsWith(`rgb`)){let t=e.match(pd)||e.match(fd)||e.match(md);if(t){let e=t[4],n=100/255;return[H(gd(t[1],n)+.5|0,0,255),H(gd(t[2],n)+.5|0,0,255),H(gd(t[3],n)+.5|0,0,255),e===void 0?1:H(gd(e,100),0,1)]}_d(e)}if(e.startsWith(`#`)){if(hd.test(e)){let t=e.substring(1),n=t.length<=4?1:2,r=[0,0,0,255];for(let e=0,i=t.length;e<i;e+=n){let i=parseInt(t.substring(e,e+n),16);n===1&&(i+=i<<4),r[e/n]=i}return r[3]/=255,r}_d(e)}let t=dd();t.fillStyle=`#abcdef`;let n=t.fillStyle;t.fillStyle=e,t.fillStyle===n&&(t.fillStyle=`#fedcba`,n=t.fillStyle,t.fillStyle=e,t.fillStyle===n&&_d(e));let r=t.fillStyle;if(r.startsWith(`#`)||r.startsWith(`rgba`))return vd(r);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);let i=Array.from(t.getImageData(0,0,1,1).data);return i[3]=ts(i[3]/255,3),i}function yd(e){return typeof e==`string`?e:Md(e)}var bd=1024,xd={},Sd=0;function Cd(e){if(e.length===4)return e;let t=e.slice();return t[3]=1,t}function wd(e){return e>.0031308?e**(1/2.4)*269.025-14.025:e*3294.6}function Td(e){return e>.2068965?e**3:(e-4/29)*(108/841)}function Ed(e){return e>10.314724?((e+14.025)/269.025)**2.4:e/3294.6}function Dd(e){return e>.0088564?e**(1/3):e/(108/841)+4/29}function Od(e){let t=Ed(e[0]),n=Ed(e[1]),r=Ed(e[2]),i=Dd(t*.222488403+n*.716873169+r*.06060791),a=500*(Dd(t*.452247074+n*.399439023+r*.148375274)-i),o=200*(i-Dd(t*.016863605+n*.117638439+r*.865350722)),s=Math.atan2(o,a)*(180/Math.PI);return[116*i-16,Math.sqrt(a*a+o*o),s<0?s+360:s,e[3]]}function kd(e){let t=(e[0]+16)/116,n=e[1],r=e[2]*Math.PI/180,i=Td(t),a=Td(t+n/500*Math.cos(r)),o=Td(t-n/200*Math.sin(r)),s=wd(a*3.021973625-i*1.617392459-o*.404875592),c=wd(a*-.943766287+i*1.916279586+o*.027607165),l=wd(a*.069407491-i*.22898585+o*1.159737864);return[H(s+.5|0,0,255),H(c+.5|0,0,255),H(l+.5|0,0,255),e[3]]}function Ad(e){if(e===`none`)return ld;if(xd.hasOwnProperty(e))return xd[e];if(Sd>=bd){let e=0;for(let t in xd)e++&3||(delete xd[t],--Sd)}let t=vd(e);t.length!==4&&_d(e);for(let n of t)isNaN(n)&&_d(e);return xd[e]=t,++Sd,t}function jd(e){return Array.isArray(e)?e:Ad(e)}function Md(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let n=e[1];n!=(n|0)&&(n=n+.5|0);let r=e[2];r!=(r|0)&&(r=r+.5|0);let i=e[3]===void 0?1:Math.round(e[3]*1e3)/1e3;return`rgba(`+t+`,`+n+`,`+r+`,`+i+`)`}var Nd=class extends fe{constructor(e,t,n,r){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=r}},Pd={PRERENDER:`prerender`,POSTRENDER:`postrender`,PRECOMPOSE:`precompose`,POSTCOMPOSE:`postcompose`,RENDERCOMPLETE:`rendercomplete`},Fd=class{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Ke(),{get:(e,t)=>{if(typeof Ke()[t]==`function`)return this.push_(t),this.pushMethodArgs_},set:(e,t,n)=>(this.push_(t,n),!0)})}push_(...e){let t=this.instructions_,n=this.zIndex+this.offset_;t[n]||(t[n]=[]),t[n].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,r=t.length;n<r;++n){let r=t[n];if(typeof r==`function`){r(e);continue}let i=t[++n];if(typeof e[r]==`function`)e[r](...i);else{if(typeof i==`function`){e[r]=i(e);continue}e[r]=i}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}},Id=5,Ld=class extends Pe{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=[],this.maxStaleKeys=Id}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return A()}getData(e){return null}prepareFrame(e){return A()}renderFrame(e,t){return A()}forEachFeatureAtCoordinate(e,t,n,r,i){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){let t=e.target;(t.getState()===U.LOADED||t.getState()===U.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=U.LOADED&&t!=U.ERROR&&e.addEventListener(g.CHANGE,this.boundHandleImageChange_),t==U.IDLE&&(e.load(),t=e.getState()),t==U.LOADED}renderIfReadyAndVisible(){let e=this.getLayer();e&&e.getVisible()&&e.getSourceState()===`ready`&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}};const Rd=[];var zd=null;function Bd(){zd=pe(1,1,void 0,{willReadFrequently:!0})}var Vd=class extends Ld{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Wc(),this.pixelTransform=Wc(),this.inversePixelTransform=Wc(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){zd||Bd(),zd.clearRect(0,0,1,1);let r;try{zd.drawImage(e,t,n,1,1,0,0,1,1),r=zd.getImageData(0,0,1,1).data}catch{return zd=null,null}return r}getBackground(e){let t=this.getLayer().getBackground();return typeof t==`function`&&(t=t(e.viewState.resolution)),t||void 0}useContainer(e,t,n){let r=this.getLayer().getClassName(),i,a;if(e&&e.className===r&&(!n||e&&e.style.backgroundColor&&Ee(jd(e.style.backgroundColor),jd(n)))){let t=e.firstElementChild;ge(t)&&(a=t.getContext(`2d`))}if(a&&el(a.canvas.style.transform,t)?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){i=Xe?ke():document.createElement(`div`),i.className=r;let e=i.style;e.position=`absolute`,e.width=`100%`,e.height=`100%`,a=pe();let t=a.canvas;i.appendChild(t),e=t.style,e.position=`absolute`,e.left=`0`,e.transformOrigin=`top left`,this.container=i,this.context=a}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){let r=ye(n),i=Ge(n),a=ze(n),o=m(n);qc(t.coordinateToPixelTransform,r),qc(t.coordinateToPixelTransform,i),qc(t.coordinateToPixelTransform,a),qc(t.coordinateToPixelTransform,o);let s=this.inversePixelTransform;qc(s,r),qc(s,i),qc(s,a),qc(s,o),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){let n=e.extent,r=e.viewState.resolution,i=e.viewState.rotation,a=e.pixelRatio,o=Math.round(Fe(n)/r*a),s=Math.round(se(n)/r*a);Jc(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,i,-o/2,-s/2),Yc(this.inversePixelTransform,this.pixelTransform);let c=Qc(this.pixelTransform);if(this.useContainer(t,c,this.getBackground(e)),!this.containerReused){let e=this.context.canvas;e.width!=o||e.height!=s?(e.width=o,e.height=s):this.context.clearRect(0,0,o,s),c!==e.style.transform&&(e.style.transform=c)}}dispatchRenderEvent_(e,t,n){let r=this.getLayer();if(r.hasListener(e)){let i=new Nd(e,this.inversePixelTransform,n,t);r.dispatchEvent(i)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Pd.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Pd.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new Fd),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Pd.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Pd.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,r,i,a,o){let s=i/2,c=a/2,l=r/t,u=-l,d=-e[0]+o,f=-e[1];return Jc(this.tempTransform,s,c,l,u,-n,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}},Hd={CENTER:`center`,RESOLUTION:`resolution`,ROTATION:`rotation`};function Ud(e,t,n){return(function(r,i,a,o,s){if(!r)return;if(!i&&!t)return r;let c=t?0:a[0]*i,l=t?0:a[1]*i,u=s?s[0]:0,d=s?s[1]:0,f=e[0]+c/2+u,p=e[2]-c/2+u,m=e[1]+l/2+d,h=e[3]-l/2+d;f>p&&(f=(p+f)/2,p=f),m>h&&(m=(h+m)/2,h=m);let g=H(r[0],f,p),_=H(r[1],m,h);if(o&&n&&i){let e=30*i;g+=-e*Math.log(1+Math.max(0,f-r[0])/e)+e*Math.log(1+Math.max(0,r[0]-p)/e),_+=-e*Math.log(1+Math.max(0,m-r[1])/e)+e*Math.log(1+Math.max(0,r[1]-h)/e)}return[g,_]})}function Wd(e){return e}function Gd(e,t,n,r){let i=Fe(t)/n[0],a=se(t)/n[1];return r?Math.min(e,Math.max(i,a)):Math.min(e,Math.min(i,a))}function Kd(e,t,n){let r=Math.min(e,t);return r*=Math.log(1+50*Math.max(0,e/t-1))/50+1,n&&(r=Math.max(r,n),r/=Math.log(1+50*Math.max(0,n/e-1))/50+1),H(r,n/2,t*2)}function qd(e,t,n,r){return t=t===void 0?!0:t,(function(i,a,o,s){if(i!==void 0){let c=e[0],l=e[e.length-1],u=n?Gd(c,n,o,r):c;if(s)return t?Kd(i,u,l):H(i,l,u);let d=Math.min(u,i),f=Math.floor(C(e,d,a));return e[f]>u&&f<e.length-1?e[f+1]:e[f]}})}function Jd(e,t,n,r,i,a){return r=r===void 0?!0:r,n=n===void 0?0:n,(function(o,s,c,l){if(o!==void 0){let u=i?Gd(t,i,c,a):t;if(l)return r?Kd(o,u,n):H(o,n,u);let d=1e-9,f=Math.ceil(Math.log(t/u)/Math.log(e)-d),p=-s*(.5-d)+.5,m=Math.min(u,o),h=Math.floor(Math.log(t/m)/Math.log(e)+p);return H(t/e**+Math.max(f,h),n,u)}})}function Yd(e,t,n,r,i){return n=n===void 0?!0:n,(function(a,o,s,c){if(a!==void 0){let o=r?Gd(e,r,s,i):e;return!n||!c?H(a,t,o):Kd(a,o,t)}})}function Xd(e){if(e!==void 0)return 0}function Zd(e){if(e!==void 0)return e}function Qd(e){let t=2*Math.PI/e;return(function(e,n){if(n)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e})}function $d(e){let t=e===void 0?Qo(5):e;return(function(e,n){return n||e===void 0?e:Math.abs(e)<=t?0:e})}var ef=0,tf=class extends ve{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Oc(e.projection,`EPSG:3857`),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&yc(),e.center&&=zc(e.center,this.projection_),e.extent&&=Vc(e.extent,this.projection_),this.applyOptions_(e)}applyOptions_(e){let t=Object.assign({},e);for(let e in Hd)delete t[e];this.setProperties(t,!0);let n=af(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom,this.constraints_={center:rf(e),resolution:n.constraint,rotation:of(e)},this.setRotation(e.rotation===void 0?0:e.rotation),this.setCenterInternal(e.center===void 0?null:e.center),e.resolution===void 0?e.zoom!==void 0&&this.setZoom(e.zoom):this.setResolution(e.resolution)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;let n=this.getCenterInternal();if(n){let r=e||[0,0,0,0];t||=[0,0,0,0];let i=this.getResolution(),a=i/2*(r[3]-t[3]+t[1]-r[1]),o=i/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([n[0]+a,n[1]-o])}}getUpdatedOptions_(e){let t=this.getProperties();return t.resolution===void 0?t.zoom=this.getZoom():t.resolution=this.getResolution(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);let t=Array(arguments.length);for(let e=0;e<t.length;++e){let n=arguments[e];n.center&&=(n=Object.assign({},n),zc(n.center,this.getProjection())),n.anchor&&=(n=Object.assign({},n),zc(n.anchor,this.getProjection())),t[e]=n}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]==`function`&&(n=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){let e=arguments[r];e.center&&this.setCenterInternal(e.center),e.zoom===void 0?e.resolution&&this.setResolution(e.resolution):this.setZoom(e.zoom),e.rotation!==void 0&&this.setRotation(e.rotation)}if(r===t){n&&nf(n,!0);return}let i=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,s=this.targetRotation_,c=[];for(;r<t;++r){let e=arguments[r],t={start:i,complete:!1,anchor:e.anchor,duration:e.duration===void 0?1e3:e.duration,easing:e.easing||Du,callback:n};if(e.center&&(t.sourceCenter=a,t.targetCenter=e.center.slice(),a=t.targetCenter),e.zoom===void 0?e.resolution&&(t.sourceResolution=o,t.targetResolution=e.resolution,o=t.targetResolution):(t.sourceResolution=o,t.targetResolution=this.getResolutionForZoom(e.zoom),o=t.targetResolution),e.rotation!==void 0){t.sourceRotation=s;let n=$o(e.rotation-s+Math.PI,2*Math.PI)-Math.PI;t.targetRotation=s+n,s=t.targetRotation}sf(t)?t.complete=!0:i+=t.duration,c.push(t)}this.animations_.push(c),this.setHint(cd.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[cd.ANIMATING]>0}getInteracting(){return this.hints_[cd.INTERACTING]>0}cancelAnimations(){this.setHint(cd.ANIMATING,-this.hints_[cd.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){let n=this.animations_[t];if(n[0].callback&&nf(n[0].callback,!1),!e)for(let t=0,r=n.length;t<r;++t){let r=n[t];if(!r.complete){e=r.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;let e=Date.now(),t=!1;for(let n=this.animations_.length-1;n>=0;--n){let r=this.animations_[n],i=!0;for(let n=0,a=r.length;n<a;++n){let a=r[n];if(a.complete)continue;let o=e-a.start,s=a.duration>0?o/a.duration:1;s>=1?(a.complete=!0,s=1):i=!1;let c=a.easing(s);if(a.sourceCenter){let e=a.sourceCenter[0],t=a.sourceCenter[1],n=a.targetCenter[0],r=a.targetCenter[1];this.nextCenter_=a.targetCenter,this.targetCenter_=[e+c*(n-e),t+c*(r-t)]}if(a.sourceResolution&&a.targetResolution){let e=c===1?a.targetResolution:a.sourceResolution+c*(a.targetResolution-a.sourceResolution);if(a.anchor){let t=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(e,0,t,!0);this.targetCenter_=this.calculateCenterZoom(n,a.anchor)}this.nextResolution_=a.targetResolution,this.targetResolution_=e,this.applyTargetState_(!0)}if(a.sourceRotation!==void 0&&a.targetRotation!==void 0){let e=c===1?$o(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+c*(a.targetRotation-a.sourceRotation);if(a.anchor){let t=this.constraints_.rotation(e,!0);this.targetCenter_=this.calculateCenterRotate(t,a.anchor)}this.nextRotation_=a.targetRotation,this.targetRotation_=e}if(this.applyTargetState_(!0),t=!0,!a.complete)break}if(i){this.animations_[n]=null,this.setHint(cd.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;let e=r[0].callback;e&&nf(e,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n,r=this.getCenterInternal();return r!==void 0&&(n=[r[0]-t[0],r[1]-t[1]],ds(n,e-this.getRotation()),os(n,t)),n}calculateCenterZoom(e,t){let n,r=this.getCenterInternal(),i=this.getResolution();return r!==void 0&&i!==void 0&&(n=[t[0]-e*(t[0]-r[0])/i,t[1]-e*(t[1]-r[1])/i]),n}getViewportSize_(e){let t=this.viewportSize_;if(e){let n=t[0],r=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){let e=this.getCenterInternal();return e&&Rc(e,this.getProjection())}getCenterInternal(){return this.get(Hd.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get(`constrainResolution`)}getHints(e){return e===void 0?this.hints_.slice():(e[0]=this.hints_[0],e[1]=this.hints_[1],e)}calculateExtent(e){return Bc(this.calculateExtentInternal(e),this.getProjection())}calculateExtentInternal(e){e||=this.getViewportSizeMinusPadding_();let t=this.getCenterInternal();V(t,`The view center is not defined`);let n=this.getResolution();V(n!==void 0,`The view resolution is not defined`);let r=this.getRotation();return V(r!==void 0,`The view rotation is not defined`),ae(t,n,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Hd.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Vc(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t||=this.getViewportSizeMinusPadding_();let n=Fe(e)/t[0],r=se(e)/t[1];return Math.max(n,r)}getResolutionForValueFunction(e){e||=2;let t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(t/n)/Math.log(e);return(function(n){return t/e**+(n*r)})}getRotation(){return this.get(Hd.ROTATION)}getValueForResolutionFunction(e){let t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/t;return(function(e){return Math.log(n/e)/t/i})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e),n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){let e=this.getProjection(),t=this.getResolution(),n=this.getRotation(),r=this.getCenterInternal(),i=this.padding_;if(i){let e=this.getViewportSizeMinusPadding_();r=cf(r,this.getViewportSize_(),[e[0]/2+i[3],e[1]/2+i[0]],t,n)}return{center:r.slice(0),projection:e===void 0?null:e,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e,t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,r;if(this.resolutions_){let i=C(this.resolutions_,e,1);t=i,n=this.resolutions_[i],r=i==this.resolutions_.length-1?2:n/this.resolutions_[i+1]}else n=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(n/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];let t=H(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/n**+H(e-t,0,1)}return this.maxResolution_/this.zoomFactor_**+(e-this.minZoom_)}fit(e,t){let n;if(V(Array.isArray(e)||typeof e.getSimplifiedGeometry==`function`,"Invalid extent or geometry provided as `geometry`"),Array.isArray(e))V(!ue(e),"Cannot fit empty extent provided as `geometry`"),n=du(Vc(e,this.getProjection()));else if(e.getType()===`Circle`){let t=Vc(e.getExtent(),this.getProjection());n=du(t),n.rotate(this.getRotation(),f(t))}else{let t=Lc();n=t?e.clone().transform(t,this.getProjection()):e}this.fitInternal(n,t)}rotatedExtentForGeometry(e){let t=this.getRotation(),n=Math.cos(t),r=Math.sin(-t),i=e.getFlatCoordinates(),a=e.getStride(),o=1/0,s=1/0,c=-1/0,l=-1/0;for(let e=0,t=i.length;e<t;e+=a){let t=i[e]*n-i[e+1]*r,a=i[e]*r+i[e+1]*n;o=Math.min(o,t),s=Math.min(s,a),c=Math.max(c,t),l=Math.max(l,a)}return[o,s,c,l]}fitInternal(e,t){t||={};let n=t.size;n||=this.getViewportSizeMinusPadding_();let r=t.padding===void 0?[0,0,0,0]:t.padding,i=t.nearest===void 0?!1:t.nearest,a;a=t.minResolution===void 0?t.maxZoom===void 0?0:this.getResolutionForZoom(t.maxZoom):t.minResolution;let o=this.rotatedExtentForGeometry(e),s=this.getResolutionForExtentInternal(o,[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);s=isNaN(s)?a:Math.max(s,a),s=this.getConstrainedResolution(s,i?0:1);let c=this.getRotation(),l=Math.sin(c),u=Math.cos(c),d=f(o);d[0]+=(r[1]-r[3])/2*s,d[1]+=(r[0]-r[2])/2*s;let p=d[0]*u-d[1]*l,m=d[1]*u+d[0]*l,h=this.getConstrainedCenter([p,m],s),g=t.callback?t.callback:ee;t.duration===void 0?(this.targetResolution_=s,this.targetCenter_=h,this.applyTargetState_(!1,!0),nf(g,!0)):this.animateInternal({resolution:s,center:h,duration:t.duration,easing:t.easing},g)}centerOn(e,t,n){this.centerOnInternal(zc(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(cf(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,r){let i,a=this.padding_;if(a&&e){let o=this.getViewportSizeMinusPadding_(-n),s=cf(e,r,[o[0]/2+a[3],o[1]/2+a[0]],t,n);i=[e[0]-s[0],e[1]-s[1]]}return i}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){let t=Rc(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){let t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t&&=zc(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){let n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*e,0,r,n);t&&(this.targetCenter_=this.calculateCenterZoom(i,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(this.zoomFactor_**+-e,t)}adjustRotation(e,t){t&&=zc(t,this.getProjection()),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){let n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&zc(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){let n=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,n),i=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,0,i,n),o=this.constraints_.center(this.targetCenter_,a,i,n,this.calculateCenterShift(this.targetCenter_,a,r,i));this.get(Hd.ROTATION)!==r&&this.set(Hd.ROTATION,r),this.get(Hd.RESOLUTION)!==a&&(this.set(Hd.RESOLUTION,a),this.set(`zoom`,this.getZoom(),!0)),(!o||!this.get(Hd.CENTER)||!us(this.get(Hd.CENTER),o))&&this.set(Hd.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e===void 0?200:e;let r=t||0,i=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,r,a),s=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,i,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=i,this.targetCenter_=s,this.applyTargetState_();return}n||=e===0?this.cancelAnchor_:void 0,this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==i||!this.getCenterInternal()||!us(this.getCenterInternal(),s))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:i,center:s,resolution:o,duration:e,easing:Eu,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(cd.INTERACTING,1)}endInteraction(e,t,n){n&&=zc(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(cd.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){let n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){let n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t||=0;let n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}};function nf(e,t){setTimeout(function(){e(t)},0)}function rf(e){if(e.extent!==void 0){let t=e.smoothExtentConstraint===void 0?!0:e.smoothExtentConstraint;return Ud(e.extent,e.constrainOnlyCenter,t)}let t=Oc(e.projection,`EPSG:3857`);if(e.multiWorld!==!0&&t.isGlobal()){let e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,Ud(e,!1,!1)}return Wd}function af(e){let t,n,r,i=e.minZoom===void 0?ef:e.minZoom,a=e.maxZoom===void 0?28:e.maxZoom,o=e.zoomFactor===void 0?2:e.zoomFactor,s=e.multiWorld===void 0?!1:e.multiWorld,c=e.smoothResolutionConstraint===void 0?!0:e.smoothResolutionConstraint,l=e.showFullExtent===void 0?!1:e.showFullExtent,u=Oc(e.projection,`EPSG:3857`),d=u.getExtent(),f=e.constrainOnlyCenter,p=e.extent;if(!s&&!p&&u.isGlobal()&&(f=!1,p=d),e.resolutions!==void 0){let o=e.resolutions;n=o[i],r=o[a]===void 0?o[o.length-1]:o[a],t=e.constrainResolution?qd(o,c,!f&&p,l):Yd(n,r,c,!f&&p,l)}else{let s=(d?Math.max(Fe(d),se(d)):360*gs.degrees/u.getMetersPerUnit())/256/2**ef,m=s/2**(28-ef);n=e.maxResolution,n===void 0?n=s/o**+i:i=0,r=e.minResolution,r===void 0&&(r=e.maxZoom===void 0?m:e.maxResolution===void 0?s/o**+a:n/o**+a),a=i+Math.floor(Math.log(n/r)/Math.log(o)),r=n/o**+(a-i),t=e.constrainResolution?Jd(o,n,r,c,!f&&p,l):Yd(n,r,c,!f&&p,l)}return{constraint:t,maxResolution:n,minResolution:r,minZoom:i,zoomFactor:o}}function of(e){if(e.enableRotation===void 0||e.enableRotation){let t=e.constrainRotation;return t===void 0||t===!0?$d():t===!1?Zd:typeof t==`number`?Qd(t):Zd}return Xd}function sf(e){return!(e.sourceCenter&&e.targetCenter&&!us(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function cf(e,t,n,r,i){let a=Math.cos(-i),o=Math.sin(-i),s=e[0]*a-e[1]*o,c=e[1]*a+e[0]*o;return s+=(t[0]/2-n[0])*r,c+=(n[1]-t[1]/2)*r,o=-o,[s*a-c*o,c*a+s*o]}var lf=tf,W={OPACITY:`opacity`,VISIBLE:`visible`,EXTENT:`extent`,Z_INDEX:`zIndex`,MAX_RESOLUTION:`maxResolution`,MIN_RESOLUTION:`minResolution`,MAX_ZOOM:`maxZoom`,MIN_ZOOM:`minZoom`,SOURCE:`source`,MAP:`map`},uf=class extends ve{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;let t=Object.assign({},e);typeof e.properties==`object`&&(delete t.properties,Object.assign(t,e.properties)),t[W.OPACITY]=e.opacity===void 0?1:e.opacity,V(typeof t[W.OPACITY]==`number`,`Layer opacity must be a number`),t[W.VISIBLE]=e.visible===void 0?!0:e.visible,t[W.Z_INDEX]=e.zIndex,t[W.MAX_RESOLUTION]=e.maxResolution===void 0?1/0:e.maxResolution,t[W.MIN_RESOLUTION]=e.minResolution===void 0?0:e.minResolution,t[W.MIN_ZOOM]=e.minZoom===void 0?-1/0:e.minZoom,t[W.MAX_ZOOM]=e.maxZoom===void 0?1/0:e.maxZoom,this.className_=t.className===void 0?`ol-layer`:t.className,delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){let t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=H(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return A()}getLayerStatesArray(e){return A()}getExtent(){return this.get(W.EXTENT)}getMaxResolution(){return this.get(W.MAX_RESOLUTION)}getMinResolution(){return this.get(W.MIN_RESOLUTION)}getMinZoom(){return this.get(W.MIN_ZOOM)}getMaxZoom(){return this.get(W.MAX_ZOOM)}getOpacity(){return this.get(W.OPACITY)}getSourceState(){return A()}getVisible(){return this.get(W.VISIBLE)}getZIndex(){return this.get(W.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(W.EXTENT,e)}setMaxResolution(e){this.set(W.MAX_RESOLUTION,e)}setMinResolution(e){this.set(W.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(W.MAX_ZOOM,e)}setMinZoom(e){this.set(W.MIN_ZOOM,e)}setOpacity(e){V(typeof e==`number`,`Layer opacity must be a number`),this.set(W.OPACITY,e)}setVisible(e){this.set(W.VISIBLE,e)}setZIndex(e){this.set(W.Z_INDEX,e)}disposeInternal(){this.state_&&=(this.state_.layer=null,null),super.disposeInternal()}},df=class extends uf{constructor(e){let t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(W.SOURCE,this.handleSourcePropertyChange_);let n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e||=[],e.push(this),e}getLayerStatesArray(e){return e||=[],e.push(this.getLayerState()),e}getSource(){return this.get(W.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){let e=this.getSource();return e?e.getState():`undefined`}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!==`ready`)&&(this.sourceReady_=!0,this.dispatchEvent(`sourceready`))}handleSourcePropertyChange_(){this.sourceChangeKey_&&=(Ye(this.sourceChangeKey_),null),this.sourceReady_=!1;let e=this.getSource();e&&(this.sourceChangeKey_=Se(e,g.CHANGE,this.handleSourceChange_,this),e.getState()===`ready`&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent(`sourceready`)},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t,n=this.getMapInternal();!e&&n&&(e=n.getView()),t=e instanceof lf?{viewState:e.getState(),extent:e.calculateExtent()}:e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(e=>e.layer===this),!r)return!1}else r=this.getLayerState();let i=this.getExtent();return ff(r,t.viewState)&&(!i||He(i,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t=this.getSource()?.getAttributions();if(!t)return[];let n=t(e instanceof lf?e.getViewStateAndExtent():e);return Array.isArray(n)||(n=[n]),n}render(e,t){let n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){let t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(W.MAP,e)}getMapInternal(){return this.get(W.MAP)}setMap(e){this.mapPrecomposeKey_&&=(Ye(this.mapPrecomposeKey_),null),e||this.changed(),this.mapRenderKey_&&=(Ye(this.mapRenderKey_),null),e&&(this.mapPrecomposeKey_=Se(e,Pd.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Se(this,g.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){let t=e.frameState.layerStatesArray,n=this.getLayerState(!1);V(!t.some(e=>e.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(n)}setSource(e){this.set(W.SOURCE,e)}getRenderer(){return this.renderer_||=this.createRenderer(),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}};function ff(e,t){if(!e.visible)return!1;let n=t.resolution;if(n<e.minResolution||n>=e.maxResolution)return!1;let r=t.zoom;return r>e.minZoom&&r<=e.maxZoom}var pf=df,mf=class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(let t in this.cache_){let n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){let r=hf(e,t,n);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,n){let r=hf(e,t,n);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,n,r,i){let a=hf(e,t,n),o=a in this.cache_;this.cache_[a]=r,i&&(r.getImageState()===U.IDLE&&r.load(),r.getImageState()===U.LOADING?r.ready().then(()=>{this.patternCache_[a]=Ke().createPattern(r.getImage(1),`repeat`)}):this.patternCache_[a]=Ke().createPattern(r.getImage(1),`repeat`)),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}};function hf(e,t,n){let r=n?jd(n):`null`;return t+`:`+e+`:`+r}const gf=new mf;var _f=null,vf=class extends tt{constructor(e,t,n,r,i){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=i,this.imageState_=r===void 0?U.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===U.LOADED){_f||=pe(1,1,void 0,{willReadFrequently:!0}),_f.drawImage(this.image_,0,0);try{_f.getImageData(0,0,1,1),this.tainted_=!1}catch{_f=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(g.CHANGE)}handleImageError_(){this.imageState_=U.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=U.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let e=this.size_[0],t=this.size_[1],n=pe(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===U.IDLE){this.image_||this.initializeImage_(),this.imageState_=U.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Cu(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==U.LOADED)return;let t=this.image_,n=pe(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=n.canvas;n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation=`multiply`,n.fillStyle=yd(this.color_),n.fillRect(0,0,r.width/e,r.height/e),n.globalCompositeOperation=`destination-in`,n.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||=new Promise(e=>{if(this.imageState_===U.LOADED||this.imageState_===U.ERROR)e();else{let t=()=>{(this.imageState_===U.LOADED||this.imageState_===U.ERROR)&&(this.removeEventListener(g.CHANGE,t),e())};this.addEventListener(g.CHANGE,t)}}),this.ready_}};function yf(e,t,n,r,i,a){let o=t===void 0?void 0:gf.get(t,n,i);return o||(o=new vf(e,e&&`src`in e?e.src||void 0:t,n,r,i),gf.set(t,n,i,o,a)),a&&o&&!gf.getPattern(t,n,i)&&gf.set(t,n,i,o,a),o}var bf=vf;function xf(e){return e?Array.isArray(e)?Md(e):typeof e==`object`&&`src`in e?Sf(e):e:null}function Sf(e){if(!e.offset||!e.size)return gf.getPattern(e.src,`anonymous`,e.color);let t=e.src+`:`+e.offset,n=gf.getPattern(t,void 0,e.color);if(n)return n;let r=gf.get(e.src,`anonymous`,null);if(r.getImageState()!==U.LOADED)return null;let i=pe(e.size[0],e.size[1]);return i.drawImage(r.getImage(1),e.offset[0],e.offset[1],e.size[0],e.size[1],0,0,e.size[0],e.size[1]),yf(i.canvas,t,void 0,U.LOADED,e.color,!0),gf.getPattern(t,void 0,e.color)}var Cf=class{drawCustom(e,t,n,r,i){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}};const wf=`#000`,Tf=`round`,Ef=[],Df=`round`,Of=`#000`,kf=`center`,Af=[0,0,0,0],jf=new ve;var Mf=null,Nf;const Pf={};var Ff=new Set([`serif`,`sans-serif`,`monospace`,`cursive`,`fantasy`,`system-ui`,`ui-serif`,`ui-sans-serif`,`ui-monospace`,`ui-rounded`,`emoji`,`math`,`fangsong`]);function If(e,t,n){return`${e} ${t} 16px "${n}"`}const Lf=(function(){let e,t;async function n(e){await t.ready;let n=await t.load(e);if(n.length===0)return!1;let r=Ue(e),i=r.families[0].toLowerCase(),a=r.weight;return n.some(e=>{let t=e.family.replace(/^['"]|['"]$/g,``).toLowerCase(),n=Ie[e.weight]||e.weight;return t===i&&e.style===r.style&&n==a})}async function r(){await t.ready;let i=!0,a=jf.getProperties(),o=Object.keys(a).filter(e=>a[e]<100);for(let e=o.length-1;e>=0;--e){let t=o[e],r=a[t];r<100&&(await n(t)?(et(Pf),jf.set(t,100)):(r+=10,jf.set(t,r,!0),r<100&&(i=!1)))}e=void 0,i||(e=setTimeout(r,100))}return async function(n){t||=Xe?self.fonts:document.fonts;let i=Ue(n);if(!i)return;let a=i.families,o=!1;for(let e of a){if(Ff.has(e))continue;let t=If(i.style,i.weight,e);jf.get(t)===void 0&&(jf.set(t,0,!0),o=!0)}o&&(clearTimeout(e),e=setTimeout(r,100))}})(),Rf=(function(){let e;return function(t){let n=Pf[t];if(n==null){if(Xe){let e=Ue(t),r=zf(t,`Žg`);n=(isNaN(Number(e.lineHeight))?1.2:Number(e.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else e||(e=document.createElement(`div`),e.innerHTML=`M`,e.style.minHeight=`0`,e.style.maxHeight=`none`,e.style.height=`auto`,e.style.padding=`0`,e.style.border=`none`,e.style.position=`absolute`,e.style.display=`block`,e.style.left=`-99999px`),e.style.font=t,document.body.appendChild(e),n=e.offsetHeight,document.body.removeChild(e);Pf[t]=n}return n}})();function zf(e,t){return Mf||=pe(1,1),e!=Nf&&(Mf.font=e,Nf=Mf.font),Mf.measureText(t)}function Bf(e,t){return zf(e,t).width}function Vf(e,t,n){if(t in n)return n[t];let r=t.split(`
`).reduce((t,n)=>Math.max(t,Bf(e,n)),0);return n[t]=r,r}function Hf(e,t){let n=[],r=[],i=[],a=0,o=0,s=0,c=0;for(let l=0,u=t.length;l<=u;l+=2){let d=t[l];if(d===`
`||l===u){a=Math.max(a,o),i.push(o),o=0,s+=c,c=0;continue}let f=t[l+1]||e.font,p=Bf(f,d);n.push(p),o+=p;let m=Rf(f);r.push(m),c=Math.max(c,m)}return{width:a,height:s,widths:n,heights:r,lineWidths:i}}function Uf(e,t,n,r,i,a,o,s,c,l,u){e.save(),n!==1&&(e.globalAlpha===void 0?e.globalAlpha=e=>e.globalAlpha*=n:e.globalAlpha*=n),t&&e.transform.apply(e,t),r.contextInstructions?(e.translate(c,l),e.scale(u[0],u[1]),Wf(r,e)):u[0]<0||u[1]<0?(e.translate(c,l),e.scale(u[0],u[1]),e.drawImage(r,i,a,o,s,0,0,o,s)):e.drawImage(r,i,a,o,s,c,l,o*u[0],s*u[1]),e.restore()}function Wf(e,t){let n=e.contextInstructions;for(let e=0,r=n.length;e<r;e+=2)Array.isArray(n[e+1])?t[n[e]].apply(t,n[e+1]):t[n[e]]=n[e+1]}var Gf=class extends Cf{constructor(e,t,n,r,i,a,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=r,this.transformRotation_=r?ts(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=i,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_=``,this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Wc()}drawImages_(e,t,n,r){if(!this.image_)return;let i=tl(e,t,n,r,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,s=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=s*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let e=0,t=i.length;e<t;e+=2){let t=i[e]-this.imageAnchorX_,n=i[e+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){let e=t+this.imageAnchorX_,r=n+this.imageAnchorY_;Jc(o,e,r,1,1,c,-e,-r),a.save(),a.transform.apply(a,o),a.translate(e,r),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,n,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=s)}drawText_(e,t,n,r){if(!this.textState_||this.text_===``)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let i=tl(e,t,n,r,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<n;t+=r){let e=i[t]+this.textOffsetX_,n=i[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(e-this.textOffsetX_,n-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,e,n),this.textFillState_&&a.fillText(this.text_,e,n))}}moveToLineTo_(e,t,n,r,i){let a=this.context_,o=tl(e,t,n,r,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let s=o.length;i&&(s-=2);for(let e=2;e<s;e+=2)a.lineTo(o[e],o[e+1]);return i&&a.closePath(),n}drawRings_(e,t,n,r){for(let i=0,a=n.length;i<a;++i)t=this.moveToLineTo_(e,t,n[i],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),He(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let t=dl(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],r=t[3]-t[1],i=Math.sqrt(n*n+r*r),a=this.context_;a.beginPath(),a.arc(t[0],t[1],i,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==``&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case`Point`:this.drawPoint(e);break;case`LineString`:this.drawLineString(e);break;case`Polygon`:this.drawPolygon(e);break;case`MultiPoint`:this.drawMultiPoint(e);break;case`MultiLineString`:this.drawMultiLineString(e);break;case`MultiPolygon`:this.drawMultiPolygon(e);break;case`GeometryCollection`:this.drawGeometryCollection(e);break;case`Circle`:this.drawCircle(e);break;default:}}drawFeature(e,t){let n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){let t=e.getGeometriesArray();for(let e=0,n=t.length;e<n;++e)this.drawGeometry(t[e])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==``&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==``&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),He(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==``){let t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let t=e.getExtent();if(He(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let t=this.context_,n=e.getFlatCoordinates(),r=0,i=e.getEnds(),a=e.getStride();t.beginPath();for(let e=0,t=i.length;e<t;++e)r=this.moveToLineTo_(n,r,i[e],a,!1);t.stroke()}if(this.text_!==``){let t=e.getFlatMidpoints();this.drawText_(t,0,t.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),He(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==``){let t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),He(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let t=this.context_,n=e.getOrientedFlatCoordinates(),r=0,i=e.getEndss(),a=e.getStride();t.beginPath();for(let e=0,t=i.length;e<t;++e){let t=i[e];r=this.drawRings_(n,r,t,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==``){let t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){let t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){let t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),Ee(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){let t=this.context_,n=this.contextTextState_,r=e.textAlign?e.textAlign:kf;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=r&&(n.textAlign=r,t.textAlign=r),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(e?this.fillState_={fillStyle:xf(e.getColor()||wf)}:this.fillState_=null,!t)this.strokeState_=null;else{let e=t.getColor(),n=t.getLineCap(),r=t.getLineDash(),i=t.getLineDashOffset(),a=t.getLineJoin(),o=t.getWidth(),s=t.getMiterLimit(),c=r||Ef;this.strokeState_={lineCap:n===void 0?Tf:n,lineDash:this.pixelRatio_===1?c:c.map(e=>e*this.pixelRatio_),lineDashOffset:(i||0)*this.pixelRatio_,lineJoin:a===void 0?Df:a,lineWidth:(o===void 0?1:o)*this.pixelRatio_,miterLimit:s===void 0?10:s,strokeStyle:xf(e||Of)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}let n=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),i=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*n,this.imageAnchorY_=r[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();let a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/n,a[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_=``;else{let t=e.getFill();t?this.textFillState_={fillStyle:xf(t.getColor()||wf)}:this.textFillState_=null;let n=e.getStroke();if(!n)this.textStrokeState_=null;else{let e=n.getColor(),t=n.getLineCap(),r=n.getLineDash(),i=n.getLineDashOffset(),a=n.getLineJoin(),o=n.getWidth(),s=n.getMiterLimit();this.textStrokeState_={lineCap:t===void 0?Tf:t,lineDash:r||Ef,lineDashOffset:i||0,lineJoin:a===void 0?Df:a,lineWidth:o===void 0?1:o,miterLimit:s===void 0?10:s,strokeStyle:xf(e||Of)}}let r=e.getFont(),i=e.getOffsetX(),a=e.getOffsetY(),o=e.getRotateWithView(),s=e.getRotation(),c=e.getScaleArray(),l=e.getText(),u=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:r===void 0?`10px sans-serif`:r,textAlign:u===void 0?kf:u,textBaseline:d===void 0?`middle`:d},this.text_=l===void 0?``:Array.isArray(l)?l.reduce((e,t,n)=>e+=n%2?` `:t,``):l,this.textOffsetX_=i===void 0?0:this.pixelRatio_*i,this.textOffsetY_=a===void 0?0:this.pixelRatio_*a,this.textRotateWithView_=o===void 0?!1:o,this.textRotation_=s===void 0?0:s,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}},Kf=.5,qf={Point:ap,LineString:np,Polygon:sp,MultiPoint:op,MultiLineString:rp,MultiPolygon:ip,GeometryCollection:tp,Circle:Zf};function Jf(e,t){return parseInt(M(e),10)-parseInt(M(t),10)}function Yf(e,t){let n=Xf(e,t);return n*n}function Xf(e,t){return Kf*e/t}function Zf(e,t,n,r,i){let a=n.getFill(),o=n.getStroke();if(a||o){let s=e.getBuilder(n.getZIndex(),`Circle`);s.setFillStrokeStyle(a,o),s.drawCircle(t,r,i)}let s=n.getText();if(s&&s.getText()){let i=e.getBuilder(n.getZIndex(),`Text`);i.setTextStyle(s),i.drawText(t,r)}}function Qf(e,t,n,r,i,a,o,s){let c=[],l=n.getImage();if(l){let e=!0,t=l.getImageState();t==U.LOADED||t==U.ERROR?e=!1:t==U.IDLE&&l.load(),e&&c.push(l.ready())}let u=n.getFill();u&&u.loading()&&c.push(u.ready());let d=c.length>0;return d&&Promise.all(c).then(()=>i(null)),$f(e,t,n,r,a,o,s),d}function $f(e,t,n,r,i,a,o){let s=n.getGeometryFunction()(t);if(!s)return;let c=s.simplifyTransformed(r,i);if(n.getRenderer())ep(e,c,n,t,o);else{let r=qf[c.getType()];r(e,c,n,t,o,a)}}function ep(e,t,n,r,i){if(t.getType()==`GeometryCollection`){let a=t.getGeometries();for(let t=0,o=a.length;t<o;++t)ep(e,a[t],n,r,i);return}e.getBuilder(n.getZIndex(),`Default`).drawCustom(t,r,n.getRenderer(),n.getHitDetectionRenderer(),i)}function tp(e,t,n,r,i,a){let o=t.getGeometriesArray(),s,c;for(s=0,c=o.length;s<c;++s){let t=qf[o[s].getType()];t(e,o[s],n,r,i,a)}}function np(e,t,n,r,i){let a=n.getStroke();if(a){let o=e.getBuilder(n.getZIndex(),`LineString`);o.setFillStrokeStyle(null,a),o.drawLineString(t,r,i)}let o=n.getText();if(o&&o.getText()){let a=e.getBuilder(n.getZIndex(),`Text`);a.setTextStyle(o),a.drawText(t,r,i)}}function rp(e,t,n,r,i){let a=n.getStroke();if(a){let o=e.getBuilder(n.getZIndex(),`LineString`);o.setFillStrokeStyle(null,a),o.drawMultiLineString(t,r,i)}let o=n.getText();if(o&&o.getText()){let a=e.getBuilder(n.getZIndex(),`Text`);a.setTextStyle(o),a.drawText(t,r,i)}}function ip(e,t,n,r,i){let a=n.getFill(),o=n.getStroke();if(o||a){let s=e.getBuilder(n.getZIndex(),`Polygon`);s.setFillStrokeStyle(a,o),s.drawMultiPolygon(t,r,i)}let s=n.getText();if(s&&s.getText()){let a=e.getBuilder(n.getZIndex(),`Text`);a.setTextStyle(s),a.drawText(t,r,i)}}function ap(e,t,n,r,i,a){let o=n.getImage(),s=n.getText(),c=s&&s.getText(),l=a&&o&&c?{}:void 0;if(o){if(o.getImageState()!=U.LOADED)return;let a=e.getBuilder(n.getZIndex(),`Image`);a.setImageStyle(o,l),a.drawPoint(t,r,i)}if(c){let a=e.getBuilder(n.getZIndex(),`Text`);a.setTextStyle(s,l),a.drawText(t,r,i)}}function op(e,t,n,r,i,a){let o=n.getImage(),s=o&&o.getOpacity()!==0,c=n.getText(),l=c&&c.getText(),u=a&&s&&l?{}:void 0;if(s){if(o.getImageState()!=U.LOADED)return;let a=e.getBuilder(n.getZIndex(),`Image`);a.setImageStyle(o,u),a.drawMultiPoint(t,r,i)}if(l){let a=e.getBuilder(n.getZIndex(),`Text`);a.setTextStyle(c,u),a.drawText(t,r,i)}}function sp(e,t,n,r,i){let a=n.getFill(),o=n.getStroke();if(a||o){let s=e.getBuilder(n.getZIndex(),`Polygon`);s.setFillStrokeStyle(a,o),s.drawPolygon(t,r,i)}let s=n.getText();if(s&&s.getText()){let a=e.getBuilder(n.getZIndex(),`Text`);a.setTextStyle(s),a.drawText(t,r,i)}}var cp=class e{constructor(e){e||={},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){let t=this.getColor();return new e({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(e){if(typeof e==`object`&&e&&`src`in e){let t=yf(null,e.src,`anonymous`,void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===U.IDLE&&t.load(),t.getImageState()===U.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){let e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?M(e):typeof e==`object`&&`src`in e?e.src+`:`+e.offset:jd(e).toString():``}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}},lp=class e{constructor(e){e||={},this.color_=e.color===void 0?null:e.color,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash===void 0?null:e.lineDash,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){let t=this.getColor();return new e({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}},up=class e{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=_u(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){let t=this.getScale();return new e({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return A()}getImage(e){return A()}getHitDetectionImage(){return A()}getPixelRatio(e){return 1}getImageState(){return A()}getImageSize(){return A()}getOrigin(){return A()}getSize(){return A()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=_u(e)}listenImageChange(e){A()}load(){A()}unlistenImageChange(e){A()}ready(){return Promise.resolve()}},dp=class e extends up{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView===void 0?!1:e.rotateWithView,rotation:e.rotation===void 0?0:e.rotation,scale:e.scale===void 0?1:e.scale,displacement:e.displacement===void 0?[0,0]:e.displacement,declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill===void 0?null:e.fill,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle===void 0?0:e.angle,this.stroke_=e.stroke===void 0?null:e.stroke,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?U.LOADING:U.LOADED,this.imageState_===U.LOADING&&this.ready().then(()=>this.imageState_=U.LOADED),this.render()}clone(){let t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){let e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||=this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.fill_?.getKey(),n=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(`,`),r=gf.get(n,null,null)?.getImage(1);if(!r){let t=this.renderOptions_,i=Math.ceil(t.size*e),a=pe(i,i);this.draw_(t,a,e),r=a.canvas,gf.set(n,null,null,new bf(r,void 0,null,U.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!==`bevel`&&e!==`miter`)return t;let r=this.radius,i=this.radius2_===void 0?r:this.radius2_;if(r<i){let e=r;r=i,i=e}let a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,s=i*Math.sin(o),c=Math.sqrt(i*i-s*s),l=r-c,u=Math.sqrt(s*s+l*l),d=u/s;if(e===`miter`&&d<=n)return d*t;let f=t/2/d,p=t/2*(l/u),m=Math.sqrt((r+f)*(r+f)+p*p)-r;if(this.radius2_===void 0||e===`bevel`)return m*2;let h=r*Math.sin(o),g=Math.sqrt(r*r-h*h),_=i-g,v=Math.sqrt(h*h+_*_)/h;if(v<=n){let e=v*t/2-i-r;return 2*Math.max(m,e)}return m*2}createRenderOptions(){let e=Tf,t=Df,n=0,r=null,i=0,a,o=0;this.stroke_&&(a=xf(this.stroke_.getColor()??`#000`),o=this.stroke_.getWidth()??1,r=this.stroke_.getLineDash(),i=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??`round`,e=this.stroke_.getLineCap()??`round`,n=this.stroke_.getMiterLimit()??10);let s=this.calculateLineJoinSize_(t,o,n),c=Math.max(this.radius,this.radius2_||0),l=Math.ceil(2*c+s);return{strokeStyle:a,strokeWidth:o,size:l,lineCap:e,lineDash:r,lineDashOffset:i,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();let e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let e=this.fill_.getColor();e===null&&(e=wf),t.fillStyle=xf(e),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),r=0;typeof n==`string`&&(n=jd(n)),n===null?r=1:Array.isArray(n)&&(r=n.length===4?n[3]:1),r===0&&(t=pe(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_,n=this.radius;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{let r=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);let i=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let o=0;o<t;o++){let t=i+o*a,s=o%2==0?n:r;e.lineTo(s*Math.cos(t),s*Math.sin(t))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=wf,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}},fp=class e extends dp{constructor(e){e||={radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale===void 0?1:e.scale,rotation:e.rotation===void 0?0:e.rotation,rotateWithView:e.rotateWithView===void 0?!1:e.rotateWithView,displacement:e.displacement===void 0?[0,0]:e.displacement,declutterMode:e.declutterMode})}clone(){let t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius=e,this.render()}},pp=class e{constructor(e){e||={},this.geometry_=null,this.geometryFunction_=_p,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill===void 0?null:e.fill,this.image_=e.image===void 0?null:e.image,this.renderer_=e.renderer===void 0?null:e.renderer,this.hitDetectionRenderer_=e.hitDetectionRenderer===void 0?null:e.hitDetectionRenderer,this.stroke_=e.stroke===void 0?null:e.stroke,this.text_=e.text===void 0?null:e.text,this.zIndex_=e.zIndex}clone(){let t=this.getGeometry();return t&&typeof t==`object`&&(t=t.clone()),new e({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e==`function`?this.geometryFunction_=e:typeof e==`string`?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=_p,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function mp(e){let t;if(typeof e==`function`)t=e;else{let n;Array.isArray(e)?n=e:(V(typeof e.getZIndex==`function`,"Expected an `Style` or an array of `Style`"),n=[e]),t=function(){return n}}return t}var hp=null;function gp(e,t){if(!hp){let e=new cp({color:`rgba(255,255,255,0.4)`}),t=new lp({color:`#3399CC`,width:1.25});hp=[new pp({image:new fp({fill:e,stroke:t,radius:5}),fill:e,stroke:t})]}return hp}function _p(e){return e.getGeometry()}var vp=pp,yp=`#333`,bp=class e{constructor(e){e||={},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=_u(e.scale===void 0?1:e.scale),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill===void 0?new cp({color:yp}):e.fill,this.maxAngle_=e.maxAngle===void 0?Math.PI/4:e.maxAngle,this.placement_=e.placement===void 0?`point`:e.placement,this.overflow_=!!e.overflow,this.stroke_=e.stroke===void 0?null:e.stroke,this.offsetX_=e.offsetX===void 0?0:e.offsetX,this.offsetY_=e.offsetY===void 0?0:e.offsetY,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){let t=this.getScale();return new e({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof cp?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=_u(e===void 0?1:e)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}},xp={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12};const Sp=[xp.FILL],Cp=[xp.STROKE],wp=[xp.BEGIN_PATH],Tp=[xp.CLOSE_PATH];var G=xp,Ep=class extends Cf{constructor(e,t,n,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){let t=this.pixelRatio;return t==1?e:e.map(function(e){return e*t})}appendFlatPointCoordinates(e,t){let n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,i=this.coordinates,a=i.length;for(let o=0,s=e.length;o<s;o+=t)r[0]=e[o],r[1]=e[o+1],Te(n,r)&&(i[a++]=r[0],i[a++]=r[1]);return a}appendFlatLineCoordinates(e,t,n,r,i,a){let o=this.coordinates,s=o.length,c=this.getBufferedMaxExtent();a&&(t+=r);let l=e[t],u=e[t+1],d=this.tmpCoordinate_,f=!0,p,m,h;for(p=t+r;p<n;p+=r)d[0]=e[p],d[1]=e[p+1],h=S(c,d),h===m?h===qe.INTERSECTING?(o[s++]=d[0],o[s++]=d[1],f=!1):f=!0:(f&&=(o[s++]=l,o[s++]=u,!1),o[s++]=d[0],o[s++]=d[1]),l=d[0],u=d[1],m=h;return(i&&f||p===t+r)&&(o[s++]=l,o[s++]=u),s}drawCustomCoordinates_(e,t,n,r,i){for(let a=0,o=n.length;a<o;++a){let o=n[a],s=this.appendFlatLineCoordinates(e,t,o,r,!1,!1);i.push(s),t=o}return t}drawCustom(e,t,n,r,i){this.beginGeometry(e,t,i);let a=e.getType(),o=e.getStride(),s=this.coordinates.length,c,l,u,d,f;switch(a){case`MultiPolygon`:c=e.getOrientedFlatCoordinates(),d=[];let t=e.getEndss();f=0;for(let e=0,n=t.length;e<n;++e){let n=[];f=this.drawCustomCoordinates_(c,f,t[e],o,n),d.push(n)}this.instructions.push([G.CUSTOM,s,d,e,n,Ql,i]),this.hitDetectionInstructions.push([G.CUSTOM,s,d,e,r||n,Ql,i]);break;case`Polygon`:case`MultiLineString`:u=[],c=a==`Polygon`?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(c,0,e.getEnds(),o,u),this.instructions.push([G.CUSTOM,s,u,e,n,Zl,i]),this.hitDetectionInstructions.push([G.CUSTOM,s,u,e,r||n,Zl,i]);break;case`LineString`:case`Circle`:c=e.getFlatCoordinates(),l=this.appendFlatLineCoordinates(c,0,c.length,o,!1,!1),this.instructions.push([G.CUSTOM,s,l,e,n,Xl,i]),this.hitDetectionInstructions.push([G.CUSTOM,s,l,e,r||n,Xl,i]);break;case`MultiPoint`:c=e.getFlatCoordinates(),l=this.appendFlatPointCoordinates(c,o),l>s&&(this.instructions.push([G.CUSTOM,s,l,e,n,Xl,i]),this.hitDetectionInstructions.push([G.CUSTOM,s,l,e,r||n,Xl,i]));break;case`Point`:c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),l=this.coordinates.length,this.instructions.push([G.CUSTOM,s,l,e,n,void 0,i]),this.hitDetectionInstructions.push([G.CUSTOM,s,l,e,r||n,void 0,i]);break;default:}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[G.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[G.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let e=this.hitDetectionInstructions;e.reverse();let t,n=e.length,r,i,a=-1;for(t=0;t<n;++t)r=e[t],i=r[0],i==G.END_GEOMETRY?a=t:i==G.BEGIN_GEOMETRY&&(r[2]=t,c(this.hitDetectionInstructions,a,t),a=-1)}fillStyleToState(e,t={}){if(e){let n=e.getColor();t.fillPatternScale=n&&typeof n==`object`&&`src`in n?this.pixelRatio:1,t.fillStyle=xf(n||wf)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){t.strokeStyle=xf(e.getColor()||Of);let n=e.getLineCap();t.lineCap=n===void 0?Tf:n;let r=e.getLineDash();t.lineDash=r?r.slice():Ef,t.lineDashOffset=e.getLineDashOffset()||0;let i=e.getLineJoin();t.lineJoin=i===void 0?Df:i;let a=e.getWidth();t.lineWidth=a===void 0?1:a;let o=e.getMiterLimit();t.miterLimit=o===void 0?10:o,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){let n=this.state;this.fillStyleToState(e,n),this.strokeStyleToState(t,n)}createFill(e){let t=e.fillStyle,n=[G.SET_FILL_STYLE,t];return typeof t!=`string`&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[G.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){let n=e.fillStyle;(typeof n!=`string`||e.currentFillStyle!=n)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){let n=e.strokeStyle,r=e.lineCap,i=e.lineDash,a=e.lineDashOffset,o=e.lineJoin,s=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=r||i!=e.currentLineDash&&!Ee(e.currentLineDash,i)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=s||e.currentMiterLimit!=c)&&(t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=r,e.currentLineDash=i,e.currentLineDashOffset=a,e.currentLineJoin=o,e.currentLineWidth=s,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let t=[G.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=De(this.maxExtent),this.maxLineWidth>0)){let e=this.resolution*(this.maxLineWidth+1)/2;b(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},Dp=class extends Ep{constructor(e,t,n,r){super(e,t,n,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!Te(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);let r=e.getFlatCoordinates(),i=e.getStride(),a=this.coordinates.length,o=this.appendFlatPointCoordinates(r,i);this.instructions.push([G.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([G.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);let r=e.getFlatCoordinates(),i=[];for(let t=0,n=r.length;t<n;t+=e.getStride())(!this.maxExtent||Te(this.maxExtent,r.slice(t,t+2)))&&i.push(r[t],r[t+1]);let a=this.coordinates.length,o=this.appendFlatPointCoordinates(i,2);this.instructions.push([G.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([G.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){let n=e.getAnchor(),r=e.getSize(),i=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=i[0],this.originY_=i[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},Op=class extends Ep{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinates_(e,t,n,r){let i=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,n,r,!1,!1),o=[G.MOVE_TO_LINE_TO,i,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),n}drawLineString(e,t,n){let r=this.state,i=r.strokeStyle,a=r.lineWidth;if(i===void 0||a===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([G.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Ef,0],wp);let o=e.getFlatCoordinates(),s=e.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(Cp),this.endGeometry(t)}drawMultiLineString(e,t,n){let r=this.state,i=r.strokeStyle,a=r.lineWidth;if(i===void 0||a===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([G.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Ef,0],wp);let o=e.getEnds(),s=e.getFlatCoordinates(),c=e.getStride(),l=0;for(let e=0,t=o.length;e<t;++e)l=this.drawFlatCoordinates_(s,l,o[e],c);this.hitDetectionInstructions.push(Cp),this.endGeometry(t)}finish(){let e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Cp),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Cp),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(wp)}},kp=class extends Ep{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinatess_(e,t,n,r){let i=this.state,a=i.fillStyle!==void 0,o=i.strokeStyle!==void 0,s=n.length;this.instructions.push(wp),this.hitDetectionInstructions.push(wp);for(let i=0;i<s;++i){let a=n[i],s=this.coordinates.length,c=this.appendFlatLineCoordinates(e,t,a,r,!0,!o),l=[G.MOVE_TO_LINE_TO,s,c];this.instructions.push(l),this.hitDetectionInstructions.push(l),o&&(this.instructions.push(Tp),this.hitDetectionInstructions.push(Tp)),t=a}return a&&(this.instructions.push(Sp),this.hitDetectionInstructions.push(Sp)),o&&(this.instructions.push(Cp),this.hitDetectionInstructions.push(Cp)),t}drawCircle(e,t,n){let r=this.state,i=r.fillStyle,a=r.strokeStyle;if(i===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([G.SET_FILL_STYLE,wf]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([G.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Ef,0]);let o=e.getFlatCoordinates(),s=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,s,!1,!1);let l=[G.CIRCLE,c];this.instructions.push(wp,l),this.hitDetectionInstructions.push(wp,l),r.fillStyle!==void 0&&(this.instructions.push(Sp),this.hitDetectionInstructions.push(Sp)),r.strokeStyle!==void 0&&(this.instructions.push(Cp),this.hitDetectionInstructions.push(Cp)),this.endGeometry(t)}drawPolygon(e,t,n){let r=this.state,i=r.fillStyle,a=r.strokeStyle;if(i===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([G.SET_FILL_STYLE,wf]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([G.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Ef,0]);let o=e.getEnds(),s=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(s,0,o,c),this.endGeometry(t)}drawMultiPolygon(e,t,n){let r=this.state,i=r.fillStyle,a=r.strokeStyle;if(i===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([G.SET_FILL_STYLE,wf]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([G.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Ef,0]);let o=e.getEndss(),s=e.getOrientedFlatCoordinates(),c=e.getStride(),l=0;for(let e=0,t=o.length;e<t;++e)l=this.drawFlatCoordinatess_(s,l,o[e],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let e=this.tolerance;if(e!==0){let t=this.coordinates;for(let n=0,r=t.length;n<r;++n)t[n]=Il(t[n],e)}return super.finish()}setFillStrokeStyles_(){let e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}};function Ap(e,t,n,r,i){let a=[],o=n,s=0,c=t.slice(n,2);for(;s<e&&o+i<r;){let[n,r]=c.slice(-2),l=t[o+i],u=t[o+i+1],d=Math.sqrt((l-n)*(l-n)+(u-r)*(u-r));if(s+=d,s>=e){let t=(e-s+d)/d,f=es(n,l,t),p=es(r,u,t);c.push(f,p),a.push(c),c=[f,p],s==e&&(o+=i),s=0}else if(s<e)c.push(t[o+i],t[o+i+1]),o+=i;else{let e=d-s,t=es(n,l,e/d),f=es(r,u,e/d);c.push(t,f),a.push(c),c=[t,f],s=0,o+=i}}return s>0&&a.push(c),a}function jp(e,t,n,r,i){let a=n,o=n,s=0,c=0,l=n,u,d,f,p,m,h,g,_,v,y;for(d=n;d<r;d+=i){let n=t[d],r=t[d+1];m!==void 0&&(v=n-m,y=r-h,p=Math.sqrt(v*v+y*y),g!==void 0&&(c+=f,u=Math.acos((g*v+_*y)/(f*p)),u>e&&(c>s&&(s=c,a=l,o=d),c=0,l=d-i)),f=p,g=v,_=y),m=n,h=r}return c+=p,c>s?[l,d]:[a,o]}const Mp={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};var Np={Circle:kp,Default:Ep,Image:Dp,LineString:Op,Polygon:kp,Text:class extends Ep{constructor(e,t,n,r){super(e,t,n,r),this.labels_=null,this.text_=``,this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[wf]={fillStyle:wf},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_=``,this.fillKey_=``,this.strokeKey_=``,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){let e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){let r=this.textFillState_,i=this.textStrokeState_,a=this.textState_;if(this.text_===``||!a||!r&&!i)return;let o=this.coordinates,s=o.length,c=e.getType(),l=null,u=e.getStride();if(a.placement===`line`&&(c==`LineString`||c==`MultiLineString`||c==`Polygon`||c==`MultiPolygon`)){if(!He(this.maxExtent,e.getExtent()))return;let r;if(l=e.getFlatCoordinates(),c==`LineString`)r=[l.length];else if(c==`MultiLineString`)r=e.getEnds();else if(c==`Polygon`)r=e.getEnds().slice(0,1);else if(c==`MultiPolygon`){let t=e.getEndss();r=[];for(let e=0,n=t.length;e<n;++e)r.push(t[e][0])}this.beginGeometry(e,t,n);let i=a.repeat,d=i?void 0:a.textAlign,f=0;for(let e=0,t=r.length;e<t;++e){let t;t=i?Ap(i*this.resolution,l,f,r[e],u):[l.slice(f,r[e])];for(let n=0,i=t.length;n<i;++n){let i=t[n],c=0,l=i.length;if(d==null){let e=jp(a.maxAngle,i,0,i.length,2);c=e[0],l=e[1]}for(let e=c;e<l;e+=u)o.push(i[e],i[e+1]);let p=o.length;f=r[e],this.drawChars_(s,p),s=p}}this.endGeometry(t)}else{let r=a.overflow?null:[];switch(c){case`Point`:case`MultiPoint`:l=e.getFlatCoordinates();break;case`LineString`:l=e.getFlatMidpoint();break;case`Circle`:l=e.getCenter();break;case`MultiLineString`:l=e.getFlatMidpoints(),u=2;break;case`Polygon`:l=e.getFlatInteriorPoint(),a.overflow||r.push(l[2]/this.resolution),u=3;break;case`MultiPolygon`:let t=e.getFlatInteriorPoints();l=[];for(let e=0,n=t.length;e<n;e+=3)a.overflow||r.push(t[e+2]/this.resolution),l.push(t[e],t[e+1]);if(l.length===0)return;u=2;break;default:}let i=this.appendFlatPointCoordinates(l,u);if(i===s)return;if(r&&(i-s)/2!==l.length/u){let e=s/2;r=r.filter((t,n)=>{let r=o[(e+n)*2]===l[n*u]&&o[(e+n)*2+1]===l[n*u+1];return r||--e,r})}this.saveTextStates_();let d=a.backgroundFill?this.createFill(this.fillStyleToState(a.backgroundFill)):null,f=a.backgroundStroke?this.createStroke(this.strokeStyleToState(a.backgroundStroke)):null;this.beginGeometry(e,t,n);let p=a.padding;if(p!=Af&&(a.scale[0]<0||a.scale[1]<0)){let e=a.padding[0],t=a.padding[1],n=a.padding[2],r=a.padding[3];a.scale[0]<0&&(t=-t,r=-r),a.scale[1]<0&&(e=-e,n=-n),p=[e,t,n,r]}let m=this.pixelRatio;this.instructions.push([G.DRAW_IMAGE,s,i,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,p==Af?Af:p.map(function(e){return e*m}),d,f,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,r]);let h=1/m,g=d?d.slice(0):null;g&&(g[1]=wf),this.hitDetectionInstructions.push([G.DRAW_IMAGE,s,i,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[h,h],NaN,this.declutterMode_,this.declutterImageWithText_,p,g,f,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?wf:this.fillKey_,this.textOffsetX_,this.textOffsetY_,r]),this.endGeometry(t)}}saveTextStates_(){let e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));let i=this.textKey_;i in this.textStates||(this.textStates[i]={font:t.font,textAlign:t.textAlign||`center`,justify:t.justify,textBaseline:t.textBaseline||`middle`,scale:t.scale});let a=this.fillKey_;n&&(a in this.fillStates||(this.fillStates[a]={fillStyle:n.fillStyle}))}drawChars_(e,t){let n=this.textStrokeState_,r=this.textState_,i=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();let s=this.pixelRatio,c=Mp[r.textBaseline],l=this.textOffsetY_*s,u=this.text_,d=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([G.DRAW_CHARS,e,t,c,r.overflow,o,r.maxAngle,s,l,i,d*s,u,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([G.DRAW_CHARS,e,t,c,r.overflow,o&&wf,r.maxAngle,s,l,i,d*s,u,a,1/s,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let n,r,i;if(!e)this.text_=``;else{let t=e.getFill();t?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=xf(t.getColor()||`#000`)):(r=null,this.textFillState_=r);let a=e.getStroke();if(!a)i=null,this.textStrokeState_=i;else{i=this.textStrokeState_,i||(i={},this.textStrokeState_=i);let e=a.getLineDash(),t=a.getLineDashOffset(),n=a.getWidth(),r=a.getMiterLimit();i.lineCap=a.getLineCap()||`round`,i.lineDash=e?e.slice():Ef,i.lineDashOffset=t===void 0?0:t,i.lineJoin=a.getLineJoin()||`round`,i.lineWidth=n===void 0?1:n,i.miterLimit=r===void 0?10:r,i.strokeStyle=xf(a.getColor()||`#000`)}n=this.textState_;let o=e.getFont()||`10px sans-serif`;Lf(o);let s=e.getScaleArray();n.overflow=e.getOverflow(),n.font=o,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||`middle`,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||Af,n.scale=s===void 0?[1,1]:s;let c=e.getOffsetX(),l=e.getOffsetY(),u=e.getRotateWithView(),d=e.getKeepUpright(),f=e.getRotation();this.text_=e.getText()||``,this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=l===void 0?0:l,this.textRotateWithView_=u===void 0?!1:u,this.textKeepUpright_=d===void 0?!0:d,this.textRotation_=f===void 0?0:f,this.strokeKey_=i?(typeof i.strokeStyle==`string`?i.strokeStyle:M(i.strokeStyle))+i.lineCap+i.lineDashOffset+`|`+i.lineWidth+i.lineJoin+i.miterLimit+`[`+i.lineDash.join()+`]`:``,this.textKey_=n.font+n.scale+(n.textAlign||`?`)+(n.repeat||`?`)+(n.justify||`?`)+(n.textBaseline||`?`),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle==`string`?r.fillStyle:`|`+M(r.fillStyle):``}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}},Pp=class{constructor(e,t,n,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}finish(){let e={};for(let t in this.buildersByZIndex_){e[t]=e[t]||{};let n=this.buildersByZIndex_[t];for(let r in n){let i=n[r].finish();e[t][r]=i}}return e}getBuilder(e,t){let n=e===void 0?`0`:e.toString(),r=this.buildersByZIndex_[n];r===void 0&&(r={},this.buildersByZIndex_[n]=r);let i=r[t];if(i===void 0){let e=Np[t];i=new e(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=i}return i}};function Fp(e,t,n,r,i,a,o,s,c,l,u,d,f=!0){let p=e[t],m=e[t+1],h=0,g=0,_=0,v=0;function y(){h=p,g=m,t+=r,p=e[t],m=e[t+1],v+=_,_=Math.sqrt((p-h)*(p-h)+(m-g)*(m-g))}do y();while(t<n-r&&v+_<a);let b=_===0?0:(a-v)/_,x=es(h,p,b),S=es(g,m,b),C=t-r,w=v,T=a+s*c(l,i,u);for(;t<n-r&&v+_<T;)y();b=_===0?0:(T-v)/_;let E=es(h,p,b),D=es(g,m,b),O=!1;if(f)if(d){let e=[x,S,E,D];nl(e,0,4,2,d,e,e),O=e[0]>e[2]}else O=x>E;let k=Math.PI,ee=[],te=C+r===t;t=C,_=0,v=w,p=e[t],m=e[t+1];let ne;if(te)return y(),ne=Math.atan2(m-g,p-h),O&&(ne+=ne>0?-k:k),ee[0]=[(E+x)/2,(D+S)/2,(T-a)/2,ne,i],ee;i=i.replace(/\n/g,` `);for(let e=0,d=i.length;e<d;){y();let f=Math.atan2(m-g,p-h);if(O&&(f+=f>0?-k:k),ne!==void 0){let e=f-ne;if(e+=e>k?-2*k:e<-k?2*k:0,Math.abs(e)>o)return null}ne=f;let x=e,S=0;for(;e<d;++e){let o=O?d-e-1:e,f=s*c(l,i[o],u);if(t+r<n&&v+_<a+S+f/2)break;S+=f}if(e===x)continue;let C=O?i.substring(d-x,d-e):i.substring(x,e);b=_===0?0:(a+S/2-v)/_;let w=es(h,p,b),T=es(g,m,b);ee.push([w,T,S/2,f,C]),a+=S}return ee}var Ip=s(),Lp=[],Rp=[],zp=[],Bp=[];function Vp(e){return e[3].declutterBox}var Hp=RegExp(`[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]`);function Up(e,t){return t===`start`?t=Hp.test(e)?`right`:`left`:t===`end`&&(t=Hp.test(e)?`left`:`right`),Mp[t]}function Wp(e,t,n){return n>0&&e.push(`
`,``),e.push(t,``),e}function Gp(e,t,n){return n%2==0&&(e+=t),e}var Kp=class{constructor(e,t,n,r,i){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Wc(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=i?new Fd:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,r){let i=e+t+n+r;if(this.labels_[i])return this.labels_[i];let a=r?this.strokeStates[r]:null,o=n?this.fillStates[n]:null,s=this.textStates[t],c=this.pixelRatio,l=[s.scale[0]*c,s.scale[1]*c],u=s.justify?Mp[s.justify]:Up(Array.isArray(e)?e[0]:e,s.textAlign||`center`),d=r&&a.lineWidth?a.lineWidth:0,f=Array.isArray(e)?e:String(e).split(`
`).reduce(Wp,[]),{width:p,height:m,widths:h,heights:g,lineWidths:_}=Hf(s,f),v=p+d,y=[],b=(v+2)*l[0],x=(m+d)*l[1],S={width:b<0?Math.floor(b):Math.ceil(b),height:x<0?Math.floor(x):Math.ceil(x),contextInstructions:y};(l[0]!=1||l[1]!=1)&&y.push(`scale`,l),r&&(y.push(`strokeStyle`,a.strokeStyle),y.push(`lineWidth`,d),y.push(`lineCap`,a.lineCap),y.push(`lineJoin`,a.lineJoin),y.push(`miterLimit`,a.miterLimit),y.push(`setLineDash`,[a.lineDash]),y.push(`lineDashOffset`,a.lineDashOffset)),n&&y.push(`fillStyle`,o.fillStyle),y.push(`textBaseline`,`middle`),y.push(`textAlign`,`center`);let C=.5-u,w=u*v+C*d,T=[],E=[],D=0,O=0,k=0,ee=0,te;for(let e=0,t=f.length;e<t;e+=2){let t=f[e];if(t===`
`){O+=D,D=0,w=u*v+C*d,++ee;continue}let i=f[e+1]||s.font;i!==te&&(r&&T.push(`font`,i),n&&E.push(`font`,i),te=i),D=Math.max(D,g[k]);let a=[t,w+C*h[k]+u*(h[k]-_[ee]),.5*(d+D)+O];w+=h[k],r&&T.push(`strokeText`,a),n&&E.push(`fillText`,a),++k}return Array.prototype.push.apply(y,T),Array.prototype.push.apply(y,E),this.labels_[i]=S,S}replayTextBackground_(e,t,n,r,i,a,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],e.fillStyle=a[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,r,i,a,o,s,c,l,u,f,p,m,h,g){o*=f[0],s*=f[1];let _=n-o,v=r-s,y=i+c>e?e-c:i,b=a+l>t?t-l:a,x=m[3]+y*f[0]+m[1],S=m[0]+b*f[1]+m[2],C=_-m[3],w=v-m[0];(h||u!==0)&&(Lp[0]=C,Bp[0]=C,Lp[1]=w,Rp[1]=w,Rp[0]=C+x,zp[0]=Rp[0],zp[1]=w+S,Bp[1]=zp[1]);let T;return u===0?d(Math.min(C,C+x),Math.min(w,w+S),Math.max(C,C+x),Math.max(w,w+S),Ip):(T=Jc(Wc(),n,r,1,1,u,-n,-r),qc(T,Lp),qc(T,Rp),qc(T,zp),qc(T,Bp),d(Math.min(Lp[0],Rp[0],zp[0],Bp[0]),Math.min(Lp[1],Rp[1],zp[1],Bp[1]),Math.max(Lp[0],Rp[0],zp[0],Bp[0]),Math.max(Lp[1],Rp[1],zp[1],Bp[1]),Ip)),p&&(_=Math.round(_),v=Math.round(v)),{drawImageX:_,drawImageY:v,drawImageW:y,drawImageH:b,originX:c,originY:l,declutterBox:{minX:Ip[0],minY:Ip[1],maxX:Ip[2],maxY:Ip[3],value:g},canvasTransform:T,scale:f}}replayImageOrLabel_(e,t,n,r,i,a,o){let s=!!(a||o),c=r.declutterBox,l=o?o[2]*r.scale[0]/2:0;return c.minX-l<=t[0]&&c.maxX+l>=0&&c.minY-l<=t[1]&&c.maxY+l>=0&&(s&&this.replayTextBackground_(e,Lp,Rp,zp,Bp,a,o),Uf(e,r.canvasTransform,i,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){let t=this.alignAndScaleFill_;if(t){let n=qc(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(n[0]%r,n[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,n,r){let i=this.textStates[t],a=this.createLabel(e,t,r,n),o=this.strokeStates[n],s=this.pixelRatio,c=Up(Array.isArray(e)?e[0]:e,i.textAlign||`center`),l=Mp[i.textBaseline||`middle`],u=o&&o.lineWidth?o.lineWidth:0;return{label:a,anchorX:c*(a.width/s-2*i.scale[0])+2*(.5-c)*u,anchorY:l*a.height/s+2*(.5-l)*u}}execute_(e,t,n,r,i,a,o,s){let c=this.zIndexContext_,l;this.pixelCoordinates_&&Ee(n,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||=[],l=tl(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),Kc(this.renderedTransform_,n));let u=0,d=r.length,f=0,p,m,h,g,_,v,y,b,x,S,C,w,T,E=0,D=0,O=this.coordinateCache_,k=this.viewRotation_,ee=Math.round(Math.atan2(-n[1],n[0])*0xe8d4a51000)/0xe8d4a51000,te={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:k},ne=this.instructions!=r||this.overlaps?0:200,re,ie,ae,oe;for(;u<d;){let n=r[u];switch(n[0]){case G.BEGIN_GEOMETRY:re=n[1],oe=n[3],re.getGeometry()?o!==void 0&&!He(o,oe.getExtent())?u=n[2]+1:++u:u=n[2],c&&(c.zIndex=n[4]);break;case G.BEGIN_PATH:E>ne&&(this.fill_(e),E=0),D>ne&&(e.stroke(),D=0),!E&&!D&&(e.beginPath(),_=NaN,v=NaN),++u;break;case G.CIRCLE:f=n[1];let r=l[f],d=l[f+1],se=l[f+2],ce=l[f+3],le=se-r,ue=ce-d,de=Math.sqrt(le*le+ue*ue);e.moveTo(r+de,d),e.arc(r,d,de,0,2*Math.PI,!0),++u;break;case G.CLOSE_PATH:e.closePath(),++u;break;case G.CUSTOM:f=n[1],p=n[2];let fe=n[3],pe=n[4],me=n[5];te.geometry=fe,te.feature=re,u in O||(O[u]=[]);let he=O[u];me?me(l,f,p,2,he):(he[0]=l[f],he[1]=l[f+1],he.length=2),c&&(c.zIndex=n[6]),pe(he,te),++u;break;case G.DRAW_IMAGE:f=n[1],p=n[2],x=n[3],m=n[4],h=n[5];let ge=n[6],_e=n[7],ve=n[8],ye=n[9],be=n[10],A=n[11],xe=n[12],Se=n[13];g=n[14]||`declutter`;let Ce=n[15];if(!x&&n.length>=20){S=n[19],C=n[20],w=n[21],T=n[22];let e=this.drawLabelWithPointPlacement_(S,C,w,T);x=e.label,n[3]=x;let t=n[23];m=(e.anchorX-t)*this.pixelRatio,n[4]=m;let r=n[24];h=(e.anchorY-r)*this.pixelRatio,n[5]=h,ge=x.height,n[6]=ge,Se=x.width,n[13]=Se}let we;n.length>25&&(we=n[25]);let Te,Ee,De;n.length>17?(Te=n[16],Ee=n[17],De=n[18]):(Te=Af,Ee=null,De=null),be&&ee?A+=k:!be&&!ee&&(A-=k);let Oe=0;for(;f<p;f+=2){if(we&&we[Oe++]<Se/this.pixelRatio)continue;let n=this.calculateImageOrLabelDimensions_(x.width,x.height,l[f],l[f+1],Se,ge,m,h,ve,ye,A,xe,i,Te,!!Ee||!!De,re),r=[e,t,x,n,_e,Ee,De];if(s){let e,t,i;if(Ce){let n=p-f;if(!Ce[n]){Ce[n]={args:r,declutterMode:g};continue}let a=Ce[n];e=a.args,t=a.declutterMode,delete Ce[n],i=Vp(e)}let a,o;if(e&&(t!==`declutter`||!s.collides(i))&&(a=!0),(g!==`declutter`||!s.collides(n.declutterBox))&&(o=!0),t===`declutter`&&g===`declutter`){let e=a&&o;a=e,o=e}a&&(t!==`none`&&s.insert(i),this.replayImageOrLabel_.apply(this,e)),o&&(g!==`none`&&s.insert(n.declutterBox),this.replayImageOrLabel_.apply(this,r))}else this.replayImageOrLabel_.apply(this,r)}++u;break;case G.DRAW_CHARS:let ke=n[1],Ae=n[2],je=n[3],Me=n[4];T=n[5];let Ne=n[6],Pe=n[7],j=n[8];w=n[9];let Fe=n[10];S=n[11],Array.isArray(S)&&(S=S.reduce(Gp,``)),C=n[12];let Ie=[n[13],n[13]];g=n[14]||`declutter`;let Le=n[15],Re=this.textStates[C],M=Re.font,ze=[Re.scale[0]*Pe,Re.scale[1]*Pe],Be;M in this.widths_?Be=this.widths_[M]:(Be={},this.widths_[M]=Be);let Ve=ou(l,ke,Ae,2),Ue=Math.abs(ze[0])*Vf(M,S,Be);if(Me||Ue<=Ve){let n=this.textStates[C].textAlign,r=(Ve-Ue)*Up(S,n),i=Fp(l,ke,Ae,2,S,r,Ne,Math.abs(ze[0]),Vf,M,Be,ee?0:this.viewRotation_,Le);drawChars:if(i){let n=[],r,a,o,c,l;if(w)for(r=0,a=i.length;r<a;++r){l=i[r],o=l[4],c=this.createLabel(o,C,``,w),m=l[2]+(ze[0]<0?-Fe:Fe),h=je*c.height+(.5-je)*2*Fe*ze[1]/ze[0]-j;let a=this.calculateImageOrLabelDimensions_(c.width,c.height,l[0],l[1],c.width,c.height,m,h,0,0,l[3],Ie,!1,Af,!1,re);if(s&&g===`declutter`&&s.collides(a.declutterBox))break drawChars;n.push([e,t,c,a,1,null,null])}if(T)for(r=0,a=i.length;r<a;++r){l=i[r],o=l[4],c=this.createLabel(o,C,T,``),m=l[2],h=je*c.height-j;let a=this.calculateImageOrLabelDimensions_(c.width,c.height,l[0],l[1],c.width,c.height,m,h,0,0,l[3],Ie,!1,Af,!1,re);if(s&&g===`declutter`&&s.collides(a.declutterBox))break drawChars;n.push([e,t,c,a,1,null,null])}s&&g!==`none`&&s.load(n.map(Vp));for(let e=0,t=n.length;e<t;++e)this.replayImageOrLabel_.apply(this,n[e])}}++u;break;case G.END_GEOMETRY:if(a!==void 0){re=n[1];let e=a(re,oe,g);if(e)return e}++u;break;case G.FILL:ne?E++:this.fill_(e),++u;break;case G.MOVE_TO_LINE_TO:for(f=n[1],p=n[2],ie=l[f],ae=l[f+1],e.moveTo(ie,ae),_=ie+.5|0,v=ae+.5|0,f+=2;f<p;f+=2)ie=l[f],ae=l[f+1],y=ie+.5|0,b=ae+.5|0,(f==p-2||y!==_||b!==v)&&(e.lineTo(ie,ae),_=y,v=b);++u;break;case G.SET_FILL_STYLE:this.alignAndScaleFill_=n[2],E&&(this.fill_(e),E=0,D&&=(e.stroke(),0)),e.fillStyle=n[1],++u;break;case G.SET_STROKE_STYLE:D&&=(e.stroke(),0),this.setStrokeStyle_(e,n),++u;break;case G.STROKE:ne?D++:e.stroke(),++u;break;default:++u;break}}E&&this.fill_(e),D&&e.stroke()}execute(e,t,n,r,i,a){this.viewRotation_=r,this.execute_(e,t,n,this.instructions,i,void 0,void 0,a)}executeHitDetection(e,t,n,r,i){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,i)}};const qp=[`Polygon`,`Circle`,`LineString`,`Image`,`Text`,`Default`],Jp=[`Image`,`Text`],Yp=qp.filter(e=>!Jp.includes(e));var Xp=class{constructor(e,t,n,r,i,a,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Wc(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(i,o)}clip(e,t){let n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(let n in e){let r=this.executorsByZIndex_[n];r===void 0&&(r={},this.executorsByZIndex_[n]=r);let i=e[n];for(let e in i){let n=i[e];r[e]=new Kp(this.resolution_,this.pixelRatio_,this.overlaps_,n,t)}}}hasExecutors(e){for(let t in this.executorsByZIndex_){let n=this.executorsByZIndex_[t];for(let t=0,r=e.length;t<r;++t)if(e[t]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,r,i,a){r=Math.round(r);let o=r*2+1,c=Jc(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-n,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=pe(o,o));let d=this.hitDetectionContext_;d.canvas.width!==o||d.canvas.height!==o?(d.canvas.width=o,d.canvas.height=o):u||d.clearRect(0,0,o,o);let f;this.renderBuffer_!==void 0&&(f=s(),l(f,e),b(f,t*(this.renderBuffer_+r),f));let p=Qp(r),m;function h(e,t,n){let s=d.getImageData(0,0,o,o).data;for(let c=0,l=p.length;c<l;c++)if(s[p[c]]>0){if(!a||n===`none`||m!==`Image`&&m!==`Text`||a.includes(e)){let n=(p[c]-3)/4,a=r-n%o,s=r-(n/o|0),l=i(e,t,a*a+s*s);if(l)return l}d.clearRect(0,0,o,o);break}}let g=Object.keys(this.executorsByZIndex_).map(Number);g.sort(x);let _,v,y,S,C;for(_=g.length-1;_>=0;--_){let e=g[_].toString();for(y=this.executorsByZIndex_[e],v=qp.length-1;v>=0;--v)if(m=qp[v],S=y[m],S!==void 0&&(C=S.executeHitDetection(d,c,n,h,f),C))return C}}getClipCoords(e){let t=this.maxExtent_;if(!t)return null;let n=t[0],r=t[1],i=t[2],a=t[3],o=[n,r,n,a,i,a,i,r];return tl(o,0,8,2,e,o),o}isEmpty(){return O(this.executorsByZIndex_)}execute(e,t,r,i,a,o,s){let c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(s?n:x),o||=qp;let l=qp.length;for(let n=0,u=c.length;n<u;++n){let u=c[n].toString(),d=this.executorsByZIndex_[u];for(let u=0,f=o.length;u<f;++u){let f=o[u],p=d[f];if(p!==void 0){let o=s===null?void 0:p.getZIndexContext(),u=o?o.getContext():e,d=this.maxExtent_&&f!==`Image`&&f!==`Text`;if(d&&(u.save(),this.clip(u,r)),!o||f===`Text`||f===`Image`?p.execute(u,t,r,i,a,s):o.pushFunction(e=>p.execute(e,t,r,i,a,s)),d&&u.restore(),o){o.offset();let e=c[n]*l+qp.indexOf(f);this.deferredZIndexContexts_[e]||(this.deferredZIndexContexts_[e]=[]),this.deferredZIndexContexts_[e].push(o)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){let e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(x);for(let n=0,r=t.length;n<r;++n)e[t[n]].forEach(e=>{e.draw(this.renderedContext_),e.clear()}),e[t[n]].length=0}},Zp={};function Qp(e){if(Zp[e]!==void 0)return Zp[e];let t=e*2+1,n=e*e,r=Array(n+1);for(let i=0;i<=e;++i)for(let a=0;a<=e;++a){let o=i*i+a*a;if(o>n)break;let s=r[o];s||(s=[],r[o]=s),s.push(((e+i)*t+(e+a))*4+3),i>0&&s.push(((e-i)*t+(e+a))*4+3),a>0&&(s.push(((e+i)*t+(e-a))*4+3),i>0&&s.push(((e-i)*t+(e-a))*4+3))}let i=[];for(let e=0,t=r.length;e<t;++e)r[e]&&i.push(...r[e]);return Zp[e]=i,i}var $p=Xp;function em(e,t,n,r){return n!==void 0&&r!==void 0?[n/e,r/t]:n===void 0?r===void 0?1:r/t:n/e}var tm=class e extends up{constructor(e){e||={};let t=e.opacity===void 0?1:e.opacity,n=e.rotation===void 0?0:e.rotation,r=e.scale===void 0?1:e.scale,i=e.rotateWithView===void 0?!1:e.rotateWithView;super({opacity:t,rotation:n,scale:r,displacement:e.displacement===void 0?[0,0]:e.displacement,rotateWithView:i,declutterMode:e.declutterMode}),this.anchor_=e.anchor===void 0?[.5,.5]:e.anchor,this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin===void 0?`top-left`:e.anchorOrigin,this.anchorXUnits_=e.anchorXUnits===void 0?`fraction`:e.anchorXUnits,this.anchorYUnits_=e.anchorYUnits===void 0?`fraction`:e.anchorYUnits,this.crossOrigin_=e.crossOrigin===void 0?null:e.crossOrigin;let a=e.img===void 0?null:e.img,o=e.src;V(!(o!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&a&&(o=a.src||M(a)),V(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),V(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let s;if(e.src===void 0?a!==void 0&&(s=`complete`in a?a.complete?a.src?U.LOADED:U.IDLE:U.LOADING:U.LOADED):s=U.IDLE,this.color_=e.color===void 0?null:jd(e.color),this.iconImage_=yf(a,o,this.crossOrigin_,s,this.color_),this.offset_=e.offset===void 0?[0,0]:e.offset,this.offsetOrigin_=e.offsetOrigin===void 0?`top-left`:e.offsetOrigin,this.origin_=null,this.size_=e.size===void 0?null:e.size,this.initialOptions_,e.width!==void 0||e.height!==void 0){let t,n;if(e.size)[t,n]=e.size;else{let r=this.getImage(1);if(r.width&&r.height)t=r.width,n=r.height;else if(r instanceof HTMLImageElement){this.initialOptions_=e;let t=()=>{if(this.unlistenImageChange(t),!this.initialOptions_)return;let n=this.iconImage_.getSize();this.setScale(em(n[0],n[1],e.width,e.height))};this.listenImageChange(t);return}}t!==void 0&&this.setScale(em(t,n,e.width,e.height))}}clone(){let t,n,r;return this.initialOptions_?(n=this.initialOptions_.width,r=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:n,height:r,size:this.size_===null?void 0:this.size_.slice(),src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;let t=this.getSize();if(this.anchorXUnits_==`fraction`||this.anchorYUnits_==`fraction`){if(!t)return null;e=this.anchor_.slice(),this.anchorXUnits_==`fraction`&&(e[0]*=t[0]),this.anchorYUnits_==`fraction`&&(e[1]*=t[1])}if(this.anchorOrigin_!=`top-left`){if(!t)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_==`top-right`||this.anchorOrigin_==`bottom-right`)&&(e[0]=-e[0]+t[0]),(this.anchorOrigin_==`bottom-left`||this.anchorOrigin_==`bottom-right`)&&(e[1]=-e[1]+t[1])}this.normalizedAnchor_=e}let t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!=`top-left`){let t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_==`top-right`||this.offsetOrigin_==`bottom-right`)&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_==`bottom-left`||this.offsetOrigin_==`bottom-right`)&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=yf(null,e,this.crossOrigin_,U.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){let e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==U.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){let e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==U.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(g.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(g.CHANGE,e)}ready(){return this.iconImage_.ready()}};const nm=.5;function rm(e,t,n,r,i,a,o,s,c){let l=c?Bc(i,c):i,u=pe(e[0]*nm,e[1]*nm);u.imageSmoothingEnabled=!1;let d=u.canvas,f=new Gf(u,nm,i,null,o,s,c?jc(Lc(),c):null),p=n.length,m=Math.floor((256*256*256-1)/p),h={};for(let e=1;e<=p;++e){let t=n[e-1],i=t.getStyleFunction()||r;if(!i)continue;let o=i(t,a);if(!o)continue;Array.isArray(o)||(o=[o]);let s=(e*m).toString(16).padStart(7,`#00000`);for(let e=0,n=o.length;e<n;++e){let n=o[e],r=n.getGeometryFunction()(t);if(!r||!He(l,r.getExtent()))continue;let i=n.clone(),a=i.getFill();a&&a.setColor(s);let c=i.getStroke();c&&(c.setColor(s),c.setLineDash(null)),i.setText(void 0);let u=n.getImage();if(u){let e=u.getImageSize();if(!e)continue;let t=pe(e[0],e[1],void 0,{alpha:!1}),n=t.canvas;t.fillStyle=s,t.fillRect(0,0,n.width,n.height),i.setImage(new tm({img:n,anchor:u.getAnchor(),anchorXUnits:`pixels`,anchorYUnits:`pixels`,offset:u.getOrigin(),opacity:1,size:u.getSize(),scale:u.getScale(),rotation:u.getRotation(),rotateWithView:u.getRotateWithView()}))}let d=i.getZIndex()||0,f=h[d];f||(f={},h[d]=f,f.Polygon=[],f.Circle=[],f.LineString=[],f.Point=[]);let p=r.getType();if(p===`GeometryCollection`){let e=r.getGeometriesArrayRecursive();for(let t=0,n=e.length;t<n;++t){let n=e[t];f[n.getType().replace(`Multi`,``)].push(n,i)}}else f[p.replace(`Multi`,``)].push(r,i)}}let g=Object.keys(h).map(Number).sort(x);for(let e=0,n=g.length;e<n;++e){let n=h[g[e]];for(let e in n){let r=n[e];for(let e=0,n=r.length;e<n;e+=2){f.setStyle(r[e+1]);for(let n=0,i=t.length;n<i;++n)f.setTransform(t[n]),f.drawGeometry(r[e])}}}return u.getImageData(0,0,d.width,d.height)}function im(e,t,n){let r=[];if(n){let i=Math.floor(Math.round(e[0])*nm),a=Math.floor(Math.round(e[1])*nm),o=(H(i,0,n.width-1)+H(a,0,n.height-1)*n.width)*4,s=n.data[o],c=n.data[o+1],l=n.data[o+2]+256*(c+256*s),u=Math.floor((256*256*256-1)/t.length);l&&l%u===0&&r.push(t[l/u-1])}return r}var am=class extends Vd{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=s(),this.wrappedRenderedExtent_=s(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){let r=t.extent,i=t.viewState,a=i.center,o=i.resolution,s=i.projection,c=i.rotation,l=s.getExtent(),u=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),f=t.pixelRatio,p=t.viewHints,m=!(p[cd.ANIMATING]||p[cd.INTERACTING]),h=this.context,g=Math.round(Fe(r)/o*f),_=Math.round(se(r)/o*f),v=u.getWrapX()&&s.canWrapX(),y=v?Fe(l):null,b=v?Math.ceil((r[2]-l[2])/y)+1:1,x=v?Math.floor((r[0]-l[0])/y):0;do{let r=this.getRenderTransform(a,o,0,f,g,_,x*y);t.declutter&&(r=r.slice(0)),e.execute(h,[h.canvas.width,h.canvas.height],r,c,m,n===void 0?qp:n?Jp:Yp,n?d&&t.declutter[d]:void 0)}while(++x<b)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=pe(this.context.canvas.width,this.context.canvas.height,Rd))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){let e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Me(this.context),Rd.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){let n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;let r=e.viewState;this.prepareContainer(e,t);let i=this.context,a=this.replayGroup_,o=a&&!a.isEmpty();if(!o&&!(this.getLayer().hasListener(Pd.PRERENDER)||this.getLayer().hasListener(Pd.POSTRENDER)))return this.container;this.setDrawContext_(),this.preRender(i,e);let s=r.projection;if(this.clipped_=!1,o&&n.extent&&this.clipping){let t=Vc(n.extent,s);o=He(t,e.extent),this.clipped_=o&&!_(t,e.extent),this.clipped_&&this.clipUnrotated(i,e,t)}return o&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&i.restore(),this.postRender(i,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let e=this.frameState.size.slice(),t=this.renderedCenter_,n=this.renderedResolution_,r=this.renderedRotation_,i=this.renderedProjection_,a=this.wrappedRenderedExtent_,o=this.getLayer(),s=[],c=e[0]*nm,l=e[1]*nm;s.push(this.getRenderTransform(t,n,r,nm,c,l,0).slice());let u=o.getSource(),d=i.getExtent();if(u.getWrapX()&&i.canWrapX()&&!_(d,a)){let e=a[0],i=Fe(d),o=0,u;for(;e<d[0];)--o,u=i*o,s.push(this.getRenderTransform(t,n,r,nm,c,l,u).slice()),e+=i;for(o=0,e=a[2];e>d[2];)++o,u=i*o,s.push(this.getRenderTransform(t,n,r,nm,c,l,u).slice()),e-=i}let f=Lc();this.hitDetectionImageData_=rm(e,s,this.renderedFeatures_,o.getStyleFunction(),a,n,r,Yf(n,this.renderedPixelRatio_),f?i:null)}t(im(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,r,i){if(!this.replayGroup_)return;let a=t.viewState.resolution,o=t.viewState.rotation,s=this.getLayer(),c={},l=function(e,t,n){let a=M(e),o=c[a];if(o){if(o!==!0&&n<o.distanceSq){if(n===0)return c[a]=!0,i.splice(i.lastIndexOf(o),1),r(e,s,t);o.geometry=t,o.distanceSq=n}}else{if(n===0)return c[a]=!0,r(e,s,t);i.push(c[a]={feature:e,layer:s,geometry:t,distanceSq:n,callback:r})}},u=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,n,l,u?t.declutter?.[u]?.all().map(e=>e.value):null)}handleFontsChanged(){let e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){let t=this.getLayer(),n=t.getSource();if(!n)return!1;let r=e.viewHints[cd.ANIMATING],i=e.viewHints[cd.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!a&&r||!o&&i)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let s=e.extent,c=e.viewState,l=c.projection,u=c.resolution,d=e.pixelRatio,f=t.getRevision(),p=t.getRenderBuffer(),m=t.getRenderOrder();m===void 0&&(m=Jf);let h=c.center.slice(),g=b(s,p*u),v=g.slice(),y=[g.slice()],x=l.getExtent();if(n.getWrapX()&&l.canWrapX()&&!_(x,e.extent)){let e=Fe(x),t=Math.max(Fe(g)/2,e);g[0]=x[0]-t,g[2]=x[2]+t,ms(h,l);let n=je(y[0],l);n[0]<x[0]&&n[2]<x[2]?y.push([n[0]+e,n[1],n[2]+e,n[3]]):n[0]>x[0]&&n[2]>x[2]&&y.push([n[0]-e,n[1],n[2]-e,n[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==f&&this.renderedRenderOrder_==m&&this.renderedFrameDeclutter_===!!e.declutter&&_(this.wrappedRenderedExtent_,g))return Ee(this.renderedExtent_,v)||(this.hitDetectionImageData_=null,this.renderedExtent_=v),this.renderedCenter_=h,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let S=new Pp(Xf(u,d),g,u,d),C=Lc(),w;if(C){for(let e=0,t=y.length;e<t;++e){let t=y[e],r=Bc(t,l);n.loadFeatures(r,Hc(u,l),C)}w=jc(C,l)}else for(let e=0,t=y.length;e<t;++e)n.loadFeatures(y[e],u,l);let T=Yf(u,d),E=!0,D=(e,n)=>{let r,i=e.getStyleFunction()||t.getStyleFunction();if(i&&(r=i(e,u)),r){let t=this.renderFeature(e,T,r,S,w,this.getLayer().getDeclutter(),n);E&&=!t}},O=Bc(g,l),k=n.getFeaturesInExtent(O);m&&k.sort(m);for(let e=0,t=k.length;e<t;++e)D(k[e],e);this.renderedFeatures_=k,this.ready=E;let ee=S.finish(),te=new $p(g,u,d,n.getOverlaps(),ee,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=u,this.renderedRevision_=f,this.renderedRenderOrder_=m,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=v,this.wrappedRenderedExtent_=g,this.renderedCenter_=h,this.renderedProjection_=l,this.renderedPixelRatio_=d,this.replayGroup_=te,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,r,i,a,o){if(!n)return!1;let s=!1;if(Array.isArray(n))for(let c=0,l=n.length;c<l;++c)s=Qf(r,e,n[c],t,this.boundHandleStyleImageChange_,i,a,o)||s;else s=Qf(r,e,n,t,this.boundHandleStyleImageChange_,i,a,o);return s}},om=0;const K=1<<om++,q=1<<om++,sm=1<<om++,cm=1<<om++,lm=1<<om++,um=1<<om++,dm=2**om-1;var fm={[K]:`boolean`,[q]:`number`,[sm]:`string`,[cm]:`color`,[lm]:`number[]`,[um]:`size`},pm=Object.keys(fm).map(Number).sort(x);function mm(e){return e in fm}function hm(e){let t=[];for(let n of pm)gm(e,n)&&t.push(fm[n]);return t.length===0?`untyped`:t.length<3?t.join(` or `):t.slice(0,-1).join(`, `)+`, or `+t[t.length-1]}function gm(e,t){return(e&t)===t}function _m(e,t){return e===t}var J=class{constructor(e,t){if(!mm(e))throw Error(`literal expressions must have a specific type, got ${hm(e)}`);this.type=e,this.value=t}},vm=class{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}};function ym(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Y(e,t,n){switch(typeof e){case`boolean`:if(_m(t,sm))return new J(sm,e?`true`:`false`);if(!gm(t,K))throw Error(`got a boolean, but expected ${hm(t)}`);return new J(K,e);case`number`:if(_m(t,um))return new J(um,_u(e));if(_m(t,K))return new J(K,!!e);if(_m(t,sm))return new J(sm,e.toString());if(!gm(t,q))throw Error(`got a number, but expected ${hm(t)}`);return new J(q,e);case`string`:if(_m(t,cm))return new J(cm,Ad(e));if(_m(t,K))return new J(K,!!e);if(!gm(t,sm))throw Error(`got a string, but expected ${hm(t)}`);return new J(sm,e);default:}if(!Array.isArray(e))throw Error(`expression must be an array or a primitive value`);if(e.length===0)throw Error(`empty expression`);if(typeof e[0]==`string`)return Fm(e,t,n);for(let t of e)if(typeof t!=`number`)throw Error(`expected an array of numbers`);if(_m(t,um)){if(e.length!==2)throw Error(`expected an array of two values for a size, got ${e.length}`);return new J(um,e)}if(_m(t,cm)){if(e.length===3)return new J(cm,[...e,1]);if(e.length===4)return new J(cm,e);throw Error(`expected an array of 3 or 4 values for a color, got ${e.length}`)}if(!gm(t,lm))throw Error(`got an array of numbers, but expected ${hm(t)}`);return new J(lm,e)}const X={Get:`get`,Var:`var`,Concat:`concat`,GeometryType:`geometry-type`,LineMetric:`line-metric`,Any:`any`,All:`all`,Not:`!`,Resolution:`resolution`,Zoom:`zoom`,Time:`time`,Equal:`==`,NotEqual:`!=`,GreaterThan:`>`,GreaterThanOrEqualTo:`>=`,LessThan:`<`,LessThanOrEqualTo:`<=`,Multiply:`*`,Divide:`/`,Add:`+`,Subtract:`-`,Clamp:`clamp`,Mod:`%`,Pow:`^`,Abs:`abs`,Floor:`floor`,Ceil:`ceil`,Round:`round`,Sin:`sin`,Cos:`cos`,Atan:`atan`,Sqrt:`sqrt`,Match:`match`,Between:`between`,Interpolate:`interpolate`,Coalesce:`coalesce`,Case:`case`,In:`in`,Number:`number`,String:`string`,Array:`array`,Color:`color`,Id:`id`,Band:`band`,Palette:`palette`,ToString:`to-string`,Has:`has`};var bm={[X.Get]:$(Z(1,1/0),xm),[X.Var]:$(Z(1,1),Sm),[X.Has]:$(Z(1,1/0),xm),[X.Id]:$(Cm,Em),[X.Concat]:$(Z(2,1/0),Q(sm)),[X.GeometryType]:$(wm,Em),[X.LineMetric]:$(Em),[X.Resolution]:$(Tm,Em),[X.Zoom]:$(Tm,Em),[X.Time]:$(Tm,Em),[X.Any]:$(Z(2,1/0),Q(K)),[X.All]:$(Z(2,1/0),Q(K)),[X.Not]:$(Z(1,1),Q(K)),[X.Equal]:$(Z(2,2),Q(dm)),[X.NotEqual]:$(Z(2,2),Q(dm)),[X.GreaterThan]:$(Z(2,2),Q(q)),[X.GreaterThanOrEqualTo]:$(Z(2,2),Q(q)),[X.LessThan]:$(Z(2,2),Q(q)),[X.LessThanOrEqualTo]:$(Z(2,2),Q(q)),[X.Multiply]:$(Z(2,1/0),Dm),[X.Coalesce]:$(Z(2,1/0),Dm),[X.Divide]:$(Z(2,2),Q(q)),[X.Add]:$(Z(2,1/0),Q(q)),[X.Subtract]:$(Z(2,2),Q(q)),[X.Clamp]:$(Z(3,3),Q(q)),[X.Mod]:$(Z(2,2),Q(q)),[X.Pow]:$(Z(2,2),Q(q)),[X.Abs]:$(Z(1,1),Q(q)),[X.Floor]:$(Z(1,1),Q(q)),[X.Ceil]:$(Z(1,1),Q(q)),[X.Round]:$(Z(1,1),Q(q)),[X.Sin]:$(Z(1,1),Q(q)),[X.Cos]:$(Z(1,1),Q(q)),[X.Atan]:$(Z(1,2),Q(q)),[X.Sqrt]:$(Z(1,1),Q(q)),[X.Match]:$(Z(4,1/0),km,Am),[X.Between]:$(Z(3,3),Q(q)),[X.Interpolate]:$(Z(6,1/0),km,jm),[X.Case]:$(Z(3,1/0),Om,Mm),[X.In]:$(Z(2,2),Nm),[X.Number]:$(Z(1,1/0),Q(dm)),[X.String]:$(Z(1,1/0),Q(dm)),[X.Array]:$(Z(1,1/0),Q(q)),[X.Color]:$(Z(1,4),Q(q)),[X.Band]:$(Z(1,3),Q(q)),[X.Palette]:$(Z(2,2),Pm),[X.ToString]:$(Z(1,1),Q(K|q|sm|cm))};function xm(e,t,n){let r=e.length-1,i=Array(r);for(let t=0;t<r;++t){let r=e[t+1];switch(typeof r){case`number`:i[t]=new J(q,r);break;case`string`:i[t]=new J(sm,r);break;default:throw Error(`expected a string key or numeric array index for a get operation, got ${r}`)}t===0&&n.properties.add(String(r))}return i}function Sm(e,t,n){let r=e[1];if(typeof r!=`string`)throw Error(`expected a string argument for var operation`);return n.variables.add(r),[new J(sm,r)]}function Cm(e,t,n){n.featureId=!0}function wm(e,t,n){n.geometryType=!0}function Tm(e,t,n){n.mapState=!0}function Em(e,t,n){let r=e[0];if(e.length!==1)throw Error(`expected no arguments for ${r} operation`);return[]}function Z(e,t){return function(n,r,i){let a=n[0],o=n.length-1;if(e===t){if(o!==e){let t=e===1?``:`s`;throw Error(`expected ${e} argument${t} for ${a}, got ${o}`)}}else if(o<e||o>t){let n=t===1/0?`${e} or more`:`${e} to ${t}`;throw Error(`expected ${n} arguments for ${a}, got ${o}`)}}}function Dm(e,t,n){let r=e.length-1,i=Array(r);for(let a=0;a<r;++a)i[a]=Y(e[a+1],t,n);return i}function Q(e){return function(t,n,r){let i=t.length-1,a=Array(i);for(let n=0;n<i;++n)a[n]=Y(t[n+1],e,r);return a}}function Om(e,t,n){let r=e[0],i=e.length-1;if(i%2==0)throw Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function km(e,t,n){let r=e[0],i=e.length-1;if(i%2==1)throw Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function Am(e,t,n){let r=e.length-1,i=sm|q|K,a=Y(e[1],i,n),o=Y(e[e.length-1],t,n),s=Array(r-2);for(let t=0;t<r-2;t+=2){try{s[t]=Y(e[t+2],a.type,n)}catch(e){throw Error(`failed to parse argument ${t+1} of match expression: ${e.message}`)}try{let r=Y(e[t+3],o.type,n);s[t+1]=r}catch(e){throw Error(`failed to parse argument ${t+2} of match expression: ${e.message}`)}}return[a,...s,o]}function jm(e,t,n){let r=e[1],i;switch(r[0]){case`linear`:i=1;break;case`exponential`:let e=r[1];if(typeof e!=`number`||e<=0)throw Error(`expected a number base for exponential interpolation, got ${JSON.stringify(e)} instead`);i=e;break;default:throw Error(`invalid interpolation type: ${JSON.stringify(r)}`)}let a=new J(q,i),o;try{o=Y(e[2],q,n)}catch(e){throw Error(`failed to parse argument 1 in interpolate expression: ${e.message}`)}let s=Array(e.length-3);for(let r=0;r<s.length;r+=2){try{s[r]=Y(e[r+3],q,n)}catch(e){throw Error(`failed to parse argument ${r+2} for interpolate expression: ${e.message}`)}try{let i=Y(e[r+4],t,n);s[r+1]=i}catch(e){throw Error(`failed to parse argument ${r+3} for interpolate expression: ${e.message}`)}}return[a,o,...s]}function Mm(e,t,n){let r=Y(e[e.length-1],t,n),i=Array(e.length-1);for(let t=0;t<i.length-1;t+=2){try{i[t]=Y(e[t+1],K,n)}catch(e){throw Error(`failed to parse argument ${t} of case expression: ${e.message}`)}try{let a=Y(e[t+2],r.type,n);i[t+1]=a}catch(e){throw Error(`failed to parse argument ${t+1} of case expression: ${e.message}`)}}return i[i.length-1]=r,i}function Nm(e,t,n){let r=e[2];if(!Array.isArray(r))throw Error(`the second argument for the "in" operator must be an array`);let i;if(typeof r[0]==`string`){if(r[0]!==`literal`)throw Error(`for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions`);if(!Array.isArray(r[1]))throw Error(`failed to parse "in" expression: the literal operator must be followed by an array`);r=r[1],i=sm}else i=q;let a=Array(r.length);for(let e=0;e<a.length;e++)try{a[e]=Y(r[e],i,n)}catch(t){throw Error(`failed to parse haystack item ${e} for "in" expression: ${t.message}`)}return[Y(e[1],i,n),...a]}function Pm(e,t,n){let r;try{r=Y(e[1],q,n)}catch(e){throw Error(`failed to parse first argument in palette expression: ${e.message}`)}let i=e[2];if(!Array.isArray(i))throw Error(`the second argument of palette must be an array`);let a=Array(i.length);for(let e=0;e<a.length;e++){let t;try{t=Y(i[e],cm,n)}catch(t){throw Error(`failed to parse color at index ${e} in palette expression: ${t.message}`)}if(!(t instanceof J))throw Error(`the palette color at index ${e} must be a literal value`);a[e]=t}return[r,...a]}function $(...e){return function(t,n,r){let i=t[0],a;for(let i=0;i<e.length;i++){let o=e[i](t,n,r);if(i==e.length-1){if(!o)throw Error(`expected last argument validator to return the parsed args`);a=o}}return new vm(n,i,...a)}}function Fm(e,t,n){let r=e[0],i=bm[r];if(!i)throw Error(`unknown operator: ${r}`);return i(e,t,n)}function Im(e){if(!e)return``;let t=e.getType();switch(t){case`Point`:case`LineString`:case`Polygon`:return t;case`MultiPoint`:case`MultiLineString`:case`MultiPolygon`:return t.substring(5);case`Circle`:return`Polygon`;case`GeometryCollection`:return Im(e.getGeometries()[0]);default:return``}}function Lm(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:``}}function Rm(e,t,n){return zm(Y(e,t,n),n)}function zm(e,t){if(e instanceof J){if(e.type===cm&&typeof e.value==`string`){let t=Ad(e.value);return function(){return t}}return function(){return e.value}}let n=e.operator;switch(n){case X.Number:case X.String:case X.Coalesce:return Bm(e,t);case X.Get:case X.Var:case X.Has:return Vm(e,t);case X.Id:return e=>e.featureId;case X.GeometryType:return e=>e.geometryType;case X.Concat:{let n=e.args.map(e=>zm(e,t));return e=>``.concat(...n.map(t=>t(e).toString()))}case X.Resolution:return e=>e.resolution;case X.Any:case X.All:case X.Between:case X.In:case X.Not:return Um(e,t);case X.Equal:case X.NotEqual:case X.LessThan:case X.LessThanOrEqualTo:case X.GreaterThan:case X.GreaterThanOrEqualTo:return Hm(e,t);case X.Multiply:case X.Divide:case X.Add:case X.Subtract:case X.Clamp:case X.Mod:case X.Pow:case X.Abs:case X.Floor:case X.Ceil:case X.Round:case X.Sin:case X.Cos:case X.Atan:case X.Sqrt:return Wm(e,t);case X.Case:return Gm(e,t);case X.Match:return Km(e,t);case X.Interpolate:return qm(e,t);case X.ToString:return Jm(e,t);default:throw Error(`Unsupported operator ${n}`)}}function Bm(e,t){let n=e.operator,r=e.args.length,i=Array(r);for(let n=0;n<r;++n)i[n]=zm(e.args[n],t);switch(n){case X.Coalesce:return e=>{for(let t=0;t<r;++t){let n=i[t](e);if(n!=null)return n}throw Error(`Expected one of the values to be non-null`)};case X.Number:case X.String:return e=>{for(let t=0;t<r;++t){let r=i[t](e);if(typeof r===n)return r}throw Error(`Expected one of the values to be a ${n}`)};default:throw Error(`Unsupported assertion operator ${n}`)}}function Vm(e,t){let n=e.args[0].value;switch(e.operator){case X.Get:return t=>{let r=e.args,i=t.properties[n];for(let e=1,t=r.length;e<t;++e){let t=r[e].value;i=i[t]}return i};case X.Var:return e=>e.variables[n];case X.Has:return t=>{let r=e.args;if(!(n in t.properties))return!1;let i=t.properties[n];for(let e=1,t=r.length;e<t;++e){let t=r[e].value;if(!i||!Object.hasOwn(i,t))return!1;i=i[t]}return!0};default:throw Error(`Unsupported accessor operator ${e.operator}`)}}function Hm(e,t){let n=e.operator,r=zm(e.args[0],t),i=zm(e.args[1],t);switch(n){case X.Equal:return e=>r(e)===i(e);case X.NotEqual:return e=>r(e)!==i(e);case X.LessThan:return e=>r(e)<i(e);case X.LessThanOrEqualTo:return e=>r(e)<=i(e);case X.GreaterThan:return e=>r(e)>i(e);case X.GreaterThanOrEqualTo:return e=>r(e)>=i(e);default:throw Error(`Unsupported comparison operator ${n}`)}}function Um(e,t){let n=e.operator,r=e.args.length,i=Array(r);for(let n=0;n<r;++n)i[n]=zm(e.args[n],t);switch(n){case X.Any:return e=>{for(let t=0;t<r;++t)if(i[t](e))return!0;return!1};case X.All:return e=>{for(let t=0;t<r;++t)if(!i[t](e))return!1;return!0};case X.Between:return e=>{let t=i[0](e),n=i[1](e),r=i[2](e);return t>=n&&t<=r};case X.In:return e=>{let t=i[0](e);for(let n=1;n<r;++n)if(t===i[n](e))return!0;return!1};case X.Not:return e=>!i[0](e);default:throw Error(`Unsupported logical operator ${n}`)}}function Wm(e,t){let n=e.operator,r=e.args.length,i=Array(r);for(let n=0;n<r;++n)i[n]=zm(e.args[n],t);switch(n){case X.Multiply:return e=>{let t=1;for(let n=0;n<r;++n)t*=i[n](e);return t};case X.Divide:return e=>i[0](e)/i[1](e);case X.Add:return e=>{let t=0;for(let n=0;n<r;++n)t+=i[n](e);return t};case X.Subtract:return e=>i[0](e)-i[1](e);case X.Clamp:return e=>{let t=i[0](e),n=i[1](e);if(t<n)return n;let r=i[2](e);return t>r?r:t};case X.Mod:return e=>i[0](e)%i[1](e);case X.Pow:return e=>i[0](e)**+i[1](e);case X.Abs:return e=>Math.abs(i[0](e));case X.Floor:return e=>Math.floor(i[0](e));case X.Ceil:return e=>Math.ceil(i[0](e));case X.Round:return e=>Math.round(i[0](e));case X.Sin:return e=>Math.sin(i[0](e));case X.Cos:return e=>Math.cos(i[0](e));case X.Atan:return r===2?e=>Math.atan2(i[0](e),i[1](e)):e=>Math.atan(i[0](e));case X.Sqrt:return e=>Math.sqrt(i[0](e));default:throw Error(`Unsupported numeric operator ${n}`)}}function Gm(e,t){let n=e.args.length,r=Array(n);for(let i=0;i<n;++i)r[i]=zm(e.args[i],t);return e=>{for(let t=0;t<n-1;t+=2)if(r[t](e))return r[t+1](e);return r[n-1](e)}}function Km(e,t){let n=e.args.length,r=Array(n);for(let i=0;i<n;++i)r[i]=zm(e.args[i],t);return e=>{let t=r[0](e);for(let i=1;i<n-1;i+=2)if(t===r[i](e))return r[i+1](e);return r[n-1](e)}}function qm(e,t){let n=e.args.length,r=Array(n);for(let i=0;i<n;++i)r[i]=zm(e.args[i],t);return e=>{let t=r[0](e),i=r[1](e),a,o;for(let s=2;s<n;s+=2){let n=r[s](e),c=r[s+1](e),l=Array.isArray(c);if(l&&(c=Cd(c)),n>=i)return s===2?c:l?Xm(t,i,a,o,n,c):Ym(t,i,a,o,n,c);a=n,o=c}return o}}function Jm(e,t){let n=e.operator,r=e.args.length,i=Array(r);for(let n=0;n<r;++n)i[n]=zm(e.args[n],t);switch(n){case X.ToString:return t=>{let n=i[0](t);return e.args[0].type===cm?Md(n):n.toString()};default:throw Error(`Unsupported convert operator ${n}`)}}function Ym(e,t,n,r,i,a){let o=i-n;if(o===0)return r;let s=t-n;return r+(e===1?s/o:(e**+s-1)/(e**+o-1))*(a-r)}function Xm(e,t,n,r,i,a){if(i-n===0)return r;let o=Od(r),s=Od(a),c=s[2]-o[2];return c>180?c-=360:c<-180&&(c+=360),kd([Ym(e,t,n,o[0],i,s[0]),Ym(e,t,n,o[1],i,s[1]),o[2]+Ym(e,t,n,0,i,c),Ym(e,t,n,r[3],i,a[3])])}function Zm(e){return!0}function Qm(e){let t=ym(),n=eh(e,t),r=Lm();return function(e,i){if(r.properties=e.getPropertiesInternal(),r.resolution=i,t.featureId){let t=e.getId();t===void 0?r.featureId=null:r.featureId=t}return t.geometryType&&(r.geometryType=Im(e.getGeometry())),n(r)}}function $m(e){let t=ym(),n=e.length,r=Array(n);for(let i=0;i<n;++i)r[i]=th(e[i],t);let i=Lm(),a=Array(n);return function(e,o){if(i.properties=e.getPropertiesInternal(),i.resolution=o,t.featureId){let t=e.getId();t===void 0?i.featureId=null:i.featureId=t}let s=0;for(let e=0;e<n;++e){let t=r[e](i);t&&(a[s]=t,s+=1)}return a.length=s,a}}function eh(e,t){let n=e.length,r=Array(n);for(let i=0;i<n;++i){let n=e[i],a=`filter`in n?Rm(n.filter,K,t):Zm,o;if(Array.isArray(n.style)){let e=n.style.length;o=Array(e);for(let r=0;r<e;++r)o[r]=th(n.style[r],t)}else o=[th(n.style,t)];r[i]={filter:a,styles:o}}return function(t){let i=[],a=!1;for(let o=0;o<n;++o){let n=r[o].filter;if(n(t)&&!(e[o].else&&a)){a=!0;for(let e of r[o].styles){let n=e(t);n&&i.push(n)}}}return i}}function th(e,t){let n=nh(e,``,t),r=rh(e,``,t),i=ih(e,t),a=ah(e,t),o=lh(e,`z-index`,t);if(!n&&!r&&!i&&!a&&!O(e))throw Error(`No fill, stroke, point, or text symbolizer properties in style: `+JSON.stringify(e));let s=new vp;return function(e){let t=!0;if(n){let r=n(e);r&&(t=!1),s.setFill(r)}if(r){let n=r(e);n&&(t=!1),s.setStroke(n)}if(i){let n=i(e);n&&(t=!1),s.setText(n)}if(a){let n=a(e);n&&(t=!1),s.setImage(n)}return o&&s.setZIndex(o(e)),t?null:s}}function nh(e,t,n){let r;if(t+`fill-pattern-src`in e)r=dh(e,t+`fill-`,n);else{if(e[t+`fill-color`]===`none`)return e=>null;r=ph(e,t+`fill-color`,n)}if(!r)return null;let i=new cp;return function(e){let t=r(e);return t===ld?null:(i.setColor(t),i)}}function rh(e,t,n){let r=lh(e,t+`stroke-width`,n),i=ph(e,t+`stroke-color`,n);if(!r&&!i)return null;let a=uh(e,t+`stroke-line-cap`,n),o=uh(e,t+`stroke-line-join`,n),s=mh(e,t+`stroke-line-dash`,n),c=lh(e,t+`stroke-line-dash-offset`,n),l=lh(e,t+`stroke-miter-limit`,n),u=new lp;return function(e){if(i){let t=i(e);if(t===ld)return null;u.setColor(t)}if(r&&u.setWidth(r(e)),a){let t=a(e);if(t!==`butt`&&t!==`round`&&t!==`square`)throw Error(`Expected butt, round, or square line cap`);u.setLineCap(t)}if(o){let t=o(e);if(t!==`bevel`&&t!==`round`&&t!==`miter`)throw Error(`Expected bevel, round, or miter line join`);u.setLineJoin(t)}return s&&u.setLineDash(s(e)),c&&u.setLineDashOffset(c(e)),l&&u.setMiterLimit(l(e)),u}}function ih(e,t){let n=`text-`,r=uh(e,n+`value`,t);if(!r)return null;let i=nh(e,n,t),a=nh(e,n+`background-`,t),o=rh(e,n,t),s=rh(e,n+`background-`,t),c=uh(e,n+`font`,t),l=lh(e,n+`max-angle`,t),u=lh(e,n+`offset-x`,t),d=lh(e,n+`offset-y`,t),f=fh(e,n+`overflow`,t),p=uh(e,n+`placement`,t),m=lh(e,n+`repeat`,t),h=_h(e,n+`scale`,t),g=fh(e,n+`rotate-with-view`,t),_=lh(e,n+`rotation`,t),v=uh(e,n+`align`,t),y=uh(e,n+`justify`,t),b=uh(e,n+`baseline`,t),x=fh(e,n+`keep-upright`,t),S=mh(e,n+`padding`,t),C=new bp({declutterMode:wh(e,n+`declutter-mode`)});return function(e){if(C.setText(r(e)),i&&C.setFill(i(e)),a&&C.setBackgroundFill(a(e)),o&&C.setStroke(o(e)),s&&C.setBackgroundStroke(s(e)),c&&C.setFont(c(e)),l&&C.setMaxAngle(l(e)),u&&C.setOffsetX(u(e)),d&&C.setOffsetY(d(e)),f&&C.setOverflow(f(e)),p){let t=p(e);if(t!==`point`&&t!==`line`)throw Error(`Expected point or line for text-placement`);C.setPlacement(t)}if(m&&C.setRepeat(m(e)),h&&C.setScale(h(e)),g&&C.setRotateWithView(g(e)),_&&C.setRotation(_(e)),v){let t=v(e);if(t!==`left`&&t!==`center`&&t!==`right`&&t!==`end`&&t!==`start`)throw Error(`Expected left, right, center, start, or end for text-align`);C.setTextAlign(t)}if(y){let t=y(e);if(t!==`left`&&t!==`right`&&t!==`center`)throw Error(`Expected left, right, or center for text-justify`);C.setJustify(t)}if(b){let t=b(e);if(t!==`bottom`&&t!==`top`&&t!==`middle`&&t!==`alphabetic`&&t!==`hanging`)throw Error(`Expected bottom, top, middle, alphabetic, or hanging for text-baseline`);C.setTextBaseline(t)}return S&&C.setPadding(S(e)),x&&C.setKeepUpright(x(e)),C}}function ah(e,t){return`icon-src`in e?oh(e,t):`shape-points`in e?sh(e,t):`circle-radius`in e?ch(e,t):null}function oh(e,t){let n=`icon-`,r=n+`src`,i=Dh(e[r],r),a=hh(e,n+`anchor`,t),o=_h(e,n+`scale`,t),s=lh(e,n+`opacity`,t),c=hh(e,n+`displacement`,t),l=lh(e,n+`rotation`,t),u=fh(e,n+`rotate-with-view`,t),d=xh(e,n+`anchor-origin`),f=Sh(e,n+`anchor-x-units`),p=Sh(e,n+`anchor-y-units`),m=Th(e,n+`color`),h=bh(e,n+`cross-origin`),g=Ch(e,n+`offset`),_=xh(e,n+`offset-origin`),v=vh(e,n+`width`),y=new tm({src:i,anchorOrigin:d,anchorXUnits:f,anchorYUnits:p,color:m,crossOrigin:h,offset:g,offsetOrigin:_,height:vh(e,n+`height`),width:v,size:yh(e,n+`size`),declutterMode:wh(e,n+`declutter-mode`)});return function(e){return s&&y.setOpacity(s(e)),c&&y.setDisplacement(c(e)),l&&y.setRotation(l(e)),u&&y.setRotateWithView(u(e)),o&&y.setScale(o(e)),a&&y.setAnchor(a(e)),y}}function sh(e,t){let n=`shape-`,r=n+`points`,i=n+`radius`,a=Oh(e[r],r),o=Oh(e[i],i),s=nh(e,n,t),c=rh(e,n,t),l=_h(e,n+`scale`,t),u=hh(e,n+`displacement`,t),d=lh(e,n+`rotation`,t),f=fh(e,n+`rotate-with-view`,t),p=new dp({points:a,radius:o,radius2:vh(e,n+`radius2`),angle:vh(e,n+`angle`),declutterMode:wh(e,n+`declutter-mode`)});return function(e){return s&&p.setFill(s(e)),c&&p.setStroke(c(e)),u&&p.setDisplacement(u(e)),d&&p.setRotation(d(e)),f&&p.setRotateWithView(f(e)),l&&p.setScale(l(e)),p}}function ch(e,t){let n=`circle-`,r=nh(e,n,t),i=rh(e,n,t),a=lh(e,n+`radius`,t),o=_h(e,n+`scale`,t),s=hh(e,n+`displacement`,t),c=lh(e,n+`rotation`,t),l=fh(e,n+`rotate-with-view`,t),u=new fp({radius:5,declutterMode:wh(e,n+`declutter-mode`)});return function(e){return a&&u.setRadius(a(e)),r&&u.setFill(r(e)),i&&u.setStroke(i(e)),s&&u.setDisplacement(s(e)),c&&u.setRotation(c(e)),l&&u.setRotateWithView(l(e)),o&&u.setScale(o(e)),u}}function lh(e,t,n){if(!(t in e))return;let r=Rm(e[t],q,n);return function(e){return Oh(r(e),t)}}function uh(e,t,n){if(!(t in e))return null;let r=Rm(e[t],sm,n);return function(e){return Dh(r(e),t)}}function dh(e,t,n){let r=uh(e,t+`pattern-src`,n),i=gh(e,t+`pattern-offset`,n),a=gh(e,t+`pattern-size`,n),o=ph(e,t+`color`,n);return function(e){return{src:r(e),offset:i&&i(e),size:a&&a(e),color:o&&o(e)}}}function fh(e,t,n){if(!(t in e))return null;let r=Rm(e[t],K,n);return function(e){let n=r(e);if(typeof n!=`boolean`)throw Error(`Expected a boolean for ${t}`);return n}}function ph(e,t,n){if(!(t in e))return null;let r=Rm(e[t],cm,n);return function(e){return kh(r(e),t)}}function mh(e,t,n){if(!(t in e))return null;let r=Rm(e[t],lm,n);return function(e){return Eh(r(e),t)}}function hh(e,t,n){if(!(t in e))return null;let r=Rm(e[t],lm,n);return function(e){let n=Eh(r(e),t);if(n.length!==2)throw Error(`Expected two numbers for ${t}`);return n}}function gh(e,t,n){if(!(t in e))return null;let r=Rm(e[t],lm,n);return function(e){return Ah(r(e),t)}}function _h(e,t,n){if(!(t in e))return null;let r=Rm(e[t],lm|q,n);return function(e){return jh(r(e),t)}}function vh(e,t){let n=e[t];if(n!==void 0){if(typeof n!=`number`)throw Error(`Expected a number for ${t}`);return n}}function yh(e,t){let n=e[t];if(n!==void 0){if(typeof n==`number`)return _u(n);if(!Array.isArray(n)||n.length!==2||typeof n[0]!=`number`||typeof n[1]!=`number`)throw Error(`Expected a number or size array for ${t}`);return n}}function bh(e,t){let n=e[t];if(n!==void 0){if(typeof n!=`string`)throw Error(`Expected a string for ${t}`);return n}}function xh(e,t){let n=e[t];if(n!==void 0){if(n!==`bottom-left`&&n!==`bottom-right`&&n!==`top-left`&&n!==`top-right`)throw Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return n}}function Sh(e,t){let n=e[t];if(n!==void 0){if(n!==`pixels`&&n!==`fraction`)throw Error(`Expected pixels or fraction for ${t}`);return n}}function Ch(e,t){let n=e[t];if(n!==void 0)return Eh(n,t)}function wh(e,t){let n=e[t];if(n!==void 0){if(typeof n!=`string`)throw Error(`Expected a string for ${t}`);if(n!==`declutter`&&n!==`obstacle`&&n!==`none`)throw Error(`Expected declutter, obstacle, or none for ${t}`);return n}}function Th(e,t){let n=e[t];if(n!==void 0)return kh(n,t)}function Eh(e,t){if(!Array.isArray(e))throw Error(`Expected an array for ${t}`);let n=e.length;for(let r=0;r<n;++r)if(typeof e[r]!=`number`)throw Error(`Expected an array of numbers for ${t}`);return e}function Dh(e,t){if(typeof e!=`string`)throw Error(`Expected a string for ${t}`);return e}function Oh(e,t){if(typeof e!=`number`)throw Error(`Expected a number for ${t}`);return e}function kh(e,t){if(typeof e==`string`)return e;let n=Eh(e,t),r=n.length;if(r<3||r>4)throw Error(`Expected a color with 3 or 4 values for ${t}`);return n}function Ah(e,t){let n=Eh(e,t);if(n.length!==2)throw Error(`Expected an array of two numbers for ${t}`);return n}function jh(e,t){return typeof e==`number`?e:Ah(e,t)}var Mh={RENDER_ORDER:`renderOrder`},Nh=class extends pf{constructor(e){e||={};let t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer===void 0?100:e.renderBuffer,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating===void 0?!1:e.updateWhileAnimating,this.updateWhileInteracting_=e.updateWhileInteracting===void 0?!1:e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Mh.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){let n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new Uu(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Mh.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?gp:e;let t=Ph(e);this.styleFunction_=e===null?void 0:mp(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}};function Ph(e){if(e===void 0)return gp;if(!e)return null;if(typeof e==`function`||e instanceof vp)return e;if(!Array.isArray(e))return $m([e]);if(e.length===0)return[];let t=e.length,n=e[0];if(n instanceof vp){let n=Array(t);for(let r=0;r<t;++r){let t=e[r];if(!(t instanceof vp))throw Error(`Expected a list of style instances`);n[r]=t}return n}if(`style`in n){let n=Array(t);for(let r=0;r<t;++r){let t=e[r];if(!(`style`in t))throw Error(`Expected a list of rules with a style property`);n[r]=t}return Qm(n)}return $m(e)}var Fh=Nh;export{Fl as $,po as $t,U as A,wi as An,Lc as At,su as B,jn as Bn,rs as Bt,Mu as C,Ea as Cn,Ac as Ct,Ou as D,Hi as Dn,Tc as Dt,Eu as E,Ki as En,wc as Et,_u as F,fr as Fn,ss as Ft,Xl as G,on as Gn,Yo as Gt,nu as H,gn as Hn,ns as Ht,mu as I,lr as In,cs as It,Gl as J,Bt as Jn,Wo as Jt,Zl as K,nn as Kn,Jo as Kt,uu as L,sr as Ln,ds as Lt,yu as M,si as Mn,Rc as Mt,hu as N,Tr as Nn,Pc as Nt,wu as O,Bi as On,Nc as Ot,gu as P,vr as Pn,gs as Pt,Hl as Q,ho as Qt,du as R,ar as Rn,fs as Rt,Fu as S,Aa as Sn,kc as St,Tu as T,ta as Tn,Vc as Tt,ru as U,ln as Un,$o as Ut,ou as V,wn as Vn,H as Vt,au as W,cn as Wn,Xo as Wt,Yl as X,Lt as Xn,Vo as Xt,Jl as Y,zt as Yn,V as Yt,Kl as Z,go as Zt,Pd as _,La as _n,Jc as _t,lp as a,no as an,wl as at,sd as b,Pa as bn,Yc as bt,Gf as c,za as cn,xl as ct,pf as d,Wa as dn,hl as dt,mo as en,zl as et,ff as f,Ga as fn,gl as ft,Vd as g,Za as gn,qc as gt,Xd as h,Ya as hn,sl as ht,vp as i,ro as in,Ml as it,vu as j,ci as jn,xc as jt,xu as k,Li as kn,jc as kt,jf as l,Ba as ln,_l as lt,lf as m,Ja as mn,ll as mt,am as n,so as nn,Al as nt,cp as o,$a as on,El as ot,uf as p,qa as pn,fl as pt,Ql as q,en as qn,qo as qt,bp as r,ao as rn,jl as rt,Yf as s,Ra as sn,Cl as st,Fh as t,fo as tn,kl as tt,gf as u,Ua as un,ml as ut,Nd as v,Fa as vn,Wc as vt,ju as w,ma as wn,zc as wt,Uu as x,ja as xn,Gc as xt,cd as y,Ia as yn,$c as yt,cu as z,Wn as zn,ms as zt};