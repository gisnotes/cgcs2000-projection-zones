import{$t as e,A as t,B as n,C as r,Ct as i,E as a,F as o,H as s,M as c,N as l,Ot as u,P as d,Pt as f,Rt as p,S as m,St as h,T as g,Tt as _,V as v,X as y,Zt as ee,_t as b,a as te,c as x,ct as S,dt as ne,et as re,f as ie,gt as ae,ht as oe,in as se,j as ce,jt as le,k as ue,kt as de,lt as C,m as fe,mt as pe,ot as me,p as he,pn as ge,pt as _e,rn as ve,st as ye,t as be,u as xe,ut as Se,v as Ce,vt as we,x as Te,y as Ee,yt as De,z as w,zt as Oe}from"./extent-D6dXpXWi.js";import{C as ke,I as Ae,K as je,Q as Me,V as Ne,X as Pe,c as Fe,g as Ie,v as Le,w as Re}from"./index-CS_7Xx1B.js";var ze=typeof global==`object`&&global&&global.Object===Object&&global,Be=typeof self==`object`&&self&&self.Object===Object&&self,Ve=ze||Be||Function(`return this`)(),T=Ve.Symbol,He=Object.prototype,Ue=He.hasOwnProperty,We=He.toString,Ge=T?T.toStringTag:void 0;function Ke(e){var t=Ue.call(e,Ge),n=e[Ge];try{e[Ge]=void 0;var r=!0}catch{}var i=We.call(e);return r&&(t?e[Ge]=n:delete e[Ge]),i}var qe=Ke,Je=Object.prototype.toString;function Ye(e){return Je.call(e)}var Xe=Ye,Ze=`[object Null]`,Qe=`[object Undefined]`,$e=T?T.toStringTag:void 0;function et(e){return e==null?e===void 0?Qe:Ze:$e&&$e in Object(e)?qe(e):Xe(e)}var tt=et;function nt(e){return typeof e==`object`&&!!e}var rt=nt,it=`[object Symbol]`;function at(e){return typeof e==`symbol`||rt(e)&&tt(e)==it}var ot=at;function st(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var ct=st,lt=Array.isArray,ut=1/0,dt=T?T.prototype:void 0,ft=dt?dt.toString:void 0;function pt(e){if(typeof e==`string`)return e;if(lt(e))return ct(e,pt)+``;if(ot(e))return ft?ft.call(e):``;var t=e+``;return t==`0`&&1/e==-ut?`-0`:t}var mt=pt;function ht(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}var gt=ht;function _t(e){return e}var vt=_t,yt=`[object AsyncFunction]`,bt=`[object Function]`,xt=`[object GeneratorFunction]`,St=`[object Proxy]`;function Ct(e){if(!gt(e))return!1;var t=tt(e);return t==bt||t==xt||t==yt||t==St}var wt=Ct,Tt=Ve[`__core-js_shared__`],Et=function(){var e=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||``);return e?`Symbol(src)_1.`+e:``}();function Dt(e){return!!Et&&Et in e}var Ot=Dt,kt=Function.prototype.toString;function At(e){if(e!=null){try{return kt.call(e)}catch{}try{return e+``}catch{}}return``}var jt=At,Mt=/[\\^$.*+?()[\]{}|]/g,Nt=/^\[object .+?Constructor\]$/,Pt=Function.prototype,Ft=Object.prototype,It=Pt.toString,Lt=Ft.hasOwnProperty,Rt=RegExp(`^`+It.call(Lt).replace(Mt,`\\$&`).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,`$1.*?`)+`$`);function zt(e){return!gt(e)||Ot(e)?!1:(wt(e)?Rt:Nt).test(jt(e))}var Bt=zt;function Vt(e,t){return e?.[t]}var Ht=Vt;function Ut(e,t){var n=Ht(e,t);return Bt(n)?n:void 0}var Wt=Ut;function Gt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Kt=Gt,qt=800,Jt=16,Yt=Date.now;function Xt(e){var t=0,n=0;return function(){var r=Yt(),i=Jt-(r-n);if(n=r,i>0){if(++t>=qt)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Zt=Xt;function Qt(e){return function(){return e}}var $t=Qt,en=function(){try{var e=Wt(Object,`defineProperty`);return e({},``,{}),e}catch{}}(),tn=Zt(en?function(e,t){return en(e,`toString`,{configurable:!0,enumerable:!1,value:$t(t),writable:!0})}:vt),nn=9007199254740991,rn=/^(?:0|[1-9]\d*)$/;function an(e,t){var n=typeof e;return t??=nn,!!t&&(n==`number`||n!=`symbol`&&rn.test(e))&&e>-1&&e%1==0&&e<t}var on=an;function sn(e,t,n){t==`__proto__`&&en?en(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var cn=sn;function ln(e,t){return e===t||e!==e&&t!==t}var un=ln,dn=Object.prototype.hasOwnProperty;function fn(e,t,n){var r=e[t];(!(dn.call(e,t)&&un(r,n))||n===void 0&&!(t in e))&&cn(e,t,n)}var pn=fn,mn=Math.max;function hn(e,t,n){return t=mn(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=mn(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),Kt(e,this,s)}}var gn=hn,_n=9007199254740991;function vn(e){return typeof e==`number`&&e>-1&&e%1==0&&e<=_n}var yn=vn,bn=`[object Arguments]`;function xn(e){return rt(e)&&tt(e)==bn}var Sn=xn,Cn=Object.prototype,wn=Cn.hasOwnProperty,Tn=Cn.propertyIsEnumerable,En=Sn(function(){return arguments}())?Sn:function(e){return rt(e)&&wn.call(e,`callee`)&&!Tn.call(e,`callee`)},Dn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,On=/^\w*$/;function kn(e,t){if(lt(e))return!1;var n=typeof e;return n==`number`||n==`symbol`||n==`boolean`||e==null||ot(e)?!0:On.test(e)||!Dn.test(e)||t!=null&&e in Object(t)}var An=kn,jn=Wt(Object,`create`);function Mn(){this.__data__=jn?jn(null):{},this.size=0}var Nn=Mn;function Pn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Fn=Pn,In=`__lodash_hash_undefined__`,Ln=Object.prototype.hasOwnProperty;function Rn(e){var t=this.__data__;if(jn){var n=t[e];return n===In?void 0:n}return Ln.call(t,e)?t[e]:void 0}var zn=Rn,Bn=Object.prototype.hasOwnProperty;function Vn(e){var t=this.__data__;return jn?t[e]!==void 0:Bn.call(t,e)}var Hn=Vn,Un=`__lodash_hash_undefined__`;function Wn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=jn&&t===void 0?Un:t,this}var Gn=Wn;function Kn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Kn.prototype.clear=Nn,Kn.prototype.delete=Fn,Kn.prototype.get=zn,Kn.prototype.has=Hn,Kn.prototype.set=Gn;var qn=Kn;function Jn(){this.__data__=[],this.size=0}var Yn=Jn;function Xn(e,t){for(var n=e.length;n--;)if(un(e[n][0],t))return n;return-1}var Zn=Xn,Qn=Array.prototype.splice;function $n(e){var t=this.__data__,n=Zn(t,e);return n<0?!1:(n==t.length-1?t.pop():Qn.call(t,n,1),--this.size,!0)}var er=$n;function tr(e){var t=this.__data__,n=Zn(t,e);return n<0?void 0:t[n][1]}var nr=tr;function rr(e){return Zn(this.__data__,e)>-1}var ir=rr;function ar(e,t){var n=this.__data__,r=Zn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var or=ar;function sr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}sr.prototype.clear=Yn,sr.prototype.delete=er,sr.prototype.get=nr,sr.prototype.has=ir,sr.prototype.set=or;var cr=sr,lr=Wt(Ve,`Map`);function ur(){this.size=0,this.__data__={hash:new qn,map:new(lr||cr),string:new qn}}var dr=ur;function fr(e){var t=typeof e;return t==`string`||t==`number`||t==`symbol`||t==`boolean`?e!==`__proto__`:e===null}var pr=fr;function mr(e,t){var n=e.__data__;return pr(t)?n[typeof t==`string`?`string`:`hash`]:n.map}var hr=mr;function gr(e){var t=hr(this,e).delete(e);return this.size-=t?1:0,t}var _r=gr;function vr(e){return hr(this,e).get(e)}var yr=vr;function br(e){return hr(this,e).has(e)}var xr=br;function Sr(e,t){var n=hr(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Cr=Sr;function wr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}wr.prototype.clear=dr,wr.prototype.delete=_r,wr.prototype.get=yr,wr.prototype.has=xr,wr.prototype.set=Cr;var Tr=wr,Er=`Expected a function`;function Dr(e,t){if(typeof e!=`function`||t!=null&&typeof t!=`function`)throw TypeError(Er);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Dr.Cache||Tr),n}Dr.Cache=Tr;var Or=Dr,kr=500;function Ar(e){var t=Or(e,function(e){return n.size===kr&&n.clear(),e}),n=t.cache;return t}var jr=Ar,Mr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nr=/\\(\\)?/g,Pr=jr(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(``),e.replace(Mr,function(e,n,r,i){t.push(r?i.replace(Nr,`$1`):n||e)}),t});function Fr(e){return e==null?``:mt(e)}var Ir=Fr;function Lr(e,t){return lt(e)?e:An(e,t)?[e]:Pr(Ir(e))}var Rr=Lr,zr=1/0;function Br(e){if(typeof e==`string`||ot(e))return e;var t=e+``;return t==`0`&&1/e==-zr?`-0`:t}var Vr=Br;function Hr(e,t){t=Rr(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Vr(t[n++])];return n&&n==r?e:void 0}var Ur=Hr;function Wr(e,t,n){var r=e==null?void 0:Ur(e,t);return r===void 0?n:r}var Gr=Wr;function Kr(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var qr=Kr,Jr=T?T.isConcatSpreadable:void 0;function Yr(e){return lt(e)||En(e)||!!(Jr&&e&&e[Jr])}var Xr=Yr;function Zr(e,t,n,r,i){var a=-1,o=e.length;for(n||=Xr,i||=[];++a<o;){var s=e[a];t>0&&n(s)?t>1?Zr(s,t-1,n,r,i):qr(i,s):r||(i[i.length]=s)}return i}var Qr=Zr;function $r(e){return e!=null&&e.length?Qr(e,1):[]}var ei=$r;function ti(e){return tn(gn(e,void 0,ei),e+``)}var ni=ti;function ri(e,t){return e!=null&&t in Object(e)}var ii=ri;function ai(e,t,n){t=Rr(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var o=Vr(t[r]);if(!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++r!=i?a:(i=e==null?0:e.length,!!i&&yn(i)&&on(o,i)&&(lt(e)||En(e)))}var oi=ai;function si(e,t){return e!=null&&oi(e,t,ii)}var ci=si;function li(e,t,n,r){if(!gt(e))return e;t=Rr(t,e);for(var i=-1,a=t.length,o=a-1,s=e;s!=null&&++i<a;){var c=Vr(t[i]),l=n;if(c===`__proto__`||c===`constructor`||c===`prototype`)return e;if(i!=o){var u=s[c];l=r?r(u,c,s):void 0,l===void 0&&(l=gt(u)?u:on(t[i+1])?[]:{})}pn(s,c,l),s=s[c]}return e}var ui=li;function di(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=Ur(e,o);n(s,o)&&ui(a,Rr(o,e),s)}return a}var fi=di;function pi(e,t){return fi(e,t,function(t,n){return ci(e,n)})}var mi=pi,hi=ni(function(e,t){return e==null?{}:mi(e,t)}),gi={name:`en`,el:{breadcrumb:{label:`Breadcrumb`},colorpicker:{confirm:`OK`,clear:`Clear`,defaultLabel:`color picker`,description:`current color is {color}. press enter to select a new color.`,alphaLabel:`pick alpha value`,alphaDescription:`alpha {alpha}, current color is {color}`,hueLabel:`pick hue value`,hueDescription:`hue {hue}, current color is {color}`,svLabel:`pick saturation and brightness value`,svDescription:`saturation {saturation}, brightness {brightness}, current color is {color}`,predefineDescription:`select {value} as the color`},datepicker:{now:`Now`,today:`Today`,cancel:`Cancel`,clear:`Clear`,confirm:`OK`,dateTablePrompt:`Use the arrow keys and enter to select the day of the month`,monthTablePrompt:`Use the arrow keys and enter to select the month`,yearTablePrompt:`Use the arrow keys and enter to select the year`,selectedDate:`Selected date`,selectDate:`Select date`,selectTime:`Select time`,startDate:`Start Date`,startTime:`Start Time`,endDate:`End Date`,endTime:`End Time`,prevYear:`Previous Year`,nextYear:`Next Year`,prevMonth:`Previous Month`,nextMonth:`Next Month`,year:``,month1:`January`,month2:`February`,month3:`March`,month4:`April`,month5:`May`,month6:`June`,month7:`July`,month8:`August`,month9:`September`,month10:`October`,month11:`November`,month12:`December`,weeks:{sun:`Sun`,mon:`Mon`,tue:`Tue`,wed:`Wed`,thu:`Thu`,fri:`Fri`,sat:`Sat`},weeksFull:{sun:`Sunday`,mon:`Monday`,tue:`Tuesday`,wed:`Wednesday`,thu:`Thursday`,fri:`Friday`,sat:`Saturday`},months:{jan:`Jan`,feb:`Feb`,mar:`Mar`,apr:`Apr`,may:`May`,jun:`Jun`,jul:`Jul`,aug:`Aug`,sep:`Sep`,oct:`Oct`,nov:`Nov`,dec:`Dec`}},inputNumber:{decrease:`decrease number`,increase:`increase number`},select:{loading:`Loading`,noMatch:`No matching data`,noData:`No data`,placeholder:`Select`},mention:{loading:`Loading`},dropdown:{toggleDropdown:`Toggle Dropdown`},cascader:{noMatch:`No matching data`,loading:`Loading`,placeholder:`Select`,noData:`No data`},pagination:{goto:`Go to`,pagesize:`/page`,total:`Total {total}`,pageClassifier:``,page:`Page`,prev:`Go to previous page`,next:`Go to next page`,currentPage:`page {pager}`,prevPages:`Previous {pager} pages`,nextPages:`Next {pager} pages`,deprecationWarning:`Deprecated usages detected, please refer to the el-pagination documentation for more details`},dialog:{close:`Close this dialog`},drawer:{close:`Close this dialog`},messagebox:{title:`Message`,confirm:`OK`,cancel:`Cancel`,error:`Illegal input`,close:`Close this dialog`},upload:{deleteTip:`press delete to remove`,delete:`Delete`,preview:`Preview`,continue:`Continue`},slider:{defaultLabel:`slider between {min} and {max}`,defaultRangeStartLabel:`pick start value`,defaultRangeEndLabel:`pick end value`},table:{emptyText:`No Data`,confirmFilter:`Confirm`,resetFilter:`Reset`,clearFilter:`All`,sumText:`Sum`,selectAllLabel:`Select all rows`,selectRowLabel:`Select this row`,expandRowLabel:`Expand this row`,collapseRowLabel:`Collapse this row`,sortLabel:`Sort by {column}`,filterLabel:`Filter by {column}`},tag:{close:`Close this tag`},tour:{next:`Next`,previous:`Previous`,finish:`Finish`,close:`Close this dialog`},tree:{emptyText:`No Data`},transfer:{noMatch:`No matching data`,noData:`No data`,titles:[`List 1`,`List 2`],filterPlaceholder:`Enter keyword`,noCheckedFormat:`{total} items`,hasCheckedFormat:`{checked}/{total} checked`},image:{error:`FAILED`},pageHeader:{title:`Back`},popconfirm:{confirmButtonText:`Yes`,cancelButtonText:`No`},carousel:{leftArrow:`Carousel arrow left`,rightArrow:`Carousel arrow right`,indicator:`Carousel switch to index {index}`}}},_i=e=>(t,n)=>vi(t,n,Me(e)),vi=(e,t,n)=>Gr(n,e,e).replace(/\{(\w+)\}/g,(e,n)=>`${t?.[n]??`{${n}}`}`),yi=e=>({lang:Fe(()=>Me(e).name),locale:Ne(e)?e:je(e),t:_i(e)}),bi=Symbol(`localeContextKey`),xi=e=>{let t=e||Le(bi,je());return yi(Fe(()=>t.value||gi))},Si=`update:modelValue`,Ci=`change`,wi=`input`,Ti=ee({ariaLabel:String,ariaOrientation:{type:String,values:[`horizontal`,`vertical`,`undefined`]},ariaControls:String}),Ei=e=>hi(Ti,e),Di={prefix:Math.floor(Math.random()*1e4),current:0},Oi=Symbol(`elIdInjection`),ki=()=>Ie()?Le(Oi,Di):Di,Ai=t=>{let n=ki();!se&&n===Di&&e(`IdInjection`,`Looks like you are using server rendering, you must provide a id provider to ensure the hydration process to be succeed
usage: app.provide(ID_INJECTION_KEY, {
  prefix: number,
  current: number,
})`);let r=ge();return ve(()=>Me(t)||`${r.value}-id-${n.prefix}-${n.current++}`)},ji=()=>({form:Le(p,void 0),formItem:Le(Oe,void 0)}),Mi=(e,{formItemContext:t,disableIdGeneration:n,disableIdManagement:r})=>{n||=je(!1),r||=je(!1);let i=Ie(),a=()=>{let e=i?.parent;for(;e;){if(e.type.name===`ElFormItem`)return!1;if(e.type.name===`ElLabelWrap`)return!0;e=e.parent}return!1},o=je(),s,c=Fe(()=>!!(!(e.label||e.ariaLabel)&&t&&t.inputIds&&t.inputIds?.length<=1));return ke(()=>{s=Ae([Pe(e,`id`),n],([e,n])=>{let i=e??(n?void 0:Ai().value);i!==o.value&&(t?.removeInputId&&!a()&&(o.value&&t.removeInputId(o.value),!r?.value&&!n&&i&&t.addInputId(i)),o.value=i)},{immediate:!0})}),Re(()=>{s&&s(),t?.removeInputId&&o.value&&t.removeInputId(o.value)}),{isLabeledByFormItem:c,inputId:o}};function E(e,t){if(!e)throw Error(t)}var Ni={info:1,warn:2,error:3,none:4},Pi=Ni.info;function Fi(...e){Pi>Ni.warn||console.warn(...e)}function D(e,t,n){return Math.min(Math.max(e,t),n)}function Ii(e,t,n,r,i,a){let o=i-n,s=a-r;if(o!==0||s!==0){let c=((e-n)*o+(t-r)*s)/(o*o+s*s);c>1?(n=i,r=a):c>0&&(n+=o*c,r+=s*c)}return Li(e,t,n,r)}function Li(e,t,n,r){let i=n-e,a=r-t;return i*i+a*a}function Ri(e){let t=e.length;for(let n=0;n<t;n++){let r=n,i=Math.abs(e[n][n]);for(let a=n+1;a<t;a++){let t=Math.abs(e[a][n]);t>i&&(i=t,r=a)}if(i===0)return null;let a=e[r];e[r]=e[n],e[n]=a;for(let r=n+1;r<t;r++){let i=-e[r][n]/e[n][n];for(let a=n;a<t+1;a++)n==a?e[r][a]=0:e[r][a]+=i*e[n][a]}}let n=Array(t);for(let r=t-1;r>=0;r--){n[r]=e[r][t]/e[r][r];for(let i=r-1;i>=0;i--)e[i][t]-=e[i][r]*n[r]}return n}function zi(e){return e*180/Math.PI}function O(e){return e*Math.PI/180}function Bi(e,t){let n=e%t;return n*t<0?n+t:n}function Vi(e,t,n){return e+n*(t-e)}function Hi(e,t){let n=10**t;return Math.round(e*n)/n}function Ui(e,t){return Math.floor(Hi(e,t))}function Wi(e,t){return Math.ceil(Hi(e,t))}function Gi(e,t,n){if(e>=t&&e<n)return e;let r=n-t;return((e-t)%r+r)%r+t}function Ki(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function qi(e,t){let n=!0;for(let r=e.length-1;r>=0;--r)if(e[r]!=t[r]){n=!1;break}return n}function Ji(e,t){let n=Math.cos(t),r=Math.sin(t),i=e[0]*n-e[1]*r,a=e[1]*n+e[0]*r;return e[0]=i,e[1]=a,e}function Yi(e,t){return e[0]*=t,e[1]*=t,e}function Xi(e,t){if(t.canWrapX()){let n=ce(t.getExtent()),r=Zi(e,t,n);r&&(e[0]-=r*n)}return e}function Zi(e,t,n){let r=t.getExtent(),i=0;return t.canWrapX()&&(e[0]<r[0]||e[0]>r[2])&&(n||=ce(r),i=Math.floor((e[0]-r[0])/n)),i}const Qi={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var $i=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent===void 0?null:e.extent,this.worldExtent_=e.worldExtent===void 0?null:e.worldExtent,this.axisOrientation_=e.axisOrientation===void 0?`enu`:e.axisOrientation,this.global_=e.global===void 0?!1:e.global,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Qi[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const ea=6378137,ta=Math.PI*ea,na=[-ta,-ta,ta,ta],ra=[-180,-85,180,85],ia=ea*Math.log(Math.tan(Math.PI/2));var aa=class extends $i{constructor(e){super({code:e,units:`m`,extent:na,global:!0,worldExtent:ra,getPointResolution:function(e,t){return e/Math.cosh(t[1]/ea)}})}};const oa=[new aa(`EPSG:3857`),new aa(`EPSG:102100`),new aa(`EPSG:102113`),new aa(`EPSG:900913`),new aa(`http://www.opengis.net/def/crs/EPSG/0/3857`),new aa(`http://www.opengis.net/gml/srs/epsg.xml#3857`)];function sa(e,t,n,r){let i=e.length;n=n>1?n:2,r??=n,t===void 0&&(t=n>2?e.slice():Array(i));for(let n=0;n<i;n+=r){t[n]=ta*e[n]/180;let r=ea*Math.log(Math.tan(Math.PI*(+e[n+1]+90)/360));r>ia?r=ia:r<-ia&&(r=-ia),t[n+1]=r}return t}function ca(e,t,n,r){let i=e.length;n=n>1?n:2,r??=n,t===void 0&&(t=n>2?e.slice():Array(i));for(let n=0;n<i;n+=r)t[n]=180*e[n]/ta,t[n+1]=360*Math.atan(Math.exp(e[n+1]/ea))/Math.PI-90;return t}const la=[-180,-90,180,90],ua=Math.PI*6378137/180;var da=class extends $i{constructor(e,t){super({code:e,units:`degrees`,extent:la,axisOrientation:t,global:!0,metersPerUnit:ua,worldExtent:la})}};const fa=[new da(`CRS:84`),new da(`EPSG:4326`,`neu`),new da(`urn:ogc:def:crs:OGC:1.3:CRS84`),new da(`urn:ogc:def:crs:OGC:2:84`),new da(`http://www.opengis.net/def/crs/OGC/1.3/CRS84`),new da(`http://www.opengis.net/gml/srs/epsg.xml#4326`,`neu`),new da(`http://www.opengis.net/def/crs/EPSG/0/4326`,`neu`)];var pa={};function ma(e){return pa[e]||pa[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,`EPSG:$3`)]||null}function ha(e,t){pa[e]=t}var ga={};function _a(e,t,n){let r=e.getCode(),i=t.getCode();r in ga||(ga[r]={}),ga[r][i]=n}function va(e,t){return e in ga&&t in ga[e]?ga[e][t]:null}var ya=.9996,k=.00669438,ba=k*k,xa=ba*k,Sa=k/(1-k),Ca=Math.sqrt(1-k),wa=(1-Ca)/(1+Ca),Ta=wa*wa,Ea=Ta*wa,Da=Ea*wa,Oa=Da*wa,ka=1-k/4-3*ba/64-5*xa/256,Aa=3*k/8+3*ba/32+45*xa/1024,ja=15*ba/256+45*xa/1024,Ma=35*xa/3072,Na=3/2*wa-27/32*Ea+269/512*Oa,Pa=21/16*Ta-55/32*Da,Fa=151/96*Ea-417/128*Oa,Ia=1097/512*Da,La=6378137;function Ra(e,t,n){let r=e-5e5,i=(n.north?t:t-1e7)/ya/(La*ka),a=i+Na*Math.sin(2*i)+Pa*Math.sin(4*i)+Fa*Math.sin(6*i)+Ia*Math.sin(8*i),o=Math.sin(a),s=o*o,c=Math.cos(a),l=o/c,u=l*l,d=u*u,f=1-k*s,p=La/Math.sqrt(1-k*s),m=(1-k)/f,h=Sa*c**2,g=h*h,_=r/(p*ya),v=_*_,y=v*_,ee=y*_,b=ee*_,te=b*_,x=a-l/m*(v/2-ee/24*(5+3*u+10*h-4*g-9*Sa))+te/720*(61+90*u+298*h+45*d-252*Sa-3*g),S=(_-y/6*(1+2*u+h)+b/120*(5-2*h+28*u-3*g+8*Sa+24*d))/c;return S=Gi(S+O(Wa(n.number)),-Math.PI,Math.PI),[zi(S),zi(x)]}var za=-80,Ba=84,Va=-180,Ha=180;function Ua(e,t,n){e=Gi(e,Va,Ha),t<za?t=za:t>Ba&&(t=Ba);let r=O(t),i=Math.sin(r),a=Math.cos(r),o=i/a,s=o*o,c=s*s,l=O(e),u=O(Wa(n.number)),d=La/Math.sqrt(1-k*i**2),f=Sa*a**2,p=a*Gi(l-u,-Math.PI,Math.PI),m=p*p,h=m*p,g=h*p,_=g*p,v=_*p,y=La*(ka*r-Aa*Math.sin(2*r)+ja*Math.sin(4*r)-Ma*Math.sin(6*r)),ee=ya*d*(p+h/6*(1-s+f)+_/120*(5-18*s+c+72*f-58*Sa))+5e5,b=ya*(y+d*o*(m/2+g/24*(5-s+9*f+4*f**2)+v/720*(61-58*s+c+600*f-330*Sa)));return n.north||(b+=1e7),[ee,b]}function Wa(e){return(e-1)*6-180+3}var Ga=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function Ka(e){let t=0;for(let n of Ga){let r=e.match(n);if(r){t=parseInt(r[1]);break}}if(!t)return null;let n=0,r=!1;return t>32700&&t<32761?n=t-32700:t>32600&&t<32661&&(r=!0,n=t-32600),n?{number:n,north:r}:null}function qa(e,t){return function(n,r,i,a){let o=n.length;i=i>1?i:2,a??=i,r||=i>2?n.slice():Array(o);for(let i=0;i<o;i+=a){let a=n[i],o=n[i+1],s=e(a,o,t);r[i]=s[0],r[i+1]=s[1]}return r}}function Ja(e){return Ka(e)?new $i({code:e,units:`m`}):null}function Ya(e){let t=Ka(e.getCode());return t?{forward:qa(Ua,t),inverse:qa(Ra,t)}:null}function Xa(e,t,n){n||=6371008.8;let r=O(e[1]),i=O(t[1]),a=(i-r)/2,o=O(t[0]-e[0])/2,s=Math.sin(a)*Math.sin(a)+Math.sin(o)*Math.sin(o)*Math.cos(r)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))}var Za=[Ya],Qa=[Ja],$a=!0;function eo(e){$a=!(e===void 0||e)}function to(e,t){if(t!==void 0){for(let n=0,r=e.length;n<r;++n)t[n]=e[n];t=t}else t=e.slice();return t}function no(e){ha(e.getCode(),e),_a(e,e,to)}function ro(e){e.forEach(no)}function A(e){if(typeof e!=`string`)return e;let t=ma(e);if(t)return t;for(let t of Qa){let n=t(e);if(n)return n}return null}function io(e,t,n,r){e=A(e);let i,a=e.getPointResolutionFunc();if(a){if(i=a(t,n),r&&r!==e.getUnits()){let t=e.getMetersPerUnit();t&&(i=i*t/Qi[r])}}else{let a=e.getUnits();if(a==`degrees`&&!r||r==`degrees`)i=t;else{let o=uo(e,A(`EPSG:4326`));if(!o&&a!==`degrees`)i=t*e.getMetersPerUnit();else{let e=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];e=o(e,e,2),i=(Xa(e.slice(0,2),e.slice(2,4))+Xa(e.slice(4,6),e.slice(6,8)))/2}let s=r?Qi[r]:e.getMetersPerUnit();s!==void 0&&(i/=s)}}return i}function ao(e){ro(e),e.forEach(function(t){e.forEach(function(e){t!==e&&_a(t,e,to)})})}function oo(e,t,n,r){e.forEach(function(e){t.forEach(function(t){_a(e,t,n),_a(t,e,r)})})}function so(e,t){return e?typeof e==`string`?A(e):e:A(t)}function co(e){return(function(t,n,r,i){let a=t.length;r=r===void 0?2:r,i??=r,n=n===void 0?Array(a):n;for(let o=0;o<a;o+=i){let a=e(t.slice(o,o+r)),s=a.length;for(let e=0,r=i;e<r;++e)n[o+e]=e>=s?t[o+e]:a[e]}return n})}function lo(e,t){if(e===t)return!0;let n=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||uo(e,t)===to)&&n}function uo(e,t){let n=e.getCode(),r=t.getCode(),i=va(n,r);if(i)return i;let a=null,o=null;for(let n of Za)a||=n(e),o||=n(t);if(!a&&!o)return null;let s=`EPSG:4326`;if(o)if(a)i=fo(a.inverse,o.forward);else{let e=va(n,s);e&&(i=fo(e,o.forward))}else{let e=va(s,r);e&&(i=fo(a.inverse,e))}return i&&(no(e),no(t),_a(e,t,i)),i}function fo(e,t){return function(n,r,i,a){return r=e(n,r,i,a),t(r,r,i,a)}}function po(e,t){return uo(A(e),A(t))}function mo(e,t,n){let r=po(t,n);if(!r){let e=A(t).getCode(),r=A(n).getCode();throw Error(`No transform available between ${e} and ${r}`)}return r(e,void 0,e.length)}function ho(e,t,n,r){return be(e,po(t,n),void 0,r)}var j=null;function go(){return j}function _o(e,t){return j?mo(e,t,j):e}function M(e,t){return j?mo(e,j,t):($a&&!qi(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&($a=!1,Fi(`Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.`)),e)}function vo(e,t){return j?ho(e,t,j):e}function yo(e,t){return j?ho(e,j,t):e}function bo(e,t){if(!j)return e;let n=A(t).getMetersPerUnit(),r=j.getMetersPerUnit();return n&&r?e*n/r:e}function xo(){ao(oa),ao(fa),oo(fa,oa,sa,ca)}xo();function So(e){return e[0]>0&&e[1]>0}function Co(e,t,n){return n===void 0&&(n=[0,0]),n[0]=e[0]*t+.5|0,n[1]=e[1]*t+.5|0,n}function wo(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}function To(e,t,n,r,i){return!Ee(i,function(i){return!Eo(e,t,n,r,i[0],i[1])})}function Eo(e,t,n,r,i,a){let o=0,s=e[n-r],c=e[n-r+1];for(;t<n;t+=r){let n=e[t],r=e[t+1];c<=a?r>a&&(n-s)*(a-c)-(i-s)*(r-c)>0&&o++:r<=a&&(n-s)*(a-c)-(i-s)*(r-c)<0&&o--,s=n,c=r}return o!==0}function Do(e,t,n,r,i,a){if(n.length===0||!Eo(e,t,n[0],r,i,a))return!1;for(let t=1,o=n.length;t<o;++t)if(Eo(e,n[t-1],n[t],r,i,a))return!1;return!0}function Oo(e,t,n,r,i){let a;for(t+=r;t<n;t+=r)if(a=i(e.slice(t-r,t),e.slice(t,t+r)),a)return a;return!1}function ko(e,t,n,r,i,a){return a??=Ce(xe(),e,t,n,r),c(i,a)?a[0]>=i[0]&&a[2]<=i[2]||a[1]>=i[1]&&a[3]<=i[3]?!0:Oo(e,t,n,r,function(e,t){return l(i,e,t)}):!1}function Ao(e,t,n,r,i){return!!(ko(e,t,n,r,i)||Eo(e,t,n,r,i[0],i[1])||Eo(e,t,n,r,i[0],i[3])||Eo(e,t,n,r,i[2],i[1])||Eo(e,t,n,r,i[2],i[3]))}function jo(e,t,n,r,i){if(!Ao(e,t,n[0],r,i))return!1;if(n.length===1)return!0;for(let t=1,a=n.length;t<a;++t)if(To(e,n[t-1],n[t],r,i)&&!ko(e,n[t-1],n[t],r,i))return!1;return!0}const Mo=42,No=256;var N={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Po(e,t,n){let r=e,i=!0,a=!1,o=!1,s=[pe(r,f.LOAD,function(){o=!0,a||t()})];return r.src&&y?(a=!0,r.decode().then(function(){i&&t()}).catch(function(e){i&&(o?t():n())})):s.push(pe(r,f.ERROR,n)),function(){i=!1,s.forEach(oe)}}function Fo(e,t){return new Promise((n,r)=>{function i(){o(),n(e)}function a(){o(),r(Error(`Image load error`))}function o(){e.removeEventListener(`load`,i),e.removeEventListener(`error`,a)}e.addEventListener(`load`,i),e.addEventListener(`error`,a),t&&(e.src=t)})}function Io(e,t){return t&&(e.src=t),e.src&&y?new Promise((t,n)=>e.decode().then(()=>t(e)).catch(r=>e.complete&&e.width?t(e):n(r))):Fo(e)}function Lo(e){return e**3}function Ro(e){return 1-Lo(1-e)}function zo(e){return 3*e*e-2*e*e*e}function Bo(e){return e}function Vo(){return[1,0,0,1,0,0]}function Ho(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function P(e,t){let n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function Uo(e,t,n,r,i,a,o,s){let c=Math.sin(a),l=Math.cos(a);return e[0]=r*l,e[1]=i*c,e[2]=-r*c,e[3]=i*l,e[4]=o*r*l-s*r*c+t,e[5]=o*i*c+s*i*l+n,e}function Wo(e,t){let n=Go(t);E(n!==0,`Transformation matrix cannot be inverted`);let r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5];return e[0]=o/n,e[1]=-i/n,e[2]=-a/n,e[3]=r/n,e[4]=(a*c-o*s)/n,e[5]=-(r*c-i*s)/n,e}function Go(e){return e[0]*e[3]-e[1]*e[2]}var Ko=[1e5,1e5,1e5,1e5,2,2];function qo(e){return`matrix(`+e.join(`, `)+`)`}function Jo(e){return e.substring(7,e.length-1).split(`,`).map(parseFloat)}function Yo(e,t){let n=Jo(e),r=Jo(t);for(let e=0;e<6;++e)if(Math.round((n[e]-r[e])*Ko[e])!==0)return!1;return!0}var Xo=class extends S{constructor(e){super(),this.projection=A(e.projection),this.attributions_=Zo(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state===void 0?`ready`:e.state,this.wrapX_=e.wrapX===void 0?!1:e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;let t=this;this.viewPromise_=new Promise(function(e,n){t.viewResolver=e,t.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Zo(e),this.changed()}setState(e){this.state_=e,this.changed()}};function Zo(e){return e?typeof e==`function`?e:(Array.isArray(e)||(e=[e]),t=>e):null}var Qo=Xo;function $o(e,t,n,r,i,a,o){a||=[],o||=2;let s=0;for(let c=t;c<n;c+=r){let t=e[c],n=e[c+1];a[s++]=i[0]*t+i[2]*n+i[4],a[s++]=i[1]*t+i[3]*n+i[5];for(let t=2;t<o;t++)a[s++]=e[c+t]}return a&&a.length!=s&&(a.length=s),a}function es(e,t,n,r,i,a,o){o||=[];let s=Math.cos(i),c=Math.sin(i),l=a[0],u=a[1],d=0;for(let i=t;i<n;i+=r){let t=e[i]-l,n=e[i+1]-u;o[d++]=l+t*s-n*c,o[d++]=u+t*c+n*s;for(let t=i+2;t<i+r;++t)o[d++]=e[t]}return o&&o.length!=d&&(o.length=d),o}function ts(e,t,n,r,i,a,o,s){s||=[];let c=o[0],l=o[1],u=0;for(let o=t;o<n;o+=r){let t=e[o]-c,n=e[o+1]-l;s[u++]=c+i*t,s[u++]=l+a*n;for(let t=o+2;t<o+r;++t)s[u++]=e[t]}return s&&s.length!=u&&(s.length=u),s}function ns(e,t,n,r,i,a,o){o||=[];let s=0;for(let c=t;c<n;c+=r){o[s++]=e[c]+i,o[s++]=e[c+1]+a;for(let t=c+2;t<c+r;++t)o[s++]=e[t]}return o&&o.length!=s&&(o.length=s),o}var rs=Vo(),is=[NaN,NaN],as=class extends S{constructor(){super(),this.extent_=xe(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=i((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);let r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return C()}closestPointXY(e,t,n,r){return C()}containsXY(e,t){return this.closestPointXY(e,t,is,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t||=[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return C()}getExtent(e){if(this.extentRevision_!=this.getRevision()){let e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&ie(e),this.extentRevision_=this.getRevision()}return o(this.extent_,e)}rotate(e,t){C()}scale(e,t,n){C()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return C()}getType(){return C()}applyTransform(e){C()}intersectsExtent(e){return C()}translate(e,t){C()}transform(e,t){let n=A(e),r=n.getUnits()==`tile-pixels`?function(e,r,i){let o=n.getExtent(),s=n.getWorldExtent(),c=a(s)/a(o);Uo(rs,s[0],s[3],c,-c,0,0,0);let l=$o(e,0,e.length,i,rs,r),u=po(n,t);return u?u(l,l,i):l}:po(n,t);return this.applyTransform(r),this}},os=class extends as{constructor(){super(),this.layout=`XY`,this.stride=2,this.flatCoordinates}computeExtent(e){return fe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return C()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;let t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=cs(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){C()}setLayout(e,t,n){let r;if(e)r=cs(e);else{for(let e=0;e<n;++e){if(t.length===0){this.layout=`XY`,this.stride=2;return}t=t[0]}r=t.length,e=ss(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith(`XYZ`)?3:2,this.stride),this.changed())}rotate(e,t){let n=this.getFlatCoordinates();if(n){let r=this.getStride();es(n,0,n.length,r,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||=r(this.getExtent());let i=this.getFlatCoordinates();if(i){let r=this.getStride();ts(i,0,i.length,r,e,t,n,i),this.changed()}}translate(e,t){let n=this.getFlatCoordinates();if(n){let r=this.getStride();ns(n,0,n.length,r,e,t,n),this.changed()}}};function ss(e){let t;return e==2?t=`XY`:e==3?t=`XYZ`:e==4&&(t=`XYZM`),t}function cs(e){let t;return e==`XY`?t=2:e==`XYZ`||e==`XYM`?t=3:e==`XYZM`&&(t=4),t}function ls(e,t,n){let r=e.getFlatCoordinates();if(!r)return null;let i=e.getStride();return $o(r,0,r.length,i,t,n)}var us=os;function ds(e,t,n,r){for(let r=0,i=n.length;r<i;++r)e[t++]=n[r];return t}function fs(e,t,n,r){for(let i=0,a=n.length;i<a;++i){let a=n[i];for(let n=0;n<r;++n)e[t++]=a[n]}return t}function ps(e,t,n,r,i){i||=[];let a=0;for(let o=0,s=n.length;o<s;++o){let s=fs(e,t,n[o],r);i[a++]=s,t=s}return i.length=a,i}var ms=class e extends us{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){let t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(e,t,n,r){let i=this.flatCoordinates,a=Li(e,t,i[0],i[1]);if(a<r){let e=this.stride;for(let t=0;t<e;++t)n[t]=i[t];return n.length=e,a}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return he(this.flatCoordinates,e)}getType(){return`Point`}intersectsExtent(e){return x(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||=[],this.flatCoordinates.length=ds(this.flatCoordinates,0,e,this.stride),this.changed()}},hs={ADD:`add`,REMOVE:`remove`},gs={LENGTH:`length`},_s=class extends b{constructor(e,t,n){super(e),this.element=t,this.index=n}},vs=class extends S{constructor(e,t){if(super(),this.on,this.once,this.un,t||={},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let e=1,t=this.array_.length;e<t;++e)this.assertUnique_(this.array_[e],e);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){let t=this.array_;for(let n=0,r=t.length;n<r;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(gs.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw Error(`Index out of bounds: `+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new _s(hs.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){let t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){let t=this.array_;for(let n=0,r=t.length;n<r;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;let t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new _s(hs.REMOVE,t,e)),t}setAt(e,t){if(e>=this.getLength()){this.insertAt(e,t);return}if(e<0)throw Error(`Index out of bounds: `+e);this.unique_&&this.assertUnique_(t,e);let n=this.array_[e];this.array_[e]=t,this.dispatchEvent(new _s(hs.REMOVE,n,e)),this.dispatchEvent(new _s(hs.ADD,t,e))}updateLength_(){this.set(gs.LENGTH,this.array_.length)}assertUnique_(e,t){let n=this.array_;for(let r=0,i=n.length;r<i;++r)if(n[r]===e&&r!==t)throw Error(`Duplicate item added to a unique collection`)}};function ys(e,t,n,r,i,a,o){let s,c,l,u,d,f,p,m=i[a+1],h=[];for(let i=0,a=n.length;i<a;++i){let a=n[i];for(u=e[a-r],f=e[a-r+1],s=t;s<a;s+=r)d=e[s],p=e[s+1],(m<=f&&p<=m||f<=m&&m<=p)&&(l=(m-f)/(p-f)*(d-u)+u,h.push(l)),u=d,f=p}let g=NaN,v=-1/0;for(h.sort(_),u=h[0],s=1,c=h.length;s<c;++s){d=h[s];let i=Math.abs(d-u);i>v&&(l=(u+d)/2,Do(e,t,n,r,l,m)&&(g=l,v=i)),u=d}return isNaN(g)&&(g=i[a]),o?(o.push(g,m,v),o):[g,m,v]}function bs(e,t,n,r,i){let a=[];for(let o=0,s=n.length;o<s;++o){let s=n[o];a=ys(e,t,s,r,i,2*o,a),t=s[s.length-1]}return a}function xs(e,t,n,r){for(;t<n-r;){for(let i=0;i<r;++i){let a=e[t+i];e[t+i]=e[n-r+i],e[n-r+i]=a}t+=r,n-=r}}function Ss(e,t,n,r){let i=0,a=e[n-r],o=e[n-r+1];for(;t<n;t+=r){let n=e[t],r=e[t+1];i+=(n-a)*(r+o),a=n,o=r}return i===0?void 0:i>0}function Cs(e,t,n,r,i){i=i===void 0?!1:i;for(let a=0,o=n.length;a<o;++a){let o=n[a],s=Ss(e,t,o,r);if(a===0){if(i&&s||!i&&!s)return!1}else if(i&&!s||!i&&s)return!1;t=o}return!0}function ws(e,t,n,r,i){i=i===void 0?!1:i;for(let a=0,o=n.length;a<o;++a){let o=n[a],s=Ss(e,t,o,r);(a===0?i&&s||!i&&!s:i&&!s||!i&&s)&&xs(e,t,o,r),t=o}return t}function Ts(e,t){let n=[],r=0,i=0,a;for(let o=0,s=t.length;o<s;++o){let s=t[o],c=Ss(e,r,s,2);if(a===void 0&&(a=c),c===a)n.push(t.slice(i,o+1));else{if(n.length===0)continue;n[n.length-1].push(t[i])}i=o+1,r=s}return n}function Es(e,t,n,r,i,a,o){let s=(n-t)/r;if(s<3){for(;t<n;t+=r)a[o++]=e[t],a[o++]=e[t+1];return o}let c=Array(s);c[0]=1,c[s-1]=1;let l=[t,n-r],u=0;for(;l.length>0;){let n=l.pop(),a=l.pop(),o=0,s=e[a],d=e[a+1],f=e[n],p=e[n+1];for(let t=a+r;t<n;t+=r){let n=e[t],r=e[t+1],i=Ii(n,r,s,d,f,p);i>o&&(u=t,o=i)}o>i&&(c[(u-t)/r]=1,a+r<u&&l.push(a,u),u+r<n&&l.push(u,n))}for(let n=0;n<s;++n)c[n]&&(a[o++]=e[t+n*r],a[o++]=e[t+n*r+1]);return o}function Ds(e,t,n,r,i,a,o,s){for(let c=0,l=n.length;c<l;++c){let l=n[c];o=Es(e,t,l,r,i,a,o),s.push(o),t=l}return o}function Os(e,t){return t*Math.round(e/t)}function ks(e,t,n,r,i,a,o){if(t==n)return o;let s=Os(e[t],i),c=Os(e[t+1],i);t+=r,a[o++]=s,a[o++]=c;let l,u;do if(l=Os(e[t],i),u=Os(e[t+1],i),t+=r,t==n)return a[o++]=l,a[o++]=u,o;while(l==s&&u==c);for(;t<n;){let n=Os(e[t],i),d=Os(e[t+1],i);if(t+=r,n==l&&d==u)continue;let f=l-s,p=u-c,m=n-s,h=d-c;if(f*h==p*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(p<0&&h<p||p==h||p>0&&h>p)){l=n,u=d;continue}a[o++]=l,a[o++]=u,s=l,c=u,l=n,u=d}return a[o++]=l,a[o++]=u,o}function As(e,t,n,r,i,a,o,s){for(let c=0,l=n.length;c<l;++c){let l=n[c];o=ks(e,t,l,r,i,a,o),s.push(o),t=l}return o}function js(e,t,n,r){let i=0,a=e[n-r],o=e[n-r+1],s=0,c=0;for(;t<n;t+=r){let n=e[t]-a,r=e[t+1]-o;i+=c*n-s*r,s=n,c=r}return i/2}function Ms(e,t,n,r){let i=0;for(let a=0,o=n.length;a<o;++a){let o=n[a];i+=js(e,t,o,r),t=o}return i}function Ns(e,t,n,r,i,a,o){let s=e[t],c=e[t+1],l=e[n]-s,u=e[n+1]-c,d;if(l===0&&u===0)d=t;else{let f=((i-s)*l+(a-c)*u)/(l*l+u*u);if(f>1)d=n;else if(f>0){for(let i=0;i<r;++i)o[i]=Vi(e[t+i],e[n+i],f);o.length=r;return}else d=t}for(let t=0;t<r;++t)o[t]=e[d+t];o.length=r}function Ps(e,t,n,r,i){let a=e[t],o=e[t+1];for(t+=r;t<n;t+=r){let n=e[t],r=e[t+1],s=Li(a,o,n,r);s>i&&(i=s),a=n,o=r}return i}function Fs(e,t,n,r,i){for(let a=0,o=n.length;a<o;++a){let o=n[a];i=Ps(e,t,o,r,i),t=o}return i}function Is(e,t,n,r,i,a,o,s,c,l,u){if(t==n)return l;let d,f;if(i===0){if(f=Li(o,s,e[t],e[t+1]),f<l){for(d=0;d<r;++d)c[d]=e[t+d];return c.length=r,f}return l}u||=[NaN,NaN];let p=t+r;for(;p<n;)if(Ns(e,p-r,p,r,o,s,u),f=Li(o,s,u[0],u[1]),f<l){for(l=f,d=0;d<r;++d)c[d]=u[d];c.length=r,p+=r}else p+=r*Math.max((Math.sqrt(f)-Math.sqrt(l))/i|0,1);if(a&&(Ns(e,n-r,t,r,o,s,u),f=Li(o,s,u[0],u[1]),f<l)){for(l=f,d=0;d<r;++d)c[d]=u[d];c.length=r}return l}function Ls(e,t,n,r,i,a,o,s,c,l,u){u||=[NaN,NaN];for(let d=0,f=n.length;d<f;++d){let f=n[d];l=Is(e,t,f,r,i,a,o,s,c,l,u),t=f}return l}function Rs(e,t,n,r,i){i=i===void 0?[]:i;let a=0;for(let o=t;o<n;o+=r)i[a++]=e.slice(o,o+r);return i.length=a,i}function zs(e,t,n,r,i){i=i===void 0?[]:i;let a=0;for(let o=0,s=n.length;o<s;++o){let s=n[o];i[a++]=Rs(e,t,s,r,i[a]),t=s}return i.length=a,i}function Bs(e,t,n,r,i){i=i===void 0?[]:i;let a=0;for(let o=0,s=n.length;o<s;++o){let s=n[o];i[a++]=s.length===1&&s[0]===t?[]:zs(e,t,s,r,i[a]),t=s[s.length-1]}return i.length=a,i}var Vs=class e extends us{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new e(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,r){return r<te(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ps(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Is(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,r))}getArea(){return js(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Rs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){let n=[];return n.length=Es(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,`XY`)}getType(){return`LinearRing`}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||=[],this.flatCoordinates.length=fs(this.flatCoordinates,0,e,this.stride),this.changed()}},Hs=class e extends us{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?de(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(e,t,n,r){return r<te(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Fs(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ls(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,r))}containsXY(e,t){return Do(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return Ms(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e===void 0?t=this.flatCoordinates:(t=this.getOrientedFlatCoordinates().slice(),ws(t,0,this.ends_,this.stride,e)),zs(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){let e=r(this.getExtent());this.flatInteriorPoint_=ys(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ms(this.getFlatInteriorPoint(),`XYM`)}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Vs(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){let e=this.layout,t=this.flatCoordinates,n=this.ends_,r=[],i=0;for(let a=0,o=n.length;a<o;++a){let o=n[a],s=new Vs(t.slice(i,o),e);r.push(s),i=o}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let e=this.flatCoordinates;Cs(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=ws(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let n=[],r=[];return n.length=As(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,r),new e(n,`XY`,r)}getType(){return`Polygon`}intersectsExtent(e){return jo(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||=[];let n=ps(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}},Us=Hs;function Ws(e){if(d(e))throw Error(`Cannot create polygon from empty extent`);let t=e[0],n=e[1],r=e[2],i=e[3],a=[t,n,t,i,r,i,r,n,t,n];return new Hs(a,`XY`,[a.length])}function Gs(e,t,n=0,r=e.length-1,i=qs){for(;r>n;){if(r-n>600){let a=r-n+1,o=t-n+1,s=Math.log(a),c=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*c*(a-c)/a)*(o-a/2<0?-1:1);Gs(e,t,Math.max(n,Math.floor(t-o*c/a+l)),Math.min(r,Math.floor(t+(a-o)*c/a+l)),i)}let a=e[t],o=n,s=r;for(Ks(e,n,t),i(e[r],a)>0&&Ks(e,n,r);o<s;){for(Ks(e,o,s),o++,s--;i(e[o],a)<0;)o++;for(;i(e[s],a)>0;)s--}i(e[n],a)===0?Ks(e,n,s):(s++,Ks(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}}function Ks(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function qs(e,t){return e<t?-1:e>t?1:0}var Js=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data,n=[];if(!oc(e,t))return n;let r=this.toBBox,i=[];for(;t;){for(let a=0;a<t.children.length;a++){let o=t.children[a],s=t.leaf?r(o):o;oc(e,s)&&(t.leaf?n.push(o):ac(e,s)?this._all(o,n):i.push(o))}t=i.pop()}return n}collides(e){let t=this.data;if(!oc(e,t))return!1;let n=[];for(;t;){for(let r=0;r<t.children.length;r++){let i=t.children[r],a=t.leaf?this.toBBox(i):i;if(oc(e,a)){if(t.leaf||ac(e,a))return!0;n.push(i)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let t=0;t<e.length;t++)this.insert(e[t]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){let e=this.data;this.data=t,t=e}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=sc([]),this}remove(e,t){if(!e)return this;let n=this.data,r=this.toBBox(e),i=[],a=[],o,s,c;for(;n||i.length;){if(n||(n=i.pop(),s=i[i.length-1],o=a.pop(),c=!0),n.leaf){let r=Ys(e,n.children,t);if(r!==-1)return n.children.splice(r,1),i.push(n),this._condense(i),this}!c&&!n.leaf&&ac(n,r)?(i.push(n),a.push(o),o=0,s=n,n=n.children[0]):s?(o++,n=s.children[o],c=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){let n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,r){let i=n-t+1,a=this._maxEntries,o;if(i<=a)return o=sc(e.slice(t,n+1)),Xs(o,this.toBBox),o;r||(r=Math.ceil(Math.log(i)/Math.log(a)),a=Math.ceil(i/a**(r-1))),o=sc([]),o.leaf=!1,o.height=r;let s=Math.ceil(i/a),c=s*Math.ceil(Math.sqrt(a));cc(e,t,n,c,this.compareMinX);for(let i=t;i<=n;i+=c){let t=Math.min(i+c-1,n);cc(e,i,t,s,this.compareMinY);for(let n=i;n<=t;n+=s){let i=Math.min(n+s-1,t);o.children.push(this._build(e,n,i,r-1))}}return Xs(o,this.toBBox),o}_chooseSubtree(e,t,n,r){for(;r.push(t),!(t.leaf||r.length-1===n);){let n=1/0,r=1/0,i;for(let a=0;a<t.children.length;a++){let o=t.children[a],s=tc(o),c=rc(e,o)-s;c<r?(r=c,n=s<n?s:n,i=o):c===r&&s<n&&(n=s,i=o)}t=i||t.children[0]}return t}_insert(e,t,n){let r=n?e:this.toBBox(e),i=[],a=this._chooseSubtree(r,this.data,t,i);for(a.children.push(e),Qs(a,r);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(r,i,t)}_split(e,t){let n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);let a=this._chooseSplitIndex(n,i,r),o=sc(n.children.splice(a,n.children.length-a));o.height=n.height,o.leaf=n.leaf,Xs(n,this.toBBox),Xs(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(n,o)}_splitRoot(e,t){this.data=sc([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Xs(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let r,i=1/0,a=1/0;for(let o=t;o<=n-t;o++){let t=Zs(e,0,o,this.toBBox),s=Zs(e,o,n,this.toBBox),c=ic(t,s),l=tc(t)+tc(s);c<i?(i=c,r=o,a=l<a?l:a):c===i&&l<a&&(a=l,r=o)}return r||n-t}_chooseSplitAxis(e,t,n){let r=e.leaf?this.compareMinX:$s,i=e.leaf?this.compareMinY:ec;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)}_allDistMargin(e,t,n,r){e.children.sort(r);let i=this.toBBox,a=Zs(e,0,t,i),o=Zs(e,n-t,n,i),s=nc(a)+nc(o);for(let r=t;r<n-t;r++){let t=e.children[r];Qs(a,e.leaf?i(t):t),s+=nc(a)}for(let r=n-t-1;r>=t;r--){let t=e.children[r];Qs(o,e.leaf?i(t):t),s+=nc(o)}return s}_adjustParentBBoxes(e,t,n){for(let r=n;r>=0;r--)Qs(t[r],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():Xs(e[t],this.toBBox)}};function Ys(e,t,n){if(!n)return t.indexOf(e);for(let r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function Xs(e,t){Zs(e,0,e.children.length,t,e)}function Zs(e,t,n,r,i){i||=sc(null),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let a=t;a<n;a++){let t=e.children[a];Qs(i,e.leaf?r(t):t)}return i}function Qs(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function $s(e,t){return e.minX-t.minX}function ec(e,t){return e.minY-t.minY}function tc(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function nc(e){return e.maxX-e.minX+(e.maxY-e.minY)}function rc(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function ic(e,t){let n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),a=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,a-r)}function ac(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function oc(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function sc(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function cc(e,t,n,r,i){let a=[t,n];for(;a.length;){if(n=a.pop(),t=a.pop(),n-t<=r)continue;let o=t+Math.ceil((n-t)/r/2)*r;Gs(e,o,t,n,i),a.push(t,o,o,n)}}var F={ANIMATING:0,INTERACTING:1};const lc=[NaN,NaN,NaN,0];var uc;function dc(){return uc||=w(1,1,void 0,{willReadFrequently:!0,desynchronized:!0}),uc}var fc=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,pc=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,mc=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,hc=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function gc(e,t){return e.endsWith(`%`)?Number(e.substring(0,e.length-1))/t:Number(e)}function _c(e){throw Error(`failed to parse "`+e+`" as color`)}function vc(e){if(e.toLowerCase().startsWith(`rgb`)){let t=e.match(pc)||e.match(fc)||e.match(mc);if(t){let e=t[4],n=100/255;return[D(gc(t[1],n)+.5|0,0,255),D(gc(t[2],n)+.5|0,0,255),D(gc(t[3],n)+.5|0,0,255),e===void 0?1:D(gc(e,100),0,1)]}_c(e)}if(e.startsWith(`#`)){if(hc.test(e)){let t=e.substring(1),n=t.length<=4?1:2,r=[0,0,0,255];for(let e=0,i=t.length;e<i;e+=n){let i=parseInt(t.substring(e,e+n),16);n===1&&(i+=i<<4),r[e/n]=i}return r[3]/=255,r}_c(e)}let t=dc();t.fillStyle=`#abcdef`;let n=t.fillStyle;t.fillStyle=e,t.fillStyle===n&&(t.fillStyle=`#fedcba`,n=t.fillStyle,t.fillStyle=e,t.fillStyle===n&&_c(e));let r=t.fillStyle;if(r.startsWith(`#`)||r.startsWith(`rgba`))return vc(r);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);let i=Array.from(t.getImageData(0,0,1,1).data);return i[3]=Hi(i[3]/255,3),i}function yc(e){return typeof e==`string`?e:Mc(e)}var bc=1024,xc={},Sc=0;function Cc(e){if(e.length===4)return e;let t=e.slice();return t[3]=1,t}function wc(e){return e>.0031308?e**(1/2.4)*269.025-14.025:e*3294.6}function Tc(e){return e>.2068965?e**3:(e-4/29)*(108/841)}function Ec(e){return e>10.314724?((e+14.025)/269.025)**2.4:e/3294.6}function Dc(e){return e>.0088564?e**(1/3):e/(108/841)+4/29}function Oc(e){let t=Ec(e[0]),n=Ec(e[1]),r=Ec(e[2]),i=Dc(t*.222488403+n*.716873169+r*.06060791),a=500*(Dc(t*.452247074+n*.399439023+r*.148375274)-i),o=200*(i-Dc(t*.016863605+n*.117638439+r*.865350722)),s=Math.atan2(o,a)*(180/Math.PI);return[116*i-16,Math.sqrt(a*a+o*o),s<0?s+360:s,e[3]]}function kc(e){let t=(e[0]+16)/116,n=e[1],r=e[2]*Math.PI/180,i=Tc(t),a=Tc(t+n/500*Math.cos(r)),o=Tc(t-n/200*Math.sin(r)),s=wc(a*3.021973625-i*1.617392459-o*.404875592),c=wc(a*-.943766287+i*1.916279586+o*.027607165),l=wc(a*.069407491-i*.22898585+o*1.159737864);return[D(s+.5|0,0,255),D(c+.5|0,0,255),D(l+.5|0,0,255),e[3]]}function Ac(e){if(e===`none`)return lc;if(xc.hasOwnProperty(e))return xc[e];if(Sc>=bc){let e=0;for(let t in xc)e++&3||(delete xc[t],--Sc)}let t=vc(e);t.length!==4&&_c(e);for(let n of t)isNaN(n)&&_c(e);return xc[e]=t,++Sc,t}function jc(e){return Array.isArray(e)?e:Ac(e)}function Mc(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let n=e[1];n!=(n|0)&&(n=n+.5|0);let r=e[2];r!=(r|0)&&(r=r+.5|0);let i=e[3]===void 0?1:Math.round(e[3]*1e3)/1e3;return`rgba(`+t+`,`+n+`,`+r+`,`+i+`)`}var Nc=class extends b{constructor(e,t,n,r){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=r}},Pc={PRERENDER:`prerender`,POSTRENDER:`postrender`,PRECOMPOSE:`precompose`,POSTCOMPOSE:`postcompose`,RENDERCOMPLETE:`rendercomplete`},Fc=class{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(v(),{get:(e,t)=>{if(typeof v()[t]==`function`)return this.push_(t),this.pushMethodArgs_},set:(e,t,n)=>(this.push_(t,n),!0)})}push_(...e){let t=this.instructions_,n=this.zIndex+this.offset_;t[n]||(t[n]=[]),t[n].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,r=t.length;n<r;++n){let r=t[n];if(typeof r==`function`){r(e);continue}let i=t[++n];if(typeof e[r]==`function`)e[r](...i);else{if(typeof i==`function`){e[r]=i(e);continue}e[r]=i}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}},Ic=5,Lc=class extends ne{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=[],this.maxStaleKeys=Ic}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return C()}getData(e){return null}prepareFrame(e){return C()}renderFrame(e,t){return C()}forEachFeatureAtCoordinate(e,t,n,r,i){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){let t=e.target;(t.getState()===N.LOADED||t.getState()===N.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=N.LOADED&&t!=N.ERROR&&e.addEventListener(f.CHANGE,this.boundHandleImageChange_),t==N.IDLE&&(e.load(),t=e.getState()),t==N.LOADED}renderIfReadyAndVisible(){let e=this.getLayer();e&&e.getVisible()&&e.getSourceState()===`ready`&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}};const Rc=[];var zc=null;function Bc(){zc=w(1,1,void 0,{willReadFrequently:!0})}var Vc=class extends Lc{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Vo(),this.pixelTransform=Vo(),this.inversePixelTransform=Vo(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){zc||Bc(),zc.clearRect(0,0,1,1);let r;try{zc.drawImage(e,t,n,1,1,0,0,1,1),r=zc.getImageData(0,0,1,1).data}catch{return zc=null,null}return r}getBackground(e){let t=this.getLayer().getBackground();return typeof t==`function`&&(t=t(e.viewState.resolution)),t||void 0}useContainer(e,t,r){let i=this.getLayer().getClassName(),a,o;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&u(jc(e.style.backgroundColor),jc(r)))){let t=e.firstElementChild;s(t)&&(o=t.getContext(`2d`))}if(o&&Yo(o.canvas.style.transform,t)?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){a=re?n():document.createElement(`div`),a.className=i;let e=a.style;e.position=`absolute`,e.width=`100%`,e.height=`100%`,o=w();let t=o.canvas;a.appendChild(t),e=t.style,e.position=`absolute`,e.left=`0`,e.transformOrigin=`top left`,this.container=a,this.context=o}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,n,r){let i=ue(r),a=t(r),o=m(r),s=Te(r);P(n.coordinateToPixelTransform,i),P(n.coordinateToPixelTransform,a),P(n.coordinateToPixelTransform,o),P(n.coordinateToPixelTransform,s);let c=this.inversePixelTransform;P(c,i),P(c,a),P(c,o),P(c,s),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.clip()}prepareContainer(e,t){let n=e.extent,r=e.viewState.resolution,i=e.viewState.rotation,o=e.pixelRatio,s=Math.round(ce(n)/r*o),c=Math.round(a(n)/r*o);Uo(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,i,-s/2,-c/2),Wo(this.inversePixelTransform,this.pixelTransform);let l=qo(this.pixelTransform);if(this.useContainer(t,l,this.getBackground(e)),!this.containerReused){let e=this.context.canvas;e.width!=s||e.height!=c?(e.width=s,e.height=c):this.context.clearRect(0,0,s,c),l!==e.style.transform&&(e.style.transform=l)}}dispatchRenderEvent_(e,t,n){let r=this.getLayer();if(r.hasListener(e)){let i=new Nc(e,this.inversePixelTransform,n,t);r.dispatchEvent(i)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Pc.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Pc.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new Fc),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Pc.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Pc.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,r,i,a,o){let s=i/2,c=a/2,l=r/t,u=-l,d=-e[0]+o,f=-e[1];return Uo(this.tempTransform,s,c,l,u,-n,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}},I={CENTER:`center`,RESOLUTION:`resolution`,ROTATION:`rotation`};function Hc(e,t,n){return(function(r,i,a,o,s){if(!r)return;if(!i&&!t)return r;let c=t?0:a[0]*i,l=t?0:a[1]*i,u=s?s[0]:0,d=s?s[1]:0,f=e[0]+c/2+u,p=e[2]-c/2+u,m=e[1]+l/2+d,h=e[3]-l/2+d;f>p&&(f=(p+f)/2,p=f),m>h&&(m=(h+m)/2,h=m);let g=D(r[0],f,p),_=D(r[1],m,h);if(o&&n&&i){let e=30*i;g+=-e*Math.log(1+Math.max(0,f-r[0])/e)+e*Math.log(1+Math.max(0,r[0]-p)/e),_+=-e*Math.log(1+Math.max(0,m-r[1])/e)+e*Math.log(1+Math.max(0,r[1]-h)/e)}return[g,_]})}function Uc(e){return e}function Wc(e,t,n,r){let i=ce(t)/n[0],o=a(t)/n[1];return r?Math.min(e,Math.max(i,o)):Math.min(e,Math.min(i,o))}function Gc(e,t,n){let r=Math.min(e,t);return r*=Math.log(1+50*Math.max(0,e/t-1))/50+1,n&&(r=Math.max(r,n),r/=Math.log(1+50*Math.max(0,n/e-1))/50+1),D(r,n/2,t*2)}function Kc(e,t,n,r){return t=t===void 0?!0:t,(function(i,a,o,s){if(i!==void 0){let c=e[0],l=e[e.length-1],u=n?Wc(c,n,o,r):c;if(s)return t?Gc(i,u,l):D(i,l,u);let d=Math.min(u,i),f=Math.floor(le(e,d,a));return e[f]>u&&f<e.length-1?e[f+1]:e[f]}})}function qc(e,t,n,r,i,a){return r=r===void 0?!0:r,n=n===void 0?0:n,(function(o,s,c,l){if(o!==void 0){let u=i?Wc(t,i,c,a):t;if(l)return r?Gc(o,u,n):D(o,n,u);let d=1e-9,f=Math.ceil(Math.log(t/u)/Math.log(e)-d),p=-s*(.5-d)+.5,m=Math.min(u,o),h=Math.floor(Math.log(t/m)/Math.log(e)+p);return D(t/e**+Math.max(f,h),n,u)}})}function Jc(e,t,n,r,i){return n=n===void 0?!0:n,(function(a,o,s,c){if(a!==void 0){let o=r?Wc(e,r,s,i):e;return!n||!c?D(a,t,o):Gc(a,o,t)}})}function Yc(e){if(e!==void 0)return 0}function Xc(e){if(e!==void 0)return e}function Zc(e){let t=2*Math.PI/e;return(function(e,n){if(n)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e})}function Qc(e){let t=e===void 0?O(5):e;return(function(e,n){return n||e===void 0?e:Math.abs(e)<=t?0:e})}var $c=0,el=class extends S{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=so(e.projection,`EPSG:3857`),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&eo(),e.center&&=M(e.center,this.projection_),e.extent&&=yo(e.extent,this.projection_),this.applyOptions_(e)}applyOptions_(e){let t=Object.assign({},e);for(let e in I)delete t[e];this.setProperties(t,!0);let n=rl(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom,this.constraints_={center:nl(e),resolution:n.constraint,rotation:il(e)},this.setRotation(e.rotation===void 0?0:e.rotation),this.setCenterInternal(e.center===void 0?null:e.center),e.resolution===void 0?e.zoom!==void 0&&this.setZoom(e.zoom):this.setResolution(e.resolution)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;let n=this.getCenterInternal();if(n){let r=e||[0,0,0,0];t||=[0,0,0,0];let i=this.getResolution(),a=i/2*(r[3]-t[3]+t[1]-r[1]),o=i/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([n[0]+a,n[1]-o])}}getUpdatedOptions_(e){let t=this.getProperties();return t.resolution===void 0?t.zoom=this.getZoom():t.resolution=this.getResolution(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);let t=Array(arguments.length);for(let e=0;e<t.length;++e){let n=arguments[e];n.center&&=(n=Object.assign({},n),M(n.center,this.getProjection())),n.anchor&&=(n=Object.assign({},n),M(n.anchor,this.getProjection())),t[e]=n}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]==`function`&&(n=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){let e=arguments[r];e.center&&this.setCenterInternal(e.center),e.zoom===void 0?e.resolution&&this.setResolution(e.resolution):this.setZoom(e.zoom),e.rotation!==void 0&&this.setRotation(e.rotation)}if(r===t){n&&tl(n,!0);return}let i=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,s=this.targetRotation_,c=[];for(;r<t;++r){let e=arguments[r],t={start:i,complete:!1,anchor:e.anchor,duration:e.duration===void 0?1e3:e.duration,easing:e.easing||zo,callback:n};if(e.center&&(t.sourceCenter=a,t.targetCenter=e.center.slice(),a=t.targetCenter),e.zoom===void 0?e.resolution&&(t.sourceResolution=o,t.targetResolution=e.resolution,o=t.targetResolution):(t.sourceResolution=o,t.targetResolution=this.getResolutionForZoom(e.zoom),o=t.targetResolution),e.rotation!==void 0){t.sourceRotation=s;let n=Bi(e.rotation-s+Math.PI,2*Math.PI)-Math.PI;t.targetRotation=s+n,s=t.targetRotation}al(t)?t.complete=!0:i+=t.duration,c.push(t)}this.animations_.push(c),this.setHint(F.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[F.ANIMATING]>0}getInteracting(){return this.hints_[F.INTERACTING]>0}cancelAnimations(){this.setHint(F.ANIMATING,-this.hints_[F.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){let n=this.animations_[t];if(n[0].callback&&tl(n[0].callback,!1),!e)for(let t=0,r=n.length;t<r;++t){let r=n[t];if(!r.complete){e=r.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;let e=Date.now(),t=!1;for(let n=this.animations_.length-1;n>=0;--n){let r=this.animations_[n],i=!0;for(let n=0,a=r.length;n<a;++n){let a=r[n];if(a.complete)continue;let o=e-a.start,s=a.duration>0?o/a.duration:1;s>=1?(a.complete=!0,s=1):i=!1;let c=a.easing(s);if(a.sourceCenter){let e=a.sourceCenter[0],t=a.sourceCenter[1],n=a.targetCenter[0],r=a.targetCenter[1];this.nextCenter_=a.targetCenter,this.targetCenter_=[e+c*(n-e),t+c*(r-t)]}if(a.sourceResolution&&a.targetResolution){let e=c===1?a.targetResolution:a.sourceResolution+c*(a.targetResolution-a.sourceResolution);if(a.anchor){let t=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(e,0,t,!0);this.targetCenter_=this.calculateCenterZoom(n,a.anchor)}this.nextResolution_=a.targetResolution,this.targetResolution_=e,this.applyTargetState_(!0)}if(a.sourceRotation!==void 0&&a.targetRotation!==void 0){let e=c===1?Bi(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+c*(a.targetRotation-a.sourceRotation);if(a.anchor){let t=this.constraints_.rotation(e,!0);this.targetCenter_=this.calculateCenterRotate(t,a.anchor)}this.nextRotation_=a.targetRotation,this.targetRotation_=e}if(this.applyTargetState_(!0),t=!0,!a.complete)break}if(i){this.animations_[n]=null,this.setHint(F.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;let e=r[0].callback;e&&tl(e,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n,r=this.getCenterInternal();return r!==void 0&&(n=[r[0]-t[0],r[1]-t[1]],Ji(n,e-this.getRotation()),Ki(n,t)),n}calculateCenterZoom(e,t){let n,r=this.getCenterInternal(),i=this.getResolution();return r!==void 0&&i!==void 0&&(n=[t[0]-e*(t[0]-r[0])/i,t[1]-e*(t[1]-r[1])/i]),n}getViewportSize_(e){let t=this.viewportSize_;if(e){let n=t[0],r=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){let e=this.getCenterInternal();return e&&_o(e,this.getProjection())}getCenterInternal(){return this.get(I.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get(`constrainResolution`)}getHints(e){return e===void 0?this.hints_.slice():(e[0]=this.hints_[0],e[1]=this.hints_[1],e)}calculateExtent(e){return vo(this.calculateExtentInternal(e),this.getProjection())}calculateExtentInternal(e){e||=this.getViewportSizeMinusPadding_();let t=this.getCenterInternal();E(t,`The view center is not defined`);let n=this.getResolution();E(n!==void 0,`The view resolution is not defined`);let r=this.getRotation();return E(r!==void 0,`The view rotation is not defined`),g(t,n,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(I.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(yo(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t||=this.getViewportSizeMinusPadding_();let n=ce(e)/t[0],r=a(e)/t[1];return Math.max(n,r)}getResolutionForValueFunction(e){e||=2;let t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(t/n)/Math.log(e);return(function(n){return t/e**+(n*r)})}getRotation(){return this.get(I.ROTATION)}getValueForResolutionFunction(e){let t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/t;return(function(e){return Math.log(n/e)/t/i})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e),n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){let e=this.getProjection(),t=this.getResolution(),n=this.getRotation(),r=this.getCenterInternal(),i=this.padding_;if(i){let e=this.getViewportSizeMinusPadding_();r=ol(r,this.getViewportSize_(),[e[0]/2+i[3],e[1]/2+i[0]],t,n)}return{center:r.slice(0),projection:e===void 0?null:e,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e,t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,r;if(this.resolutions_){let i=le(this.resolutions_,e,1);t=i,n=this.resolutions_[i],r=i==this.resolutions_.length-1?2:n/this.resolutions_[i+1]}else n=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(n/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];let t=D(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/n**+D(e-t,0,1)}return this.maxResolution_/this.zoomFactor_**+(e-this.minZoom_)}fit(e,t){let n;if(E(Array.isArray(e)||typeof e.getSimplifiedGeometry==`function`,"Invalid extent or geometry provided as `geometry`"),Array.isArray(e))E(!d(e),"Cannot fit empty extent provided as `geometry`"),n=Ws(yo(e,this.getProjection()));else if(e.getType()===`Circle`){let t=yo(e.getExtent(),this.getProjection());n=Ws(t),n.rotate(this.getRotation(),r(t))}else{let t=go();n=t?e.clone().transform(t,this.getProjection()):e}this.fitInternal(n,t)}rotatedExtentForGeometry(e){let t=this.getRotation(),n=Math.cos(t),r=Math.sin(-t),i=e.getFlatCoordinates(),a=e.getStride(),o=1/0,s=1/0,c=-1/0,l=-1/0;for(let e=0,t=i.length;e<t;e+=a){let t=i[e]*n-i[e+1]*r,a=i[e]*r+i[e+1]*n;o=Math.min(o,t),s=Math.min(s,a),c=Math.max(c,t),l=Math.max(l,a)}return[o,s,c,l]}fitInternal(e,t){t||={};let n=t.size;n||=this.getViewportSizeMinusPadding_();let i=t.padding===void 0?[0,0,0,0]:t.padding,a=t.nearest===void 0?!1:t.nearest,o;o=t.minResolution===void 0?t.maxZoom===void 0?0:this.getResolutionForZoom(t.maxZoom):t.minResolution;let s=this.rotatedExtentForGeometry(e),c=this.getResolutionForExtentInternal(s,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);c=isNaN(c)?o:Math.max(c,o),c=this.getConstrainedResolution(c,a?0:1);let l=this.getRotation(),u=Math.sin(l),d=Math.cos(l),f=r(s);f[0]+=(i[1]-i[3])/2*c,f[1]+=(i[0]-i[2])/2*c;let p=f[0]*d-f[1]*u,m=f[1]*d+f[0]*u,g=this.getConstrainedCenter([p,m],c),_=t.callback?t.callback:h;t.duration===void 0?(this.targetResolution_=c,this.targetCenter_=g,this.applyTargetState_(!1,!0),tl(_,!0)):this.animateInternal({resolution:c,center:g,duration:t.duration,easing:t.easing},_)}centerOn(e,t,n){this.centerOnInternal(M(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(ol(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,r){let i,a=this.padding_;if(a&&e){let o=this.getViewportSizeMinusPadding_(-n),s=ol(e,r,[o[0]/2+a[3],o[1]/2+a[0]],t,n);i=[e[0]-s[0],e[1]-s[1]]}return i}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){let t=_o(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){let t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t&&=M(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){let n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*e,0,r,n);t&&(this.targetCenter_=this.calculateCenterZoom(i,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(this.zoomFactor_**+-e,t)}adjustRotation(e,t){t&&=M(t,this.getProjection()),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){let n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&M(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){let n=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,n),i=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,0,i,n),o=this.constraints_.center(this.targetCenter_,a,i,n,this.calculateCenterShift(this.targetCenter_,a,r,i));this.get(I.ROTATION)!==r&&this.set(I.ROTATION,r),this.get(I.RESOLUTION)!==a&&(this.set(I.RESOLUTION,a),this.set(`zoom`,this.getZoom(),!0)),(!o||!this.get(I.CENTER)||!qi(this.get(I.CENTER),o))&&this.set(I.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e===void 0?200:e;let r=t||0,i=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,r,a),s=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,i,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=i,this.targetCenter_=s,this.applyTargetState_();return}n||=e===0?this.cancelAnchor_:void 0,this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==i||!this.getCenterInternal()||!qi(this.getCenterInternal(),s))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:i,center:s,resolution:o,duration:e,easing:Ro,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(F.INTERACTING,1)}endInteraction(e,t,n){n&&=M(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(F.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){let n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){let n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t||=0;let n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}};function tl(e,t){setTimeout(function(){e(t)},0)}function nl(e){if(e.extent!==void 0){let t=e.smoothExtentConstraint===void 0?!0:e.smoothExtentConstraint;return Hc(e.extent,e.constrainOnlyCenter,t)}let t=so(e.projection,`EPSG:3857`);if(e.multiWorld!==!0&&t.isGlobal()){let e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,Hc(e,!1,!1)}return Uc}function rl(e){let t,n,r,i=e.minZoom===void 0?$c:e.minZoom,o=e.maxZoom===void 0?28:e.maxZoom,s=e.zoomFactor===void 0?2:e.zoomFactor,c=e.multiWorld===void 0?!1:e.multiWorld,l=e.smoothResolutionConstraint===void 0?!0:e.smoothResolutionConstraint,u=e.showFullExtent===void 0?!1:e.showFullExtent,d=so(e.projection,`EPSG:3857`),f=d.getExtent(),p=e.constrainOnlyCenter,m=e.extent;if(!c&&!m&&d.isGlobal()&&(p=!1,m=f),e.resolutions!==void 0){let a=e.resolutions;n=a[i],r=a[o]===void 0?a[a.length-1]:a[o],t=e.constrainResolution?Kc(a,l,!p&&m,u):Jc(n,r,l,!p&&m,u)}else{let c=(f?Math.max(ce(f),a(f)):360*Qi.degrees/d.getMetersPerUnit())/256/2**$c,h=c/2**(28-$c);n=e.maxResolution,n===void 0?n=c/s**+i:i=0,r=e.minResolution,r===void 0&&(r=e.maxZoom===void 0?h:e.maxResolution===void 0?c/s**+o:n/s**+o),o=i+Math.floor(Math.log(n/r)/Math.log(s)),r=n/s**+(o-i),t=e.constrainResolution?qc(s,n,r,l,!p&&m,u):Jc(n,r,l,!p&&m,u)}return{constraint:t,maxResolution:n,minResolution:r,minZoom:i,zoomFactor:s}}function il(e){if(e.enableRotation===void 0||e.enableRotation){let t=e.constrainRotation;return t===void 0||t===!0?Qc():t===!1?Xc:typeof t==`number`?Zc(t):Xc}return Yc}function al(e){return!(e.sourceCenter&&e.targetCenter&&!qi(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function ol(e,t,n,r,i){let a=Math.cos(-i),o=Math.sin(-i),s=e[0]*a-e[1]*o,c=e[1]*a+e[0]*o;return s+=(t[0]/2-n[0])*r,c+=(n[1]-t[1]/2)*r,o=-o,[s*a-c*o,c*a+s*o]}var sl=el,L={OPACITY:`opacity`,VISIBLE:`visible`,EXTENT:`extent`,Z_INDEX:`zIndex`,MAX_RESOLUTION:`maxResolution`,MIN_RESOLUTION:`minResolution`,MAX_ZOOM:`maxZoom`,MIN_ZOOM:`minZoom`,SOURCE:`source`,MAP:`map`},cl=class extends S{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;let t=Object.assign({},e);typeof e.properties==`object`&&(delete t.properties,Object.assign(t,e.properties)),t[L.OPACITY]=e.opacity===void 0?1:e.opacity,E(typeof t[L.OPACITY]==`number`,`Layer opacity must be a number`),t[L.VISIBLE]=e.visible===void 0?!0:e.visible,t[L.Z_INDEX]=e.zIndex,t[L.MAX_RESOLUTION]=e.maxResolution===void 0?1/0:e.maxResolution,t[L.MIN_RESOLUTION]=e.minResolution===void 0?0:e.minResolution,t[L.MIN_ZOOM]=e.minZoom===void 0?-1/0:e.minZoom,t[L.MAX_ZOOM]=e.maxZoom===void 0?1/0:e.maxZoom,this.className_=t.className===void 0?`ol-layer`:t.className,delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){let t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=D(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return C()}getLayerStatesArray(e){return C()}getExtent(){return this.get(L.EXTENT)}getMaxResolution(){return this.get(L.MAX_RESOLUTION)}getMinResolution(){return this.get(L.MIN_RESOLUTION)}getMinZoom(){return this.get(L.MIN_ZOOM)}getMaxZoom(){return this.get(L.MAX_ZOOM)}getOpacity(){return this.get(L.OPACITY)}getSourceState(){return C()}getVisible(){return this.get(L.VISIBLE)}getZIndex(){return this.get(L.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(L.EXTENT,e)}setMaxResolution(e){this.set(L.MAX_RESOLUTION,e)}setMinResolution(e){this.set(L.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(L.MAX_ZOOM,e)}setMinZoom(e){this.set(L.MIN_ZOOM,e)}setOpacity(e){E(typeof e==`number`,`Layer opacity must be a number`),this.set(L.OPACITY,e)}setVisible(e){this.set(L.VISIBLE,e)}setZIndex(e){this.set(L.Z_INDEX,e)}disposeInternal(){this.state_&&=(this.state_.layer=null,null),super.disposeInternal()}},ll=class extends cl{constructor(e){let t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(L.SOURCE,this.handleSourcePropertyChange_);let n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e||=[],e.push(this),e}getLayerStatesArray(e){return e||=[],e.push(this.getLayerState()),e}getSource(){return this.get(L.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){let e=this.getSource();return e?e.getState():`undefined`}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!==`ready`)&&(this.sourceReady_=!0,this.dispatchEvent(`sourceready`))}handleSourcePropertyChange_(){this.sourceChangeKey_&&=(oe(this.sourceChangeKey_),null),this.sourceReady_=!1;let e=this.getSource();e&&(this.sourceChangeKey_=_e(e,f.CHANGE,this.handleSourceChange_,this),e.getState()===`ready`&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent(`sourceready`)},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t,n=this.getMapInternal();!e&&n&&(e=n.getView()),t=e instanceof sl?{viewState:e.getState(),extent:e.calculateExtent()}:e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(e=>e.layer===this),!r)return!1}else r=this.getLayerState();let i=this.getExtent();return ul(r,t.viewState)&&(!i||c(i,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t=this.getSource()?.getAttributions();if(!t)return[];let n=t(e instanceof sl?e.getViewStateAndExtent():e);return Array.isArray(n)||(n=[n]),n}render(e,t){let n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){let t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(L.MAP,e)}getMapInternal(){return this.get(L.MAP)}setMap(e){this.mapPrecomposeKey_&&=(oe(this.mapPrecomposeKey_),null),e||this.changed(),this.mapRenderKey_&&=(oe(this.mapRenderKey_),null),e&&(this.mapPrecomposeKey_=_e(e,Pc.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=_e(this,f.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){let t=e.frameState.layerStatesArray,n=this.getLayerState(!1);E(!t.some(e=>e.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(n)}setSource(e){this.set(L.SOURCE,e)}getRenderer(){return this.renderer_||=this.createRenderer(),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}};function ul(e,t){if(!e.visible)return!1;let n=t.resolution;if(n<e.minResolution||n>=e.maxResolution)return!1;let r=t.zoom;return r>e.minZoom&&r<=e.maxZoom}var dl=ll,fl=class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(let t in this.cache_){let n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){let r=pl(e,t,n);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,n){let r=pl(e,t,n);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,n,r,i){let a=pl(e,t,n),o=a in this.cache_;this.cache_[a]=r,i&&(r.getImageState()===N.IDLE&&r.load(),r.getImageState()===N.LOADING?r.ready().then(()=>{this.patternCache_[a]=v().createPattern(r.getImage(1),`repeat`)}):this.patternCache_[a]=v().createPattern(r.getImage(1),`repeat`)),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}};function pl(e,t,n){let r=n?jc(n):`null`;return t+`:`+e+`:`+r}const R=new fl;var ml=null,hl=class extends ae{constructor(e,t,n,r,i){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=i,this.imageState_=r===void 0?N.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===N.LOADED){ml||=w(1,1,void 0,{willReadFrequently:!0}),ml.drawImage(this.image_,0,0);try{ml.getImageData(0,0,1,1),this.tainted_=!1}catch{ml=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(f.CHANGE)}handleImageError_(){this.imageState_=N.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=N.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let e=this.size_[0],t=this.size_[1],n=w(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===N.IDLE){this.image_||this.initializeImage_(),this.imageState_=N.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Io(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==N.LOADED)return;let t=this.image_,n=w(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=n.canvas;n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation=`multiply`,n.fillStyle=yc(this.color_),n.fillRect(0,0,r.width/e,r.height/e),n.globalCompositeOperation=`destination-in`,n.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||=new Promise(e=>{if(this.imageState_===N.LOADED||this.imageState_===N.ERROR)e();else{let t=()=>{(this.imageState_===N.LOADED||this.imageState_===N.ERROR)&&(this.removeEventListener(f.CHANGE,t),e())};this.addEventListener(f.CHANGE,t)}}),this.ready_}};function gl(e,t,n,r,i,a){let o=t===void 0?void 0:R.get(t,n,i);return o||(o=new hl(e,e&&`src`in e?e.src||void 0:t,n,r,i),R.set(t,n,i,o,a)),a&&o&&!R.getPattern(t,n,i)&&R.set(t,n,i,o,a),o}var _l=hl;function vl(e){return e?Array.isArray(e)?Mc(e):typeof e==`object`&&`src`in e?yl(e):e:null}function yl(e){if(!e.offset||!e.size)return R.getPattern(e.src,`anonymous`,e.color);let t=e.src+`:`+e.offset,n=R.getPattern(t,void 0,e.color);if(n)return n;let r=R.get(e.src,`anonymous`,null);if(r.getImageState()!==N.LOADED)return null;let i=w(e.size[0],e.size[1]);return i.drawImage(r.getImage(1),e.offset[0],e.offset[1],e.size[0],e.size[1],0,0,e.size[0],e.size[1]),gl(i.canvas,t,void 0,N.LOADED,e.color,!0),R.getPattern(t,void 0,e.color)}const bl=`10px sans-serif`,xl=`#000`,Sl=`round`,Cl=[],wl=0,Tl=`round`,El=10,Dl=`#000`,Ol=`center`,kl=`middle`,Al=[0,0,0,0],jl=1,Ml=new S;var Nl=null,Pl;const Fl={};var Il=new Set([`serif`,`sans-serif`,`monospace`,`cursive`,`fantasy`,`system-ui`,`ui-serif`,`ui-sans-serif`,`ui-monospace`,`ui-rounded`,`emoji`,`math`,`fangsong`]);function Ll(e,t,n){return`${e} ${t} 16px "${n}"`}const Rl=(function(){let e,t;async function n(e){await t.ready;let n=await t.load(e);if(n.length===0)return!1;let r=ye(e),i=r.families[0].toLowerCase(),a=r.weight;return n.some(e=>{let t=e.family.replace(/^['"]|['"]$/g,``).toLowerCase(),n=me[e.weight]||e.weight;return t===i&&e.style===r.style&&n==a})}async function r(){await t.ready;let i=!0,a=Ml.getProperties(),o=Object.keys(a).filter(e=>a[e]<100);for(let e=o.length-1;e>=0;--e){let t=o[e],r=a[t];r<100&&(await n(t)?(we(Fl),Ml.set(t,100)):(r+=10,Ml.set(t,r,!0),r<100&&(i=!1)))}e=void 0,i||(e=setTimeout(r,100))}return async function(n){t||=re?self.fonts:document.fonts;let i=ye(n);if(!i)return;let a=i.families,o=!1;for(let e of a){if(Il.has(e))continue;let t=Ll(i.style,i.weight,e);Ml.get(t)===void 0&&(Ml.set(t,0,!0),o=!0)}o&&(clearTimeout(e),e=setTimeout(r,100))}})(),zl=(function(){let e;return function(t){let n=Fl[t];if(n==null){if(re){let e=ye(t),r=Bl(t,`g`);n=(isNaN(Number(e.lineHeight))?1.2:Number(e.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else e||(e=document.createElement(`div`),e.innerHTML=`M`,e.style.minHeight=`0`,e.style.maxHeight=`none`,e.style.height=`auto`,e.style.padding=`0`,e.style.border=`none`,e.style.position=`absolute`,e.style.display=`block`,e.style.left=`-99999px`),e.style.font=t,document.body.appendChild(e),n=e.offsetHeight,document.body.removeChild(e);Fl[t]=n}return n}})();function Bl(e,t){return Nl||=w(1,1),e!=Pl&&(Nl.font=e,Pl=Nl.font),Nl.measureText(t)}function Vl(e,t){return Bl(e,t).width}function Hl(e,t,n){if(t in n)return n[t];let r=t.split(`
`).reduce((t,n)=>Math.max(t,Vl(e,n)),0);return n[t]=r,r}function Ul(e,t){let n=[],r=[],i=[],a=0,o=0,s=0,c=0;for(let l=0,u=t.length;l<=u;l+=2){let d=t[l];if(d===`
`||l===u){a=Math.max(a,o),i.push(o),o=0,s+=c,c=0;continue}let f=t[l+1]||e.font,p=Vl(f,d);n.push(p),o+=p;let m=zl(f);r.push(m),c=Math.max(c,m)}return{width:a,height:s,widths:n,heights:r,lineWidths:i}}function Wl(e,t,n,r,i,a,o,s,c,l,u){e.save(),n!==1&&(e.globalAlpha===void 0?e.globalAlpha=e=>e.globalAlpha*=n:e.globalAlpha*=n),t&&e.transform.apply(e,t),r.contextInstructions?(e.translate(c,l),e.scale(u[0],u[1]),Gl(r,e)):u[0]<0||u[1]<0?(e.translate(c,l),e.scale(u[0],u[1]),e.drawImage(r,i,a,o,s,0,0,o,s)):e.drawImage(r,i,a,o,s,c,l,o*u[0],s*u[1]),e.restore()}function Gl(e,t){let n=e.contextInstructions;for(let e=0,r=n.length;e<r;e+=2)Array.isArray(n[e+1])?t[n[e]].apply(t,n[e+1]):t[n[e]]=n[e+1]}var Kl=class e{constructor(e){e||={},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){let t=this.getColor();return new e({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(e){if(typeof e==`object`&&e&&`src`in e){let t=gl(null,e.src,`anonymous`,void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===N.IDLE&&t.load(),t.getImageState()===N.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){let e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Se(e):typeof e==`object`&&`src`in e?e.src+`:`+e.offset:jc(e).toString():``}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}},ql=class e{constructor(e){e||={},this.color_=e.color===void 0?null:e.color,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash===void 0?null:e.lineDash,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){let t=this.getColor();return new e({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}},Jl=class e{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=wo(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){let t=this.getScale();return new e({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return C()}getImage(e){return C()}getHitDetectionImage(){return C()}getPixelRatio(e){return 1}getImageState(){return C()}getImageSize(){return C()}getOrigin(){return C()}getSize(){return C()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=wo(e)}listenImageChange(e){C()}load(){C()}unlistenImageChange(e){C()}ready(){return Promise.resolve()}},Yl=class e extends Jl{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView===void 0?!1:e.rotateWithView,rotation:e.rotation===void 0?0:e.rotation,scale:e.scale===void 0?1:e.scale,displacement:e.displacement===void 0?[0,0]:e.displacement,declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill===void 0?null:e.fill,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle===void 0?0:e.angle,this.stroke_=e.stroke===void 0?null:e.stroke,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?N.LOADING:N.LOADED,this.imageState_===N.LOADING&&this.ready().then(()=>this.imageState_=N.LOADED),this.render()}clone(){let t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){let e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||=this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.fill_?.getKey(),n=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(`,`),r=R.get(n,null,null)?.getImage(1);if(!r){let t=this.renderOptions_,i=Math.ceil(t.size*e),a=w(i,i);this.draw_(t,a,e),r=a.canvas,R.set(n,null,null,new _l(r,void 0,null,N.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!==`bevel`&&e!==`miter`)return t;let r=this.radius,i=this.radius2_===void 0?r:this.radius2_;if(r<i){let e=r;r=i,i=e}let a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,s=i*Math.sin(o),c=Math.sqrt(i*i-s*s),l=r-c,u=Math.sqrt(s*s+l*l),d=u/s;if(e===`miter`&&d<=n)return d*t;let f=t/2/d,p=t/2*(l/u),m=Math.sqrt((r+f)*(r+f)+p*p)-r;if(this.radius2_===void 0||e===`bevel`)return m*2;let h=r*Math.sin(o),g=Math.sqrt(r*r-h*h),_=i-g,v=Math.sqrt(h*h+_*_)/h;if(v<=n){let e=v*t/2-i-r;return 2*Math.max(m,e)}return m*2}createRenderOptions(){let e=Sl,t=Tl,n=0,r=null,i=0,a,o=0;this.stroke_&&(a=vl(this.stroke_.getColor()??`#000`),o=this.stroke_.getWidth()??1,r=this.stroke_.getLineDash(),i=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??`round`,e=this.stroke_.getLineCap()??`round`,n=this.stroke_.getMiterLimit()??10);let s=this.calculateLineJoinSize_(t,o,n),c=Math.max(this.radius,this.radius2_||0),l=Math.ceil(2*c+s);return{strokeStyle:a,strokeWidth:o,size:l,lineCap:e,lineDash:r,lineDashOffset:i,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();let e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let e=this.fill_.getColor();e===null&&(e=xl),t.fillStyle=vl(e),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),r=0;typeof n==`string`&&(n=jc(n)),n===null?r=1:Array.isArray(n)&&(r=n.length===4?n[3]:1),r===0&&(t=w(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_,n=this.radius;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{let r=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);let i=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let o=0;o<t;o++){let t=i+o*a,s=o%2==0?n:r;e.lineTo(s*Math.cos(t),s*Math.sin(t))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=xl,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}},Xl=class e extends Yl{constructor(e){e||={radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale===void 0?1:e.scale,rotation:e.rotation===void 0?0:e.rotation,rotateWithView:e.rotateWithView===void 0?!1:e.rotateWithView,displacement:e.displacement===void 0?[0,0]:e.displacement,declutterMode:e.declutterMode})}clone(){let t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius=e,this.render()}},Zl=class e{constructor(e){e||={},this.geometry_=null,this.geometryFunction_=tu,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill===void 0?null:e.fill,this.image_=e.image===void 0?null:e.image,this.renderer_=e.renderer===void 0?null:e.renderer,this.hitDetectionRenderer_=e.hitDetectionRenderer===void 0?null:e.hitDetectionRenderer,this.stroke_=e.stroke===void 0?null:e.stroke,this.text_=e.text===void 0?null:e.text,this.zIndex_=e.zIndex}clone(){let t=this.getGeometry();return t&&typeof t==`object`&&(t=t.clone()),new e({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e==`function`?this.geometryFunction_=e:typeof e==`string`?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=tu,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function Ql(e){let t;if(typeof e==`function`)t=e;else{let n;Array.isArray(e)?n=e:(E(typeof e.getZIndex==`function`,"Expected an `Style` or an array of `Style`"),n=[e]),t=function(){return n}}return t}var $l=null;function eu(e,t){if(!$l){let e=new Kl({color:`rgba(255,255,255,0.4)`}),t=new ql({color:`#3399CC`,width:1.25});$l=[new Zl({image:new Xl({fill:e,stroke:t,radius:5}),fill:e,stroke:t})]}return $l}function tu(e){return e.getGeometry()}var nu=Zl,ru=`#333`,iu=class e{constructor(e){e||={},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=wo(e.scale===void 0?1:e.scale),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill===void 0?new Kl({color:ru}):e.fill,this.maxAngle_=e.maxAngle===void 0?Math.PI/4:e.maxAngle,this.placement_=e.placement===void 0?`point`:e.placement,this.overflow_=!!e.overflow,this.stroke_=e.stroke===void 0?null:e.stroke,this.offsetX_=e.offsetX===void 0?0:e.offsetX,this.offsetY_=e.offsetY===void 0?0:e.offsetY,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){let t=this.getScale();return new e({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof Kl?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=wo(e===void 0?1:e)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}};function au(e,t,n,r){return n!==void 0&&r!==void 0?[n/e,r/t]:n===void 0?r===void 0?1:r/t:n/e}var ou=class e extends Jl{constructor(e){e||={};let t=e.opacity===void 0?1:e.opacity,n=e.rotation===void 0?0:e.rotation,r=e.scale===void 0?1:e.scale,i=e.rotateWithView===void 0?!1:e.rotateWithView;super({opacity:t,rotation:n,scale:r,displacement:e.displacement===void 0?[0,0]:e.displacement,rotateWithView:i,declutterMode:e.declutterMode}),this.anchor_=e.anchor===void 0?[.5,.5]:e.anchor,this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin===void 0?`top-left`:e.anchorOrigin,this.anchorXUnits_=e.anchorXUnits===void 0?`fraction`:e.anchorXUnits,this.anchorYUnits_=e.anchorYUnits===void 0?`fraction`:e.anchorYUnits,this.crossOrigin_=e.crossOrigin===void 0?null:e.crossOrigin;let a=e.img===void 0?null:e.img,o=e.src;E(!(o!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&a&&(o=a.src||Se(a)),E(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),E(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let s;if(e.src===void 0?a!==void 0&&(s=`complete`in a?a.complete?a.src?N.LOADED:N.IDLE:N.LOADING:N.LOADED):s=N.IDLE,this.color_=e.color===void 0?null:jc(e.color),this.iconImage_=gl(a,o,this.crossOrigin_,s,this.color_),this.offset_=e.offset===void 0?[0,0]:e.offset,this.offsetOrigin_=e.offsetOrigin===void 0?`top-left`:e.offsetOrigin,this.origin_=null,this.size_=e.size===void 0?null:e.size,this.initialOptions_,e.width!==void 0||e.height!==void 0){let t,n;if(e.size)[t,n]=e.size;else{let r=this.getImage(1);if(r.width&&r.height)t=r.width,n=r.height;else if(r instanceof HTMLImageElement){this.initialOptions_=e;let t=()=>{if(this.unlistenImageChange(t),!this.initialOptions_)return;let n=this.iconImage_.getSize();this.setScale(au(n[0],n[1],e.width,e.height))};this.listenImageChange(t);return}}t!==void 0&&this.setScale(au(t,n,e.width,e.height))}}clone(){let t,n,r;return this.initialOptions_?(n=this.initialOptions_.width,r=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:n,height:r,size:this.size_===null?void 0:this.size_.slice(),src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;let t=this.getSize();if(this.anchorXUnits_==`fraction`||this.anchorYUnits_==`fraction`){if(!t)return null;e=this.anchor_.slice(),this.anchorXUnits_==`fraction`&&(e[0]*=t[0]),this.anchorYUnits_==`fraction`&&(e[1]*=t[1])}if(this.anchorOrigin_!=`top-left`){if(!t)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_==`top-right`||this.anchorOrigin_==`bottom-right`)&&(e[0]=-e[0]+t[0]),(this.anchorOrigin_==`bottom-left`||this.anchorOrigin_==`bottom-right`)&&(e[1]=-e[1]+t[1])}this.normalizedAnchor_=e}let t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!=`top-left`){let t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_==`top-right`||this.offsetOrigin_==`bottom-right`)&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_==`bottom-left`||this.offsetOrigin_==`bottom-right`)&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=gl(null,e,this.crossOrigin_,N.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){let e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==N.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){let e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==N.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(f.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(f.CHANGE,e)}ready(){return this.iconImage_.ready()}},su=0;const z=1<<su++,B=1<<su++,V=1<<su++,H=1<<su++,cu=1<<su++,lu=1<<su++,uu=2**su-1;var du={[z]:`boolean`,[B]:`number`,[V]:`string`,[H]:`color`,[cu]:`number[]`,[lu]:`size`},fu=Object.keys(du).map(Number).sort(_);function pu(e){return e in du}function mu(e){let t=[];for(let n of fu)hu(e,n)&&t.push(du[n]);return t.length===0?`untyped`:t.length<3?t.join(` or `):t.slice(0,-1).join(`, `)+`, or `+t[t.length-1]}function hu(e,t){return(e&t)===t}function U(e,t){return e===t}var W=class{constructor(e,t){if(!pu(e))throw Error(`literal expressions must have a specific type, got ${mu(e)}`);this.type=e,this.value=t}},gu=class{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}};function _u(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function G(e,t,n){switch(typeof e){case`boolean`:if(U(t,V))return new W(V,e?`true`:`false`);if(!hu(t,z))throw Error(`got a boolean, but expected ${mu(t)}`);return new W(z,e);case`number`:if(U(t,lu))return new W(lu,wo(e));if(U(t,z))return new W(z,!!e);if(U(t,V))return new W(V,e.toString());if(!hu(t,B))throw Error(`got a number, but expected ${mu(t)}`);return new W(B,e);case`string`:if(U(t,H))return new W(H,Ac(e));if(U(t,z))return new W(z,!!e);if(!hu(t,V))throw Error(`got a string, but expected ${mu(t)}`);return new W(V,e);default:}if(!Array.isArray(e))throw Error(`expression must be an array or a primitive value`);if(e.length===0)throw Error(`empty expression`);if(typeof e[0]==`string`)return Nu(e,t,n);for(let t of e)if(typeof t!=`number`)throw Error(`expected an array of numbers`);if(U(t,lu)){if(e.length!==2)throw Error(`expected an array of two values for a size, got ${e.length}`);return new W(lu,e)}if(U(t,H)){if(e.length===3)return new W(H,[...e,1]);if(e.length===4)return new W(H,e);throw Error(`expected an array of 3 or 4 values for a color, got ${e.length}`)}if(!hu(t,cu))throw Error(`got an array of numbers, but expected ${mu(t)}`);return new W(cu,e)}const K={Get:`get`,Var:`var`,Concat:`concat`,GeometryType:`geometry-type`,LineMetric:`line-metric`,Any:`any`,All:`all`,Not:`!`,Resolution:`resolution`,Zoom:`zoom`,Time:`time`,Equal:`==`,NotEqual:`!=`,GreaterThan:`>`,GreaterThanOrEqualTo:`>=`,LessThan:`<`,LessThanOrEqualTo:`<=`,Multiply:`*`,Divide:`/`,Add:`+`,Subtract:`-`,Clamp:`clamp`,Mod:`%`,Pow:`^`,Abs:`abs`,Floor:`floor`,Ceil:`ceil`,Round:`round`,Sin:`sin`,Cos:`cos`,Atan:`atan`,Sqrt:`sqrt`,Match:`match`,Between:`between`,Interpolate:`interpolate`,Coalesce:`coalesce`,Case:`case`,In:`in`,Number:`number`,String:`string`,Array:`array`,Color:`color`,Id:`id`,Band:`band`,Palette:`palette`,ToString:`to-string`,Has:`has`};var vu={[K.Get]:Y(q(1,1/0),yu),[K.Var]:Y(q(1,1),bu),[K.Has]:Y(q(1,1/0),yu),[K.Id]:Y(xu,wu),[K.Concat]:Y(q(2,1/0),J(V)),[K.GeometryType]:Y(Su,wu),[K.LineMetric]:Y(wu),[K.Resolution]:Y(Cu,wu),[K.Zoom]:Y(Cu,wu),[K.Time]:Y(Cu,wu),[K.Any]:Y(q(2,1/0),J(z)),[K.All]:Y(q(2,1/0),J(z)),[K.Not]:Y(q(1,1),J(z)),[K.Equal]:Y(q(2,2),J(uu)),[K.NotEqual]:Y(q(2,2),J(uu)),[K.GreaterThan]:Y(q(2,2),J(B)),[K.GreaterThanOrEqualTo]:Y(q(2,2),J(B)),[K.LessThan]:Y(q(2,2),J(B)),[K.LessThanOrEqualTo]:Y(q(2,2),J(B)),[K.Multiply]:Y(q(2,1/0),Tu),[K.Coalesce]:Y(q(2,1/0),Tu),[K.Divide]:Y(q(2,2),J(B)),[K.Add]:Y(q(2,1/0),J(B)),[K.Subtract]:Y(q(2,2),J(B)),[K.Clamp]:Y(q(3,3),J(B)),[K.Mod]:Y(q(2,2),J(B)),[K.Pow]:Y(q(2,2),J(B)),[K.Abs]:Y(q(1,1),J(B)),[K.Floor]:Y(q(1,1),J(B)),[K.Ceil]:Y(q(1,1),J(B)),[K.Round]:Y(q(1,1),J(B)),[K.Sin]:Y(q(1,1),J(B)),[K.Cos]:Y(q(1,1),J(B)),[K.Atan]:Y(q(1,2),J(B)),[K.Sqrt]:Y(q(1,1),J(B)),[K.Match]:Y(q(4,1/0),Du,Ou),[K.Between]:Y(q(3,3),J(B)),[K.Interpolate]:Y(q(6,1/0),Du,ku),[K.Case]:Y(q(3,1/0),Eu,Au),[K.In]:Y(q(2,2),ju),[K.Number]:Y(q(1,1/0),J(uu)),[K.String]:Y(q(1,1/0),J(uu)),[K.Array]:Y(q(1,1/0),J(B)),[K.Color]:Y(q(1,4),J(B)),[K.Band]:Y(q(1,3),J(B)),[K.Palette]:Y(q(2,2),Mu),[K.ToString]:Y(q(1,1),J(z|B|V|H))};function yu(e,t,n){let r=e.length-1,i=Array(r);for(let t=0;t<r;++t){let r=e[t+1];switch(typeof r){case`number`:i[t]=new W(B,r);break;case`string`:i[t]=new W(V,r);break;default:throw Error(`expected a string key or numeric array index for a get operation, got ${r}`)}t===0&&n.properties.add(String(r))}return i}function bu(e,t,n){let r=e[1];if(typeof r!=`string`)throw Error(`expected a string argument for var operation`);return n.variables.add(r),[new W(V,r)]}function xu(e,t,n){n.featureId=!0}function Su(e,t,n){n.geometryType=!0}function Cu(e,t,n){n.mapState=!0}function wu(e,t,n){let r=e[0];if(e.length!==1)throw Error(`expected no arguments for ${r} operation`);return[]}function q(e,t){return function(n,r,i){let a=n[0],o=n.length-1;if(e===t){if(o!==e){let t=e===1?``:`s`;throw Error(`expected ${e} argument${t} for ${a}, got ${o}`)}}else if(o<e||o>t){let n=t===1/0?`${e} or more`:`${e} to ${t}`;throw Error(`expected ${n} arguments for ${a}, got ${o}`)}}}function Tu(e,t,n){let r=e.length-1,i=Array(r);for(let a=0;a<r;++a)i[a]=G(e[a+1],t,n);return i}function J(e){return function(t,n,r){let i=t.length-1,a=Array(i);for(let n=0;n<i;++n)a[n]=G(t[n+1],e,r);return a}}function Eu(e,t,n){let r=e[0],i=e.length-1;if(i%2==0)throw Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function Du(e,t,n){let r=e[0],i=e.length-1;if(i%2==1)throw Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function Ou(e,t,n){let r=e.length-1,i=V|B|z,a=G(e[1],i,n),o=G(e[e.length-1],t,n),s=Array(r-2);for(let t=0;t<r-2;t+=2){try{s[t]=G(e[t+2],a.type,n)}catch(e){throw Error(`failed to parse argument ${t+1} of match expression: ${e.message}`)}try{let r=G(e[t+3],o.type,n);s[t+1]=r}catch(e){throw Error(`failed to parse argument ${t+2} of match expression: ${e.message}`)}}return[a,...s,o]}function ku(e,t,n){let r=e[1],i;switch(r[0]){case`linear`:i=1;break;case`exponential`:let e=r[1];if(typeof e!=`number`||e<=0)throw Error(`expected a number base for exponential interpolation, got ${JSON.stringify(e)} instead`);i=e;break;default:throw Error(`invalid interpolation type: ${JSON.stringify(r)}`)}let a=new W(B,i),o;try{o=G(e[2],B,n)}catch(e){throw Error(`failed to parse argument 1 in interpolate expression: ${e.message}`)}let s=Array(e.length-3);for(let r=0;r<s.length;r+=2){try{s[r]=G(e[r+3],B,n)}catch(e){throw Error(`failed to parse argument ${r+2} for interpolate expression: ${e.message}`)}try{let i=G(e[r+4],t,n);s[r+1]=i}catch(e){throw Error(`failed to parse argument ${r+3} for interpolate expression: ${e.message}`)}}return[a,o,...s]}function Au(e,t,n){let r=G(e[e.length-1],t,n),i=Array(e.length-1);for(let t=0;t<i.length-1;t+=2){try{i[t]=G(e[t+1],z,n)}catch(e){throw Error(`failed to parse argument ${t} of case expression: ${e.message}`)}try{let a=G(e[t+2],r.type,n);i[t+1]=a}catch(e){throw Error(`failed to parse argument ${t+1} of case expression: ${e.message}`)}}return i[i.length-1]=r,i}function ju(e,t,n){let r=e[2];if(!Array.isArray(r))throw Error(`the second argument for the "in" operator must be an array`);let i;if(typeof r[0]==`string`){if(r[0]!==`literal`)throw Error(`for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions`);if(!Array.isArray(r[1]))throw Error(`failed to parse "in" expression: the literal operator must be followed by an array`);r=r[1],i=V}else i=B;let a=Array(r.length);for(let e=0;e<a.length;e++)try{a[e]=G(r[e],i,n)}catch(t){throw Error(`failed to parse haystack item ${e} for "in" expression: ${t.message}`)}return[G(e[1],i,n),...a]}function Mu(e,t,n){let r;try{r=G(e[1],B,n)}catch(e){throw Error(`failed to parse first argument in palette expression: ${e.message}`)}let i=e[2];if(!Array.isArray(i))throw Error(`the second argument of palette must be an array`);let a=Array(i.length);for(let e=0;e<a.length;e++){let t;try{t=G(i[e],H,n)}catch(t){throw Error(`failed to parse color at index ${e} in palette expression: ${t.message}`)}if(!(t instanceof W))throw Error(`the palette color at index ${e} must be a literal value`);a[e]=t}return[r,...a]}function Y(...e){return function(t,n,r){let i=t[0],a;for(let i=0;i<e.length;i++){let o=e[i](t,n,r);if(i==e.length-1){if(!o)throw Error(`expected last argument validator to return the parsed args`);a=o}}return new gu(n,i,...a)}}function Nu(e,t,n){let r=e[0],i=vu[r];if(!i)throw Error(`unknown operator: ${r}`);return i(e,t,n)}function Pu(e){if(!e)return``;let t=e.getType();switch(t){case`Point`:case`LineString`:case`Polygon`:return t;case`MultiPoint`:case`MultiLineString`:case`MultiPolygon`:return t.substring(5);case`Circle`:return`Polygon`;case`GeometryCollection`:return Pu(e.getGeometries()[0]);default:return``}}function Fu(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:``}}function X(e,t,n){return Z(G(e,t,n),n)}function Z(e,t){if(e instanceof W){if(e.type===H&&typeof e.value==`string`){let t=Ac(e.value);return function(){return t}}return function(){return e.value}}let n=e.operator;switch(n){case K.Number:case K.String:case K.Coalesce:return Iu(e,t);case K.Get:case K.Var:case K.Has:return Lu(e,t);case K.Id:return e=>e.featureId;case K.GeometryType:return e=>e.geometryType;case K.Concat:{let n=e.args.map(e=>Z(e,t));return e=>``.concat(...n.map(t=>t(e).toString()))}case K.Resolution:return e=>e.resolution;case K.Any:case K.All:case K.Between:case K.In:case K.Not:return zu(e,t);case K.Equal:case K.NotEqual:case K.LessThan:case K.LessThanOrEqualTo:case K.GreaterThan:case K.GreaterThanOrEqualTo:return Ru(e,t);case K.Multiply:case K.Divide:case K.Add:case K.Subtract:case K.Clamp:case K.Mod:case K.Pow:case K.Abs:case K.Floor:case K.Ceil:case K.Round:case K.Sin:case K.Cos:case K.Atan:case K.Sqrt:return Bu(e,t);case K.Case:return Vu(e,t);case K.Match:return Hu(e,t);case K.Interpolate:return Uu(e,t);case K.ToString:return Wu(e,t);default:throw Error(`Unsupported operator ${n}`)}}function Iu(e,t){let n=e.operator,r=e.args.length,i=Array(r);for(let n=0;n<r;++n)i[n]=Z(e.args[n],t);switch(n){case K.Coalesce:return e=>{for(let t=0;t<r;++t){let n=i[t](e);if(n!=null)return n}throw Error(`Expected one of the values to be non-null`)};case K.Number:case K.String:return e=>{for(let t=0;t<r;++t){let r=i[t](e);if(typeof r===n)return r}throw Error(`Expected one of the values to be a ${n}`)};default:throw Error(`Unsupported assertion operator ${n}`)}}function Lu(e,t){let n=e.args[0].value;switch(e.operator){case K.Get:return t=>{let r=e.args,i=t.properties[n];for(let e=1,t=r.length;e<t;++e){let t=r[e].value;i=i[t]}return i};case K.Var:return e=>e.variables[n];case K.Has:return t=>{let r=e.args;if(!(n in t.properties))return!1;let i=t.properties[n];for(let e=1,t=r.length;e<t;++e){let t=r[e].value;if(!i||!Object.hasOwn(i,t))return!1;i=i[t]}return!0};default:throw Error(`Unsupported accessor operator ${e.operator}`)}}function Ru(e,t){let n=e.operator,r=Z(e.args[0],t),i=Z(e.args[1],t);switch(n){case K.Equal:return e=>r(e)===i(e);case K.NotEqual:return e=>r(e)!==i(e);case K.LessThan:return e=>r(e)<i(e);case K.LessThanOrEqualTo:return e=>r(e)<=i(e);case K.GreaterThan:return e=>r(e)>i(e);case K.GreaterThanOrEqualTo:return e=>r(e)>=i(e);default:throw Error(`Unsupported comparison operator ${n}`)}}function zu(e,t){let n=e.operator,r=e.args.length,i=Array(r);for(let n=0;n<r;++n)i[n]=Z(e.args[n],t);switch(n){case K.Any:return e=>{for(let t=0;t<r;++t)if(i[t](e))return!0;return!1};case K.All:return e=>{for(let t=0;t<r;++t)if(!i[t](e))return!1;return!0};case K.Between:return e=>{let t=i[0](e),n=i[1](e),r=i[2](e);return t>=n&&t<=r};case K.In:return e=>{let t=i[0](e);for(let n=1;n<r;++n)if(t===i[n](e))return!0;return!1};case K.Not:return e=>!i[0](e);default:throw Error(`Unsupported logical operator ${n}`)}}function Bu(e,t){let n=e.operator,r=e.args.length,i=Array(r);for(let n=0;n<r;++n)i[n]=Z(e.args[n],t);switch(n){case K.Multiply:return e=>{let t=1;for(let n=0;n<r;++n)t*=i[n](e);return t};case K.Divide:return e=>i[0](e)/i[1](e);case K.Add:return e=>{let t=0;for(let n=0;n<r;++n)t+=i[n](e);return t};case K.Subtract:return e=>i[0](e)-i[1](e);case K.Clamp:return e=>{let t=i[0](e),n=i[1](e);if(t<n)return n;let r=i[2](e);return t>r?r:t};case K.Mod:return e=>i[0](e)%i[1](e);case K.Pow:return e=>i[0](e)**+i[1](e);case K.Abs:return e=>Math.abs(i[0](e));case K.Floor:return e=>Math.floor(i[0](e));case K.Ceil:return e=>Math.ceil(i[0](e));case K.Round:return e=>Math.round(i[0](e));case K.Sin:return e=>Math.sin(i[0](e));case K.Cos:return e=>Math.cos(i[0](e));case K.Atan:return r===2?e=>Math.atan2(i[0](e),i[1](e)):e=>Math.atan(i[0](e));case K.Sqrt:return e=>Math.sqrt(i[0](e));default:throw Error(`Unsupported numeric operator ${n}`)}}function Vu(e,t){let n=e.args.length,r=Array(n);for(let i=0;i<n;++i)r[i]=Z(e.args[i],t);return e=>{for(let t=0;t<n-1;t+=2)if(r[t](e))return r[t+1](e);return r[n-1](e)}}function Hu(e,t){let n=e.args.length,r=Array(n);for(let i=0;i<n;++i)r[i]=Z(e.args[i],t);return e=>{let t=r[0](e);for(let i=1;i<n-1;i+=2)if(t===r[i](e))return r[i+1](e);return r[n-1](e)}}function Uu(e,t){let n=e.args.length,r=Array(n);for(let i=0;i<n;++i)r[i]=Z(e.args[i],t);return e=>{let t=r[0](e),i=r[1](e),a,o;for(let s=2;s<n;s+=2){let n=r[s](e),c=r[s+1](e),l=Array.isArray(c);if(l&&(c=Cc(c)),n>=i)return s===2?c:l?Ku(t,i,a,o,n,c):Gu(t,i,a,o,n,c);a=n,o=c}return o}}function Wu(e,t){let n=e.operator,r=e.args.length,i=Array(r);for(let n=0;n<r;++n)i[n]=Z(e.args[n],t);switch(n){case K.ToString:return t=>{let n=i[0](t);return e.args[0].type===H?Mc(n):n.toString()};default:throw Error(`Unsupported convert operator ${n}`)}}function Gu(e,t,n,r,i,a){let o=i-n;if(o===0)return r;let s=t-n;return r+(e===1?s/o:(e**+s-1)/(e**+o-1))*(a-r)}function Ku(e,t,n,r,i,a){if(i-n===0)return r;let o=Oc(r),s=Oc(a),c=s[2]-o[2];return c>180?c-=360:c<-180&&(c+=360),kc([Gu(e,t,n,o[0],i,s[0]),Gu(e,t,n,o[1],i,s[1]),o[2]+Gu(e,t,n,0,i,c),Gu(e,t,n,r[3],i,a[3])])}function qu(e){return!0}function Ju(e){let t=_u(),n=Xu(e,t),r=Fu();return function(e,i){if(r.properties=e.getPropertiesInternal(),r.resolution=i,t.featureId){let t=e.getId();t===void 0?r.featureId=null:r.featureId=t}return t.geometryType&&(r.geometryType=Pu(e.getGeometry())),n(r)}}function Yu(e){let t=_u(),n=e.length,r=Array(n);for(let i=0;i<n;++i)r[i]=Zu(e[i],t);let i=Fu(),a=Array(n);return function(e,o){if(i.properties=e.getPropertiesInternal(),i.resolution=o,t.featureId){let t=e.getId();t===void 0?i.featureId=null:i.featureId=t}let s=0;for(let e=0;e<n;++e){let t=r[e](i);t&&(a[s]=t,s+=1)}return a.length=s,a}}function Xu(e,t){let n=e.length,r=Array(n);for(let i=0;i<n;++i){let n=e[i],a=`filter`in n?X(n.filter,z,t):qu,o;if(Array.isArray(n.style)){let e=n.style.length;o=Array(e);for(let r=0;r<e;++r)o[r]=Zu(n.style[r],t)}else o=[Zu(n.style,t)];r[i]={filter:a,styles:o}}return function(t){let i=[],a=!1;for(let o=0;o<n;++o){let n=r[o].filter;if(n(t)&&!(e[o].else&&a)){a=!0;for(let e of r[o].styles){let n=e(t);n&&i.push(n)}}}return i}}function Zu(e,t){let n=Qu(e,``,t),r=$u(e,``,t),i=ed(e,t),a=td(e,t),o=Q(e,`z-index`,t);if(!n&&!r&&!i&&!a&&!De(e))throw Error(`No fill, stroke, point, or text symbolizer properties in style: `+JSON.stringify(e));let s=new nu;return function(e){let t=!0;if(n){let r=n(e);r&&(t=!1),s.setFill(r)}if(r){let n=r(e);n&&(t=!1),s.setStroke(n)}if(i){let n=i(e);n&&(t=!1),s.setText(n)}if(a){let n=a(e);n&&(t=!1),s.setImage(n)}return o&&s.setZIndex(o(e)),t?null:s}}function Qu(e,t,n){let r;if(t+`fill-pattern-src`in e)r=ad(e,t+`fill-`,n);else{if(e[t+`fill-color`]===`none`)return e=>null;r=sd(e,t+`fill-color`,n)}if(!r)return null;let i=new Kl;return function(e){let t=r(e);return t===lc?null:(i.setColor(t),i)}}function $u(e,t,n){let r=Q(e,t+`stroke-width`,n),i=sd(e,t+`stroke-color`,n);if(!r&&!i)return null;let a=$(e,t+`stroke-line-cap`,n),o=$(e,t+`stroke-line-join`,n),s=cd(e,t+`stroke-line-dash`,n),c=Q(e,t+`stroke-line-dash-offset`,n),l=Q(e,t+`stroke-miter-limit`,n),u=new ql;return function(e){if(i){let t=i(e);if(t===lc)return null;u.setColor(t)}if(r&&u.setWidth(r(e)),a){let t=a(e);if(t!==`butt`&&t!==`round`&&t!==`square`)throw Error(`Expected butt, round, or square line cap`);u.setLineCap(t)}if(o){let t=o(e);if(t!==`bevel`&&t!==`round`&&t!==`miter`)throw Error(`Expected bevel, round, or miter line join`);u.setLineJoin(t)}return s&&u.setLineDash(s(e)),c&&u.setLineDashOffset(c(e)),l&&u.setMiterLimit(l(e)),u}}function ed(e,t){let n=`text-`,r=$(e,n+`value`,t);if(!r)return null;let i=Qu(e,n,t),a=Qu(e,n+`background-`,t),o=$u(e,n,t),s=$u(e,n+`background-`,t),c=$(e,n+`font`,t),l=Q(e,n+`max-angle`,t),u=Q(e,n+`offset-x`,t),d=Q(e,n+`offset-y`,t),f=od(e,n+`overflow`,t),p=$(e,n+`placement`,t),m=Q(e,n+`repeat`,t),h=dd(e,n+`scale`,t),g=od(e,n+`rotate-with-view`,t),_=Q(e,n+`rotation`,t),v=$(e,n+`align`,t),y=$(e,n+`justify`,t),ee=$(e,n+`baseline`,t),b=od(e,n+`keep-upright`,t),te=cd(e,n+`padding`,t),x=new iu({declutterMode:vd(e,n+`declutter-mode`)});return function(e){if(x.setText(r(e)),i&&x.setFill(i(e)),a&&x.setBackgroundFill(a(e)),o&&x.setStroke(o(e)),s&&x.setBackgroundStroke(s(e)),c&&x.setFont(c(e)),l&&x.setMaxAngle(l(e)),u&&x.setOffsetX(u(e)),d&&x.setOffsetY(d(e)),f&&x.setOverflow(f(e)),p){let t=p(e);if(t!==`point`&&t!==`line`)throw Error(`Expected point or line for text-placement`);x.setPlacement(t)}if(m&&x.setRepeat(m(e)),h&&x.setScale(h(e)),g&&x.setRotateWithView(g(e)),_&&x.setRotation(_(e)),v){let t=v(e);if(t!==`left`&&t!==`center`&&t!==`right`&&t!==`end`&&t!==`start`)throw Error(`Expected left, right, center, start, or end for text-align`);x.setTextAlign(t)}if(y){let t=y(e);if(t!==`left`&&t!==`right`&&t!==`center`)throw Error(`Expected left, right, or center for text-justify`);x.setJustify(t)}if(ee){let t=ee(e);if(t!==`bottom`&&t!==`top`&&t!==`middle`&&t!==`alphabetic`&&t!==`hanging`)throw Error(`Expected bottom, top, middle, alphabetic, or hanging for text-baseline`);x.setTextBaseline(t)}return te&&x.setPadding(te(e)),b&&x.setKeepUpright(b(e)),x}}function td(e,t){return`icon-src`in e?nd(e,t):`shape-points`in e?rd(e,t):`circle-radius`in e?id(e,t):null}function nd(e,t){let n=`icon-`,r=n+`src`,i=xd(e[r],r),a=ld(e,n+`anchor`,t),o=dd(e,n+`scale`,t),s=Q(e,n+`opacity`,t),c=ld(e,n+`displacement`,t),l=Q(e,n+`rotation`,t),u=od(e,n+`rotate-with-view`,t),d=hd(e,n+`anchor-origin`),f=gd(e,n+`anchor-x-units`),p=gd(e,n+`anchor-y-units`),m=yd(e,n+`color`),h=md(e,n+`cross-origin`),g=_d(e,n+`offset`),_=hd(e,n+`offset-origin`),v=fd(e,n+`width`),y=new ou({src:i,anchorOrigin:d,anchorXUnits:f,anchorYUnits:p,color:m,crossOrigin:h,offset:g,offsetOrigin:_,height:fd(e,n+`height`),width:v,size:pd(e,n+`size`),declutterMode:vd(e,n+`declutter-mode`)});return function(e){return s&&y.setOpacity(s(e)),c&&y.setDisplacement(c(e)),l&&y.setRotation(l(e)),u&&y.setRotateWithView(u(e)),o&&y.setScale(o(e)),a&&y.setAnchor(a(e)),y}}function rd(e,t){let n=`shape-`,r=n+`points`,i=n+`radius`,a=Sd(e[r],r),o=Sd(e[i],i),s=Qu(e,n,t),c=$u(e,n,t),l=dd(e,n+`scale`,t),u=ld(e,n+`displacement`,t),d=Q(e,n+`rotation`,t),f=od(e,n+`rotate-with-view`,t),p=new Yl({points:a,radius:o,radius2:fd(e,n+`radius2`),angle:fd(e,n+`angle`),declutterMode:vd(e,n+`declutter-mode`)});return function(e){return s&&p.setFill(s(e)),c&&p.setStroke(c(e)),u&&p.setDisplacement(u(e)),d&&p.setRotation(d(e)),f&&p.setRotateWithView(f(e)),l&&p.setScale(l(e)),p}}function id(e,t){let n=`circle-`,r=Qu(e,n,t),i=$u(e,n,t),a=Q(e,n+`radius`,t),o=dd(e,n+`scale`,t),s=ld(e,n+`displacement`,t),c=Q(e,n+`rotation`,t),l=od(e,n+`rotate-with-view`,t),u=new Xl({radius:5,declutterMode:vd(e,n+`declutter-mode`)});return function(e){return a&&u.setRadius(a(e)),r&&u.setFill(r(e)),i&&u.setStroke(i(e)),s&&u.setDisplacement(s(e)),c&&u.setRotation(c(e)),l&&u.setRotateWithView(l(e)),o&&u.setScale(o(e)),u}}function Q(e,t,n){if(!(t in e))return;let r=X(e[t],B,n);return function(e){return Sd(r(e),t)}}function $(e,t,n){if(!(t in e))return null;let r=X(e[t],V,n);return function(e){return xd(r(e),t)}}function ad(e,t,n){let r=$(e,t+`pattern-src`,n),i=ud(e,t+`pattern-offset`,n),a=ud(e,t+`pattern-size`,n),o=sd(e,t+`color`,n);return function(e){return{src:r(e),offset:i&&i(e),size:a&&a(e),color:o&&o(e)}}}function od(e,t,n){if(!(t in e))return null;let r=X(e[t],z,n);return function(e){let n=r(e);if(typeof n!=`boolean`)throw Error(`Expected a boolean for ${t}`);return n}}function sd(e,t,n){if(!(t in e))return null;let r=X(e[t],H,n);return function(e){return Cd(r(e),t)}}function cd(e,t,n){if(!(t in e))return null;let r=X(e[t],cu,n);return function(e){return bd(r(e),t)}}function ld(e,t,n){if(!(t in e))return null;let r=X(e[t],cu,n);return function(e){let n=bd(r(e),t);if(n.length!==2)throw Error(`Expected two numbers for ${t}`);return n}}function ud(e,t,n){if(!(t in e))return null;let r=X(e[t],cu,n);return function(e){return wd(r(e),t)}}function dd(e,t,n){if(!(t in e))return null;let r=X(e[t],cu|B,n);return function(e){return Td(r(e),t)}}function fd(e,t){let n=e[t];if(n!==void 0){if(typeof n!=`number`)throw Error(`Expected a number for ${t}`);return n}}function pd(e,t){let n=e[t];if(n!==void 0){if(typeof n==`number`)return wo(n);if(!Array.isArray(n)||n.length!==2||typeof n[0]!=`number`||typeof n[1]!=`number`)throw Error(`Expected a number or size array for ${t}`);return n}}function md(e,t){let n=e[t];if(n!==void 0){if(typeof n!=`string`)throw Error(`Expected a string for ${t}`);return n}}function hd(e,t){let n=e[t];if(n!==void 0){if(n!==`bottom-left`&&n!==`bottom-right`&&n!==`top-left`&&n!==`top-right`)throw Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return n}}function gd(e,t){let n=e[t];if(n!==void 0){if(n!==`pixels`&&n!==`fraction`)throw Error(`Expected pixels or fraction for ${t}`);return n}}function _d(e,t){let n=e[t];if(n!==void 0)return bd(n,t)}function vd(e,t){let n=e[t];if(n!==void 0){if(typeof n!=`string`)throw Error(`Expected a string for ${t}`);if(n!==`declutter`&&n!==`obstacle`&&n!==`none`)throw Error(`Expected declutter, obstacle, or none for ${t}`);return n}}function yd(e,t){let n=e[t];if(n!==void 0)return Cd(n,t)}function bd(e,t){if(!Array.isArray(e))throw Error(`Expected an array for ${t}`);let n=e.length;for(let r=0;r<n;++r)if(typeof e[r]!=`number`)throw Error(`Expected an array of numbers for ${t}`);return e}function xd(e,t){if(typeof e!=`string`)throw Error(`Expected a string for ${t}`);return e}function Sd(e,t){if(typeof e!=`number`)throw Error(`Expected a number for ${t}`);return e}function Cd(e,t){if(typeof e==`string`)return e;let n=bd(e,t),r=n.length;if(r<3||r>4)throw Error(`Expected a color with 3 or 4 values for ${t}`);return n}function wd(e,t){let n=bd(e,t);if(n.length!==2)throw Error(`Expected an array of two numbers for ${t}`);return n}function Td(e,t){return typeof e==`number`?e:wd(e,t)}var Ed={RENDER_ORDER:`renderOrder`},Dd=class extends dl{constructor(e){e||={};let t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer===void 0?100:e.renderBuffer,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating===void 0?!1:e.updateWhileAnimating,this.updateWhileInteracting_=e.updateWhileInteracting===void 0?!1:e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Ed.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){let n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new Js(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Ed.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?eu:e;let t=Od(e);this.styleFunction_=e===null?void 0:Ql(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}};function Od(e){if(e===void 0)return eu;if(!e)return null;if(typeof e==`function`||e instanceof nu)return e;if(!Array.isArray(e))return Yu([e]);if(e.length===0)return[];let t=e.length,n=e[0];if(n instanceof nu){let n=Array(t);for(let r=0;r<t;++r){let t=e[r];if(!(t instanceof nu))throw Error(`Expected a list of style instances`);n[r]=t}return n}if(`style`in n){let n=Array(t);for(let r=0;r<t;++r){let t=e[r];if(!(`style`in t))throw Error(`Expected a list of rules with a style property`);n[r]=t}return Ju(n)}return Yu(e)}var kd=Dd;export{$o as $,hi as $t,Vc as A,mo as At,zs as B,Ri as Bt,vl as C,Ve as Cn,io as Ct,cl as D,_o as Dt,ul as E,go as Et,F,Wi as Ft,Os as G,Mi as Gt,Es as H,Fi as Ht,Js as I,D as It,bs as J,Ci as Jt,Ts as K,Ai as Kt,Us as L,Ui as Lt,Fc as M,Ji as Mt,Pc as N,Yi as Nt,sl as O,vo as Ot,Nc as P,Xi as Pt,es as Q,xi as Qt,Ws as R,Vi as Rt,Rl as S,T as Sn,A as St,dl as T,uo as Tt,Ds as U,E as Ut,Bs as V,Hi as Vt,As as W,ji as Wt,hs as X,Si as Xt,vs as Y,wi as Yt,ls as Z,bi as Zt,Ol as _,gt as _n,wo as _t,Kl as a,Tr as an,Wo as at,Ul as b,rt as bn,M as bt,bl as c,En as cn,Ro as ct,wl as d,un as dn,N as dt,ni as en,Qo as et,Tl as f,cn as fn,Mo as ft,Dl as g,wt as gn,Co as gt,Al as h,jt as hn,So as ht,ql as i,Rr as in,Jo as it,Rc as j,Qi as jt,Yc as k,bo as kt,Sl as l,yn as ln,Bo as lt,El as m,Wt as mn,Ao as mt,ou as n,Ur as nn,Uo as nt,Ml as o,lr as on,Ho as ot,jl as p,on as pn,No as pt,ys as q,Ei as qt,nu as r,Vr as rn,Vo as rt,xl as s,cr as sn,Lo as st,kd as t,qr as tn,P as tt,Cl as u,pn as un,Po as ut,kl as v,lt as vn,co as vt,R as w,ze as wn,po as wt,Hl as x,tt as xn,yo as xt,Wl as y,ct as yn,lo as yt,Rs as z,Bi as zt};