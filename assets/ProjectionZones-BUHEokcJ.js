import{$t as e,Bt as t,C as n,Ct as r,Dt as i,E as a,Et as o,Ft as s,G as c,Gt as l,I as u,It as d,Kt as f,L as p,Lt as m,M as h,Mt as g,Ot as _,Pt as v,Qt as y,R as b,Rt as x,St as S,Tt as C,Ut as w,Vt as T,Wt as E,Xt as D,Yt as O,Zt as k,_ as A,_t as ee,an as j,cn as M,ct as te,d as ne,h as re,hn as N,ht as ie,i as ae,in as oe,j as se,kt as ce,l as le,ln as ue,m as de,mn as P,nn as fe,o as pe,on as me,p as he,pt as ge,r as _e,s as ve,sn as ye,tn as be,u as xe,un as Se,ut as F,xt as Ce,yt as we,z as Te,zt as Ee}from"./extent-D6dXpXWi.js";import{$ as De,A as Oe,C as ke,D as Ae,E as I,H as je,I as L,J as Me,K as R,M as Ne,N as Pe,O as Fe,P as Ie,Q as z,R as B,S as Le,T as Re,V as ze,W as Be,X as Ve,Y as He,Z as Ue,_ as We,a as Ge,at as Ke,b as qe,c as V,ct as Je,d as H,f as U,g as Ye,h as W,i as Xe,it as Ze,j as Qe,k as G,l as K,lt as $e,m as et,n as tt,o as q,ot as nt,p as rt,rt as it,s as at,st as J,t as ot,tt as st,u as Y,v as X,x as ct,z as lt}from"./index-CS_7Xx1B.js";import{$ as ut,$t as dt,A as ft,B as pt,C as mt,Cn as ht,Et as gt,F as _t,G as vt,Gt as yt,H as bt,I as xt,It as St,J as Ct,Jt as wt,K as Tt,M as Et,N as Dt,Ot,Pt as kt,Q as At,Qt as jt,R as Mt,Rt as Nt,S as Pt,Sn as Ft,St as It,Tt as Lt,U as Rt,Ut as zt,V as Bt,Vt,W as Ht,Wt as Ut,X as Wt,Xt as Gt,Y as Kt,Yt as qt,Z as Jt,_ as Yt,_n as Xt,a as Zt,an as Qt,b as $t,bn as en,c as tn,cn as nn,d as rn,dn as an,dt as on,en as sn,et as cn,f as ln,fn as un,g as dn,gn as fn,h as pn,hn as mn,i as hn,in as gn,j as _n,kt as vn,l as yn,ln as bn,m as xn,mn as Sn,n as Cn,nn as wn,nt as Tn,on as En,ot as Dn,p as On,pn as kn,q as An,qt as jn,r as Mn,rn as Nn,rt as Pn,s as Fn,sn as In,t as Ln,tn as Rn,tt as zn,u as Bn,un as Vn,v as Hn,vn as Un,wn as Wn,x as Gn,xn as Kn,xt as qn,y as Jn,yn as Yn,z as Xn}from"./BaseVector-DU5lzx9D.js";var Zn=Sn(ht,`WeakMap`),Qn=Object.create,$n=function(){function e(){}return function(t){if(!Xt(t))return{};if(Qn)return Qn(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function er(e,t){var n=-1,r=e.length;for(t||=Array(r);++n<r;)t[n]=e[n];return t}var tr=er;function nr(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var rr=nr;function ir(e,t,n,r){var i=!n;n||={};for(var a=-1,o=t.length;++a<o;){var s=t[a],c=r?r(n[s],e[s],s,n,e):void 0;c===void 0&&(c=e[s]),i?un(n,s,c):Vn(n,s,c)}return n}var ar=ir;function or(e){return e!=null&&bn(e.length)&&!fn(e)}var sr=or,cr=Object.prototype;function lr(e){var t=e&&e.constructor;return e===(typeof t==`function`&&t.prototype||cr)}var ur=lr;function dr(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var fr=dr;function pr(){return!1}var mr=pr,hr=typeof exports==`object`&&exports&&!exports.nodeType&&exports,gr=hr&&typeof module==`object`&&module&&!module.nodeType&&module,_r=gr&&gr.exports===hr?ht.Buffer:void 0,vr=(_r?_r.isBuffer:void 0)||mr,yr=`[object Arguments]`,br=`[object Array]`,xr=`[object Boolean]`,Sr=`[object Date]`,Cr=`[object Error]`,wr=`[object Function]`,Tr=`[object Map]`,Er=`[object Number]`,Dr=`[object Object]`,Or=`[object RegExp]`,kr=`[object Set]`,Ar=`[object String]`,jr=`[object WeakMap]`,Mr=`[object ArrayBuffer]`,Nr=`[object DataView]`,Pr=`[object Float32Array]`,Fr=`[object Float64Array]`,Ir=`[object Int8Array]`,Lr=`[object Int16Array]`,Rr=`[object Int32Array]`,zr=`[object Uint8Array]`,Br=`[object Uint8ClampedArray]`,Vr=`[object Uint16Array]`,Hr=`[object Uint32Array]`,Z={};Z[Pr]=Z[Fr]=Z[Ir]=Z[Lr]=Z[Rr]=Z[zr]=Z[Br]=Z[Vr]=Z[Hr]=!0,Z[yr]=Z[br]=Z[Mr]=Z[xr]=Z[Nr]=Z[Sr]=Z[Cr]=Z[wr]=Z[Tr]=Z[Er]=Z[Dr]=Z[Or]=Z[kr]=Z[Ar]=Z[jr]=!1;function Ur(e){return en(e)&&bn(e.length)&&!!Z[Kn(e)]}var Wr=Ur;function Gr(e){return function(t){return e(t)}}var Kr=Gr,qr=typeof exports==`object`&&exports&&!exports.nodeType&&exports,Jr=qr&&typeof module==`object`&&module&&!module.nodeType&&module,Yr=Jr&&Jr.exports===qr&&Wn.process,Xr=function(){try{return Jr&&Jr.require&&Jr.require(`util`).types||Yr&&Yr.binding&&Yr.binding(`util`)}catch{}}(),Zr=Xr&&Xr.isTypedArray,Qr=Zr?Kr(Zr):Wr,$r=Object.prototype.hasOwnProperty;function ei(e,t){var n=Un(e),r=!n&&nn(e),i=!n&&!r&&vr(e),a=!n&&!r&&!i&&Qr(e),o=n||r||i||a,s=o?fr(e.length,String):[],c=s.length;for(var l in e)(t||$r.call(e,l))&&!(o&&(l==`length`||i&&(l==`offset`||l==`parent`)||a&&(l==`buffer`||l==`byteLength`||l==`byteOffset`)||kn(l,c)))&&s.push(l);return s}var ti=ei;function ni(e,t){return function(n){return e(t(n))}}var ri=ni,ii=ri(Object.keys,Object),ai=Object.prototype.hasOwnProperty;function oi(e){if(!ur(e))return ii(e);var t=[];for(var n in Object(e))ai.call(e,n)&&n!=`constructor`&&t.push(n);return t}var si=oi;function ci(e){return sr(e)?ti(e):si(e)}var li=ci;function ui(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var di=ui,fi=Object.prototype.hasOwnProperty;function pi(e){if(!Xt(e))return di(e);var t=ur(e),n=[];for(var r in e)r==`constructor`&&(t||!fi.call(e,r))||n.push(r);return n}var mi=pi;function hi(e){return sr(e)?ti(e,!0):mi(e)}var gi=hi,_i=ri(Object.getPrototypeOf,Object),vi=`[object Object]`,yi=Function.prototype,bi=Object.prototype,xi=yi.toString,Si=bi.hasOwnProperty,Ci=xi.call(Object);function wi(e){if(!en(e)||Kn(e)!=vi)return!1;var t=_i(e);if(t===null)return!0;var n=Si.call(t,`constructor`)&&t.constructor;return typeof n==`function`&&n instanceof n&&xi.call(n)==Ci}var Ti=wi;function Ei(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}var Di=Ei;function Oi(){this.__data__=new In,this.size=0}var ki=Oi;function Ai(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var ji=Ai;function Mi(e){return this.__data__.get(e)}var Ni=Mi;function Pi(e){return this.__data__.has(e)}var Fi=Pi,Ii=200;function Li(e,t){var n=this.__data__;if(n instanceof In){var r=n.__data__;if(!En||r.length<Ii-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Qt(r)}return n.set(e,t),this.size=n.size,this}var Ri=Li;function zi(e){this.size=(this.__data__=new In(e)).size}zi.prototype.clear=ki,zi.prototype.delete=ji,zi.prototype.get=Ni,zi.prototype.has=Fi,zi.prototype.set=Ri;var Bi=zi;function Vi(e,t){return e&&ar(t,li(t),e)}var Hi=Vi;function Ui(e,t){return e&&ar(t,gi(t),e)}var Wi=Ui,Gi=typeof exports==`object`&&exports&&!exports.nodeType&&exports,Ki=Gi&&typeof module==`object`&&module&&!module.nodeType&&module,qi=Ki&&Ki.exports===Gi?ht.Buffer:void 0,Ji=qi?qi.allocUnsafe:void 0;function Yi(e,t){if(t)return e.slice();var n=e.length,r=Ji?Ji(n):new e.constructor(n);return e.copy(r),r}var Xi=Yi;function Zi(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var Qi=Zi;function $i(){return[]}var ea=$i,ta=Object.prototype.propertyIsEnumerable,na=Object.getOwnPropertySymbols,ra=na?function(e){return e==null?[]:(e=Object(e),Qi(na(e),function(t){return ta.call(e,t)}))}:ea;function ia(e,t){return ar(e,ra(e),t)}var aa=ia,oa=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Rn(t,ra(e)),e=_i(e);return t}:ea;function sa(e,t){return ar(e,oa(e),t)}var ca=sa;function la(e,t,n){var r=t(e);return Un(e)?r:Rn(r,n(e))}var ua=la;function da(e){return ua(e,li,ra)}var fa=da;function pa(e){return ua(e,gi,oa)}var ma=pa,ha=Sn(ht,`DataView`),ga=Sn(ht,`Promise`),_a=Sn(ht,`Set`),va=`[object Map]`,ya=`[object Object]`,ba=`[object Promise]`,xa=`[object Set]`,Sa=`[object WeakMap]`,Ca=`[object DataView]`,wa=mn(ha),Ta=mn(En),Ea=mn(ga),Da=mn(_a),Oa=mn(Zn),ka=Kn;(ha&&ka(new ha(new ArrayBuffer(1)))!=Ca||En&&ka(new En)!=va||ga&&ka(ga.resolve())!=ba||_a&&ka(new _a)!=xa||Zn&&ka(new Zn)!=Sa)&&(ka=function(e){var t=Kn(e),n=t==ya?e.constructor:void 0,r=n?mn(n):``;if(r)switch(r){case wa:return Ca;case Ta:return va;case Ea:return ba;case Da:return xa;case Oa:return Sa}return t});var Aa=ka,ja=Object.prototype.hasOwnProperty;function Ma(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]==`string`&&ja.call(e,`index`)&&(n.index=e.index,n.input=e.input),n}var Na=Ma,Pa=ht.Uint8Array;function Fa(e){var t=new e.constructor(e.byteLength);return new Pa(t).set(new Pa(e)),t}var Ia=Fa;function La(e,t){var n=t?Ia(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var Ra=La,za=/\w*$/;function Ba(e){var t=new e.constructor(e.source,za.exec(e));return t.lastIndex=e.lastIndex,t}var Va=Ba,Ha=Ft?Ft.prototype:void 0,Ua=Ha?Ha.valueOf:void 0;function Wa(e){return Ua?Object(Ua.call(e)):{}}var Ga=Wa;function Ka(e,t){var n=t?Ia(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var qa=Ka,Ja=`[object Boolean]`,Ya=`[object Date]`,Xa=`[object Map]`,Za=`[object Number]`,Qa=`[object RegExp]`,$a=`[object Set]`,eo=`[object String]`,to=`[object Symbol]`,no=`[object ArrayBuffer]`,ro=`[object DataView]`,io=`[object Float32Array]`,ao=`[object Float64Array]`,oo=`[object Int8Array]`,so=`[object Int16Array]`,co=`[object Int32Array]`,lo=`[object Uint8Array]`,uo=`[object Uint8ClampedArray]`,fo=`[object Uint16Array]`,po=`[object Uint32Array]`;function mo(e,t,n){var r=e.constructor;switch(t){case no:return Ia(e);case Ja:case Ya:return new r(+e);case ro:return Ra(e,n);case io:case ao:case oo:case so:case co:case lo:case uo:case fo:case po:return qa(e,n);case Xa:return new r;case Za:case eo:return new r(e);case Qa:return Va(e);case $a:return new r;case to:return Ga(e)}}var ho=mo;function go(e){return typeof e.constructor==`function`&&!ur(e)?$n(_i(e)):{}}var _o=go,vo=`[object Map]`;function yo(e){return en(e)&&Aa(e)==vo}var bo=yo,xo=Xr&&Xr.isMap,So=xo?Kr(xo):bo,Co=`[object Set]`;function wo(e){return en(e)&&Aa(e)==Co}var To=wo,Eo=Xr&&Xr.isSet,Do=Eo?Kr(Eo):To,Oo=1,ko=2,Ao=4,jo=`[object Arguments]`,Mo=`[object Array]`,No=`[object Boolean]`,Po=`[object Date]`,Fo=`[object Error]`,Io=`[object Function]`,Lo=`[object GeneratorFunction]`,Ro=`[object Map]`,zo=`[object Number]`,Bo=`[object Object]`,Vo=`[object RegExp]`,Ho=`[object Set]`,Uo=`[object String]`,Wo=`[object Symbol]`,Go=`[object WeakMap]`,Ko=`[object ArrayBuffer]`,qo=`[object DataView]`,Jo=`[object Float32Array]`,Yo=`[object Float64Array]`,Xo=`[object Int8Array]`,Zo=`[object Int16Array]`,Qo=`[object Int32Array]`,$o=`[object Uint8Array]`,es=`[object Uint8ClampedArray]`,ts=`[object Uint16Array]`,ns=`[object Uint32Array]`,Q={};Q[jo]=Q[Mo]=Q[Ko]=Q[qo]=Q[No]=Q[Po]=Q[Jo]=Q[Yo]=Q[Xo]=Q[Zo]=Q[Qo]=Q[Ro]=Q[zo]=Q[Bo]=Q[Vo]=Q[Ho]=Q[Uo]=Q[Wo]=Q[$o]=Q[es]=Q[ts]=Q[ns]=!0,Q[Fo]=Q[Io]=Q[Go]=!1;function rs(e,t,n,r,i,a){var o,s=t&Oo,c=t&ko,l=t&Ao;if(n&&(o=i?n(e,r,i,a):n(e)),o!==void 0)return o;if(!Xt(e))return e;var u=Un(e);if(u){if(o=Na(e),!s)return tr(e,o)}else{var d=Aa(e),f=d==Io||d==Lo;if(vr(e))return Xi(e,s);if(d==Bo||d==jo||f&&!i){if(o=c||f?{}:_o(e),!s)return c?ca(e,Wi(o,e)):aa(e,Hi(o,e))}else{if(!Q[d])return i?e:{};o=ho(e,d,s)}}a||=new Bi;var p=a.get(e);if(p)return p;a.set(e,o),Do(e)?e.forEach(function(r){o.add(rs(r,t,n,r,e,a))}):So(e)&&e.forEach(function(r,i){o.set(i,rs(r,t,n,i,e,a))});var m=u?void 0:(l?c?ma:fa:c?gi:li)(e);return rr(m||e,function(r,i){m&&(i=r,r=e[i]),Vn(o,i,rs(r,t,n,i,e,a))}),o}var is=rs,as=`__lodash_hash_undefined__`;function os(e){return this.__data__.set(e,as),this}var ss=os;function cs(e){return this.__data__.has(e)}var ls=cs;function us(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Qt;++t<n;)this.add(e[t])}us.prototype.add=us.prototype.push=ss,us.prototype.has=ls;var ds=us;function fs(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var ps=fs;function ms(e,t){return e.has(t)}var hs=ms,gs=1,_s=2;function vs(e,t,n,r,i,a){var o=n&gs,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var l=a.get(e),u=a.get(t);if(l&&u)return l==t&&u==e;var d=-1,f=!0,p=n&_s?new ds:void 0;for(a.set(e,t),a.set(t,e);++d<s;){var m=e[d],h=t[d];if(r)var g=o?r(h,m,d,t,e,a):r(m,h,d,e,t,a);if(g!==void 0){if(g)continue;f=!1;break}if(p){if(!ps(t,function(e,t){if(!hs(p,t)&&(m===e||i(m,e,n,r,a)))return p.push(t)})){f=!1;break}}else if(!(m===h||i(m,h,n,r,a))){f=!1;break}}return a.delete(e),a.delete(t),f}var ys=vs;function bs(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}var xs=bs;function Ss(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var Cs=Ss,ws=1,Ts=2,Es=`[object Boolean]`,Ds=`[object Date]`,Os=`[object Error]`,ks=`[object Map]`,As=`[object Number]`,js=`[object RegExp]`,Ms=`[object Set]`,Ns=`[object String]`,Ps=`[object Symbol]`,Fs=`[object ArrayBuffer]`,Is=`[object DataView]`,Ls=Ft?Ft.prototype:void 0,Rs=Ls?Ls.valueOf:void 0;function zs(e,t,n,r,i,a,o){switch(n){case Is:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Fs:return!(e.byteLength!=t.byteLength||!a(new Pa(e),new Pa(t)));case Es:case Ds:case As:return an(+e,+t);case Os:return e.name==t.name&&e.message==t.message;case js:case Ns:return e==t+``;case ks:var s=xs;case Ms:var c=r&ws;if(s||=Cs,e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;r|=Ts,o.set(e,t);var u=ys(s(e),s(t),r,i,a,o);return o.delete(e),u;case Ps:if(Rs)return Rs.call(e)==Rs.call(t)}return!1}var Bs=zs,Vs=1,Hs=Object.prototype.hasOwnProperty;function Us(e,t,n,r,i,a){var o=n&Vs,s=fa(e),c=s.length;if(c!=fa(t).length&&!o)return!1;for(var l=c;l--;){var u=s[l];if(!(o?u in t:Hs.call(t,u)))return!1}var d=a.get(e),f=a.get(t);if(d&&f)return d==t&&f==e;var p=!0;a.set(e,t),a.set(t,e);for(var m=o;++l<c;){u=s[l];var h=e[u],g=t[u];if(r)var _=o?r(g,h,u,t,e,a):r(h,g,u,e,t,a);if(!(_===void 0?h===g||i(h,g,n,r,a):_)){p=!1;break}m||=u==`constructor`}if(p&&!m){var v=e.constructor,y=t.constructor;v!=y&&`constructor`in e&&`constructor`in t&&!(typeof v==`function`&&v instanceof v&&typeof y==`function`&&y instanceof y)&&(p=!1)}return a.delete(e),a.delete(t),p}var Ws=Us,Gs=1,Ks=`[object Arguments]`,qs=`[object Array]`,Js=`[object Object]`,Ys=Object.prototype.hasOwnProperty;function Xs(e,t,n,r,i,a){var o=Un(e),s=Un(t),c=o?qs:Aa(e),l=s?qs:Aa(t);c=c==Ks?Js:c,l=l==Ks?Js:l;var u=c==Js,d=l==Js,f=c==l;if(f&&vr(e)){if(!vr(t))return!1;o=!0,u=!1}if(f&&!u)return a||=new Bi,o||Qr(e)?ys(e,t,n,r,i,a):Bs(e,t,c,n,r,i,a);if(!(n&Gs)){var p=u&&Ys.call(e,`__wrapped__`),m=d&&Ys.call(t,`__wrapped__`);if(p||m){var h=p?e.value():e,g=m?t.value():t;return a||=new Bi,i(h,g,n,r,a)}}return f?(a||=new Bi,Ws(e,t,n,r,i,a)):!1}var Zs=Xs;function Qs(e,t,n,r,i){return e===t?!0:e==null||t==null||!en(e)&&!en(t)?e!==e&&t!==t:Zs(e,t,n,r,Qs,i)}var $s=Qs;function ec(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var tc=ec;function nc(e,t){return t.length<2?e:wn(e,Di(t,0,-1))}var rc=nc;function ic(e,t){return $s(e,t)}var ac=ic,oc=Object.prototype.hasOwnProperty;function sc(e,t){t=gn(t,e);var n=-1,r=t.length;if(!r)return!0;for(var i=e==null||typeof e!=`object`&&typeof e!=`function`;++n<r;){var a=t[n];if(typeof a==`string`){if(a===`__proto__`&&!oc.call(e,`__proto__`))return!1;if(a===`constructor`&&n+1<r&&typeof t[n+1]==`string`&&t[n+1]===`prototype`){if(i&&n===0)continue;return!1}}}var o=rc(e,t);return o==null||delete o[Nn(tc(t))]}var cc=sc;function lc(e){return Ti(e)?void 0:e}var uc=lc,dc=1,fc=2,pc=4,mc=sn(function(e,t){var n={};if(e==null)return n;var r=!1;t=Yn(t,function(t){return t=gn(t,e),r||=t.length>1,t}),ar(e,ma(e),n),r&&(n=is(n,dc|fc|pc,uc));for(var i=t.length;i--;)cc(n,t[i]);return n}),hc=E(f(W({name:`ElIcon`,inheritAttrs:!1,__name:`icon`,props:k({size:{type:y([Number,String])},color:{type:String}}),setup(e){let t=e,n=P(`icon`),r=V(()=>{let{size:e,color:n}=t,r=T(e);return!r&&!n?{}:{fontSize:r,"--color":n}});return(e,t)=>(I(),U(`i`,qe({class:z(n).b(),style:r.value},e.$attrs),[G(e.$slots,`default`)],16))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue`]])),gc=W({name:`CaretRight`,__name:`caret-right`,setup(e){return(e,t)=>(I(),U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[K(`path`,{fill:`currentColor`,d:`M384 192v640l384-320.064z`})]))}}),_c=W({name:`CircleCheck`,__name:`circle-check`,setup(e){return(e,t)=>(I(),U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[K(`path`,{fill:`currentColor`,d:`M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896`}),K(`path`,{fill:`currentColor`,d:`M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752z`})]))}}),vc=W({name:`CircleClose`,__name:`circle-close`,setup(e){return(e,t)=>(I(),U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[K(`path`,{fill:`currentColor`,d:`m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z`}),K(`path`,{fill:`currentColor`,d:`M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896`})]))}}),yc=W({name:`Hide`,__name:`hide`,setup(e){return(e,t)=>(I(),U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[K(`path`,{fill:`currentColor`,d:`M876.8 156.8c0-9.6-3.2-16-9.6-22.4s-12.8-9.6-22.4-9.6-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176S0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4s3.2 16 9.6 22.4 12.8 9.6 22.4 9.6 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4m-646.4 528Q115.2 579.2 76.8 512q43.2-72 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4m140.8-96Q352 555.2 352 512c0-44.8 16-83.2 48-112s67.2-48 112-48c28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6q-43.2 72-153.6 172.8c-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176S1024 528 1024 512s-48.001-73.6-134.401-176`}),K(`path`,{fill:`currentColor`,d:`M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112s-67.2 48-112 48`})]))}}),bc=W({name:`Loading`,__name:`loading`,setup(e){return(e,t)=>(I(),U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[K(`path`,{fill:`currentColor`,d:`M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248m452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248M828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0`})]))}}),xc=W({name:`View`,__name:`view`,setup(e){return(e,t)=>(I(),U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 1024 1024`},[K(`path`,{fill:`currentColor`,d:`M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288m0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.19 160.19 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160`})]))}}),Sc=y([String,Object,Function]),Cc={validating:bc,success:_c,error:vc},wc=()=>oe&&/firefox/i.test(window.navigator.userAgent),Tc=()=>oe&&/android/i.test(window.navigator.userAgent),Ec=void 0,Dc={height:`0`,visibility:`hidden`,overflow:wc()?``:`hidden`,position:`absolute`,"z-index":`-1000`,top:`0`,right:`0`},Oc=[`letter-spacing`,`line-height`,`padding-top`,`padding-bottom`,`font-family`,`font-weight`,`font-size`,`text-rendering`,`text-transform`,`width`,`text-indent`,`padding-left`,`padding-right`,`border-width`,`box-sizing`,`word-break`],kc=e=>{let t=Number.parseFloat(e);return Number.isNaN(t)?e:t};function Ac(e){let t=window.getComputedStyle(e),n=t.getPropertyValue(`box-sizing`),r=Number.parseFloat(t.getPropertyValue(`padding-bottom`))+Number.parseFloat(t.getPropertyValue(`padding-top`)),i=Number.parseFloat(t.getPropertyValue(`border-bottom-width`))+Number.parseFloat(t.getPropertyValue(`border-top-width`));return{contextStyle:Oc.map(e=>[e,t.getPropertyValue(e)]),paddingSize:r,borderSize:i,boxSizing:n}}function jc(e,t=1,n){var r;Ec||(Ec=document.createElement(`textarea`),(e.parentNode??document.body).appendChild(Ec));let{paddingSize:i,borderSize:a,boxSizing:o,contextStyle:s}=Ac(e);s.forEach(([e,t])=>Ec?.style.setProperty(e,t)),Object.entries(Dc).forEach(([e,t])=>Ec?.style.setProperty(e,t,`important`)),Ec.value=e.value||e.placeholder||``;let c=Ec.scrollHeight,l={};o===`border-box`?c+=a:o===`content-box`&&(c-=i),Ec.value=``;let u=Ec.scrollHeight-i;if(me(t)){let e=u*t;o===`border-box`&&(e=e+i+a),c=Math.max(e,c),l.minHeight=`${e}px`}if(me(n)){let e=u*n;o===`border-box`&&(e=e+i+a),c=Math.min(e,c)}return l.height=`${c}px`,(r=Ec.parentNode)==null||r.removeChild(Ec),Ec=void 0,l}var Mc=e=>e,Nc=k({id:{type:String,default:void 0},size:O,disabled:{type:Boolean,default:void 0},modelValue:{type:y([String,Number,Object]),default:``},modelModifiers:{type:y(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:y(String),default:`text`},resize:{type:String,values:[`none`,`both`,`horizontal`,`vertical`]},autosize:{type:y([Boolean,Object]),default:!1},autocomplete:{type:y(String),default:`off`},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:Sc,default:vc},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:[`inside`,`outside`],default:`inside`},suffixIcon:{type:Sc},prefixIcon:{type:Sc},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:y([Object,Array,String]),default:()=>Mc({})},autofocus:Boolean,rows:{type:Number,default:2},...jn([`ariaLabel`]),inputmode:{type:y(String),default:void 0},name:String}),Pc={[Gt]:e=>nt(e),input:e=>nt(e),change:(e,t)=>nt(e)&&(t instanceof Event||t===void 0),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},Fc=[`class`,`style`],Ic=/^on[A-Z]/,Lc=(t={})=>{let{excludeListeners:n=!1,excludeKeys:r}=t,i=V(()=>(r?.value||[]).concat(Fc)),a=Ye();return a?V(()=>Se(Object.entries(a.proxy?.$attrs).filter(([e])=>!i.value.includes(e)&&!(n&&Ic.test(e))))):(e(`use-attrs`,`getCurrentInstance() returned null. useAttrs() must be called at the top of a setup function`),V(()=>({})))},Rc=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute(`tabIndex`)!==null)return!0;if(e.tabIndex<0||e.hasAttribute(`disabled`)||e.getAttribute(`aria-disabled`)===`true`)return!1;switch(e.nodeName){case`A`:return!!e.href&&e.rel!==`ignore`;case`INPUT`:return!(e.type===`hidden`||e.type===`file`);case`BUTTON`:case`SELECT`:case`TEXTAREA`:return!0;default:return!1}};function zc(e,{disabled:t,beforeFocus:n,afterFocus:r,beforeBlur:i,afterBlur:a}={}){let{emit:o}=Ye(),s=Me(),c=R(!1),l=e=>{let i=Ze(n)?n(e):!1;z(t)||c.value||i||(c.value=!0,o(`focus`,e),r?.())},u=e=>{let n=Ze(i)?i(e):!1;z(t)||e.relatedTarget&&s.value?.contains(e.relatedTarget)||n||(c.value=!1,o(`blur`,e),a?.())};return L([s,()=>z(t)],([e,t])=>{e&&(t?e.removeAttribute(`tabindex`):e.setAttribute(`tabindex`,`-1`))}),be(s,`focus`,l,!0),be(s,`blur`,u,!0),be(s,`click`,n=>{var r;z(t)||Rc(n.target)||s.value?.contains(document.activeElement)&&s.value!==document.activeElement||(r=e.value)==null||r.focus()},!0),{isFocused:c,wrapperRef:s,handleFocus:l,handleBlur:u}}var Bc=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);function Vc({afterComposition:e,emit:t}){let n=R(!1),r=e=>{t?.(`compositionstart`,e),n.value=!0},i=e=>{t?.(`compositionupdate`,e);let r=e.target?.value;n.value=!Bc(r[r.length-1]||``)},a=r=>{t?.(`compositionend`,r),n.value&&(n.value=!1,ct(()=>e(r)))};return{isComposing:n,handleComposition:e=>{e.type===`compositionend`?a(e):i(e)},handleCompositionStart:r,handleCompositionUpdate:i,handleCompositionEnd:a}}function Hc(e){let t;function n(){if(e.value==null)return;let{selectionStart:n,selectionEnd:r,value:i}=e.value;n==null||r==null||(t={selectionStart:n,selectionEnd:r,value:i,beforeTxt:i.slice(0,Math.max(0,n)),afterTxt:i.slice(Math.max(0,r))})}function r(){if(e.value==null||t==null)return;let{value:n}=e.value,{beforeTxt:r,afterTxt:i,selectionStart:a}=t;if(r==null||i==null||a==null)return;let o=n.length;if(n.endsWith(i))o=n.length-i.length;else if(n.startsWith(r))o=r.length;else{let e=r[a-1],t=n.indexOf(e,a-1);t!==-1&&(o=t+1)}e.value.setSelectionRange(o,o)}return[n,r]}var Uc=[`id`,`name`,`minlength`,`maxlength`,`type`,`disabled`,`readonly`,`autocomplete`,`tabindex`,`aria-label`,`placeholder`,`form`,`autofocus`,`role`,`inputmode`],Wc=[`id`,`name`,`minlength`,`maxlength`,`tabindex`,`disabled`,`readonly`,`autocomplete`,`aria-label`,`placeholder`,`form`,`autofocus`,`rows`,`role`],Gc=`ElInput`,Kc=E(f(W({name:Gc,inheritAttrs:!1,__name:`input`,props:Nc,emits:Pc,setup(t,{expose:n,emit:r}){let i=t,a=r,o=Pe(),s=Lc(),c=Ie(),l=V(()=>[i.type===`textarea`?y.b():v.b(),v.m(g.value),v.is(`disabled`,_.value),v.is(`exceed`,le.value),{[v.b(`group`)]:c.prepend||c.append,[v.m(`prefix`)]:c.prefix||i.prefixIcon,[v.m(`suffix`)]:c.suffix||i.suffixIcon||i.clearable||i.showPassword,[v.bm(`suffix`,`password-clear`)]:ie.value&&ae.value,[v.b(`hidden`)]:i.type===`hidden`},o.class]),u=V(()=>[v.e(`wrapper`),v.is(`focus`,O.value)]),{form:f,formItem:p}=Ut(),{inputId:h}=yt(i,{formItemContext:p}),g=m(),_=d(),v=P(`input`),y=P(`textarea`),b=Me(),x=Me(),S=R(!1),C=R(!1),w=R(),T=Me(i.inputStyle),E=V(()=>b.value||x.value),{wrapperRef:D,isFocused:O,handleFocus:k,handleBlur:A}=zc(E,{disabled:_,afterBlur(){var t;i.validateEvent&&((t=p?.validate)==null||t.call(p,`blur`).catch(t=>e(t)))}}),ee=V(()=>f?.statusIcon??!1),j=V(()=>p?.validateState||``),M=V(()=>j.value&&Cc[j.value]),te=V(()=>C.value?xc:yc),ne=V(()=>[o.style]),re=V(()=>[i.inputStyle,T.value,{resize:i.resize}]),N=V(()=>ue(i.modelValue)?``:String(i.modelValue)),ie=V(()=>i.clearable&&!_.value&&!i.readonly&&!!N.value&&(O.value||S.value)),ae=V(()=>i.showPassword&&!_.value&&!!N.value),se=V(()=>i.showWordLimit&&!!i.maxlength&&(i.type===`text`||i.type===`textarea`)&&!_.value&&!i.readonly&&!i.showPassword),ce=V(()=>N.value.length),le=V(()=>!!se.value&&ce.value>Number(i.maxlength)),de=V(()=>!!c.suffix||!!i.suffixIcon||ie.value||i.showPassword||se.value||!!j.value&&ee.value),pe=V(()=>!!Object.keys(i.modelModifiers).length),[me,he]=Hc(b);fe(x,e=>{if(_e(),!se.value||i.resize!==`both`&&i.resize!==`horizontal`)return;let{width:t}=e[0].contentRect;w.value={right:`calc(100% - ${t+22-10}px)`}});let ge=()=>{let{type:e,autosize:t}=i;if(!(!oe||e!==`textarea`||!x.value))if(t){let e=Ke(t)?t.minRows:void 0,n=Ke(t)?t.maxRows:void 0,r=jc(x.value,e,n);T.value={overflowY:`hidden`,...r},ct(()=>{x.value.offsetHeight,T.value=r})}else T.value={minHeight:jc(x.value).minHeight}},_e=(e=>{let t=!1;return()=>{t||!i.autosize||x.value?.offsetParent!==null&&(setTimeout(e),t=!0)}})(ge),ve=()=>{let e=E.value,t=i.formatter?i.formatter(N.value):N.value;!e||e.value===t||i.type===`file`||(e.value=t)},ye=e=>{let{trim:t,number:n}=i.modelModifiers;return t&&(e=e.trim()),n&&(e=`${kc(e)}`),i.formatter&&i.parser&&(e=i.parser(e)),e},be=async e=>{if(Se.value)return;let{lazy:t}=i.modelModifiers,{value:n}=e.target;if(t){a(qt,n);return}if(n=ye(n),String(n)===N.value){i.formatter&&ve();return}me(),a(Gt,n),a(qt,n),await ct(),(i.formatter&&i.parser||!pe.value)&&ve(),he()},xe=async e=>{let{value:t}=e.target;t=ye(t),i.modelModifiers.lazy&&a(Gt,t),a(wt,t,e),await ct(),ve()},{isComposing:Se,handleCompositionStart:F,handleCompositionUpdate:Ce,handleCompositionEnd:we}=Vc({emit:a,afterComposition:be}),Te=()=>{C.value=!C.value},Ee=()=>E.value?.focus(),Oe=()=>E.value?.blur(),Ae=e=>{S.value=!1,a(`mouseleave`,e)},je=e=>{S.value=!0,a(`mouseenter`,e)},Ne=e=>{a(`keydown`,e)},Fe=()=>{var e;(e=E.value)==null||e.select()},Le=()=>{a(Gt,``),a(wt,``),a(`clear`),a(qt,``)};return L(()=>i.modelValue,()=>{var t;ct(()=>ge()),i.validateEvent&&((t=p?.validate)==null||t.call(p,`change`).catch(t=>e(t)))}),L(N,e=>{if(!E.value)return;let{trim:t,number:n}=i.modelModifiers,r=E.value.value,a=(n||i.type===`number`)&&!/^0\d/.test(r)?`${kc(r)}`:r;a!==e&&(document.activeElement===E.value&&E.value.type!==`range`&&t&&a.trim()===e||ve())}),L(()=>i.type,async()=>{await ct(),ve(),ge()}),ke(()=>{!i.formatter&&i.parser&&e(Gc,`If you set the parser, you also need to set the formatter.`),ve(),ct(ge)}),n({input:b,textarea:x,ref:E,textareaStyle:re,autosize:Ve(i,`autosize`),isComposing:Se,focus:Ee,blur:Oe,select:Fe,clear:Le,resizeTextarea:ge}),(e,t)=>(I(),U(`div`,{class:J([l.value,{[z(v).bm(`group`,`append`)]:e.$slots.append,[z(v).bm(`group`,`prepend`)]:e.$slots.prepend}]),style:Je(ne.value),onMouseenter:je,onMouseleave:Ae},[H(` input `),e.type===`textarea`?(I(),U(at,{key:1},[H(` textarea `),K(`textarea`,qe({id:z(h),ref_key:`textarea`,ref:x,class:[z(y).e(`inner`),z(v).is(`focus`,z(O))]},z(s),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:z(_),readonly:e.readonly,autocomplete:e.autocomplete,style:re.value,"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t[3]||=(...e)=>z(F)&&z(F)(...e),onCompositionupdate:t[4]||=(...e)=>z(Ce)&&z(Ce)(...e),onCompositionend:t[5]||=(...e)=>z(we)&&z(we)(...e),onInput:be,onFocus:t[6]||=(...e)=>z(k)&&z(k)(...e),onBlur:t[7]||=(...e)=>z(A)&&z(A)(...e),onChange:xe,onKeydown:Ne}),null,16,Wc),se.value?(I(),U(`span`,{key:0,style:Je(w.value),class:J([z(v).e(`count`),z(v).is(`outside`,e.wordLimitPosition===`outside`)])},$e(ce.value)+` / `+$e(e.maxlength),7)):H(`v-if`,!0)],64)):(I(),U(at,{key:0},[H(` prepend slot `),e.$slots.prepend?(I(),U(`div`,{key:0,class:J(z(v).be(`group`,`prepend`))},[G(e.$slots,`prepend`)],2)):H(`v-if`,!0),K(`div`,{ref_key:`wrapperRef`,ref:D,class:J(u.value)},[H(` prefix slot `),e.$slots.prefix||e.prefixIcon?(I(),U(`span`,{key:0,class:J(z(v).e(`prefix`))},[K(`span`,{class:J(z(v).e(`prefix-inner`))},[G(e.$slots,`prefix`),e.prefixIcon?(I(),Y(z(hc),{key:0,class:J(z(v).e(`icon`))},{default:B(()=>[(I(),Y(Qe(e.prefixIcon)))]),_:1},8,[`class`])):H(`v-if`,!0)],2)],2)):H(`v-if`,!0),K(`input`,qe({id:z(h),ref_key:`input`,ref:b,class:z(v).e(`inner`)},z(s),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?C.value?`text`:`password`:e.type,disabled:z(_),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:t[0]||=(...e)=>z(F)&&z(F)(...e),onCompositionupdate:t[1]||=(...e)=>z(Ce)&&z(Ce)(...e),onCompositionend:t[2]||=(...e)=>z(we)&&z(we)(...e),onInput:be,onChange:xe,onKeydown:Ne}),null,16,Uc),H(` suffix slot `),de.value?(I(),U(`span`,{key:1,class:J(z(v).e(`suffix`))},[K(`span`,{class:J(z(v).e(`suffix-inner`))},[!ie.value||!ae.value||!se.value?(I(),U(at,{key:0},[G(e.$slots,`suffix`),e.suffixIcon?(I(),Y(z(hc),{key:0,class:J(z(v).e(`icon`))},{default:B(()=>[(I(),Y(Qe(e.suffixIcon)))]),_:1},8,[`class`])):H(`v-if`,!0)],64)):H(`v-if`,!0),ie.value?(I(),Y(z(hc),{key:1,class:J([z(v).e(`icon`),z(v).e(`clear`)]),onMousedown:q(z(De),[`prevent`]),onClick:Le},{default:B(()=>[(I(),Y(Qe(e.clearIcon)))]),_:1},8,[`class`,`onMousedown`])):H(`v-if`,!0),ae.value?(I(),Y(z(hc),{key:2,class:J([z(v).e(`icon`),z(v).e(`password`)]),onClick:Te,onMousedown:q(z(De),[`prevent`]),onMouseup:q(z(De),[`prevent`])},{default:B(()=>[(I(),Y(Qe(te.value)))]),_:1},8,[`class`,`onMousedown`,`onMouseup`])):H(`v-if`,!0),se.value?(I(),U(`span`,{key:3,class:J([z(v).e(`count`),z(v).is(`outside`,e.wordLimitPosition===`outside`)])},[K(`span`,{class:J(z(v).e(`count-inner`))},$e(ce.value)+` / `+$e(e.maxlength),3)],2)):H(`v-if`,!0),j.value&&M.value&&ee.value?(I(),Y(z(hc),{key:4,class:J([z(v).e(`icon`),z(v).e(`validateIcon`),z(v).is(`loading`,j.value===`validating`)])},{default:B(()=>[(I(),Y(Qe(M.value)))]),_:1},8,[`class`])):H(`v-if`,!0)],2)],2)):H(`v-if`,!0)],2),H(` append slot `),e.$slots.append?(I(),U(`div`,{key:1,class:J(z(v).be(`group`,`append`))},[G(e.$slots,`append`)],2)):H(`v-if`,!0)],64))],38))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue`]])),qc={tab:`Tab`,enter:`Enter`,space:`Space`,left:`ArrowLeft`,up:`ArrowUp`,right:`ArrowRight`,down:`ArrowDown`,esc:`Escape`,delete:`Delete`,backspace:`Backspace`,numpadEnter:`NumpadEnter`,pageUp:`PageUp`,pageDown:`PageDown`,home:`Home`,end:`End`},Jc=e=>{if(e.code&&e.code!==`Unidentified`)return e.code;let t=Yc(e);if(t){if(Object.values(qc).includes(t))return t;switch(t){case` `:return qc.space;default:return``}}return``},Yc=e=>{let t=e.key&&e.key!==`Unidentified`?e.key:``;if(!t&&e.type===`keyup`&&Tc()){let n=e.target;t=n.value.charAt(n.selectionStart-1)}return t},Xc=({from:t,replacement:n,scope:r,version:i,ref:a,type:o=`API`},s)=>{L(()=>z(s),s=>{s&&e(r,`[${o}] ${t} is about to be deprecated in version ${i}, please use ${n} instead.
For more detail, please visit: ${a}
`)},{immediate:!0})},Zc={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:{type:Boolean,default:void 0},checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:O,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},ariaLabel:String,...jn([`ariaControls`])},Qc={[Gt]:e=>nt(e)||me(e)||j(e),change:e=>nt(e)||me(e)||j(e)},$c=Symbol(`checkboxGroupContextKey`),el=({model:e,isChecked:t})=>{let n=X($c,void 0),r=X(x,void 0),i=V(()=>{let r=n?.max?.value,i=n?.min?.value;return!M(r)&&e.value.length>=r&&!t.value||!M(i)&&e.value.length<=i&&t.value});return{isDisabled:d(V(()=>n===void 0?r?.disabled??i.value:n.disabled?.value||i.value)),isLimitDisabled:i}},tl=(t,{model:n,isLimitExceeded:r,hasOwnLabel:i,isDisabled:a,isLabeledByFormItem:o})=>{let s=X($c,void 0),{formItem:c}=Ut(),{emit:l}=Ye();function u(e){return[!0,t.trueValue,t.trueLabel].includes(e)?t.trueValue??t.trueLabel??!0:t.falseValue??t.falseLabel??!1}function d(e,t){l(wt,u(e),t)}function f(e){if(r.value)return;let t=e.target;l(wt,u(t.checked),e)}async function p(e){r.value||!i.value&&!a.value&&o.value&&(e.composedPath().some(e=>e.tagName===`LABEL`)||(n.value=u([!1,t.falseValue,t.falseLabel].includes(n.value)),await ct(),d(n.value,e)))}let m=V(()=>s?.validateEvent||t.validateEvent);return L(()=>t.modelValue,()=>{m.value&&c?.validate(`change`).catch(t=>e(t))}),{handleChange:f,onClickRoot:p}},nl=e=>{let t=R(!1),{emit:n}=Ye(),r=X($c,void 0),i=V(()=>M(r)===!1),a=R(!1),o=V({get(){return i.value?r?.modelValue?.value:e.modelValue??t.value},set(e){var s;i.value&&it(e)?(a.value=r?.max?.value!==void 0&&e.length>r?.max.value&&e.length>o.value.length,a.value===!1&&((s=r?.changeEvent)==null||s.call(r,e))):(n(Gt,e),t.value=e)}});return{model:o,isGroup:i,isLimitExceeded:a}},rl=(e,t,{model:n})=>{let r=X($c,void 0),i=R(!1),a=V(()=>ye(e.value)?e.label:e.value),o=V(()=>{let t=n.value;return j(t)?t:it(t)?Ke(a.value)?t.map(He).some(e=>ac(e,a.value)):t.map(He).includes(a.value):t==null?!!t:t===e.trueValue||t===e.trueLabel});return{checkboxButtonSize:m(V(()=>r?.size?.value),{prop:!0}),isChecked:o,isFocused:i,checkboxSize:m(V(()=>r?.size?.value)),hasOwnLabel:V(()=>!!t.default||!ye(a.value)),actualValue:a}},il=(e,t)=>{let{formItem:n}=Ut(),{model:r,isGroup:i,isLimitExceeded:a}=nl(e),{isFocused:o,isChecked:s,checkboxButtonSize:c,checkboxSize:l,hasOwnLabel:u,actualValue:d}=rl(e,t,{model:r}),{isDisabled:f}=el({model:r,isChecked:s}),{inputId:p,isLabeledByFormItem:m}=yt(e,{formItemContext:n,disableIdGeneration:u,disableIdManagement:i}),{handleChange:h,onClickRoot:g}=tl(e,{model:r,isLimitExceeded:a,hasOwnLabel:u,isDisabled:f,isLabeledByFormItem:m});return(()=>{function t(){it(r.value)&&!r.value.includes(d.value)?r.value.push(d.value):r.value=e.trueValue??e.trueLabel??!0}e.checked&&t()})(),Xc({from:`label act as value`,replacement:`value`,version:`3.0.0`,scope:`el-checkbox`,ref:`https://element-plus.org/en-US/component/checkbox.html`},V(()=>i.value&&ye(e.value))),Xc({from:`true-label`,replacement:`true-value`,version:`3.0.0`,scope:`el-checkbox`,ref:`https://element-plus.org/en-US/component/checkbox.html`},V(()=>!!e.trueLabel)),Xc({from:`false-label`,replacement:`false-value`,version:`3.0.0`,scope:`el-checkbox`,ref:`https://element-plus.org/en-US/component/checkbox.html`},V(()=>!!e.falseLabel)),{inputId:p,isLabeledByFormItem:m,isChecked:s,isDisabled:f,isFocused:o,checkboxButtonSize:c,checkboxSize:l,hasOwnLabel:u,model:r,actualValue:d,handleChange:h,onClickRoot:g}},al=[`id`,`indeterminate`,`name`,`tabindex`,`disabled`],ol=f(W({name:`ElCheckbox`,__name:`checkbox`,props:Zc,emits:Qc,setup(e){let t=e,{inputId:n,isLabeledByFormItem:r,isChecked:i,isDisabled:a,isFocused:o,checkboxSize:s,hasOwnLabel:c,model:l,actualValue:u,handleChange:d,onClickRoot:f}=il(t,Ie()),p=V(()=>t.trueValue||t.falseValue||t.trueLabel||t.falseLabel?{"true-value":t.trueValue??t.trueLabel??!0,"false-value":t.falseValue??t.falseLabel??!1}:{value:u.value}),m=P(`checkbox`),h=V(()=>[m.b(),m.m(s.value),m.is(`disabled`,a.value),m.is(`bordered`,t.border),m.is(`checked`,i.value)]),g=V(()=>[m.e(`input`),m.is(`disabled`,a.value),m.is(`checked`,i.value),m.is(`indeterminate`,t.indeterminate),m.is(`focus`,o.value)]);return(e,t)=>(I(),Y(Qe(!z(c)&&z(r)?`span`:`label`),{for:!z(c)&&z(r)?null:z(n),class:J(h.value),"aria-controls":e.indeterminate?e.ariaControls:null,"aria-checked":e.indeterminate?`mixed`:void 0,"aria-label":e.ariaLabel,onClick:z(f)},{default:B(()=>[K(`span`,{class:J(g.value)},[lt(K(`input`,qe({id:z(n),"onUpdate:modelValue":t[0]||=e=>ze(l)?l.value=e:null,class:z(m).e(`original`),type:`checkbox`,indeterminate:e.indeterminate,name:e.name,tabindex:e.tabindex,disabled:z(a)},p.value,{onChange:t[1]||=(...e)=>z(d)&&z(d)(...e),onFocus:t[2]||=e=>o.value=!0,onBlur:t[3]||=e=>o.value=!1,onClick:t[4]||=q(()=>{},[`stop`])}),null,16,al),[[Xe,z(l)]]),K(`span`,{class:J(z(m).e(`inner`))},null,2)],2),z(c)?(I(),U(`span`,{key:0,class:J(z(m).e(`label`))},[G(e.$slots,`default`),e.$slots.default?H(`v-if`,!0):(I(),U(at,{key:0},[rt($e(e.label),1)],64))],2)):H(`v-if`,!0)]),_:3},8,[`for`,`class`,`aria-controls`,`aria-checked`,`aria-label`,`onClick`]))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox.vue`]]),sl=[`name`,`tabindex`,`disabled`],cl=f(W({name:`ElCheckboxButton`,__name:`checkbox-button`,props:Zc,emits:Qc,setup(e){let t=e,{isFocused:n,isChecked:r,isDisabled:i,checkboxButtonSize:a,model:o,actualValue:s,handleChange:c}=il(t,Ie()),l=V(()=>t.trueValue||t.falseValue||t.trueLabel||t.falseLabel?{"true-value":t.trueValue??t.trueLabel??!0,"false-value":t.falseValue??t.falseLabel??!1}:{value:s.value}),u=X($c,void 0),d=P(`checkbox`),f=V(()=>{let e=u?.fill?.value??``;return{backgroundColor:e,borderColor:e,color:u?.textColor?.value??``,boxShadow:e?`-1px 0 0 0 ${e}`:void 0}}),p=V(()=>[d.b(`button`),d.bm(`button`,a.value),d.is(`disabled`,i.value),d.is(`checked`,r.value),d.is(`focus`,n.value)]);return(e,t)=>(I(),U(`label`,{class:J(p.value)},[lt(K(`input`,qe({"onUpdate:modelValue":t[0]||=e=>ze(o)?o.value=e:null,class:z(d).be(`button`,`original`),type:`checkbox`,name:e.name,tabindex:e.tabindex,disabled:z(i)},l.value,{onChange:t[1]||=(...e)=>z(c)&&z(c)(...e),onFocus:t[2]||=e=>n.value=!0,onBlur:t[3]||=e=>n.value=!1,onClick:t[4]||=q(()=>{},[`stop`])}),null,16,sl),[[Xe,z(o)]]),e.$slots.default||e.label?(I(),U(`span`,{key:0,class:J(z(d).be(`button`,`inner`)),style:Je(z(r)?f.value:void 0)},[G(e.$slots,`default`,{},()=>[rt($e(e.label),1)])],6)):H(`v-if`,!0)],2))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-button.vue`]]),ll=k({modelValue:{type:y(Array),default:()=>[]},disabled:{type:Boolean,default:void 0},min:Number,max:Number,size:O,fill:String,textColor:String,tag:{type:String,default:`div`},validateEvent:{type:Boolean,default:!0},options:{type:y(Array)},props:{type:y(Object),default:()=>dl},type:{type:String,values:[`checkbox`,`button`],default:`checkbox`},...jn([`ariaLabel`])}),ul={[Gt]:e=>it(e),change:e=>it(e)},dl={label:`label`,value:`value`,disabled:`disabled`},fl=f(W({name:`ElCheckboxGroup`,__name:`checkbox-group`,props:ll,emits:ul,setup(t,{emit:n}){let r=t,i=n,a=P(`checkbox`),o=d(),{formItem:s}=Ut(),{inputId:c,isLabeledByFormItem:l}=yt(r,{formItemContext:s}),u=async e=>{i(Gt,e),await ct(),i(wt,e)},f=V({get(){return r.modelValue},set(e){u(e)}}),p=V(()=>({...dl,...r.props})),m=e=>{let{label:t,value:n,disabled:r}=p.value,i={label:e[t],value:e[n],disabled:e[r]};return{...mc(e,[t,n,r]),...i}},h=V(()=>r.type===`button`?cl:ol);return Ae($c,{...dt(Ue(r),[`size`,`min`,`max`,`validateEvent`,`fill`,`textColor`]),disabled:o,modelValue:f,changeEvent:u}),L(()=>r.modelValue,(t,n)=>{r.validateEvent&&!ac(t,n)&&s?.validate(`change`).catch(t=>e(t))}),(e,t)=>(I(),Y(Qe(e.tag),{id:z(c),class:J(z(a).b(`group`)),role:`group`,"aria-label":z(l)?void 0:e.ariaLabel||`checkbox-group`,"aria-labelledby":z(l)?z(s)?.labelId:void 0},{default:B(()=>[G(e.$slots,`default`,{},()=>[(I(!0),U(at,null,Fe(e.options,(e,t)=>(I(),Y(Qe(h.value),qe({key:t},{ref_for:!0},m(e)),null,16))),128))])]),_:3},8,[`id`,`class`,`aria-label`,`aria-labelledby`]))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-group.vue`]]),pl=E(ol,{CheckboxButton:cl,CheckboxGroup:fl});l(cl),l(fl);var ml=E(f(W({name:`ElCollapseTransition`,__name:`collapse-transition`,setup(e){let t=P(`collapse-transition`),n=e=>{e.style.maxHeight=``,e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom},r={beforeEnter(e){e.dataset||={},e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height&&(e.dataset.elExistsHeight=e.style.height),e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0},enter(e){requestAnimationFrame(()=>{e.dataset.oldOverflow=e.style.overflow,e.dataset.elExistsHeight?e.style.maxHeight=e.dataset.elExistsHeight:e.scrollHeight===0?e.style.maxHeight=0:e.style.maxHeight=`${e.scrollHeight}px`,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom,e.style.overflow=`hidden`})},afterEnter(e){e.style.maxHeight=``,e.style.overflow=e.dataset.oldOverflow},enterCancelled(e){n(e)},beforeLeave(e){e.dataset||={},e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.maxHeight=`${e.scrollHeight}px`,e.style.overflow=`hidden`},leave(e){e.scrollHeight!==0&&(e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0)},afterLeave(e){n(e)},leaveCancelled(e){n(e)}};return(e,n)=>(I(),Y(tt,qe({name:z(t).b()},Ne(r)),{default:B(()=>[G(e.$slots,`default`)]),_:3},16,[`name`]))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue`]])),hl=E(f(W({name:`ElDivider`,__name:`divider`,props:k({direction:{type:String,values:[`horizontal`,`vertical`],default:`horizontal`},contentPosition:{type:String,values:[`left`,`center`,`right`],default:`center`},borderStyle:{type:y(String),default:`solid`}}),setup(e){let t=e,n=P(`divider`),r=V(()=>n.cssVar({"border-style":t.borderStyle}));return(e,t)=>(I(),U(`div`,{class:J([z(n).b(),z(n).m(e.direction)]),style:Je(r.value),role:`separator`},[e.$slots.default&&e.direction!==`vertical`?(I(),U(`div`,{key:0,class:J([z(n).e(`text`),z(n).is(e.contentPosition)])},[G(e.$slots,`default`)],2)):H(`v-if`,!0)],6))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue`]])),gl=E(f(W({name:`ElText`,__name:`text`,props:k({type:{type:String,values:[`primary`,`success`,`info`,`warning`,`danger`,``],default:``},size:{type:String,values:D,default:``},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:`span`}}),setup(e){let t=e,n=R(),r=m(),i=P(`text`),a=V(()=>[i.b(),i.m(t.type),i.m(r.value),i.is(`truncated`,t.truncated),i.is(`line-clamp`,!M(t.lineClamp))]),o=()=>{var e,r;if(Pe().title)return;let i=!1,a=n.value?.textContent||``;if(t.truncated){let e=n.value?.offsetWidth,t=n.value?.scrollWidth;e&&t&&t>e&&(i=!0)}else if(!M(t.lineClamp)){let e=n.value?.offsetHeight,t=n.value?.scrollHeight;e&&t&&t>e&&(i=!0)}i?(e=n.value)==null||e.setAttribute(`title`,a):(r=n.value)==null||r.removeAttribute(`title`)};return ke(o),Re(o),(e,t)=>(I(),Y(Qe(e.tag),{ref_key:`textRef`,ref:n,class:J(a.value),style:Je({"-webkit-line-clamp":e.lineClamp})},{default:B(()=>[G(e.$slots,`default`)]),_:3},8,[`class`,`style`]))}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue`]])),_l=`$treeNodeId`,vl=function(e,t){!t||t.$treeNodeId||Object.defineProperty(t,_l,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},yl=(e,t)=>t?.[e||`$treeNodeId`],bl=(e,t,n)=>{let r=e.value.currentNode;n();let i=e.value.currentNode;r!==i&&t(`current-change`,i?i.data:null,i)},xl=e=>{let t=!0,n=!0,r=!0,i=!0;for(let a=0,o=e.length;a<o;a++){let o=e[a];(o.checked!==!0||o.indeterminate)&&(t=!1,o.disabled||(r=!1)),(o.checked!==!1||o.indeterminate)&&(n=!1),o.isEffectivelyChecked||(i=!1)}return{all:t,none:n,allWithoutDisable:r,half:!t&&!n,isEffectivelyChecked:i}},Sl=function(e){if(e.childNodes.length===0||e.loading){e.isEffectivelyChecked=e.disabled||e.checked;return}let{all:t,none:n,half:r,isEffectivelyChecked:i}=xl(e.childNodes);e.isEffectivelyChecked=i,t?(e.checked=!0,e.indeterminate=!1):r?(e.checked=!1,e.indeterminate=!0):n&&(e.checked=!1,e.indeterminate=!1);let a=e.parent;!a||a.level===0||e.store.checkStrictly||Sl(a)},Cl=function(e,t){let n=e.store.props,r=e.data||{},i=n[t];if(Ze(i))return i(r,e);if(nt(i))return r[i];if(M(i)){let e=r[t];return M(e)?``:e}},wl=function(e,t){e.forEach(e=>{e.canFocus=t,wl(e.childNodes,t)})},Tl=0,El=class e{constructor(e){for(let t in this.isLeafByUser=void 0,this.isLeaf=void 0,this.isEffectivelyChecked=!1,this.id=Tl++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1,e)st(e,t)&&(this[t]=e[t]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){let e=this.store;if(!e)throw Error(`[Node]store is required!`);e.registerNode(this);let t=e.props;if(t&&t.isLeaf!==void 0){let e=Cl(this,`isLeaf`);j(e)&&(this.isLeafByUser=e)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&!this.isLeafByUser&&this.expand(),it(this.data)||vl(this,this.data),!this.data)return;let n=e.defaultExpandedKeys,r=e.key;r&&!ue(this.key)&&n&&n.includes(this.key)&&this.expand(null,e.autoExpandParent),r&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode&&(e.currentNode.isCurrent=!1),e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),(this.level===1||this.parent?.expanded===!0)&&(this.canFocus=!0)}setData(e){it(e)||vl(this,e),this.data=e,this.childNodes=[];let t;t=this.level===0&&it(this.data)?this.data:Cl(this,`children`)||[];for(let e=0,n=t.length;e<n;e++)this.insertChild({data:t[e]})}get label(){return Cl(this,`label`)}get key(){let e=this.store.key;return this.data?this.data[e]:null}get disabled(){return Cl(this,`disabled`)}get nextSibling(){let e=this.parent;if(e){let t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}get previousSibling(){let e=this.parent;if(e){let t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}contains(e,t=!0){return(this.childNodes||[]).some(n=>n===e||t&&n.contains(e))}remove(){let e=this.parent;e&&e.removeChild(this)}insertChild(t,n,r){if(!t)throw Error(`InsertChild error: child is required.`);if(!(t instanceof e)){if(!r){let e=this.getChildren(!0);e?.includes(t.data)||(M(n)||n<0?e?.push(t.data):e?.splice(n,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=Be(new e(t)),t instanceof e&&t.initialize()}t.level=this.level+1,M(n)||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()}insertBefore(e,t){let n;t&&(n=this.childNodes.indexOf(t)),this.insertChild(e,n)}insertAfter(e,t){let n;t&&(n=this.childNodes.indexOf(t),n!==-1&&(n+=1)),this.insertChild(e,n)}removeChild(e){let t=this.getChildren()||[],n=t.indexOf(e.data);n>-1&&t.splice(n,1);let r=this.childNodes.indexOf(e);r>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(r,1)),this.updateLeafState()}removeChildByData(e){let t=this.childNodes.find(t=>t.data===e);t&&this.removeChild(t)}expand(e,t){let n=()=>{if(t){let e=this.parent;for(;e&&e.level>0;)e.expanded=!0,e=e.parent}this.expanded=!0,e&&e(),wl(this.childNodes,!0)};this.shouldLoadData()?this.loadData(e=>{it(e)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Sl(this),n())}):n()}doCreateChildren(e,t={}){e.forEach(e=>{this.insertChild(Object.assign({data:e},t),void 0,!0)})}collapse(){this.expanded=!1,wl(this.childNodes,!1)}shouldLoadData(){return!!(this.store.lazy===!0&&this.store.load&&!this.loaded)}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&this.isLeafByUser!==void 0){this.isLeaf=this.isLeafByUser,this.isEffectivelyChecked=this.isLeaf&&this.disabled;return}let e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0,this.isEffectivelyChecked=this.isLeaf&&this.disabled;return}this.isLeaf=!1}setChecked(e,t,n,r){if(this.indeterminate=e===`half`,this.checked=e===!0,this.isEffectivelyChecked=!this.childNodes.length&&(this.disabled||this.checked),this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){let n=()=>{if(t){let n=this.childNodes;for(let i=0,a=n.length;i<a;i++){let a=n[i];r||=e!==!1;let o=a.disabled&&a.isLeaf?a.checked:r;a.setChecked(o,t,!0,r)}let{half:i,all:a,isEffectivelyChecked:o}=xl(n);a||(this.checked=a,this.indeterminate=i),this.isEffectivelyChecked=this.childNodes.length?o:this.disabled||this.checked}};if(this.shouldLoadData()){this.loadData(()=>{n(),Sl(this)},{checked:e!==!1});return}else n()}let i=this.parent;!i||i.level===0||n||Sl(i)}getChildren(e=!1){if(this.level===0)return this.data;let t=this.data;if(!t)return null;let n=this.store.props,r=`children`;return n&&(r=n.children||`children`),M(t[r])&&(t[r]=null),e&&!t[r]&&(t[r]=[]),t[r]}updateChildren(){let e=this.getChildren()||[],t=this.childNodes.map(e=>e.data),n={},r=[];e.forEach((e,i)=>{let a=e[_l];a&&t.some(e=>e?.$treeNodeId===a)?n[a]={index:i,data:e}:r.push({index:i,data:e})}),this.store.lazy||t.forEach(e=>{n[e?.$treeNodeId]||this.removeChildByData(e)}),r.forEach(({index:e,data:t})=>{this.insertChild({data:t},e)}),this.updateLeafState()}loadData(e,t={}){this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(t).length)?(this.loading=!0,this.store.load(this,n=>{this.childNodes=[],this.doCreateChildren(n,t),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,n)},()=>{this.loading=!1})):e&&e.call(this)}eachNode(e){let t=[this];for(;t.length;){let n=t.shift();t.unshift(...n.childNodes),e(n)}}reInitChecked(){this.store.checkStrictly||Sl(this)}},Dl=class{constructor(e){for(let t in this.lazy=!1,this.checkStrictly=!1,this.autoExpandParent=!1,this.defaultExpandAll=!1,this.checkDescendants=!1,this.currentNode=null,this.currentNodeKey=null,e)st(e,t)&&(this[t]=e[t]);this.nodesMap={}}initialize(){if(this.root=new El({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){let e=this.load;e(this.root,e=>{this.root.doCreateChildren(e),this._initDefaultCheckedNodes()},De)}else this._initDefaultCheckedNodes()}filter(e){let t=this.filterNodeMethod,n=this.lazy,r=async function(i){let a=i.root?i.root.childNodes:i.childNodes;for(let[n,i]of a.entries())i.visible=!!t?.call(i,e,i.data,i),n%80==0&&n>0&&await ct(),await r(i);if(!i.visible&&a.length){let e=!0;e=!a.some(e=>e.visible),i.root?i.root.visible=e===!1:i.visible=e===!1}e&&i.visible&&!i.isLeaf&&(!n||i.loaded)&&i.expand()};r(this)}setData(e){e===this.root.data?this.root.updateChildren():(this.nodesMap={},this.root.setData(e),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey))}getNode(e){if(e instanceof El)return e;let t=Ke(e)?yl(this.key,e):e;return this.nodesMap[t]||null}insertBefore(e,t){var n;let r=this.getNode(t);(n=r.parent)==null||n.insertBefore({data:e},r)}insertAfter(e,t){var n;let r=this.getNode(t);(n=r.parent)==null||n.insertAfter({data:e},r)}remove(e){let t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}append(e,t){let n=ye(t)?this.root:this.getNode(t);n&&n.insertChild({data:e})}_initDefaultCheckedNodes(){let e=this.defaultCheckedKeys||[],t=this.nodesMap;e.forEach(e=>{let n=t[e];n&&n.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){let t=this.defaultCheckedKeys||[];!ue(e.key)&&t.includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){let t=this.key;if(!(!e||!e.data))if(!t)this.nodesMap[e.id]=e;else{let t=e.key;ue(t)||(this.nodesMap[t]=e)}}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(e=>{this.deregisterNode(e)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,t=!1){let n=[],r=function(i){(i.root?i.root.childNodes:i.childNodes).forEach(i=>{(i.checked||t&&i.indeterminate)&&(!e||e&&i.isLeaf)&&n.push(i.data),r(i)})};return r(this),n}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(e=>(e||{})[this.key])}getHalfCheckedNodes(){let e=[],t=function(n){(n.root?n.root.childNodes:n.childNodes).forEach(n=>{n.indeterminate&&e.push(n.data),t(n)})};return t(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){let e=[],t=this.nodesMap;for(let n in t)st(t,n)&&e.push(t[n]);return e}updateChildren(e,t){let n=this.nodesMap[e];if(!n)return;let r=n.childNodes;for(let e=r.length-1;e>=0;e--){let t=r[e];this.remove(t.data)}for(let e=0,r=t.length;e<r;e++){let r=t[e];this.append(r,n.data)}}_setCheckedKeys(e,t=!1,n){let r=this._getAllNodes().sort((e,t)=>e.level-t.level),i=Object.create(null),a=Object.keys(n);r.forEach(e=>e.setChecked(!1,!1));let o=t=>{t.childNodes.forEach(t=>{i[t.data[e]]=!0,t.childNodes?.length&&o(t)})};for(let n=0,s=r.length;n<s;n++){let s=r[n],c=s.data[e].toString();if(!a.includes(c)){s.checked&&!i[c]&&s.setChecked(!1,!1);continue}if(s.childNodes.length&&o(s),s.isLeaf||this.checkStrictly){s.setChecked(!0,!1);continue}if(s.setChecked(!0,!0),t){s.setChecked(!1,!1);let e=function(t){t.childNodes.forEach(t=>{t.isLeaf||t.setChecked(!1,!1),e(t)})};e(s)}}}setCheckedNodes(e,t=!1){let n=this.key,r={};e.forEach(e=>{r[(e||{})[n]]=!0}),this._setCheckedKeys(n,t,r)}setCheckedKeys(e,t=!1){this.defaultCheckedKeys=e;let n=this.key,r={};e.forEach(e=>{r[e]=!0}),this._setCheckedKeys(n,t,r)}setDefaultExpandedKeys(e){e||=[],this.defaultExpandedKeys=e,e.forEach(e=>{let t=this.getNode(e);t&&t.expand(null,this.autoExpandParent)})}setChecked(e,t,n){let r=this.getNode(e);r&&r.setChecked(!!t,n)}getCurrentNode(){return this.currentNode}setCurrentNode(e){let t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,t=!0){var n;let r=e[this.key],i=this.nodesMap[r];this.setCurrentNode(i),t&&this.currentNode&&this.currentNode.level>1&&((n=this.currentNode.parent)==null||n.expand(null,!0))}setCurrentNodeKey(e,t=!0){var n;if(this.currentNodeKey=e,ye(e)){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}let r=this.getNode(e);r&&(this.setCurrentNode(r),t&&this.currentNode&&this.currentNode.level>1&&((n=this.currentNode.parent)==null||n.expand(null,!0)))}},Ol=`RootTree`,kl=`NodeInstance`,Al=`TreeNodeMap`,jl=f(W({name:`ElTreeNodeContent`,props:{node:{type:Object,required:!0},renderContent:Function},setup(e){let t=P(`tree`),n=X(kl),r=X(Ol);return()=>{let i=e.node,{data:a,store:o}=i;return e.renderContent?e.renderContent(We,{_self:n,node:i,data:a,store:o}):G(r.ctx.slots,`default`,{node:i,data:a},()=>[We(gl,{tag:`span`,truncated:!0,class:t.be(`node`,`label`)},()=>[i.label])])}}}),[[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node-content.vue`]]);function Ml(e){let t=X(Al,null),n={treeNodeExpand:t=>{var n;e.node!==t&&((n=e.node)==null||n.collapse())},children:new Set};return t&&t.children.add(n),Le(()=>{t&&t.children.delete(n),n=null}),Ae(Al,n),{broadcastExpanded:t=>{if(e.accordion)for(let e of n.children)e.treeNodeExpand(t)}}}var Nl=Symbol(`dragEvents`);function Pl({props:e,ctx:n,el$:r,dropIndicator$:i,store:a}){let o=P(`tree`),s=R({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return Ae(Nl,{treeNodeDragStart:({event:t,treeNode:r})=>{if(t.dataTransfer){if(Ze(e.allowDrag)&&!e.allowDrag(r.node))return t.preventDefault(),!1;t.dataTransfer.effectAllowed=`move`;try{t.dataTransfer.setData(`text/plain`,``)}catch{}s.value.draggingNode=r,n.emit(`node-drag-start`,r.node,t)}},treeNodeDragOver:({event:a,treeNode:c})=>{if(!a.dataTransfer)return;let l=c,u=s.value.dropNode;u&&u.node.id!==l.node.id&&w(u.$el,o.is(`drop-inner`));let d=s.value.draggingNode;if(!d||!l)return;let f=!0,p=!0,m=!0,h=!0;Ze(e.allowDrop)&&(f=e.allowDrop(d.node,l.node,`prev`),h=p=e.allowDrop(d.node,l.node,`inner`),m=e.allowDrop(d.node,l.node,`next`)),a.dataTransfer.dropEffect=p||f||m?`move`:`none`,(f||p||m)&&u?.node.id!==l.node.id&&(u&&n.emit(`node-drag-leave`,d.node,u.node,a),n.emit(`node-drag-enter`,d.node,l.node,a)),f||p||m?s.value.dropNode=l:s.value.dropNode=null,l.node.nextSibling===d.node&&(m=!1),l.node.previousSibling===d.node&&(f=!1),l.node.contains(d.node,!1)&&(p=!1),(d.node===l.node||d.node.contains(l.node))&&(f=!1,p=!1,m=!1);let g=l.$el,_=g.querySelector(`.${o.be(`node`,`content`)}`).getBoundingClientRect(),v=r.value.getBoundingClientRect(),y=r.value.scrollTop,b,x=f?p?.25:m?.45:1:-1/0,S=m?p?.75:f?.55:0:1/0,C=-9999,T=a.clientY-_.top;b=T<_.height*x?`before`:T>_.height*S?`after`:p?`inner`:`none`;let E=g.querySelector(`.${o.be(`node`,`expand-icon`)}`).getBoundingClientRect(),D=i.value;b===`before`?C=E.top-v.top+y:b===`after`&&(C=E.bottom-v.top+y),D.style.top=`${C}px`,D.style.left=`${E.right-v.left}px`,b===`inner`?t(g,o.is(`drop-inner`)):w(g,o.is(`drop-inner`)),s.value.showDropIndicator=b===`before`||b===`after`,s.value.allowDrop=s.value.showDropIndicator||h,s.value.dropType=b,n.emit(`node-drag-over`,d.node,l.node,a)},treeNodeDragEnd:e=>{var t,r;let{draggingNode:i,dropType:c,dropNode:l}=s.value;if(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=`move`),i?.node.data&&l){let s={data:i.node.data};c!==`none`&&i.node.remove(),c===`before`?(t=l.node.parent)==null||t.insertBefore(s,l.node):c===`after`?(r=l.node.parent)==null||r.insertAfter(s,l.node):c===`inner`&&l.node.insertChild(s),c!==`none`&&(a.value.registerNode(s),a.value.key&&i.node.eachNode(e=>{var t;(t=a.value.nodesMap[e.data[a.value.key]])==null||t.setChecked(e.checked,!a.value.checkStrictly)})),w(l.$el,o.is(`drop-inner`)),n.emit(`node-drag-end`,i.node,l.node,c,e),c!==`none`&&n.emit(`node-drop`,i.node,l.node,c,e)}i&&!l&&n.emit(`node-drag-end`,i.node,null,c,e),s.value.showDropIndicator=!1,s.value.draggingNode=null,s.value.dropNode=null,s.value.allowDrop=!0}}),{dragState:s}}var Fl=W({name:`ElTreeNode`,components:{ElCollapseTransition:ml,ElCheckbox:pl,NodeContent:jl,ElIcon:hc,Loading:bc},props:{node:{type:El,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:Boolean},emits:[`node-expand`],setup(t,n){let r=P(`tree`),{broadcastExpanded:i}=Ml(t),a=X(Ol),o=R(!1),s=R(!1),c=R(),l=R(),u=R(),d=X(Nl),f=Ye();Ae(kl,f),a||e(`Tree`,`Can not find node's tree.`),t.node.expanded&&(o.value=!0,s.value=!0);let p=a.props.props.children||`children`;L(()=>{let e=t.node.data?.[p];return e&&[...e]},()=>{t.node.updateChildren()}),L(()=>t.node.indeterminate,e=>{g(t.node.checked,e)}),L(()=>t.node.checked,e=>{g(e,t.node.indeterminate)}),L(()=>t.node.childNodes.length,()=>t.node.reInitChecked()),L(()=>t.node.expanded,e=>{ct(()=>o.value=e),e&&(s.value=!0)});let m=e=>yl(a.props.nodeKey,e.data),h=e=>{let n=t.props.class;if(!n)return{};let r;if(Ze(n)){let{data:t}=e;r=n(t,e)}else r=n;return nt(r)?{[r]:!0}:r},g=(e,n)=>{(c.value!==e||l.value!==n)&&a.ctx.emit(`check-change`,t.node.data,e,n),c.value=e,l.value=n},_=e=>{bl(a.store,a.ctx.emit,()=>{if(a?.props?.nodeKey){let e=m(t.node);a.store.value.setCurrentNodeKey(e)}else a.store.value.setCurrentNode(t.node)}),a.currentNode.value=t.node,a.props.expandOnClickNode&&y(),(a.props.checkOnClickNode||t.node.isLeaf&&a.props.checkOnClickLeaf&&t.showCheckbox)&&!t.node.disabled&&b(!t.node.checked),a.ctx.emit(`node-click`,t.node.data,t.node,f,e)},v=e=>{a.instance.vnode.props?.onNodeContextmenu&&(e.stopPropagation(),e.preventDefault()),a.ctx.emit(`node-contextmenu`,e,t.node.data,t.node,f)},y=()=>{t.node.isLeaf||(o.value?(a.ctx.emit(`node-collapse`,t.node.data,t.node,f),t.node.collapse()):t.node.expand(()=>{n.emit(`node-expand`,t.node.data,t.node,f)}))},b=e=>{let n=a?.props.checkStrictly,r=t.node.childNodes;!n&&r.length&&(e=r.some(e=>!e.isEffectivelyChecked)),t.node.setChecked(e,!n),ct(()=>{let e=a.store.value;a.ctx.emit(`check`,t.node.data,{checkedNodes:e.getCheckedNodes(),checkedKeys:e.getCheckedKeys(),halfCheckedNodes:e.getHalfCheckedNodes(),halfCheckedKeys:e.getHalfCheckedKeys()})})};return{ns:r,node$:u,tree:a,expanded:o,childNodeRendered:s,oldChecked:c,oldIndeterminate:l,getNodeKey:m,getNodeClass:h,handleSelectChange:g,handleClick:_,handleContextMenu:v,handleExpandIconClick:y,handleCheckChange:b,handleChildNodeExpand:(e,t,n)=>{i(t),a.ctx.emit(`node-expand`,e,t,n)},handleDragStart:e=>{a.props.draggable&&d.treeNodeDragStart({event:e,treeNode:t})},handleDragOver:e=>{e.preventDefault(),a.props.draggable&&d.treeNodeDragOver({event:e,treeNode:{$el:u.value,node:t.node}})},handleDrop:e=>{e.preventDefault()},handleDragEnd:e=>{a.props.draggable&&d.treeNodeDragEnd(e)},CaretRight:gc}}}),Il=[`aria-expanded`,`aria-disabled`,`aria-checked`,`draggable`,`data-key`],Ll=[`aria-expanded`];function Rl(e,t,n,r,i,a){let o=Oe(`el-icon`),s=Oe(`el-checkbox`),c=Oe(`loading`),l=Oe(`node-content`),u=Oe(`el-tree-node`),d=Oe(`el-collapse-transition`);return lt((I(),U(`div`,{ref:`node$`,class:J([e.ns.b(`node`),e.ns.is(`expanded`,e.expanded),e.ns.is(`current`,e.node.isCurrent),e.ns.is(`hidden`,!e.node.visible),e.ns.is(`focusable`,!e.node.disabled),e.ns.is(`checked`,!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:`treeitem`,tabindex:`-1`,"aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:t[2]||=q((...t)=>e.handleClick&&e.handleClick(...t),[`stop`]),onContextmenu:t[3]||=(...t)=>e.handleContextMenu&&e.handleContextMenu(...t),onDragstart:t[4]||=q((...t)=>e.handleDragStart&&e.handleDragStart(...t),[`stop`]),onDragover:t[5]||=q((...t)=>e.handleDragOver&&e.handleDragOver(...t),[`stop`]),onDragend:t[6]||=q((...t)=>e.handleDragEnd&&e.handleDragEnd(...t),[`stop`]),onDrop:t[7]||=q((...t)=>e.handleDrop&&e.handleDrop(...t),[`stop`])},[K(`div`,{class:J(e.ns.be(`node`,`content`)),style:Je({paddingLeft:(e.node.level-1)*e.tree.props.indent+`px`})},[e.tree.props.icon||e.CaretRight?(I(),Y(o,{key:0,class:J([e.ns.be(`node`,`expand-icon`),e.ns.is(`leaf`,e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:q(e.handleExpandIconClick,[`stop`])},{default:B(()=>[(I(),Y(Qe(e.tree.props.icon||e.CaretRight)))]),_:1},8,[`class`,`onClick`])):H(`v-if`,!0),e.showCheckbox?(I(),Y(s,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:t[0]||=q(()=>{},[`stop`]),onChange:e.handleCheckChange},null,8,[`model-value`,`indeterminate`,`disabled`,`onChange`])):H(`v-if`,!0),e.node.loading?(I(),Y(o,{key:2,class:J([e.ns.be(`node`,`loading-icon`),e.ns.is(`loading`)])},{default:B(()=>[et(c)]),_:1},8,[`class`])):H(`v-if`,!0),et(l,{node:e.node,"render-content":e.renderContent},null,8,[`node`,`render-content`])],6),et(d,null,{default:B(()=>[!e.renderAfterExpand||e.childNodeRendered?lt((I(),U(`div`,{key:0,class:J(e.ns.be(`node`,`children`)),role:`group`,"aria-expanded":e.expanded,onClick:t[1]||=q(()=>{},[`stop`])},[(I(!0),U(at,null,Fe(e.node.childNodes,t=>(I(),Y(u,{key:e.getNodeKey(t),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:t,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,[`render-content`,`render-after-expand`,`show-checkbox`,`node`,`accordion`,`props`,`onNodeExpand`]))),128))],10,Ll)),[[Ge,e.expanded]]):H(`v-if`,!0)]),_:1})],42,Il)),[[Ge,e.node.visible]])}var zl=f(Fl,[[`render`,Rl],[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node.vue`]]);function Bl({el$:e},t){let n=P(`tree`);ke(()=>{i()}),Re(()=>{var t;(t=e.value)==null||t.querySelectorAll(`input[type=checkbox]`).forEach(e=>{e.setAttribute(`tabindex`,`-1`)})});function r(e,n){let r=t.value.getNode(e[n].dataset.key);return r.canFocus&&r.visible&&(r.parent?.expanded||r.parent?.level===0)}be(e,`keydown`,t=>{let i=t.target;if(!i.className.includes(n.b(`node`)))return;let a=Jc(t),o=Array.from(e.value.querySelectorAll(`.${n.is(`focusable`)}[role=treeitem]`)),s=o.indexOf(i),c;if([qc.up,qc.down].includes(a)){if(t.preventDefault(),a===qc.up){c=s===-1?0:s===0?o.length-1:s-1;let e=c;for(;!r(o,c);){if(c--,c===e){c=-1;break}c<0&&(c=o.length-1)}}else{c=s===-1?0:s<o.length-1?s+1:0;let e=c;for(;!r(o,c);){if(c++,c===e){c=-1;break}c>=o.length&&(c=0)}}c!==-1&&o[c].focus()}[qc.left,qc.right].includes(a)&&(t.preventDefault(),i.click());let l=i.querySelector(`[type="checkbox"]`);[qc.enter,qc.numpadEnter,qc.space].includes(a)&&l&&(t.preventDefault(),l.click())});let i=()=>{var t;if(!e.value)return;let r=Array.from(e.value.querySelectorAll(`.${n.is(`focusable`)}[role=treeitem]`));Array.from(e.value.querySelectorAll(`input[type=checkbox]`)).forEach(e=>{e.setAttribute(`tabindex`,`-1`)});let i=e.value.querySelectorAll(`.${n.is(`checked`)}[role=treeitem]`);if(i.length){i[0].setAttribute(`tabindex`,`0`);return}(t=r[0])==null||t.setAttribute(`tabindex`,`0`)}}var Vl=k({data:{type:y(Array),default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:Boolean,autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:{type:Array},defaultExpandedKeys:{type:Array},currentNodeKey:{type:[String,Number]},renderContent:{type:y(Function)},showCheckbox:Boolean,draggable:Boolean,allowDrag:{type:y(Function)},allowDrop:{type:y(Function)},props:{type:Object,default:()=>({children:`children`,label:`label`,disabled:`disabled`})},lazy:Boolean,highlightCurrent:Boolean,load:{type:Function},filterNodeMethod:{type:Function},accordion:Boolean,indent:{type:Number,default:18},icon:{type:Sc}}),Hl=W({name:`ElTree`,components:{ElTreeNode:zl},props:Vl,emits:{"check-change":(e,t,n)=>e&&j(t)&&j(n),"current-change":(e,t)=>!0,"node-click":(e,t,n,r)=>e&&t&&r instanceof Event,"node-contextmenu":(e,t,n,r)=>e instanceof Event&&t&&n,"node-collapse":(e,t,n)=>e&&t,"node-expand":(e,t,n)=>e&&t,check:(e,t)=>e&&t,"node-drag-start":(e,t)=>e&&t,"node-drag-end":(e,t,n,r)=>e&&r,"node-drop":(e,t,n,r)=>e&&t&&r,"node-drag-leave":(e,t,n)=>e&&t&&n,"node-drag-enter":(e,t,n)=>e&&t&&n,"node-drag-over":(e,t,n)=>e&&t&&n},setup(e,t){let{t:n}=jt(),r=P(`tree`),i=R(new Dl({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));i.value.initialize();let a=R(i.value.root),o=R(null),s=R(null),c=R(null),{broadcastExpanded:l}=Ml(e),{dragState:u}=Pl({props:e,ctx:t,el$:s,dropIndicator$:c,store:i});Bl({el$:s},i);let d=Ye(),f=V(()=>{let e=d?.parent;for(;e;){if(e.type.name===`ElTreeSelect`)return!0;e=e.parent}return!1}),p=V(()=>{let{childNodes:e}=a.value;return(!e||e.length===0||e.every(({visible:e})=>!e))&&!f.value});L(()=>e.currentNodeKey,e=>{i.value.setCurrentNodeKey(e??null)}),L(()=>e.defaultCheckedKeys,(e,t)=>{ac(e,t)||i.value.setDefaultCheckedKey(e??[])}),L(()=>e.defaultExpandedKeys,e=>{i.value.setDefaultExpandedKeys(e??[])}),L(()=>e.data,e=>{i.value.setData(e)},{deep:!0}),L(()=>e.checkStrictly,e=>{i.value.checkStrictly=e});let m=t=>{if(!e.filterNodeMethod)throw Error(`[Tree] filterNodeMethod is required when filter`);i.value.filter(t)},h=t=>yl(e.nodeKey,t.data),g=t=>{if(!e.nodeKey)throw Error(`[Tree] nodeKey is required in ${t}`)},_=e=>{g(`getNodePath`);let t=i.value.getNode(e);if(!t)return[];let n=[t.data],r=t.parent;for(;r&&r!==a.value;)n.push(r.data),r=r.parent;return n.reverse()},v=(e,t)=>i.value.getCheckedNodes(e,t),y=e=>i.value.getCheckedKeys(e),b=()=>{let e=i.value.getCurrentNode();return e?e.data:null};return Ae(Ol,{ctx:t,props:e,store:i,root:a,currentNode:o,instance:d}),Ae(Ee,void 0),{ns:r,store:i,root:a,currentNode:o,dragState:u,el$:s,dropIndicator$:c,isEmpty:p,filter:m,getNodeKey:h,getNodePath:_,getCheckedNodes:v,getCheckedKeys:y,getCurrentNode:b,getCurrentKey:()=>{g(`getCurrentKey`);let t=b();return t?t[e.nodeKey]:null},setCheckedNodes:(e,t)=>{g(`setCheckedNodes`),i.value.setCheckedNodes(e,t)},setCheckedKeys:(e,t)=>{g(`setCheckedKeys`),i.value.setCheckedKeys(e,t)},setChecked:(e,t,n)=>{i.value.setChecked(e,t,n)},getHalfCheckedNodes:()=>i.value.getHalfCheckedNodes(),getHalfCheckedKeys:()=>i.value.getHalfCheckedKeys(),setCurrentNode:(e,n=!0)=>{g(`setCurrentNode`),bl(i,t.emit,()=>{l(e),i.value.setUserCurrentNode(e,n)})},setCurrentKey:(e=null,n=!0)=>{g(`setCurrentKey`),bl(i,t.emit,()=>{l(),i.value.setCurrentNodeKey(e,n)})},t:n,getNode:e=>i.value.getNode(e),remove:e=>{i.value.remove(e)},append:(e,t)=>{i.value.append(e,t)},insertBefore:(e,t)=>{i.value.insertBefore(e,t)},insertAfter:(e,t)=>{i.value.insertAfter(e,t)},handleNodeExpand:(e,n,r)=>{l(n),t.emit(`node-expand`,e,n,r)},updateKeyChildren:(e,t)=>{g(`updateKeyChild`),i.value.updateChildren(e,t)}}}});function Ul(e,t,n,r,i,a){let o=Oe(`el-tree-node`);return I(),U(`div`,{ref:`el$`,class:J([e.ns.b(),e.ns.is(`dragging`,!!e.dragState.draggingNode),e.ns.is(`drop-not-allow`,!e.dragState.allowDrop),e.ns.is(`drop-inner`,e.dragState.dropType===`inner`),{[e.ns.m(`highlight-current`)]:e.highlightCurrent}]),role:`tree`},[(I(!0),U(at,null,Fe(e.root.childNodes,t=>(I(),Y(o,{key:e.getNodeKey(t),node:t,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,[`node`,`props`,`accordion`,`render-after-expand`,`show-checkbox`,`render-content`,`onNodeExpand`]))),128)),e.isEmpty?(I(),U(`div`,{key:0,class:J(e.ns.e(`empty-block`))},[G(e.$slots,`empty`,{},()=>[K(`span`,{class:J(e.ns.e(`empty-text`))},$e(e.emptyText??e.t(`el.tree.emptyText`)),3)])],2)):H(`v-if`,!0),lt(K(`div`,{ref:`dropIndicator$`,class:J(e.ns.e(`drop-indicator`))},null,2),[[Ge,e.dragState.showDropIndicator]])],2)}var Wl=E(f(Hl,[[`render`,Ul],[`__file`,`/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree.vue`]])),Gl={viewBox:`0 0 1024 1024`,width:`1.2em`,height:`1.2em`};function Kl(e,t){return I(),U(`svg`,Gl,[...t[0]||=[K(`path`,{fill:`currentColor`,d:`M896 192H128v128h768zm0 256H384v128h512zm0 256H128v128h768zM320 384L128 512l192 128z`},null,-1)]])}var ql=je({name:`ep-fold`,render:Kl}),Jl={viewBox:`0 0 1024 1024`,width:`1.2em`,height:`1.2em`};function Yl(e,t){return I(),U(`svg`,Jl,[...t[0]||=[K(`path`,{fill:`currentColor`,d:`M128 192h768v128H128zm0 256h512v128H128zm0 256h768v128H128zm576-352l192 160l-192 128z`},null,-1)]])}var Xl=je({name:`ep-expand`,render:Yl}),Zl=class e extends te{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_=`geometry`,this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry==`function`){let t=e;this.setGeometry(t)}else{let t=e;this.setProperties(t)}}clone(){let t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());let n=this.getGeometry();n&&t.setGeometry(n.clone());let r=this.getStyle();return r&&t.setStyle(r),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&=(ie(this.geometryChangeKey_),null);let e=this.getGeometry();e&&(this.geometryChangeKey_=ge(e,v.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Ql(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function Ql(e){if(typeof e==`function`)return e;let t;return Array.isArray(e)?t=e:(zt(typeof e.getZIndex==`function`,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[e]),function(){return t}}var $l=Zl,eu=!1;function tu(e,t,n,r,i,a,o){let s=new XMLHttpRequest;s.open(`GET`,typeof e==`function`?e(n,r,i):e,!0),t.getType()==`arraybuffer`&&(s.responseType=`arraybuffer`),s.withCredentials=eu,s.onload=function(e){if(!s.status||s.status>=200&&s.status<300){let e=t.getType();try{let r;e==`text`||e==`json`?r=s.responseText:e==`xml`?r=s.responseXML||s.responseText:e==`arraybuffer`&&(r=s.response),r?a(t.readFeatures(r,{extent:n,featureProjection:i}),t.readProjection(r)):o()}catch{o()}}else o()},s.onerror=o,s.send()}function nu(e,t){return function(n,r,i,a,o){tu(e,t,n,r,i,(e,t)=>{this.addFeatures(e),a!==void 0&&a(e)},()=>{this.changed(),o!==void 0&&o()})}}function ru(e,t){return[[-1/0,-1/0,1/0,1/0]]}function iu(e,t,n,r){let i=[],a=xe();for(let o=0,s=n.length;o<s;++o){let s=n[o];a=de(e,t,s[0],r),i.push((a[0]+a[2])/2,(a[1]+a[3])/2),t=s[s.length-1]}return i}function au(e,t,n,r,i,a,s){let c,l,u=(n-t)/r;if(u===1)c=t;else if(u===2)c=t,l=i;else if(u!==0){let a=e[t],s=e[t+1],u=0,d=[0];for(let i=t+r;i<n;i+=r){let t=e[i],n=e[i+1];u+=Math.sqrt((t-a)*(t-a)+(n-s)*(n-s)),d.push(u),a=t,s=n}let f=i*u,p=o(d,f);p<0?(l=(f-d[-p-2])/(d[-p-1]-d[-p-2]),c=t+(-p-2)*r):c=t+p*r}s=s>1?s:2,a||=Array(s);for(let t=0;t<s;++t)a[t]=c===void 0?NaN:l===void 0?e[c+t]:Nt(e[c+t],e[c+r+t],l);return a}function ou(e,t,n,r){let i=e[t],a=e[t+1],o=0;for(let s=t+r;s<n;s+=r){let t=e[s],n=e[s+1];o+=Math.sqrt((t-i)*(t-i)+(n-a)*(n-a)),i=t,a=n}return o}var su=Pn(),cu=class e{constructor(e,t,n,r,i,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=i,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||=this.type_===`Point`?he(this.flatCoordinates_):de(this.flatCoordinates_,0,this.flatCoordinates_.length,2),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){let e=n(this.getExtent());this.flatInteriorPoints_=An(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){let e=Tt(this.flatCoordinates_,this.ends_),t=iu(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=Ct(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||=au(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];let e=this.flatCoordinates_,t=0,n=this.ends_;for(let r=0,i=n.length;r<i;++r){let i=n[r],a=au(e,t,i,2,.5);ce(this.flatMidpoints_,a),t=i}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=It(e);let t=e.getExtent(),n=e.getWorldExtent();if(t&&n){let e=a(n)/a(t);Tn(su,n[0],n[3],e,-e,0,0,0),ut(this.flatCoordinates_,0,this.flatCoordinates_.length,2,su,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new e(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=r((t,n)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);let r=this.simplifiedGeometry_.getFlatCoordinates(),i;switch(this.type_){case`LineString`:r.length=bt(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,r,0),i=[r.length];break;case`MultiLineString`:i=[],r.length=Rt(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,r,0,i);break;case`Polygon`:i=[],r.length=Ht(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),r,0,i);break;default:}return i&&(this.simplifiedGeometry_=new e(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}};cu.prototype.getFlatCoordinates=cu.prototype.getOrientedFlatCoordinates;var lu=cu,uu=class{constructor(e){this.rbush_=new xt(e),this.items_={}}insert(e,t){let n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[F(t)]=n}load(e,t){let n=Array(t.length);for(let r=0,i=t.length;r<i;r++){let i=e[r],a=t[r],o={minX:i[0],minY:i[1],maxX:i[2],maxY:i[3],value:a};n[r]=o,this.items_[F(a)]=o}this.rbush_.load(n)}remove(e){let t=F(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){let n=this.items_[F(t)];re([n.minX,n.minY,n.maxX,n.maxY],e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(e){let t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(e){return e.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let r=0,i=e.length;r<i;r++)if(n=t(e[r]),n)return n;return n}isEmpty(){return we(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){let t=this.rbush_.toJSON();return ne(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){for(let t in this.rbush_.load(e.rbush_.all()),e.items_)this.items_[t]=e.items_[t]}},du={ADDFEATURE:`addfeature`,CHANGEFEATURE:`changefeature`,CLEAR:`clear`,REMOVEFEATURE:`removefeature`,FEATURESLOADSTART:`featuresloadstart`,FEATURESLOADEND:`featuresloadend`,FEATURESLOADERROR:`featuresloaderror`},fu=class extends ee{constructor(e,t,n){super(e),this.feature=t,this.features=n}},pu=class extends cn{constructor(e){e||={},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:`ready`,wrapX:e.wrapX===void 0?!0:e.wrapX}),this.on,this.once,this.un,this.loader_=S,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader===void 0?this.url_!==void 0&&(zt(this.format_,"`format` must be set when `url` is set"),this.loader_=nu(this.url_,this.format_)):this.loader_=e.loader,this.strategy_=e.strategy===void 0?ru:e.strategy;let t=e.useSpatialIndex===void 0?!0:e.useSpatialIndex;this.featuresRtree_=t?new uu:null,this.loadedExtentsRtree_=new uu,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,r;Array.isArray(e.features)?r=e.features:e.features&&(n=e.features,r=n.getArray()),!t&&n===void 0&&(n=new Kt(r)),r!==void 0&&this.addFeaturesInternal(r),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){let t=F(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);let n=e.getGeometry();if(n){let t=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(t,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new fu(du.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof lu||(this.featureChangeKeys_[e]=[ge(t,v.CHANGE,this.handleFeatureChange_,this),ge(t,s.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){let e=String(t.getId());if(!(e in this.idIndex_))this.idIndex_[e]=t;else if(t instanceof lu){let r=this.idIndex_[e];r instanceof lu?Array.isArray(r)?r.push(t):this.idIndex_[e]=[r,t]:n=!1}else n=!1}return n&&(zt(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){let t=[],n=[],r=[];for(let t=0,r=e.length;t<r;t++){let r=e[t],i=F(r);this.addToIndex_(i,r)&&n.push(r)}for(let e=0,i=n.length;e<i;e++){let i=n[e],a=F(i);this.setupChangeEvents_(a,i);let o=i.getGeometry();if(o){let e=o.getExtent();t.push(e),r.push(i)}else this.nullGeometryFeatures_[a]=i}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(du.ADDFEATURE))for(let e=0,t=n.length;e<t;e++)this.dispatchEvent(new fu(du.ADDFEATURE,n[e]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(du.ADDFEATURE,function(n){t||=(t=!0,e.push(n.feature),!1)}),this.addEventListener(du.REMOVEFEATURE,function(n){t||=(t=!0,e.remove(n.feature),!1)}),e.addEventListener(Wt.ADD,e=>{t||=(t=!0,this.addFeature(e.element),!1)}),e.addEventListener(Wt.REMOVE,e=>{t||=(t=!0,this.removeFeature(e.element),!1)}),this.featuresCollection_=e}clear(e){if(e){for(let e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(ie);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(let e in this.featuresRtree_.forEach(e=>{this.removeFeatureInternal(e)}),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let t=new fu(du.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){let n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(n){let r=n.getGeometry();if(r instanceof lu||r.intersectsCoordinate(e))return t(n)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){let r=n.getGeometry();if(r instanceof lu||r.intersectsExtent(e)){let e=t(n);if(e)return e}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),we(this.nullGeometryFeatures_)||ce(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){let t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);let n=u(e,t);return[].concat(...n.map(e=>this.featuresRtree_.getInExtent(e)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){let n=e[0],r=e[1],i=null,a=[NaN,NaN],o=1/0,s=[-1/0,-1/0,1/0,1/0];return t||=Ce,this.featuresRtree_.forEachInExtent(s,function(e){if(t(e)){let t=e.getGeometry(),c=o;if(o=t instanceof lu?0:t.closestPointXY(n,r,a,o),o<c){i=e;let t=Math.sqrt(o);s[0]=n-t,s[1]=r-t,s[2]=n+t,s[3]=r+t}}}),i}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){let t=this.idIndex_[e.toString()];return t===void 0?null:t}getFeatureByUid(e){let t=this.uidIndex_[e];return t===void 0?null:t}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){let t=e.target,n=F(t),r=t.getGeometry();if(!r)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{let e=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(e,t)):this.featuresRtree_&&this.featuresRtree_.update(e,t)}let i=t.getId();if(i!==void 0){let e=i.toString();this.idIndex_[e]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[e]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new fu(du.CHANGEFEATURE,t))}hasFeature(e){let t=e.getId();return t===void 0?F(e)in this.uidIndex_:t in this.idIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&we(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){let r=this.loadedExtentsRtree_,i=this.strategy_(e,t,n);for(let e=0,a=i.length;e<a;++e){let a=i[e];r.forEachInExtent(a,function(e){return ve(e.extent,a)})||(++this.loadingExtentsCount_,this.dispatchEvent(new fu(du.FEATURESLOADSTART)),this.loader_.call(this,a,t,n,e=>{--this.loadingExtentsCount_,this.dispatchEvent(new fu(du.FEATURESLOADEND,void 0,e))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new fu(du.FEATURESLOADERROR))}),r.insert(a,{extent:a.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){let t=this.loadedExtentsRtree_,n=t.forEachInExtent(e,function(t){if(re(t.extent,e))return t});n&&t.remove(n)}removeFeatures(e){let t=!1;for(let n=0,r=e.length;n<r;++n)t=this.removeFeatureInternal(e[n])||t;t&&this.changed()}removeFeature(e){e&&this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){let t=F(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(ie),delete this.featureChangeKeys_[t];let n=e.getId();if(n!==void 0){let t=n.toString(),r=this.idIndex_[t];r===e?delete this.idIndex_[t]:Array.isArray(r)&&(r.splice(r.indexOf(e),1),r.length===1&&(this.idIndex_[t]=r[0]))}return delete this.uidIndex_[t],this.hasListener(du.REMOVEFEATURE)&&this.dispatchEvent(new fu(du.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(let t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){zt(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(nu(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}},mu=class{drawCustom(e,t,n,r,i){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}},hu=class extends mu{constructor(e,t,n,r,i,a,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=r,this.transformRotation_=r?Vt(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=i,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_=``,this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Pn()}drawImages_(e,t,n,r){if(!this.image_)return;let i=ut(e,t,n,r,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,s=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=s*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let e=0,t=i.length;e<t;e+=2){let t=i[e]-this.imageAnchorX_,n=i[e+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){let e=t+this.imageAnchorX_,r=n+this.imageAnchorY_;Tn(o,e,r,1,1,c,-e,-r),a.save(),a.transform.apply(a,o),a.translate(e,r),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,n,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=s)}drawText_(e,t,n,r){if(!this.textState_||this.text_===``)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let i=ut(e,t,n,r,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<n;t+=r){let e=i[t]+this.textOffsetX_,n=i[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(e-this.textOffsetX_,n-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,e,n),this.textFillState_&&a.fillText(this.text_,e,n))}}moveToLineTo_(e,t,n,r,i){let a=this.context_,o=ut(e,t,n,r,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let s=o.length;i&&(s-=2);for(let e=2;e<s;e+=2)a.lineTo(o[e],o[e+1]);return i&&a.closePath(),n}drawRings_(e,t,n,r){for(let i=0,a=n.length;i<a;++i)t=this.moveToLineTo_(e,t,n[i],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),h(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let t=Jt(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],r=t[3]-t[1],i=Math.sqrt(n*n+r*r),a=this.context_;a.beginPath(),a.arc(t[0],t[1],i,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==``&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case`Point`:this.drawPoint(e);break;case`LineString`:this.drawLineString(e);break;case`Polygon`:this.drawPolygon(e);break;case`MultiPoint`:this.drawMultiPoint(e);break;case`MultiLineString`:this.drawMultiLineString(e);break;case`MultiPolygon`:this.drawMultiPolygon(e);break;case`GeometryCollection`:this.drawGeometryCollection(e);break;case`Circle`:this.drawCircle(e);break;default:}}drawFeature(e,t){let n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){let t=e.getGeometriesArray();for(let e=0,n=t.length;e<n;++e)this.drawGeometry(t[e])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==``&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==``&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),h(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==``){let t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let t=e.getExtent();if(h(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let t=this.context_,n=e.getFlatCoordinates(),r=0,i=e.getEnds(),a=e.getStride();t.beginPath();for(let e=0,t=i.length;e<t;++e)r=this.moveToLineTo_(n,r,i[e],a,!1);t.stroke()}if(this.text_!==``){let t=e.getFlatMidpoints();this.drawText_(t,0,t.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),h(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==``){let t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),h(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let t=this.context_,n=e.getOrientedFlatCoordinates(),r=0,i=e.getEndss(),a=e.getStride();t.beginPath();for(let e=0,t=i.length;e<t;++e){let t=i[e];r=this.drawRings_(n,r,t,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==``){let t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){let t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){let t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),_(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){let t=this.context_,n=this.contextTextState_,r=e.textAlign?e.textAlign:Yt;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=r&&(n.textAlign=r,t.textAlign=r),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(e?this.fillState_={fillStyle:mt(e.getColor()||Fn)}:this.fillState_=null,!t)this.strokeState_=null;else{let e=t.getColor(),n=t.getLineCap(),r=t.getLineDash(),i=t.getLineDashOffset(),a=t.getLineJoin(),o=t.getWidth(),s=t.getMiterLimit(),c=r||Bn;this.strokeState_={lineCap:n===void 0?yn:n,lineDash:this.pixelRatio_===1?c:c.map(e=>e*this.pixelRatio_),lineDashOffset:(i||0)*this.pixelRatio_,lineJoin:a===void 0?ln:a,lineWidth:(o===void 0?1:o)*this.pixelRatio_,miterLimit:s===void 0?10:s,strokeStyle:mt(e||dn)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}let n=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),i=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*n,this.imageAnchorY_=r[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();let a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/n,a[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_=``;else{let t=e.getFill();t?this.textFillState_={fillStyle:mt(t.getColor()||Fn)}:this.textFillState_=null;let n=e.getStroke();if(!n)this.textStrokeState_=null;else{let e=n.getColor(),t=n.getLineCap(),r=n.getLineDash(),i=n.getLineDashOffset(),a=n.getLineJoin(),o=n.getWidth(),s=n.getMiterLimit();this.textStrokeState_={lineCap:t===void 0?yn:t,lineDash:r||Bn,lineDashOffset:i||0,lineJoin:a===void 0?ln:a,lineWidth:o===void 0?1:o,miterLimit:s===void 0?10:s,strokeStyle:mt(e||dn)}}let r=e.getFont(),i=e.getOffsetX(),a=e.getOffsetY(),o=e.getRotateWithView(),s=e.getRotation(),c=e.getScaleArray(),l=e.getText(),u=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:r===void 0?tn:r,textAlign:u===void 0?Yt:u,textBaseline:d===void 0?Hn:d},this.text_=l===void 0?``:Array.isArray(l)?l.reduce((e,t,n)=>e+=n%2?` `:t,``):l,this.textOffsetX_=i===void 0?0:this.pixelRatio_*i,this.textOffsetY_=a===void 0?0:this.pixelRatio_*a,this.textRotateWithView_=o===void 0?!1:o,this.textRotation_=s===void 0?0:s,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}},gu=.5,_u={Point:ku,LineString:Eu,Polygon:ju,MultiPoint:Au,MultiLineString:Du,MultiPolygon:Ou,GeometryCollection:Tu,Circle:xu};function vu(e,t){return parseInt(F(e),10)-parseInt(F(t),10)}function yu(e,t){let n=bu(e,t);return n*n}function bu(e,t){return gu*e/t}function xu(e,t,n,r,i){let a=n.getFill(),o=n.getStroke();if(a||o){let s=e.getBuilder(n.getZIndex(),`Circle`);s.setFillStrokeStyle(a,o),s.drawCircle(t,r,i)}let s=n.getText();if(s&&s.getText()){let i=e.getBuilder(n.getZIndex(),`Text`);i.setTextStyle(s),i.drawText(t,r)}}function Su(e,t,n,r,i,a,o,s){let c=[],l=n.getImage();if(l){let e=!0,t=l.getImageState();t==on.LOADED||t==on.ERROR?e=!1:t==on.IDLE&&l.load(),e&&c.push(l.ready())}let u=n.getFill();u&&u.loading()&&c.push(u.ready());let d=c.length>0;return d&&Promise.all(c).then(()=>i(null)),Cu(e,t,n,r,a,o,s),d}function Cu(e,t,n,r,i,a,o){let s=n.getGeometryFunction()(t);if(!s)return;let c=s.simplifyTransformed(r,i);if(n.getRenderer())wu(e,c,n,t,o);else{let r=_u[c.getType()];r(e,c,n,t,o,a)}}function wu(e,t,n,r,i){if(t.getType()==`GeometryCollection`){let a=t.getGeometries();for(let t=0,o=a.length;t<o;++t)wu(e,a[t],n,r,i);return}e.getBuilder(n.getZIndex(),`Default`).drawCustom(t,r,n.getRenderer(),n.getHitDetectionRenderer(),i)}function Tu(e,t,n,r,i,a){let o=t.getGeometriesArray(),s,c;for(s=0,c=o.length;s<c;++s){let t=_u[o[s].getType()];t(e,o[s],n,r,i,a)}}function Eu(e,t,n,r,i){let a=n.getStroke();if(a){let o=e.getBuilder(n.getZIndex(),`LineString`);o.setFillStrokeStyle(null,a),o.drawLineString(t,r,i)}let o=n.getText();if(o&&o.getText()){let a=e.getBuilder(n.getZIndex(),`Text`);a.setTextStyle(o),a.drawText(t,r,i)}}function Du(e,t,n,r,i){let a=n.getStroke();if(a){let o=e.getBuilder(n.getZIndex(),`LineString`);o.setFillStrokeStyle(null,a),o.drawMultiLineString(t,r,i)}let o=n.getText();if(o&&o.getText()){let a=e.getBuilder(n.getZIndex(),`Text`);a.setTextStyle(o),a.drawText(t,r,i)}}function Ou(e,t,n,r,i){let a=n.getFill(),o=n.getStroke();if(o||a){let s=e.getBuilder(n.getZIndex(),`Polygon`);s.setFillStrokeStyle(a,o),s.drawMultiPolygon(t,r,i)}let s=n.getText();if(s&&s.getText()){let a=e.getBuilder(n.getZIndex(),`Text`);a.setTextStyle(s),a.drawText(t,r,i)}}function ku(e,t,n,r,i,a){let o=n.getImage(),s=n.getText(),c=s&&s.getText(),l=a&&o&&c?{}:void 0;if(o){if(o.getImageState()!=on.LOADED)return;let a=e.getBuilder(n.getZIndex(),`Image`);a.setImageStyle(o,l),a.drawPoint(t,r,i)}if(c){let a=e.getBuilder(n.getZIndex(),`Text`);a.setTextStyle(s,l),a.drawText(t,r,i)}}function Au(e,t,n,r,i,a){let o=n.getImage(),s=o&&o.getOpacity()!==0,c=n.getText(),l=c&&c.getText(),u=a&&s&&l?{}:void 0;if(s){if(o.getImageState()!=on.LOADED)return;let a=e.getBuilder(n.getZIndex(),`Image`);a.setImageStyle(o,u),a.drawMultiPoint(t,r,i)}if(l){let a=e.getBuilder(n.getZIndex(),`Text`);a.setTextStyle(c,u),a.drawText(t,r,i)}}function ju(e,t,n,r,i){let a=n.getFill(),o=n.getStroke();if(a||o){let s=e.getBuilder(n.getZIndex(),`Polygon`);s.setFillStrokeStyle(a,o),s.drawPolygon(t,r,i)}let s=n.getText();if(s&&s.getText()){let a=e.getBuilder(n.getZIndex(),`Text`);a.setTextStyle(s),a.drawText(t,r,i)}}var Mu={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12};const Nu=[Mu.FILL],Pu=[Mu.STROKE],Fu=[Mu.BEGIN_PATH],Iu=[Mu.CLOSE_PATH];var $=Mu,Lu=class extends mu{constructor(e,t,n,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){let t=this.pixelRatio;return t==1?e:e.map(function(e){return e*t})}appendFlatPointCoordinates(e,t){let n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,i=this.coordinates,a=i.length;for(let o=0,s=e.length;o<s;o+=t)r[0]=e[o],r[1]=e[o+1],pe(n,r)&&(i[a++]=r[0],i[a++]=r[1]);return a}appendFlatLineCoordinates(e,t,n,r,i,a){let o=this.coordinates,s=o.length,c=this.getBufferedMaxExtent();a&&(t+=r);let l=e[t],u=e[t+1],d=this.tmpCoordinate_,f=!0,p,m,h;for(p=t+r;p<n;p+=r)d[0]=e[p],d[1]=e[p+1],h=le(c,d),h===m?h===b.INTERSECTING?(o[s++]=d[0],o[s++]=d[1],f=!1):f=!0:(f&&=(o[s++]=l,o[s++]=u,!1),o[s++]=d[0],o[s++]=d[1]),l=d[0],u=d[1],m=h;return(i&&f||p===t+r)&&(o[s++]=l,o[s++]=u),s}drawCustomCoordinates_(e,t,n,r,i){for(let a=0,o=n.length;a<o;++a){let o=n[a],s=this.appendFlatLineCoordinates(e,t,o,r,!1,!1);i.push(s),t=o}return t}drawCustom(e,t,n,r,i){this.beginGeometry(e,t,i);let a=e.getType(),o=e.getStride(),s=this.coordinates.length,c,l,u,d,f;switch(a){case`MultiPolygon`:c=e.getOrientedFlatCoordinates(),d=[];let t=e.getEndss();f=0;for(let e=0,n=t.length;e<n;++e){let n=[];f=this.drawCustomCoordinates_(c,f,t[e],o,n),d.push(n)}this.instructions.push([$.CUSTOM,s,d,e,n,Bt,i]),this.hitDetectionInstructions.push([$.CUSTOM,s,d,e,r||n,Bt,i]);break;case`Polygon`:case`MultiLineString`:u=[],c=a==`Polygon`?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(c,0,e.getEnds(),o,u),this.instructions.push([$.CUSTOM,s,u,e,n,pt,i]),this.hitDetectionInstructions.push([$.CUSTOM,s,u,e,r||n,pt,i]);break;case`LineString`:case`Circle`:c=e.getFlatCoordinates(),l=this.appendFlatLineCoordinates(c,0,c.length,o,!1,!1),this.instructions.push([$.CUSTOM,s,l,e,n,Xn,i]),this.hitDetectionInstructions.push([$.CUSTOM,s,l,e,r||n,Xn,i]);break;case`MultiPoint`:c=e.getFlatCoordinates(),l=this.appendFlatPointCoordinates(c,o),l>s&&(this.instructions.push([$.CUSTOM,s,l,e,n,Xn,i]),this.hitDetectionInstructions.push([$.CUSTOM,s,l,e,r||n,Xn,i]));break;case`Point`:c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),l=this.coordinates.length,this.instructions.push([$.CUSTOM,s,l,e,n,void 0,i]),this.hitDetectionInstructions.push([$.CUSTOM,s,l,e,r||n,void 0,i]);break;default:}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[$.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[$.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let e=this.hitDetectionInstructions;e.reverse();let t,n=e.length,r,i,a=-1;for(t=0;t<n;++t)r=e[t],i=r[0],i==$.END_GEOMETRY?a=t:i==$.BEGIN_GEOMETRY&&(r[2]=t,g(this.hitDetectionInstructions,a,t),a=-1)}fillStyleToState(e,t={}){if(e){let n=e.getColor();t.fillPatternScale=n&&typeof n==`object`&&`src`in n?this.pixelRatio:1,t.fillStyle=mt(n||Fn)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){t.strokeStyle=mt(e.getColor()||dn);let n=e.getLineCap();t.lineCap=n===void 0?yn:n;let r=e.getLineDash();t.lineDash=r?r.slice():Bn,t.lineDashOffset=e.getLineDashOffset()||0;let i=e.getLineJoin();t.lineJoin=i===void 0?ln:i;let a=e.getWidth();t.lineWidth=a===void 0?1:a;let o=e.getMiterLimit();t.miterLimit=o===void 0?10:o,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){let n=this.state;this.fillStyleToState(e,n),this.strokeStyleToState(t,n)}createFill(e){let t=e.fillStyle,n=[$.SET_FILL_STYLE,t];return typeof t!=`string`&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[$.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){let n=e.fillStyle;(typeof n!=`string`||e.currentFillStyle!=n)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){let n=e.strokeStyle,r=e.lineCap,i=e.lineDash,a=e.lineDashOffset,o=e.lineJoin,s=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=r||i!=e.currentLineDash&&!_(e.currentLineDash,i)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=s||e.currentMiterLimit!=c)&&(t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=r,e.currentLineDash=i,e.currentLineDashOffset=a,e.currentLineJoin=o,e.currentLineWidth=s,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let t=[$.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=ae(this.maxExtent),this.maxLineWidth>0)){let e=this.resolution*(this.maxLineWidth+1)/2;_e(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},Ru=class extends Lu{constructor(e,t,n,r){super(e,t,n,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!pe(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);let r=e.getFlatCoordinates(),i=e.getStride(),a=this.coordinates.length,o=this.appendFlatPointCoordinates(r,i);this.instructions.push([$.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([$.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);let r=e.getFlatCoordinates(),i=[];for(let t=0,n=r.length;t<n;t+=e.getStride())(!this.maxExtent||pe(this.maxExtent,r.slice(t,t+2)))&&i.push(r[t],r[t+1]);let a=this.coordinates.length,o=this.appendFlatPointCoordinates(i,2);this.instructions.push([$.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([$.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){let n=e.getAnchor(),r=e.getSize(),i=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=i[0],this.originY_=i[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},zu=class extends Lu{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinates_(e,t,n,r){let i=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,n,r,!1,!1),o=[$.MOVE_TO_LINE_TO,i,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),n}drawLineString(e,t,n){let r=this.state,i=r.strokeStyle,a=r.lineWidth;if(i===void 0||a===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([$.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Bn,0],Fu);let o=e.getFlatCoordinates(),s=e.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(Pu),this.endGeometry(t)}drawMultiLineString(e,t,n){let r=this.state,i=r.strokeStyle,a=r.lineWidth;if(i===void 0||a===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([$.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Bn,0],Fu);let o=e.getEnds(),s=e.getFlatCoordinates(),c=e.getStride(),l=0;for(let e=0,t=o.length;e<t;++e)l=this.drawFlatCoordinates_(s,l,o[e],c);this.hitDetectionInstructions.push(Pu),this.endGeometry(t)}finish(){let e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Pu),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Pu),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Fu)}},Bu=class extends Lu{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinatess_(e,t,n,r){let i=this.state,a=i.fillStyle!==void 0,o=i.strokeStyle!==void 0,s=n.length;this.instructions.push(Fu),this.hitDetectionInstructions.push(Fu);for(let i=0;i<s;++i){let a=n[i],s=this.coordinates.length,c=this.appendFlatLineCoordinates(e,t,a,r,!0,!o),l=[$.MOVE_TO_LINE_TO,s,c];this.instructions.push(l),this.hitDetectionInstructions.push(l),o&&(this.instructions.push(Iu),this.hitDetectionInstructions.push(Iu)),t=a}return a&&(this.instructions.push(Nu),this.hitDetectionInstructions.push(Nu)),o&&(this.instructions.push(Pu),this.hitDetectionInstructions.push(Pu)),t}drawCircle(e,t,n){let r=this.state,i=r.fillStyle,a=r.strokeStyle;if(i===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([$.SET_FILL_STYLE,Fn]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([$.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Bn,0]);let o=e.getFlatCoordinates(),s=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,s,!1,!1);let l=[$.CIRCLE,c];this.instructions.push(Fu,l),this.hitDetectionInstructions.push(Fu,l),r.fillStyle!==void 0&&(this.instructions.push(Nu),this.hitDetectionInstructions.push(Nu)),r.strokeStyle!==void 0&&(this.instructions.push(Pu),this.hitDetectionInstructions.push(Pu)),this.endGeometry(t)}drawPolygon(e,t,n){let r=this.state,i=r.fillStyle,a=r.strokeStyle;if(i===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([$.SET_FILL_STYLE,Fn]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([$.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Bn,0]);let o=e.getEnds(),s=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(s,0,o,c),this.endGeometry(t)}drawMultiPolygon(e,t,n){let r=this.state,i=r.fillStyle,a=r.strokeStyle;if(i===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([$.SET_FILL_STYLE,Fn]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([$.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Bn,0]);let o=e.getEndss(),s=e.getOrientedFlatCoordinates(),c=e.getStride(),l=0;for(let e=0,t=o.length;e<t;++e)l=this.drawFlatCoordinatess_(s,l,o[e],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let e=this.tolerance;if(e!==0){let t=this.coordinates;for(let n=0,r=t.length;n<r;++n)t[n]=vt(t[n],e)}return super.finish()}setFillStrokeStyles_(){let e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}};function Vu(e,t,n,r,i){let a=[],o=n,s=0,c=t.slice(n,2);for(;s<e&&o+i<r;){let[n,r]=c.slice(-2),l=t[o+i],u=t[o+i+1],d=Math.sqrt((l-n)*(l-n)+(u-r)*(u-r));if(s+=d,s>=e){let t=(e-s+d)/d,f=Nt(n,l,t),p=Nt(r,u,t);c.push(f,p),a.push(c),c=[f,p],s==e&&(o+=i),s=0}else if(s<e)c.push(t[o+i],t[o+i+1]),o+=i;else{let e=d-s,t=Nt(n,l,e/d),f=Nt(r,u,e/d);c.push(t,f),a.push(c),c=[t,f],s=0,o+=i}}return s>0&&a.push(c),a}function Hu(e,t,n,r,i){let a=n,o=n,s=0,c=0,l=n,u,d,f,p,m,h,g,_,v,y;for(d=n;d<r;d+=i){let n=t[d],r=t[d+1];m!==void 0&&(v=n-m,y=r-h,p=Math.sqrt(v*v+y*y),g!==void 0&&(c+=f,u=Math.acos((g*v+_*y)/(f*p)),u>e&&(c>s&&(s=c,a=l,o=d),c=0,l=d-i)),f=p,g=v,_=y),m=n,h=r}return c+=p,c>s?[l,d]:[a,o]}const Uu={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};var Wu={Circle:Bu,Default:Lu,Image:Ru,LineString:zu,Polygon:Bu,Text:class extends Lu{constructor(e,t,n,r){super(e,t,n,r),this.labels_=null,this.text_=``,this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Fn]={fillStyle:Fn},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_=``,this.fillKey_=``,this.strokeKey_=``,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){let e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){let r=this.textFillState_,i=this.textStrokeState_,a=this.textState_;if(this.text_===``||!a||!r&&!i)return;let o=this.coordinates,s=o.length,c=e.getType(),l=null,u=e.getStride();if(a.placement===`line`&&(c==`LineString`||c==`MultiLineString`||c==`Polygon`||c==`MultiPolygon`)){if(!h(this.maxExtent,e.getExtent()))return;let r;if(l=e.getFlatCoordinates(),c==`LineString`)r=[l.length];else if(c==`MultiLineString`)r=e.getEnds();else if(c==`Polygon`)r=e.getEnds().slice(0,1);else if(c==`MultiPolygon`){let t=e.getEndss();r=[];for(let e=0,n=t.length;e<n;++e)r.push(t[e][0])}this.beginGeometry(e,t,n);let i=a.repeat,d=i?void 0:a.textAlign,f=0;for(let e=0,t=r.length;e<t;++e){let t;t=i?Vu(i*this.resolution,l,f,r[e],u):[l.slice(f,r[e])];for(let n=0,i=t.length;n<i;++n){let i=t[n],c=0,l=i.length;if(d==null){let e=Hu(a.maxAngle,i,0,i.length,2);c=e[0],l=e[1]}for(let e=c;e<l;e+=u)o.push(i[e],i[e+1]);let p=o.length;f=r[e],this.drawChars_(s,p),s=p}}this.endGeometry(t)}else{let r=a.overflow?null:[];switch(c){case`Point`:case`MultiPoint`:l=e.getFlatCoordinates();break;case`LineString`:l=e.getFlatMidpoint();break;case`Circle`:l=e.getCenter();break;case`MultiLineString`:l=e.getFlatMidpoints(),u=2;break;case`Polygon`:l=e.getFlatInteriorPoint(),a.overflow||r.push(l[2]/this.resolution),u=3;break;case`MultiPolygon`:let t=e.getFlatInteriorPoints();l=[];for(let e=0,n=t.length;e<n;e+=3)a.overflow||r.push(t[e+2]/this.resolution),l.push(t[e],t[e+1]);if(l.length===0)return;u=2;break;default:}let i=this.appendFlatPointCoordinates(l,u);if(i===s)return;if(r&&(i-s)/2!==l.length/u){let e=s/2;r=r.filter((t,n)=>{let r=o[(e+n)*2]===l[n*u]&&o[(e+n)*2+1]===l[n*u+1];return r||--e,r})}this.saveTextStates_();let d=a.backgroundFill?this.createFill(this.fillStyleToState(a.backgroundFill)):null,f=a.backgroundStroke?this.createStroke(this.strokeStyleToState(a.backgroundStroke)):null;this.beginGeometry(e,t,n);let p=a.padding;if(p!=pn&&(a.scale[0]<0||a.scale[1]<0)){let e=a.padding[0],t=a.padding[1],n=a.padding[2],r=a.padding[3];a.scale[0]<0&&(t=-t,r=-r),a.scale[1]<0&&(e=-e,n=-n),p=[e,t,n,r]}let m=this.pixelRatio;this.instructions.push([$.DRAW_IMAGE,s,i,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,p==pn?pn:p.map(function(e){return e*m}),d,f,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,r]);let h=1/m,g=d?d.slice(0):null;g&&(g[1]=Fn),this.hitDetectionInstructions.push([$.DRAW_IMAGE,s,i,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[h,h],NaN,this.declutterMode_,this.declutterImageWithText_,p,g,f,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Fn:this.fillKey_,this.textOffsetX_,this.textOffsetY_,r]),this.endGeometry(t)}}saveTextStates_(){let e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));let i=this.textKey_;i in this.textStates||(this.textStates[i]={font:t.font,textAlign:t.textAlign||`center`,justify:t.justify,textBaseline:t.textBaseline||`middle`,scale:t.scale});let a=this.fillKey_;n&&(a in this.fillStates||(this.fillStates[a]={fillStyle:n.fillStyle}))}drawChars_(e,t){let n=this.textStrokeState_,r=this.textState_,i=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();let s=this.pixelRatio,c=Uu[r.textBaseline],l=this.textOffsetY_*s,u=this.text_,d=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([$.DRAW_CHARS,e,t,c,r.overflow,o,r.maxAngle,s,l,i,d*s,u,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([$.DRAW_CHARS,e,t,c,r.overflow,o&&Fn,r.maxAngle,s,l,i,d*s,u,a,1/s,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let n,r,i;if(!e)this.text_=``;else{let t=e.getFill();t?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=mt(t.getColor()||`#000`)):(r=null,this.textFillState_=r);let a=e.getStroke();if(!a)i=null,this.textStrokeState_=i;else{i=this.textStrokeState_,i||(i={},this.textStrokeState_=i);let e=a.getLineDash(),t=a.getLineDashOffset(),n=a.getWidth(),r=a.getMiterLimit();i.lineCap=a.getLineCap()||`round`,i.lineDash=e?e.slice():Bn,i.lineDashOffset=t===void 0?0:t,i.lineJoin=a.getLineJoin()||`round`,i.lineWidth=n===void 0?1:n,i.miterLimit=r===void 0?10:r,i.strokeStyle=mt(a.getColor()||`#000`)}n=this.textState_;let o=e.getFont()||`10px sans-serif`;Pt(o);let s=e.getScaleArray();n.overflow=e.getOverflow(),n.font=o,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||`middle`,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||pn,n.scale=s===void 0?[1,1]:s;let c=e.getOffsetX(),l=e.getOffsetY(),u=e.getRotateWithView(),d=e.getKeepUpright(),f=e.getRotation();this.text_=e.getText()||``,this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=l===void 0?0:l,this.textRotateWithView_=u===void 0?!1:u,this.textKeepUpright_=d===void 0?!0:d,this.textRotation_=f===void 0?0:f,this.strokeKey_=i?(typeof i.strokeStyle==`string`?i.strokeStyle:F(i.strokeStyle))+i.lineCap+i.lineDashOffset+`|`+i.lineWidth+i.lineJoin+i.miterLimit+`[`+i.lineDash.join()+`]`:``,this.textKey_=n.font+n.scale+(n.textAlign||`?`)+(n.repeat||`?`)+(n.justify||`?`)+(n.textBaseline||`?`),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle==`string`?r.fillStyle:`|`+F(r.fillStyle):``}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}},Gu=class{constructor(e,t,n,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}finish(){let e={};for(let t in this.buildersByZIndex_){e[t]=e[t]||{};let n=this.buildersByZIndex_[t];for(let r in n){let i=n[r].finish();e[t][r]=i}}return e}getBuilder(e,t){let n=e===void 0?`0`:e.toString(),r=this.buildersByZIndex_[n];r===void 0&&(r={},this.buildersByZIndex_[n]=r);let i=r[t];if(i===void 0){let e=Wu[t];i=new e(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=i}return i}};function Ku(e,t,n,r,i,a,o,s,c,l,u,d,f=!0){let p=e[t],m=e[t+1],h=0,g=0,_=0,v=0;function y(){h=p,g=m,t+=r,p=e[t],m=e[t+1],v+=_,_=Math.sqrt((p-h)*(p-h)+(m-g)*(m-g))}do y();while(t<n-r&&v+_<a);let b=_===0?0:(a-v)/_,x=Nt(h,p,b),S=Nt(g,m,b),C=t-r,w=v,T=a+s*c(l,i,u);for(;t<n-r&&v+_<T;)y();b=_===0?0:(T-v)/_;let E=Nt(h,p,b),D=Nt(g,m,b),O=!1;if(f)if(d){let e=[x,S,E,D];At(e,0,4,2,d,e,e),O=e[0]>e[2]}else O=x>E;let k=Math.PI,A=[],ee=C+r===t;t=C,_=0,v=w,p=e[t],m=e[t+1];let j;if(ee)return y(),j=Math.atan2(m-g,p-h),O&&(j+=j>0?-k:k),A[0]=[(E+x)/2,(D+S)/2,(T-a)/2,j,i],A;i=i.replace(/\n/g,` `);for(let e=0,d=i.length;e<d;){y();let f=Math.atan2(m-g,p-h);if(O&&(f+=f>0?-k:k),j!==void 0){let e=f-j;if(e+=e>k?-2*k:e<-k?2*k:0,Math.abs(e)>o)return null}j=f;let x=e,S=0;for(;e<d;++e){let o=O?d-e-1:e,f=s*c(l,i[o],u);if(t+r<n&&v+_<a+S+f/2)break;S+=f}if(e===x)continue;let C=O?i.substring(d-x,d-e):i.substring(x,e);b=_===0?0:(a+S/2-v)/_;let w=Nt(h,p,b),T=Nt(g,m,b);A.push([w,T,S/2,f,C]),a+=S}return A}var qu=xe(),Ju=[],Yu=[],Xu=[],Zu=[];function Qu(e){return e[3].declutterBox}var $u=RegExp(`[-----]`);function ed(e,t){return t===`start`?t=$u.test(e)?`right`:`left`:t===`end`&&(t=$u.test(e)?`left`:`right`),Uu[t]}function td(e,t,n){return n>0&&e.push(`
`,``),e.push(t,``),e}function nd(e,t,n){return n%2==0&&(e+=t),e}var rd=class{constructor(e,t,n,r,i){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Pn(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=i?new Et:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,r){let i=e+t+n+r;if(this.labels_[i])return this.labels_[i];let a=r?this.strokeStates[r]:null,o=n?this.fillStates[n]:null,s=this.textStates[t],c=this.pixelRatio,l=[s.scale[0]*c,s.scale[1]*c],u=s.justify?Uu[s.justify]:ed(Array.isArray(e)?e[0]:e,s.textAlign||`center`),d=r&&a.lineWidth?a.lineWidth:0,f=Array.isArray(e)?e:String(e).split(`
`).reduce(td,[]),{width:p,height:m,widths:h,heights:g,lineWidths:_}=$t(s,f),v=p+d,y=[],b=(v+2)*l[0],x=(m+d)*l[1],S={width:b<0?Math.floor(b):Math.ceil(b),height:x<0?Math.floor(x):Math.ceil(x),contextInstructions:y};(l[0]!=1||l[1]!=1)&&y.push(`scale`,l),r&&(y.push(`strokeStyle`,a.strokeStyle),y.push(`lineWidth`,d),y.push(`lineCap`,a.lineCap),y.push(`lineJoin`,a.lineJoin),y.push(`miterLimit`,a.miterLimit),y.push(`setLineDash`,[a.lineDash]),y.push(`lineDashOffset`,a.lineDashOffset)),n&&y.push(`fillStyle`,o.fillStyle),y.push(`textBaseline`,`middle`),y.push(`textAlign`,`center`);let C=.5-u,w=u*v+C*d,T=[],E=[],D=0,O=0,k=0,A=0,ee;for(let e=0,t=f.length;e<t;e+=2){let t=f[e];if(t===`
`){O+=D,D=0,w=u*v+C*d,++A;continue}let i=f[e+1]||s.font;i!==ee&&(r&&T.push(`font`,i),n&&E.push(`font`,i),ee=i),D=Math.max(D,g[k]);let a=[t,w+C*h[k]+u*(h[k]-_[A]),.5*(d+D)+O];w+=h[k],r&&T.push(`strokeText`,a),n&&E.push(`fillText`,a),++k}return Array.prototype.push.apply(y,T),Array.prototype.push.apply(y,E),this.labels_[i]=S,S}replayTextBackground_(e,t,n,r,i,a,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],e.fillStyle=a[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h){o*=d[0],s*=d[1];let g=n-o,_=r-s,v=i+c>e?e-c:i,y=a+l>t?t-l:a,b=p[3]+v*d[0]+p[1],x=p[0]+y*d[1]+p[2],S=g-p[3],C=_-p[0];(m||u!==0)&&(Ju[0]=S,Zu[0]=S,Ju[1]=C,Yu[1]=C,Yu[0]=S+b,Xu[0]=Yu[0],Xu[1]=C+x,Zu[1]=Xu[1]);let w;return u===0?ne(Math.min(S,S+b),Math.min(C,C+x),Math.max(S,S+b),Math.max(C,C+x),qu):(w=Tn(Pn(),n,r,1,1,u,-n,-r),zn(w,Ju),zn(w,Yu),zn(w,Xu),zn(w,Zu),ne(Math.min(Ju[0],Yu[0],Xu[0],Zu[0]),Math.min(Ju[1],Yu[1],Xu[1],Zu[1]),Math.max(Ju[0],Yu[0],Xu[0],Zu[0]),Math.max(Ju[1],Yu[1],Xu[1],Zu[1]),qu)),f&&(g=Math.round(g),_=Math.round(_)),{drawImageX:g,drawImageY:_,drawImageW:v,drawImageH:y,originX:c,originY:l,declutterBox:{minX:qu[0],minY:qu[1],maxX:qu[2],maxY:qu[3],value:h},canvasTransform:w,scale:d}}replayImageOrLabel_(e,t,n,r,i,a,o){let s=!!(a||o),c=r.declutterBox,l=o?o[2]*r.scale[0]/2:0;return c.minX-l<=t[0]&&c.maxX+l>=0&&c.minY-l<=t[1]&&c.maxY+l>=0&&(s&&this.replayTextBackground_(e,Ju,Yu,Xu,Zu,a,o),Jn(e,r.canvasTransform,i,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){let t=this.alignAndScaleFill_;if(t){let n=zn(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(n[0]%r,n[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,n,r){let i=this.textStates[t],a=this.createLabel(e,t,r,n),o=this.strokeStates[n],s=this.pixelRatio,c=ed(Array.isArray(e)?e[0]:e,i.textAlign||`center`),l=Uu[i.textBaseline||`middle`],u=o&&o.lineWidth?o.lineWidth:0;return{label:a,anchorX:c*(a.width/s-2*i.scale[0])+2*(.5-c)*u,anchorY:l*a.height/s+2*(.5-l)*u}}execute_(e,t,n,r,i,a,o,s){let c=this.zIndexContext_,l;this.pixelCoordinates_&&_(n,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||=[],l=ut(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),Dn(this.renderedTransform_,n));let u=0,d=r.length,f=0,p,m,g,v,y,b,x,S,C,w,T,E,D,O=0,k=0,A=this.coordinateCache_,ee=this.viewRotation_,j=Math.round(Math.atan2(-n[1],n[0])*0xe8d4a51000)/0xe8d4a51000,M={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ee},te=this.instructions!=r||this.overlaps?0:200,ne,re,N,ie;for(;u<d;){let n=r[u];switch(n[0]){case $.BEGIN_GEOMETRY:ne=n[1],ie=n[3],ne.getGeometry()?o!==void 0&&!h(o,ie.getExtent())?u=n[2]+1:++u:u=n[2],c&&(c.zIndex=n[4]);break;case $.BEGIN_PATH:O>te&&(this.fill_(e),O=0),k>te&&(e.stroke(),k=0),!O&&!k&&(e.beginPath(),y=NaN,b=NaN),++u;break;case $.CIRCLE:f=n[1];let r=l[f],d=l[f+1],_=l[f+2],ae=l[f+3],oe=_-r,se=ae-d,ce=Math.sqrt(oe*oe+se*se);e.moveTo(r+ce,d),e.arc(r,d,ce,0,2*Math.PI,!0),++u;break;case $.CLOSE_PATH:e.closePath(),++u;break;case $.CUSTOM:f=n[1],p=n[2];let le=n[3],ue=n[4],de=n[5];M.geometry=le,M.feature=ne,u in A||(A[u]=[]);let P=A[u];de?de(l,f,p,2,P):(P[0]=l[f],P[1]=l[f+1],P.length=2),c&&(c.zIndex=n[6]),ue(P,M),++u;break;case $.DRAW_IMAGE:f=n[1],p=n[2],C=n[3],m=n[4],g=n[5];let fe=n[6],pe=n[7],me=n[8],he=n[9],ge=n[10],_e=n[11],ve=n[12],ye=n[13];v=n[14]||`declutter`;let be=n[15];if(!C&&n.length>=20){w=n[19],T=n[20],E=n[21],D=n[22];let e=this.drawLabelWithPointPlacement_(w,T,E,D);C=e.label,n[3]=C;let t=n[23];m=(e.anchorX-t)*this.pixelRatio,n[4]=m;let r=n[24];g=(e.anchorY-r)*this.pixelRatio,n[5]=g,fe=C.height,n[6]=fe,ye=C.width,n[13]=ye}let xe;n.length>25&&(xe=n[25]);let Se,F,Ce;n.length>17?(Se=n[16],F=n[17],Ce=n[18]):(Se=pn,F=null,Ce=null),ge&&j?_e+=ee:!ge&&!j&&(_e-=ee);let we=0;for(;f<p;f+=2){if(xe&&xe[we++]<ye/this.pixelRatio)continue;let n=this.calculateImageOrLabelDimensions_(C.width,C.height,l[f],l[f+1],ye,fe,m,g,me,he,_e,ve,i,Se,!!F||!!Ce,ne),r=[e,t,C,n,pe,F,Ce];if(s){let e,t,i;if(be){let n=p-f;if(!be[n]){be[n]={args:r,declutterMode:v};continue}let a=be[n];e=a.args,t=a.declutterMode,delete be[n],i=Qu(e)}let a,o;if(e&&(t!==`declutter`||!s.collides(i))&&(a=!0),(v!==`declutter`||!s.collides(n.declutterBox))&&(o=!0),t===`declutter`&&v===`declutter`){let e=a&&o;a=e,o=e}a&&(t!==`none`&&s.insert(i),this.replayImageOrLabel_.apply(this,e)),o&&(v!==`none`&&s.insert(n.declutterBox),this.replayImageOrLabel_.apply(this,r))}else this.replayImageOrLabel_.apply(this,r)}++u;break;case $.DRAW_CHARS:let Te=n[1],Ee=n[2],De=n[3],Oe=n[4];D=n[5];let ke=n[6],Ae=n[7],I=n[8];E=n[9];let je=n[10];w=n[11],Array.isArray(w)&&(w=w.reduce(nd,``)),T=n[12];let L=[n[13],n[13]];v=n[14]||`declutter`;let Me=n[15],R=this.textStates[T],Ne=R.font,Pe=[R.scale[0]*Ae,R.scale[1]*Ae],Fe;Ne in this.widths_?Fe=this.widths_[Ne]:(Fe={},this.widths_[Ne]=Fe);let Ie=ou(l,Te,Ee,2),z=Math.abs(Pe[0])*Gn(Ne,w,Fe);if(Oe||z<=Ie){let n=this.textStates[T].textAlign,r=(Ie-z)*ed(w,n),i=Ku(l,Te,Ee,2,w,r,ke,Math.abs(Pe[0]),Gn,Ne,Fe,j?0:this.viewRotation_,Me);drawChars:if(i){let n=[],r,a,o,c,l;if(E)for(r=0,a=i.length;r<a;++r){l=i[r],o=l[4],c=this.createLabel(o,T,``,E),m=l[2]+(Pe[0]<0?-je:je),g=De*c.height+(.5-De)*2*je*Pe[1]/Pe[0]-I;let a=this.calculateImageOrLabelDimensions_(c.width,c.height,l[0],l[1],c.width,c.height,m,g,0,0,l[3],L,!1,pn,!1,ne);if(s&&v===`declutter`&&s.collides(a.declutterBox))break drawChars;n.push([e,t,c,a,1,null,null])}if(D)for(r=0,a=i.length;r<a;++r){l=i[r],o=l[4],c=this.createLabel(o,T,D,``),m=l[2],g=De*c.height-I;let a=this.calculateImageOrLabelDimensions_(c.width,c.height,l[0],l[1],c.width,c.height,m,g,0,0,l[3],L,!1,pn,!1,ne);if(s&&v===`declutter`&&s.collides(a.declutterBox))break drawChars;n.push([e,t,c,a,1,null,null])}s&&v!==`none`&&s.load(n.map(Qu));for(let e=0,t=n.length;e<t;++e)this.replayImageOrLabel_.apply(this,n[e])}}++u;break;case $.END_GEOMETRY:if(a!==void 0){ne=n[1];let e=a(ne,ie,v);if(e)return e}++u;break;case $.FILL:te?O++:this.fill_(e),++u;break;case $.MOVE_TO_LINE_TO:for(f=n[1],p=n[2],re=l[f],N=l[f+1],e.moveTo(re,N),y=re+.5|0,b=N+.5|0,f+=2;f<p;f+=2)re=l[f],N=l[f+1],x=re+.5|0,S=N+.5|0,(f==p-2||x!==y||S!==b)&&(e.lineTo(re,N),y=x,b=S);++u;break;case $.SET_FILL_STYLE:this.alignAndScaleFill_=n[2],O&&(this.fill_(e),O=0,k&&=(e.stroke(),0)),e.fillStyle=n[1],++u;break;case $.SET_STROKE_STYLE:k&&=(e.stroke(),0),this.setStrokeStyle_(e,n),++u;break;case $.STROKE:te?k++:e.stroke(),++u;break;default:++u;break}}O&&this.fill_(e),k&&e.stroke()}execute(e,t,n,r,i,a){this.viewRotation_=r,this.execute_(e,t,n,this.instructions,i,void 0,void 0,a)}executeHitDetection(e,t,n,r,i){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,i)}};const id=[`Polygon`,`Circle`,`LineString`,`Image`,`Text`,`Default`],ad=[`Image`,`Text`],od=id.filter(e=>!ad.includes(e));var sd=class{constructor(e,t,n,r,i,a,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Pn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(i,o)}clip(e,t){let n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(let n in e){let r=this.executorsByZIndex_[n];r===void 0&&(r={},this.executorsByZIndex_[n]=r);let i=e[n];for(let e in i){let n=i[e];r[e]=new rd(this.resolution_,this.pixelRatio_,this.overlaps_,n,t)}}}hasExecutors(e){for(let t in this.executorsByZIndex_){let n=this.executorsByZIndex_[t];for(let t=0,r=e.length;t<r;++t)if(e[t]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,r,i,a){r=Math.round(r);let o=r*2+1,s=Tn(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-n,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Te(o,o));let l=this.hitDetectionContext_;l.canvas.width!==o||l.canvas.height!==o?(l.canvas.width=o,l.canvas.height=o):c||l.clearRect(0,0,o,o);let u;this.renderBuffer_!==void 0&&(u=xe(),A(u,e),_e(u,t*(this.renderBuffer_+r),u));let d=ld(r),f;function p(e,t,n){let s=l.getImageData(0,0,o,o).data;for(let c=0,u=d.length;c<u;c++)if(s[d[c]]>0){if(!a||n===`none`||f!==`Image`&&f!==`Text`||a.includes(e)){let n=(d[c]-3)/4,a=r-n%o,s=r-(n/o|0),l=i(e,t,a*a+s*s);if(l)return l}l.clearRect(0,0,o,o);break}}let m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(C);let h,g,_,v,y;for(h=m.length-1;h>=0;--h){let e=m[h].toString();for(_=this.executorsByZIndex_[e],g=id.length-1;g>=0;--g)if(f=id[g],v=_[f],v!==void 0&&(y=v.executeHitDetection(l,s,n,p,u),y))return y}}getClipCoords(e){let t=this.maxExtent_;if(!t)return null;let n=t[0],r=t[1],i=t[2],a=t[3],o=[n,r,n,a,i,a,i,r];return ut(o,0,8,2,e,o),o}isEmpty(){return we(this.executorsByZIndex_)}execute(e,t,n,r,a,o,s){let c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(s?i:C),o||=id;let l=id.length;for(let i=0,u=c.length;i<u;++i){let u=c[i].toString(),d=this.executorsByZIndex_[u];for(let u=0,f=o.length;u<f;++u){let f=o[u],p=d[f];if(p!==void 0){let o=s===null?void 0:p.getZIndexContext(),u=o?o.getContext():e,d=this.maxExtent_&&f!==`Image`&&f!==`Text`;if(d&&(u.save(),this.clip(u,n)),!o||f===`Text`||f===`Image`?p.execute(u,t,n,r,a,s):o.pushFunction(e=>p.execute(e,t,n,r,a,s)),d&&u.restore(),o){o.offset();let e=c[i]*l+id.indexOf(f);this.deferredZIndexContexts_[e]||(this.deferredZIndexContexts_[e]=[]),this.deferredZIndexContexts_[e].push(o)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){let e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(C);for(let n=0,r=t.length;n<r;++n)e[t[n]].forEach(e=>{e.draw(this.renderedContext_),e.clear()}),e[t[n]].length=0}},cd={};function ld(e){if(cd[e]!==void 0)return cd[e];let t=e*2+1,n=e*e,r=Array(n+1);for(let i=0;i<=e;++i)for(let a=0;a<=e;++a){let o=i*i+a*a;if(o>n)break;let s=r[o];s||(s=[],r[o]=s),s.push(((e+i)*t+(e+a))*4+3),i>0&&s.push(((e-i)*t+(e+a))*4+3),a>0&&(s.push(((e+i)*t+(e-a))*4+3),i>0&&s.push(((e-i)*t+(e-a))*4+3))}let i=[];for(let e=0,t=r.length;e<t;++e)r[e]&&i.push(...r[e]);return cd[e]=i,i}var ud=sd;const dd=.5;function fd(e,t,n,r,i,a,o,s,c){let l=c?Ot(i,c):i,u=Te(e[0]*dd,e[1]*dd);u.imageSmoothingEnabled=!1;let d=u.canvas,f=new hu(u,dd,i,null,o,s,c?Lt(gt(),c):null),p=n.length,m=Math.floor((256*256*256-1)/p),g={};for(let e=1;e<=p;++e){let t=n[e-1],i=t.getStyleFunction()||r;if(!i)continue;let o=i(t,a);if(!o)continue;Array.isArray(o)||(o=[o]);let s=(e*m).toString(16).padStart(7,`#00000`);for(let e=0,n=o.length;e<n;++e){let n=o[e],r=n.getGeometryFunction()(t);if(!r||!h(l,r.getExtent()))continue;let i=n.clone(),a=i.getFill();a&&a.setColor(s);let c=i.getStroke();c&&(c.setColor(s),c.setLineDash(null)),i.setText(void 0);let u=n.getImage();if(u){let e=u.getImageSize();if(!e)continue;let t=Te(e[0],e[1],void 0,{alpha:!1}),n=t.canvas;t.fillStyle=s,t.fillRect(0,0,n.width,n.height),i.setImage(new Cn({img:n,anchor:u.getAnchor(),anchorXUnits:`pixels`,anchorYUnits:`pixels`,offset:u.getOrigin(),opacity:1,size:u.getSize(),scale:u.getScale(),rotation:u.getRotation(),rotateWithView:u.getRotateWithView()}))}let d=i.getZIndex()||0,f=g[d];f||(f={},g[d]=f,f.Polygon=[],f.Circle=[],f.LineString=[],f.Point=[]);let p=r.getType();if(p===`GeometryCollection`){let e=r.getGeometriesArrayRecursive();for(let t=0,n=e.length;t<n;++t){let n=e[t];f[n.getType().replace(`Multi`,``)].push(n,i)}}else f[p.replace(`Multi`,``)].push(r,i)}}let _=Object.keys(g).map(Number).sort(C);for(let e=0,n=_.length;e<n;++e){let n=g[_[e]];for(let e in n){let r=n[e];for(let e=0,n=r.length;e<n;e+=2){f.setStyle(r[e+1]);for(let n=0,i=t.length;n<i;++n)f.setTransform(t[n]),f.drawGeometry(r[e])}}}return u.getImageData(0,0,d.width,d.height)}function pd(e,t,n){let r=[];if(n){let i=Math.floor(Math.round(e[0])*dd),a=Math.floor(Math.round(e[1])*dd),o=(St(i,0,n.width-1)+St(a,0,n.height-1)*n.width)*4,s=n.data[o],c=n.data[o+1],l=n.data[o+2]+256*(c+256*s),u=Math.floor((256*256*256-1)/t.length);l&&l%u===0&&r.push(t[l/u-1])}return r}var md=class extends ft{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=xe(),this.wrappedRenderedExtent_=xe(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){let r=t.extent,i=t.viewState,o=i.center,s=i.resolution,c=i.projection,l=i.rotation,u=c.getExtent(),d=this.getLayer().getSource(),f=this.getLayer().getDeclutter(),p=t.pixelRatio,m=t.viewHints,h=!(m[_t.ANIMATING]||m[_t.INTERACTING]),g=this.context,_=Math.round(se(r)/s*p),v=Math.round(a(r)/s*p),y=d.getWrapX()&&c.canWrapX(),b=y?se(u):null,x=y?Math.ceil((r[2]-u[2])/b)+1:1,S=y?Math.floor((r[0]-u[0])/b):0;do{let r=this.getRenderTransform(o,s,0,p,_,v,S*b);t.declutter&&(r=r.slice(0)),e.execute(g,[g.canvas.width,g.canvas.height],r,l,h,n===void 0?id:n?ad:od,n?f&&t.declutter[f]:void 0)}while(++S<x)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Te(this.context.canvas.width,this.context.canvas.height,_n))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){let e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,c(this.context),_n.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){let n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;let r=e.viewState;this.prepareContainer(e,t);let i=this.context,a=this.replayGroup_,o=a&&!a.isEmpty();if(!o&&!(this.getLayer().hasListener(Dt.PRERENDER)||this.getLayer().hasListener(Dt.POSTRENDER)))return this.container;this.setDrawContext_(),this.preRender(i,e);let s=r.projection;if(this.clipped_=!1,o&&n.extent&&this.clipping){let t=qn(n.extent,s);o=h(t,e.extent),this.clipped_=o&&!ve(t,e.extent),this.clipped_&&this.clipUnrotated(i,e,t)}return o&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&i.restore(),this.postRender(i,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let e=this.frameState.size.slice(),t=this.renderedCenter_,n=this.renderedResolution_,r=this.renderedRotation_,i=this.renderedProjection_,a=this.wrappedRenderedExtent_,o=this.getLayer(),s=[],c=e[0]*dd,l=e[1]*dd;s.push(this.getRenderTransform(t,n,r,dd,c,l,0).slice());let u=o.getSource(),d=i.getExtent();if(u.getWrapX()&&i.canWrapX()&&!ve(d,a)){let e=a[0],i=se(d),o=0,u;for(;e<d[0];)--o,u=i*o,s.push(this.getRenderTransform(t,n,r,dd,c,l,u).slice()),e+=i;for(o=0,e=a[2];e>d[2];)++o,u=i*o,s.push(this.getRenderTransform(t,n,r,dd,c,l,u).slice()),e-=i}let f=gt();this.hitDetectionImageData_=fd(e,s,this.renderedFeatures_,o.getStyleFunction(),a,n,r,yu(n,this.renderedPixelRatio_),f?i:null)}t(pd(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,r,i){if(!this.replayGroup_)return;let a=t.viewState.resolution,o=t.viewState.rotation,s=this.getLayer(),c={},l=function(e,t,n){let a=F(e),o=c[a];if(o){if(o!==!0&&n<o.distanceSq){if(n===0)return c[a]=!0,i.splice(i.lastIndexOf(o),1),r(e,s,t);o.geometry=t,o.distanceSq=n}}else{if(n===0)return c[a]=!0,r(e,s,t);i.push(c[a]={feature:e,layer:s,geometry:t,distanceSq:n,callback:r})}},u=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,n,l,u?t.declutter?.[u]?.all().map(e=>e.value):null)}handleFontsChanged(){let e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){let t=this.getLayer(),n=t.getSource();if(!n)return!1;let r=e.viewHints[_t.ANIMATING],i=e.viewHints[_t.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!a&&r||!o&&i)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let s=e.extent,c=e.viewState,l=c.projection,u=c.resolution,d=e.pixelRatio,f=t.getRevision(),m=t.getRenderBuffer(),h=t.getRenderOrder();h===void 0&&(h=vu);let g=c.center.slice(),v=_e(s,m*u),y=v.slice(),b=[v.slice()],x=l.getExtent();if(n.getWrapX()&&l.canWrapX()&&!ve(x,e.extent)){let e=se(x),t=Math.max(se(v)/2,e);v[0]=x[0]-t,v[2]=x[2]+t,kt(g,l);let n=p(b[0],l);n[0]<x[0]&&n[2]<x[2]?b.push([n[0]+e,n[1],n[2]+e,n[3]]):n[0]>x[0]&&n[2]>x[2]&&b.push([n[0]-e,n[1],n[2]-e,n[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==f&&this.renderedRenderOrder_==h&&this.renderedFrameDeclutter_===!!e.declutter&&ve(this.wrappedRenderedExtent_,v))return _(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let S=new Gu(bu(u,d),v,u,d),C=gt(),w;if(C){for(let e=0,t=b.length;e<t;++e){let t=b[e],r=Ot(t,l);n.loadFeatures(r,vn(u,l),C)}w=Lt(C,l)}else for(let e=0,t=b.length;e<t;++e)n.loadFeatures(b[e],u,l);let T=yu(u,d),E=!0,D=(e,n)=>{let r,i=e.getStyleFunction()||t.getStyleFunction();if(i&&(r=i(e,u)),r){let t=this.renderFeature(e,T,r,S,w,this.getLayer().getDeclutter(),n);E&&=!t}},O=Ot(v,l),k=n.getFeaturesInExtent(O);h&&k.sort(h);for(let e=0,t=k.length;e<t;++e)D(k[e],e);this.renderedFeatures_=k,this.ready=E;let A=S.finish(),ee=new ud(v,u,d,n.getOverlaps(),A,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=u,this.renderedRevision_=f,this.renderedRenderOrder_=h,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=y,this.wrappedRenderedExtent_=v,this.renderedCenter_=g,this.renderedProjection_=l,this.renderedPixelRatio_=d,this.replayGroup_=ee,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,r,i,a,o){if(!n)return!1;let s=!1;if(Array.isArray(n))for(let c=0,l=n.length;c<l;++c)s=Su(r,e,n[c],t,this.boundHandleStyleImageChange_,i,a,o)||s;else s=Su(r,e,n,t,this.boundHandleStyleImageChange_,i,a,o);return s}},hd=class extends Ln{constructor(e){super(e)}createRenderer(){return new md(this)}};const gd={children:`children`,label:`label`},_d=[{id:1,label:`CGCS 2000`,code:4490,bounds:[73.62,16.7,134.77,53.56]},{id:2,label:`6`,children:[{id:4,label:``,children:[{id:8,label:`CGCS2000 / Gauss-Kruger zone 13`,code:4491,bounds:[73.62,35.42,78.01,41.07]},{id:9,label:`CGCS2000 / Gauss-Kruger zone 14`,code:4492,bounds:[77.98,29.16,84,47.23]},{id:10,label:`CGCS2000 / Gauss-Kruger zone 15`,code:4493,bounds:[84,27.32,90,49.18]},{id:11,label:`CGCS2000 / Gauss-Kruger zone 16`,code:4494,bounds:[90,27.71,96.01,47.9]},{id:12,label:`CGCS2000 / Gauss-Kruger zone 17`,code:4495,bounds:[96,21.13,102.01,43.18]},{id:13,label:`CGCS2000 / Gauss-Kruger zone 18`,code:4496,bounds:[102,17.75,108,42.47]},{id:14,label:`CGCS2000 / Gauss-Kruger zone 19`,code:4497,bounds:[108,16.7,114,45.11]},{id:15,label:`CGCS2000 / Gauss-Kruger zone 20`,code:4498,bounds:[114,19.02,120,51.52]},{id:16,label:`CGCS2000 / Gauss-Kruger zone 21`,code:4499,bounds:[120,24.64,126,53.56]},{id:17,label:`CGCS2000 / Gauss-Kruger zone 22`,code:4500,bounds:[126,29.7,132,52.79]},{id:18,label:`CGCS2000 / Gauss-Kruger zone 23`,code:4501,bounds:[132,45.02,134.77,48.4]}]},{id:5,label:``,children:[{id:19,label:`CGCS2000 / Gauss-Kruger CM 75E`,code:4502,bounds:[73.62,35.42,78.01,41.07]},{id:20,label:`CGCS2000 / Gauss-Kruger CM 81E`,code:4503,bounds:[77.98,29.16,84,47.23]},{id:21,label:`CGCS2000 / Gauss-Kruger CM 87E`,code:4504,bounds:[84,27.32,90,49.18]},{id:22,label:`CGCS2000 / Gauss-Kruger CM 93E`,code:4505,bounds:[90,27.71,96.01,47.9]},{id:23,label:`CGCS2000 / Gauss-Kruger CM 99E`,code:4506,bounds:[96,21.13,102.01,43.18]},{id:24,label:`CGCS2000 / Gauss-Kruger CM 105E`,code:4507,bounds:[102,17.75,108,42.47]},{id:25,label:`CGCS2000 / Gauss-Kruger CM 111E`,code:4508,bounds:[108,16.7,114,45.11]},{id:26,label:`CGCS2000 / Gauss-Kruger CM 117E`,code:4509,bounds:[114,19.02,120,51.52]},{id:27,label:`CGCS2000 / Gauss-Kruger CM 123E`,code:4510,bounds:[120,24.64,126,53.56]},{id:28,label:`CGCS2000 / Gauss-Kruger CM 129E`,code:4511,bounds:[126,29.7,132,52.79]},{id:29,label:`CGCS2000 / Gauss-Kruger CM 135E`,code:4512,bounds:[132,45.02,134.77,48.4]},{id:29,label:`CGCS2000 / Gauss-Kruger CM 135E`,code:4513,bounds:[132,45.02,134.77,48.4]}]}]},{id:3,label:`3`,children:[{id:6,label:``,children:[{id:30,label:`CGCS2000 / 3-degree Gauss-Kruger zone 25`,code:4513,bounds:[73.62,35.81,76.5,40.65]},{id:31,label:`CGCS2000 / 3-degree Gauss-Kruger zone 26`,code:4514,bounds:[76.5,31.03,79.5,41.83]},{id:32,label:`CGCS2000 / 3-degree Gauss-Kruger zone 27`,code:4515,bounds:[79.5,29.95,82.51,45.88]},{id:33,label:`CGCS2000 / 3-degree Gauss-Kruger zone 28`,code:4516,bounds:[82.5,28.26,85.5,47.23]},{id:34,label:`CGCS2000 / 3-degree Gauss-Kruger zone 29`,code:4517,bounds:[85.5,27.8,88.5,49.18]},{id:35,label:`CGCS2000 / 3-degree Gauss-Kruger zone 30`,code:4518,bounds:[88.49,27.32,91.51,48.42]},{id:36,label:`CGCS2000 / 3-degree Gauss-Kruger zone 31`,code:4519,bounds:[91.5,27.71,94.5,45.13]},{id:37,label:`CGCS2000 / 3-degree Gauss-Kruger zone 32`,code:4520,bounds:[94.5,28.23,97.51,44.5]},{id:38,label:`CGCS2000 / 3-degree Gauss-Kruger zone 33`,code:4521,bounds:[97.5,21.43,100.5,42.76]},{id:39,label:`CGCS2000 / 3-degree Gauss-Kruger zone 34`,code:4522,bounds:[100.5,21.13,103.5,42.69]},{id:40,label:`CGCS2000 / 3-degree Gauss-Kruger zone 35`,code:4523,bounds:[103.5,22.5,106.51,42.21]},{id:41,label:`CGCS2000 / 3-degree Gauss-Kruger zone 36`,code:4524,bounds:[106.5,18.19,109.51,42.47]},{id:42,label:`CGCS2000 / 3-degree Gauss-Kruger zone 37`,code:4525,bounds:[109.5,18.11,112.5,45.11]},{id:43,label:`CGCS2000 / 3-degree Gauss-Kruger zone 38`,code:4526,bounds:[112.5,21.52,115.5,45.45]},{id:44,label:`CGCS2000 / 3-degree Gauss-Kruger zone 39`,code:4527,bounds:[115.5,22.6,118.5,49.88]},{id:45,label:`CGCS2000 / 3-degree Gauss-Kruger zone 40`,code:4528,bounds:[118.5,24.43,121.5,53.33]},{id:46,label:`CGCS2000 / 3-degree Gauss-Kruger zone 41`,code:4529,bounds:[121.5,28.22,124.5,53.56]},{id:47,label:`CGCS2000 / 3-degree Gauss-Kruger zone 42`,code:4530,bounds:[124.5,40.19,127.5,53.2]},{id:48,label:`CGCS2000 / 3-degree Gauss-Kruger zone 43`,code:4531,bounds:[127.5,41.37,130.5,50.25]},{id:49,label:`CGCS2000 / 3-degree Gauss-Kruger zone 44`,code:4532,bounds:[130.5,42.42,133.5,48.88]},{id:50,label:`CGCS2000 / 3-degree Gauss-Kruger zone 45`,code:4533,bounds:[133.5,45.85,134.77,48.4]}]},{id:7,label:``,children:[{id:51,label:`CGCS2000 / 3-degree Gauss-Kruger CM 75E`,code:4534,bounds:[73.62,35.81,76.5,40.65]},{id:52,label:`CGCS2000 / 3-degree Gauss-Kruger CM 78E`,code:4535,bounds:[76.5,31.03,79.5,41.83]},{id:53,label:`CGCS2000 / 3-degree Gauss-Kruger CM 81E`,code:4536,bounds:[79.5,29.95,82.51,45.88]},{id:54,label:`CGCS2000 / 3-degree Gauss-Kruger CM 84E`,code:4537,bounds:[82.5,28.26,85.5,47.23]},{id:55,label:`CGCS2000 / 3-degree Gauss-Kruger CM 87E`,code:4538,bounds:[85.5,27.8,88.5,49.18]},{id:56,label:`CGCS2000 / 3-degree Gauss-Kruger CM 90E`,code:4539,bounds:[88.49,27.32,91.51,48.42]},{id:57,label:`CGCS2000 / 3-degree Gauss-Kruger CM 93E`,code:4540,bounds:[91.5,27.71,94.5,45.13]},{id:58,label:`CGCS2000 / 3-degree Gauss-Kruger CM 96E`,code:4541,bounds:[94.5,28.23,97.51,44.5]},{id:59,label:`CGCS2000 / 3-degree Gauss-Kruger CM 99E`,code:4542,bounds:[97.5,21.43,100.5,42.76]},{id:60,label:`CGCS2000 / 3-degree Gauss-Kruger CM 102E`,code:4543,bounds:[100.5,21.13,103.5,42.69]},{id:61,label:`CGCS2000 / 3-degree Gauss-Kruger CM 105E`,code:4544,bounds:[103.5,22.5,106.51,42.21]},{id:62,label:`CGCS2000 / 3-degree Gauss-Kruger CM 108E`,code:4545,bounds:[106.5,18.19,109.51,42.47]},{id:63,label:`CGCS2000 / 3-degree Gauss-Kruger CM 111E`,code:4546,bounds:[109.5,18.11,112.5,45.11]},{id:64,label:`CGCS2000 / 3-degree Gauss-Kruger CM 114E`,code:4547,bounds:[112.5,21.52,115.5,45.45]},{id:65,label:`CGCS2000 / 3-degree Gauss-Kruger CM 117E`,code:4548,bounds:[115.5,22.6,118.5,49.88]},{id:66,label:`CGCS2000 / 3-degree Gauss-Kruger CM 120E`,code:4549,bounds:[118.5,24.43,121.5,53.33]},{id:67,label:`CGCS2000 / 3-degree Gauss-Kruger CM 123E`,code:4550,bounds:[121.5,28.22,124.5,53.56]},{id:68,label:`CGCS2000 / 3-degree Gauss-Kruger CM 126E`,code:4551,bounds:[124.5,40.19,127.5,53.2]},{id:69,label:`CGCS2000 / 3-degree Gauss-Kruger CM 129E`,code:4552,bounds:[127.5,41.37,130.5,50.25]},{id:70,label:`CGCS2000 / 3-degree Gauss-Kruger CM 132E`,code:4553,bounds:[130.5,42.42,133.5,48.88]},{id:71,label:`CGCS2000 / 3-degree Gauss-Kruger CM 135E`,code:4554,bounds:[133.5,45.85,134.77,48.4]}]}]}];var vd={class:`projection-zones`},yd={class:`header`},bd={class:`tree`},xd={class:`custom-tree-node`},Sd=[`title`],Cd=ot({__name:`index`,emits:[`popup`],setup(e,{emit:t}){let n=X(`state`),r=X(`isMapCreated`),i=R(!1),a=null,o=null,s=new pu({wrapX:!1}),c=new hd({source:s,zIndex:99,style:new Mn({fill:new Zt({color:`rgba(255, 0, 0, 0.2)`}),stroke:new hn({color:`#ff0000`,width:2})}),properties:{name:`projection-zones`}}),l=R(``),u=R(),d=t;L(l,e=>{u.value?.filter(e)}),L(r,e=>{e&&(a=n.map,p())});let f=(e,t)=>e?t.label.includes(e):!0;function p(){a.addLayer(c)}function m(e){let{bounds:t}=He(e);if(t){let n=Mt(t);s.getFeatures().length===0?(o=new $l({geometry:n}),s.addFeature(o)):o.setGeometry(n),o.setProperties({...e}),a.getView().fit(n,{duration:300,padding:[100,200,100,600],callback:()=>d(`popup`,e)})}}function h(){i.value=!i.value}return(e,t)=>{let n=Xl,r=ql,a=hl,o=Kc,s=Wl;return I(),U(at,null,[et(tt,{name:`el-fade-in-linear`},{default:B(()=>[lt(K(`div`,{class:`projection-zones-fold`,onClick:h},[et(n)],512),[[Ge,z(i)]])]),_:1}),et(tt,{name:z(i)?`el-zoom-in-bottom`:`el-zoom-in-top`},{default:B(()=>[lt(K(`div`,vd,[K(`div`,yd,[t[1]||=K(`div`,{class:`title`},``,-1),K(`div`,{class:`fold`,onClick:h},[et(r)])]),et(a,{style:{margin:`10px 0`}}),et(o,{size:`small`,modelValue:z(l),"onUpdate:modelValue":t[0]||=e=>ze(l)?l.value=e:null,style:{margin:`6px 0 10px 0`},placeholder:``},null,8,[`modelValue`]),K(`div`,bd,[et(s,{ref_key:`treeRef`,ref:u,data:z(_d),"node-key":`id`,props:z(gd),"default-expanded-keys":[2,3,8],"filter-node-method":f,onNodeClick:m,"highlight-current":``},{default:B(({node:e,data:t})=>[K(`span`,xd,[K(`span`,{title:e.label},$e(e.label),9,Sd)])]),_:1},8,[`data`,`props`])])],512),[[Ge,!z(i)]])]),_:1},8,[`name`])],64)}}},[[`__scopeId`,`data-v-c4202ba0`]]);export{Cd as t};