import{q as e}from"./css-DG-mw9ml.js";import{A as t,S as n,X as r,Y as i,g as a,k as o,m as s,nt as c,t as l}from"./index-CmMvxZDK.js";import"./Vector-gmcrLG_B.js";import{t as u}from"./ProjectionZones-BVE36y4H.js";import{a as d,n as f}from"./common-CP2b2KR9.js";import{t as p}from"./AdministrativeDivisions-DESlwK8j.js";import"./vnode-Czfy8X6s.js";import{t as m}from"./OlPopup-KEqJQgup.js";import"./fold-DQBTixxA.js";import{t as h}from"./TdtMap-DUk5Wn6l.js";import"./LineString-DfL55NaI.js";import"./MapEventType-V8bC502L.js";import"./ZonesRender-Bt7BT8mv.js";var g={class:`wrap`},_=l({__name:`OneMap`,setup(l){let _=i(``),v=i([]),y=i([0,-10]),b=i([{key:`label`,val:`投影名称`,unit:null},{key:`code`,val:`EPSG`,unit:null},{key:`bounds`,val:`投影范围`,unit:null}]),x=i({}),S=i(null),C=null,w=i(!1),T=r({map:null});t(`state`,T),t(`isMapCreated`,w);function E(e){T.map=e,w.value=!0,C=d(e,`highlight`).getSource()}function D(e){let t=e.coordinate,n=T.map.forEachFeatureAtPixel(e.pixel,e=>e);if(n){if(t){f(C);let e=n.clone();e.setStyle(void 0),C.addFeature(e)}k(n.getProperties(),t)}}function O(e){k(e)}function k(t,n){Object.keys(t).includes(`bounds`)&&(x.value=t,_.value=t.label,v.value=n||e(t.bounds))}function A(){S.value?.close()}return(e,t)=>{let r=h,i=u,l=p,d=m;return o(),s(`div`,g,[a(r,{onMapCreated:E,onMapClick:D}),a(i,n(e.$attrs,{onPopup:O,onClosePopup:A}),null,16),a(l),a(d,{ref_key:`popup`,ref:S,title:c(_),position:c(v),offset:c(y),propeties:c(b),popupInfo:c(x)},null,8,[`title`,`position`,`offset`,`propeties`,`popupInfo`])])}}},[[`__scopeId`,`data-v-fe5cdb39`]]);export{_ as default};